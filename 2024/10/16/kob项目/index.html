<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>kob项目 |  小全</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-kob项目"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  kob项目
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/10/16/kob%E9%A1%B9%E7%9B%AE/" class="article-date">
  <time datetime="2024-10-16T05:41:10.000Z" itemprop="datePublished">2024-10-16</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">156.7k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">560 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="web-app-路线：-linux-django-web-（python）"><a href="#web-app-路线：-linux-django-web-（python）" class="headerlink" title="web app 路线： linux -&gt; django -&gt; web （python）"></a><code>web app</code> 路线： linux -&gt; django -&gt; web （python）</h1><h4 id="linux-课讲题中间yxc回答问题，有感而发"><a href="#linux-课讲题中间yxc回答问题，有感而发" class="headerlink" title="linux 课讲题中间yxc回答问题，有感而发"></a>linux 课讲题中间yxc回答问题，有感而发</h4><p>​	基本上三四个月的时间就<strong>可以具备自己开发各种项目</strong>的能力了，而且通过这条技术路线，大家如果学完这条技术路线的话啊！就比这就会<strong>比这个一般的掉包侠要强很多</strong>，就是你<strong>可以自己定制化</strong>很多的，你可以定制化<strong>很多的技术细节</strong>，就是，你<strong>可以自己开发</strong>你<strong>自己的想象力</strong>，<strong>去写很多的技术细节</strong>啊！<strong>否则的话</strong>开发网站就跟写 <code>ppt</code> 一样，对吧！没什么技术含量啊！然后容易被淘汰，<strong>这样的话</strong>这个线路学完之后，大家还是<strong>具备一些自主创新的能力</strong>的啊！会更好一些。</p>
<p>​	问：啊！学完之后能不能写一个博客，然后自己在阿里云，自己在阿里租一个服务器发布起来，啊！想做一个自己的博客世界</p>
<p>​	答：肯定是可以的，相当于大家学完学完学完这个高中之后，然后你再去做小学加减乘除一样啊！就是我们 <code>django</code> 课给大家讲完之后，啊！你不止可以做博客啊！博客的话，其实非常简单，对吧！博客基本属于 <code>web 2.0</code> 的东西，都是一些文本性的东西，对吧！啊！然后，<strong>文本展示性的东西</strong>，啊！然后，我们给大家讲的内容是，其实我认为应该属于 <code>web 3.0</code> 啦！就是 <code>web</code> 里面写一个 <code>app</code> ，他不光可以展示文本类的内容，啊！他其实可以具备很多逻辑在里边，啊！嗯！而且可以具备很多特别复杂的逻辑啊！只有在 <code>app</code> 和游戏里边才可以见到的逻辑，啊！那么大家学完这个，咱们 <code>django</code> 课之外，之后啊！你可以做，你可以把逻辑展示出来，那就更可以把文本展示出来，对吧！所以说做一自己的博客是完全没有问题的啊！你不光可以发明一个自己的博客啊！你甚至可以发明，发布一个自己的 <code>app</code> ，对吧！比如说这个这个可以在这里（<code>AcWing 应用中心</code>），发布一个 <code>app</code> ，对不对！？这个不 <code>low</code> 啊！但是肯定是可以实现的！杀鸡焉用宰牛刀，嗯！对！只展示内容的话，嗯！完全可以啊，完全可以啊！而且我们会在 <code>django</code> 课里给大家将大家讲怎么去部署，怎么去把 <code>dajngo</code> 的应用部署起来啊！嗯！部署完之后，大家，额嗯！这个后端都一样，对吧！你前端展示方式可以在很多地方展示，你比如说，你可以在网址里面展示，对吧！可以输入自己的 <code>IP</code> 地址，啊！然后，如果大家租完域名，之后，可以输入自己的域名，你就可以访问到自己的服务了，啊！然后也可以在咱们的这个应用里边展示出来，啊！就是同一份后端代码，前端可以在任意地方展示出来啊！都是一样的，啧嗯！啊嗯！不能说 <code>low</code> 啊！就是这个~杀鸡焉用宰牛刀啊！都是可以的啊！额嗯！吭！好，那么然后我们来看一下下一个作业</p>
<p>​	还是刚刚那个问题啊！就是不仅可以写自己的博客啊！其实你写博客也没有问题，对吧！啊！大家写完博客之后，额嗯！相当于是什么呢？这个学完 <code>django</code> 课之后，大家可以在自己的博客里上线一款游戏啊！纯纯用网页写的游戏，比如可以上线一个五子棋游戏，对吧！实现联机对战，对不对！？啊！啧嗯！相当于是嗯！你的记事本里可以打开一个这个红警，对吧，那么你的博客里也可以集成 <code>web 3.0</code> 的东西啊！当然这个 <code>web 3.0</code> 是我自己定义的啊！就大家不要跟这个网上搜到的 <code>web web 3.0</code> 画等号啊！就是我觉得这个未来的 <code>web</code> 的话是具备一定的逻辑功能的，而且是以逻辑为主，而不是以文本为主，啊！什么叫以逻辑为主啊！你看以文本为主的话就是以渲染 <code>html</code> 为主，对不对！？啊！以逻辑为主的话就是未来的这个网站里边绝大部分代码量在 <code>js</code> 身上，啧！嗯！对！举个例子，啊！比如大家可以发现，嗯！比如说这个，哎！你像我们的这个文件资源管理器就是拿纯前前端渲染的，对不对，他他他其实就是一个网页内部渲染的对不对！？啊！那么这个框框的话，大家可以发现他就不是文本为主了，他就是以逻辑为主，对吧！他不是说给你展现一篇文章，他是具备很强的逻辑的啊！你可以，哎！你可以进到一个文件夹里，对吧！啊！也可以选中，选中的话可以支持支持 <code>ctrl</code> 键多选，也可以支持 <code>shift</code> 键多选，对吧！？啊！可以支持剪切啊！可以支持复制！啊！那么这种就是强逻辑，对不对！？那么你如果能实现这种东西，那显然实现一个记事本就非常容易，对吧！啊！对！未来的话我觉得 <code>django</code> 一定是一个趋势啊！因为 <code>django</code> 的话会极大的提高大家的开发效率，啊！额嗯<del>，额嗯</del>，流行的技术一定是开发起来简单的技术，开发起来越简单越容易流行，啊！就相当于是 <code>c++</code> 开发了 <code>java</code> ，<code>java</code> 是 <code>c++</code> 开发的，对不对！？<code>java</code> 被开发出来之后，大家会发现 <code>java</code> 开发效率比 <code>c++</code> 高很多，啊！那么越来越多的人就会用 <code>java</code> ，然后现在的话，大家会发现 <code>python</code> 他开发效率比 <code>java</code> 还要快，啊！所以未来的话，可能会有越来越多的人用 <code>python</code> 啊！啧嗯！好！那么！然后我们来看下一个作业啊！下一个作业的话，是……？</p>
<h4 id="五子棋设计一个人机对战，机器对应的代码是怎么实现的"><a href="#五子棋设计一个人机对战，机器对应的代码是怎么实现的" class="headerlink" title="五子棋设计一个人机对战，机器对应的代码是怎么实现的"></a>五子棋设计一个人机对战，机器对应的代码是怎么实现的</h4><p>​	机器对应的代码可以用 <code>AI</code> 啊！可以写个爆搜，就可以了，一般的话，简单的话你可以写一个 <code>α</code>   <code>β</code> 剪枝对不对？等之后有时间的话我可咱们可以给大家做一个，出一个比赛啊！出一个这个游戏 <code>AI</code> 对抗赛，咱们这边可以给大家实现一个这种功能，对不对！？嗯！？就说大家这个我，咱们给大家提供一个 <code>thrift</code> 的接口，啊！然后，大家可以写 <code>AI</code> ，啊！然后，通过接口来交互，大家的 <code>AI</code> 可以通过接口来操控自己的选手，啊！然后两名玩家可以通过接口来操作自己的选手来下五子棋，啊！然后，前端的话可以一个 <code>APP</code> 展示出来，对吧！？啊！那么你在这个 <code>APP</code> 里边，只要写上自己的，提供的服务的，自己提供服务的 <code>IP</code> 地址，端口号，还有函数，额嗯，额嗯，<code>IP</code> 地址和端口号就可啦！那然后我们的这个<code>APP</code>的就可以在后端自动去调取两位，去调取你的你的这个后端提供的这个服务，采用的策略，就每一步下在内个位置上，啊！然后的话这样就可以实现，啊！两个人啊！通过你们自己写的代码来博弈了，对吧！相当于你有云端的一个选手来帮你下棋，啧！其实，比较容易实现，对吧！大家可以发现，以咱们现在这个架构已经完全可以实现了，对不对！？而且，我们也教给大家怎么用 <code>thrift</code> 来创建一个一个服务了，对不对？！那么大家只要额嗯写完 <code>AI</code> 之后，将自己的 <code>AI</code> 外边<strong>套一个 <code>thrift</code> 服务</strong>就可以了，对吧！那么我们这个，咱们这个，哎！我们这个裁判就可以每一局，哎！调用每位玩家的一个接口，然后你返回一个策略就行了，对吧！啊！都比较容易实现对吧！？大家可以发现，我们现在这个，咱们现在<strong>这个技术的话</strong>都已经给大家讲完了，啊！大家，前面给大家零这个零零散散地讲了很多的技术，大家可能感觉好乱！感觉这个好像确实学到了不少东西，但是又不会用，对吧！啊！嗯额！这些，这几个给大家讲，这讲，这里给大家讲的这几个命令啊！就相当于是什么呢？相当于易筋经，啊~就是你可能感觉上没有招式，啊！相当于太极拳，对吧！啊！太极，对吧！啊！就是你感觉上没有招式但是无招胜有招，你会发现他可以基本上可以实现你未来要做的，基本上啊！所有的逻辑啊！所有的功能都可以实现，啊！嗯何恩，好！额嗯，因为毕竟这些讲义里的内容是我给大家精选的，对吧！啊！根据我多年的这个写代码的功力和写项目的一个经验啊！这个给大家精选的一些一些技术啊！还是很关键的啊！好，然后，我们来看一下啊最后一个作业啊！最后一个作业的话是 <code>homework_9</code> ，啊！就相当于什么相当于咱们算法基础课，对吧！你像很多这个同学，学算法的时候，甚至都不知道学算法需要背模版，对吧！咱们算法基础课的话，交给大家这个这个啊！告诉大家说，这个所有算法题都，所有模版题都是需要背的，那么你背完之后就会发现，哇哦，未来写代码的时候，做算法题的时候确实强了很多，对吧！啊！何恩！所以学习的话方法比较重要啊！好，然后，第九题的话比较简单啊！</p>
<h3 id="1-1-课程概论和-Python3-语法（上）"><a href="#1-1-课程概论和-Python3-语法（上）" class="headerlink" title="1.1 课程概论和 Python3 语法（上）"></a>1.1 课程概论和 <code>Python3</code> 语法（上）</h3><p><strong>前后端分离</strong></p>
<p>问：可以都学吗？</p>
<p>答：可以，但不推荐啊！技术都是工具，对不对！？哎啊！那么最后的作品才是你的目的啊！最后的作品等于你的资产，对吧！<strong>大家写写代码的话不是为了纯学习啊！</strong>一般是为了为了<strong>面向未来就业</strong>，对吧！或者<strong>为了面向自己未来去创业</strong>，对不对！？啊！那么我们<strong>未来能够找到好的工作啊</strong>！或者是能够开发出来对别人比较有帮助的应用，对吧！<strong>比较受欢迎的应用</strong>，这才是我们的目的啊！那么我们可以围绕目的选择各种各样的技术，但是没有必要全学，啊！你比如说这三个框架课，大家其实选择其中一个就可以了啊！因为各种框架相互之间是可以替代的，但大家都学的话更好，都学的话那么未来你找工作的时候，适应性，你的这个这个机会就更多一些啊！啧！好，这是我们的第一个内容，大家看一下有没有问题，同学们啊！</p>
<p>后端框架主要的作用还是去将各种服务集合到在一块，你比如说去协调后端的这个数据库，啊！协调各种微服务，对吧！就跟其他服务器通信啊！还有比如说这个你的协调你的云硬盘，就是各种云盘，包括协调这个直播呀！或者是协调这个这个内存数据库，<code>redis</code> ，对不对！？他其实相当于是一个什么呢？！相当于是一个中枢，对不对！？他是去帮你操控好后端各个资源，然后将你需要的资源返回给前端，他做的是这样的一个工作，好吧！额嗯，当然 <code>python</code> 的话还有一个这个框架叫 <code>flask</code> ，但是 <code>flask</code> 的话，他功能，啧！他太轻量级了啊！然后导致各种功能并没有 <code>django</code> 实现的那么全面，啊！<code>django</code> 的功能相对来说更丰富一些，啊！好！嗯哼！</p>
<p><code>django</code> 课程不会教 <code>python</code> <code>import</code> <code>c++</code> 模块，写网站的时候，额嗯这个啧！网站上的话 <code>python</code> 写的代码都不是瓶颈，瓶颈的话一般是<strong>数据库和网络带宽</strong></p>
<h4 id="python-15-中常用框架"><a href="#python-15-中常用框架" class="headerlink" title="python 15 中常用框架"></a><code>python</code> 15 中常用框架</h4><p>以下是伯乐在线从GitHub中整理出的15个最受欢迎的Python开源框架。这些框架包括事件I&#x2F;O，OLAP，Web开发，高性能网络通信，测试，爬虫等。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/django/">Django</a>: Python Web应用开发框架</strong></p>
<p>Django 应该是最出名的Python框架，GAE甚至Erlang都有框架受它影响。Django是走大而全的方向，它最出名的是其全自动化的管理后台：只需要使用起ORM，做简单的对象定义，它就能自动生成数据库结构、以及全功能的管理后台。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/diesel/">Diesel</a>：基于Greenlet的事件I&#x2F;O框架</strong></p>
<p>Diesel提供一个整洁的API来编写网络客户端和服务器。支持TCP和UDP。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/flask/">Flask</a>：一个用Python编写的轻量级Web应用框架</strong></p>
<p>Flask是一个使用Python编写的轻量级Web应用框架。基于Werkzeug WSGI工具箱和Jinja2 模板引擎。Flask也被称为“microframework”，因为它使用简单的核心，用extension增加其他功能。Flask没有默认使用的数据库、窗体验证工具。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/cubes/">Cubes</a>：轻量级Python OLAP框架</strong></p>
<p>Cubes是一个轻量级Python框架，包含OLAP、多维数据分析和浏览聚合数据（aggregated data）等工具。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/kartograph-py/">Kartograph.py</a>：创造矢量地图的轻量级Python框架</strong></p>
<p>Kartograph是一个Python库，用来为ESRI生成SVG地图。Kartograph.py目前仍处于beta阶段，你可以在virtualenv环境下来测试。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/pulsar/">Pulsar</a>：Python的事件驱动并发框架</strong></p>
<p>Pulsar是一个事件驱动的并发框架，有了pulsar，你可以写出在不同进程或线程中运行一个或多个活动的异步服务器。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/web2py/">Web2py</a>：全栈式Web框架</strong></p>
<p>Web2py是一个为Python语言提供的全功能Web应用框架，旨在敏捷快速的开发Web应用，具有快速、安全以及可移植的数据库驱动的应用，兼容Google App Engine。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/falcon/">Falcon</a>：构建云API和网络应用后端的高性能Python框架</strong></p>
<p>Falcon是一个构建云API的高性能Python框架，它鼓励使用REST架构风格，尽可能以最少的力气做最多的事情。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/dpark/">Dpark</a>：Python版的Spark</strong></p>
<p>DPark是Spark的Python克隆，是一个Python实现的分布式计算框架，可以非常方便地实现大规模数据处理和迭代计算。DPark由豆瓣实现，目前豆瓣内部的绝大多数数据分析都使用DPark完成，正日趋完善。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/buildbot/">Buildbot</a>：基于Python的持续集成测试框架</strong></p>
<p>Buildbot是一个开源框架，可以自动化软件构建、测试和发布等过程。每当代码有改变，服务器要求不同平台上的客户端立即进行代码构建和测试，收集并报告不同平台的构建和测试结果。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/zerorpc/">Zerorpc</a>：基于ZeroMQ的高性能分布式RPC框架</strong></p>
<p>Zerorpc是一个基于ZeroMQ和MessagePack开发的远程过程调用协议（RPC）实现。和 Zerorpc 一起使用的 Service API 被称为 zeroservice。Zerorpc 可以通过编程或命令行方式调用。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/bottle/">Bottle</a>: 微型Python Web框架</strong></p>
<p>Bottle是一个简单高效的遵循WSGI的微型python Web框架。说微型，是因为它只有一个文件，除Python标准库外，它不依赖于任何第三方模块。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/tornado/">Tornado</a>：异步非阻塞IO的Python Web框架</strong></p>
<p>Tornado的全称是Torado Web Server，从名字上看就可知道它可以用作Web服务器，但同时它也是一个Python Web的开发框架。最初是在FriendFeed公司的网站上使用，FaceBook收购了之后便开源了出来。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/python-webpy/">webpy</a>: 轻量级的Python Web框架</strong></p>
<p>webpy的设计理念力求精简（Keep it simple and powerful），源码很简短，只提供一个框架所必须的东西，不依赖大量的第三方模块，它没有URL路由、没有模板也没有数据库的访问。</p>
<p><strong><a target="_blank" rel="noopener" href="http://hao.jobbole.com/python-scrapy/">Scrapy</a>：Python的爬虫框架</strong></p>
<p>Scrapy是一个使用Python编写的，轻量级的，简单轻巧，并且使用起来非常的方便。</p>
<h4 id="python-开发优点："><a href="#python-开发优点：" class="headerlink" title="python 开发优点："></a>python 开发优点：</h4><ul>
<li>1、开发效率高<ul>
<li><code>c++</code> 两年</li>
<li><code>java</code> <code>go</code> 半年</li>
<li><code>python</code> 一个月</li>
<li><code>python</code> 代码短，容易调试</li>
</ul>
</li>
<li>2、生态完善</li>
<li>3、有官方社区的长期支持</li>
<li>4、应用运行效率高<ul>
<li><code>python</code> 很容易调用 <code>c++</code> 的动态链接库</li>
<li>运行效率瓶颈一般都在<strong>数据库查询</strong>上</li>
<li>计算密集型模块可以调用 <code>c++</code> 代码 （<code>c++</code> 的动态链接库）<ul>
<li>模块重要，可以自己重写高效的</li>
<li>发现这个模块对你来首很重要，那你节省自己的时间对不对！？就不用重写了</li>
<li><strong>计算密集型</strong>（算法-<code>python</code>真实运行效率）的微服务——评测器，使用 <code>c++</code> 写，微服务框架服务端可以用任何语言（使用 <code>c++</code>）</li>
<li>有很多工具可以将 <code>python</code> 代码翻译成 <code>c++/c</code> 代码</li>
</ul>
</li>
</ul>
</li>
<li>5、既适合大公司，也适合个人开发者，平均开发一个 <code>web/AC App</code> 只需要半个月- <code>1</code> 个月</li>
</ul>
<h4 id="AcWing-开发过程"><a href="#AcWing-开发过程" class="headerlink" title="AcWing 开发过程"></a>AcWing 开发过程</h4><ul>
<li><p><code>acsaber</code> 智能推荐，有向图，调包</p>
</li>
<li><p>在线编辑器</p>
<ul>
<li><p>开发了半个月将近一个月的时间</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805161004547.png" alt="image-20240805161004547"></p>
<ul>
<li>支持多窗口</li>
<li>完全在浏览器内部</li>
<li>可以全屏</li>
<li>可以窗口化</li>
<li>可以运行代码</li>
</ul>
</li>
</ul>
</li>
<li><p>文件资源管理器</p>
<ul>
<li><p>开发了大概半个月的时间</p>
<ul>
<li><p>支持浏览云端</p>
</li>
<li><p>相当于云端云盘</p>
</li>
<li><p>可以右键</p>
</li>
<li><p>菜单是在云端画的</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805161223992.png" alt="image-20240805161223992"></p>
</li>
<li><p>可以剪切</p>
</li>
<li><p>可以多选</p>
</li>
<li><p>摁住 <code>ctrl</code> 多选</p>
</li>
<li><p>同时剪切</p>
</li>
<li><p>设置功能</p>
<ul>
<li><p>对接一个云盘，把图片存到云盘上，就可以了</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805161330460.png" alt="image-20240805161330460"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>AC Chat</code></p>
<ul>
<li>简易版微信</li>
<li>开发了半个月的时间</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805161433687.png" alt="image-20240805161433687"></p>
</li>
<li><p><code>AC Terminal</code></p>
<ul>
<li><p>没有开发多久，主要是后端开发比较麻烦一下，前端的话到不是很难啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805161619954.png" alt="image-20240805161619954"></p>
</li>
</ul>
</li>
</ul>
<p>所以 <code>django</code> 特别适合个人开发者，扩展性特别强，就是如果你是个人开发的，你个人开发的时候可能用户量很少，比如说一开始的时候只有几十个几百个用户，对吧！那么当你慢慢用户量增长到什么几万十几万甚至上百万的时候，啊！这个 <code>django</code> 框架都是可以扩展过去的啊！你比如 <code>leetcode</code> 这个网站，他号称全球有几百万用户，对吧！他其实最开始就是从 <code>django</code> 开始做的，就他的扩展性特别特别强，啊！你不管不仅可以承受你的这种小而精的对吧！这个这个你的应用场景，你也可以快速迭代，同时也可以适用几十几十一亿的用户，对吧！？像 <code>utp</code> 这种</p>
<p>网上好多说 <code>python</code> 慢的啊！还有说 这个这个<code>django</code> 不好用的啊！我稍微给大家吹一波 <code>django</code> 啊！</p>
<p><code>python</code> 确实慢啊！但是可以把慢的模块换成 <code>c++</code> 啊！对不对！所以这是一个权衡的问题啊！</p>
<h4 id="django-做前后端分离-——-一个后端对接多个前端"><a href="#django-做前后端分离-——-一个后端对接多个前端" class="headerlink" title="django 做前后端分离 —— 一个后端对接多个前端"></a>django 做前后端分离 —— 一个后端对接多个前端</h4><p>不分离的话，每一个前端都要写一个后端</p>
<h4 id="项目的架构"><a href="#项目的架构" class="headerlink" title="项目的架构"></a>项目的架构</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805170850810.png" alt="image-20240805170850810"></p>
<h5 id="后端-django-负责统领各种服务"><a href="#后端-django-负责统领各种服务" class="headerlink" title="后端 django 负责统领各种服务"></a>后端 <code>django</code> 负责统领各种服务</h5><ul>
<li><code>mysql</code></li>
<li><code>redis</code> </li>
<li>云盘<ul>
<li>用云服务，不要存到自己的服务器（个人电脑）上，存到云盘上比较容易扩展，可以在一定程度上防止攻击</li>
</ul>
</li>
<li><code>thrift</code> 微服务<ul>
<li>自己写一个服务</li>
<li>匹配机制<ul>
<li><code>linux</code> 作业</li>
</ul>
</li>
</ul>
</li>
<li>对接两个前端 -&gt; 同样一份代码支持不同的端口<ul>
<li>一个前端是大家的浏览器——&gt; 一个页面</li>
<li>对接<code>acapp</code> </li>
<li>未来还可以对接<ul>
<li><code>ios</code></li>
<li><code>android</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="游戏模块设计"><a href="#游戏模块设计" class="headerlink" title="游戏模块设计"></a>游戏模块设计</h4><h5 id="第一个模块：游戏菜单——熟悉-http-协议"><a href="#第一个模块：游戏菜单——熟悉-http-协议" class="headerlink" title="第一个模块：游戏菜单——熟悉 http 协议"></a>第一个模块：游戏菜单——熟悉 <code>http</code> 协议</h5><ul>
<li>游戏菜单，游戏设置，</li>
</ul>
<h5 id="第二个模块：存储对战的信息——熟悉数据库操作"><a href="#第二个模块：存储对战的信息——熟悉数据库操作" class="headerlink" title="第二个模块：存储对战的信息——熟悉数据库操作"></a>第二个模块：存储对战的信息——熟悉数据库操作</h5><h6 id="django-数据库可插拔式，自带一个数据库——-sqlite3-，前期开发直接使用-django-自带的数据库，数据库量大了之后，比如已经有几百兆数据了，然后访问比较慢的时候，大家可以非常轻松地将这个-sqlite3-迁移到-mysql-（最好租云服务，最好不要自己搭，云服务商都有相应的服务的）里面，他（django）是很容易做迁移的，而且很方便就可以替换掉，django-里面可以设置，只要把端口号、类型修改一下就可以了，几行就改完了。已经将各种各样的服务搭好了——比如数据库，不需要自己搭数据库，云服务直接帮你搭好，提供给你一个端口号，还有一个-ip-地址，你直接拿来用就可以了。"><a href="#django-数据库可插拔式，自带一个数据库——-sqlite3-，前期开发直接使用-django-自带的数据库，数据库量大了之后，比如已经有几百兆数据了，然后访问比较慢的时候，大家可以非常轻松地将这个-sqlite3-迁移到-mysql-（最好租云服务，最好不要自己搭，云服务商都有相应的服务的）里面，他（django）是很容易做迁移的，而且很方便就可以替换掉，django-里面可以设置，只要把端口号、类型修改一下就可以了，几行就改完了。已经将各种各样的服务搭好了——比如数据库，不需要自己搭数据库，云服务直接帮你搭好，提供给你一个端口号，还有一个-ip-地址，你直接拿来用就可以了。" class="headerlink" title="django 数据库可插拔式，自带一个数据库—— sqlite3 ，前期开发直接使用 django 自带的数据库，数据库量大了之后，比如已经有几百兆数据了，然后访问比较慢的时候，大家可以非常轻松地将这个 sqlite3 迁移到 mysql （最好租云服务，最好不要自己搭，云服务商都有相应的服务的）里面，他（django）是很容易做迁移的，而且很方便就可以替换掉，django 里面可以设置，只要把端口号、类型修改一下就可以了，几行就改完了。已经将各种各样的服务搭好了——比如数据库，不需要自己搭数据库，云服务直接帮你搭好，提供给你一个端口号，还有一个 ip 地址，你直接拿来用就可以了。"></a><code>django</code> 数据库可插拔式，自带一个数据库—— <code>sqlite3</code> ，前期开发直接使用 <code>django</code> 自带的数据库，数据库量大了之后，比如已经有几百兆数据了，然后访问比较慢的时候，大家可以非常轻松地将这个 <code>sqlite3</code> 迁移到 <code>mysql</code> （最好租云服务，最好不要自己搭，云服务商都有相应的服务的）里面，他（<code>django</code>）是很容易做迁移的，而且很方便就可以替换掉，<code>django</code> 里面可以设置，只要把端口号、类型修改一下就可以了，几行就改完了。已经将各种各样的服务搭好了——比如数据库，不需要自己搭数据库，云服务直接帮你搭好，提供给你一个端口号，还有一个 <code>ip</code> 地址，你直接拿来用就可以了。</h6><ul>
<li><p>账户信息：每个用户存储对应的信息，将各种各样的信息维护起来</p>
<ul>
<li>比如 <code>acwing</code> 的话，要存一下用户的用户名、密码、邮箱、分值</li>
</ul>
</li>
<li><p>对局信息</p>
</li>
<li><p>数据库操作</p>
<ul>
<li><h6 id="django-操作数据库不管操作什么数据库都有一套-API"><a href="#django-操作数据库不管操作什么数据库都有一套-API" class="headerlink" title="django 操作数据库不管操作什么数据库都有一套 API"></a><code>django</code> 操作数据库不管操作什么数据库都有一套 <code>API</code></h6>不需要他具体来说执行什么样的 <code>sql</code> 语句，我们只要会用他的 <code>api</code> 就可以了，比如说 <code>django</code> 你想去查询某一些用户的信息，一般就是 <code>.objects.filter()</code> ，填上各种各样的条件就可以了，就类似于一个 <code>python</code> 函数，修改数据库可以用 <code>objects.update()</code> 就可以了，如果想删除一些内容的话，直接 <code>delete</code> 就可以了</li>
</ul>
</li>
</ul>
<h5 id="第三个模块——在-redis-中存储每局对战状态，熟悉内存数据库操作"><a href="#第三个模块——在-redis-中存储每局对战状态，熟悉内存数据库操作" class="headerlink" title="第三个模块——在 redis 中存储每局对战状态，熟悉内存数据库操作"></a>第三个模块——在 <code>redis</code> 中存储每局对战状态，熟悉内存数据库操作</h5><h6 id="数据库分为两大类"><a href="#数据库分为两大类" class="headerlink" title="数据库分为两大类"></a>数据库分为两大类</h6><p>可以用 <code>redis</code> 来存储数据，也可以用 <code>mysql</code> 来存储数据，</p>
<ul>
<li><code>redis</code> ：内存数据库——在内存中的 <code>map</code> </li>
<li><code>mysql</code></li>
</ul>
<h6 id="存储数据的层"><a href="#存储数据的层" class="headerlink" title="存储数据的层"></a>存储数据的层</h6><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805174651513.png" alt="image-20240805174651513"></p>
<p>1 <code>client</code> 端也可以存一些数据，根据需求考虑数据放到什么地方（更快 ）</p>
<ul>
<li><code>client</code> 可以放到 （<code>h5</code>）<code>webstorage</code> 提供的，浏览器会帮用户缓存一些信息，存到浏览器里！即使刷新页面也不会消失</li>
<li><code>ds</code> 内存里，只要用户不刷新页面信息就不会消失</li>
</ul>
<p>服务器端（<code>server</code> 端）</p>
<ul>
<li><p>4 最慢的就是硬盘（云盘）——<code>disk</code> ：硬盘里存视频，图片，<code>disk</code> 的话一般不用本地 <code>disk</code> ，直接使用云盘——（阿里腾讯华为云），直接租服务就可以了，还是比较便宜的，而且速度比较快，而且不用自己维护，不用自己扩容，非常的方便</p>
</li>
<li><p>3 <code>mysql</code> 比硬盘要快—— <code>mysql</code> 里存一些文本，题解，存打卡代码，存储分值信息，<code>mysql</code> 比云盘快很多</p>
</li>
<li><p>2（<code>redis</code> ）内存比 <code>mysql</code> 快，从远程通过网络调用调用另外一个服务器的数据一定不如比从你的内存里拿数据快，所以更快地就是 <code>redis</code> ，<code>reids</code> 不能存太多东西，会占用内存，<code>mysql</code> 可以存几十 <code>G</code> 的东西，硬盘可以存几百 <code>G</code> ，几百 <code>T</code> 的东西，但你的内存的话一般不要存那么多东西啊！<strong>实时存储每一局的对战状态</strong></p>
</li>
</ul>
<h5 id="第四个模块——熟悉-websocket-协议"><a href="#第四个模块——熟悉-websocket-协议" class="headerlink" title="第四个模块——熟悉 websocket 协议"></a>第四个模块——熟悉 <code>websocket</code> 协议</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805175924656.png" alt="image-20240805175924656"></p>
<p>一般的 <code>http</code> 协议向服务器发一个请求，服务器给我返回一个数据；服务器不能主动向我发送信息，服务器是被动接受者，我问什么他答什么，我不问他不能答给我</p>
<p><code>websocket</code> 是一个两端都可以发信息的一个通信协议，<code>websocket</code> 会在每一个用户浏览器跟服务器端建立一个长连接，不仅客户端可以向服务器发送请求，服务器也可以向可以向客户端发送请求</p>
<p>向服务器发送一个请求，服务器向其他玩家发送请求，<code>http</code> 协议不能发送，<code>websocket</code> 可以</p>
<ul>
<li>在线聊天室（集成）：每局对战，大家可以在一块聊天</li>
<li>可以实时移动<ul>
<li>按上下左右，玩家会移动。还可以在你的匹配的对手那里可以<strong>实时动</strong></li>
</ul>
</li>
<li>可以实时放技能</li>
</ul>
<h5 id="第五个模块——在线匹配系统——熟悉-thrift-和微服务"><a href="#第五个模块——在线匹配系统——熟悉-thrift-和微服务" class="headerlink" title="第五个模块——在线匹配系统——熟悉 thrift 和微服务"></a>第五个模块——在线匹配系统——熟悉 <code>thrift</code> 和微服务</h5><p>我们会在一个服务器上搭一个· <code>django</code> ，实现 <code>django</code> 的一个业务逻辑，然后同时会在另外一个服务器上（两个服务器是虚拟机）在这个场景下 <strong><code>web</code> 服务器和匹配模式都不太占用 <code>cpu</code></strong> ，所以这两个服务，虽然是封装到两个 <code>docker</code> 里边，但是大家<strong>可以放到同一台服务器</strong>上；但有一些服务不能将这两个东西放到一台服务器上，比如评测系统（计算密集型的工作），评测代码的时候，啧！评测代码的时候，如果在搭建网站的服务器上评测代码的话那么一评测代码服务器就会特别卡，因为评测代码 <code>cpu</code> 被占满了，就会导致别人访问网站的时候就会卡一下，所以要分开（代码评测服务和 <code>web</code> 服务）去做</p>
<ul>
<li>在线匹配机制：每名玩家都可以去发起一个匹配请求，在线匹配池会将，会随着时间的推移将分值、战斗力比较接近的玩家匹配在一起，然后将这两名玩家同时返回给 <code>web</code> 服务器，然后 <code>web</code> 服务器再告诉这两名玩家的前端，对局可以开始了，已经在服务器端生成对局状态，两个人进行对局就可以了（其实就是 <code>AC Saber</code> 的逻辑）</li>
</ul>
<h5 id="第六个模块——熟悉-nginx-部署云服务"><a href="#第六个模块——熟悉-nginx-部署云服务" class="headerlink" title="第六个模块——熟悉 nginx 部署云服务"></a>第六个模块——熟悉 <code>nginx</code> 部署云服务</h5><p>配置 <code>nginx</code> ，写完服务之后，一般会套一层反向代理，做一个负载均衡，教一下怎么去配置 <code>nginx</code> ，怎么去部署云服务4</p>
<h4 id="项目概要总结"><a href="#项目概要总结" class="headerlink" title="项目概要总结"></a>项目概要总结</h4><p>​	相信这个项目可以让大家对 <code>django</code> 有一个全面的认识，相信大家在咱们这里学完之后，会比在其他培训机构学的要好一些，对吧！你像在其他培训机构额嗯，你可能只会这个他上课教的那个项目，啊！甚至的话只会将他上课教的那个项目跑起来，甚至只能跑在本地，都不能跑到云端，对吧！啊！那么我们这里的话，大家学完之后一定可以部署在云端，因为咱们所有人都是在云端开发的，而且希望大家学完之后啊！也可以自己根据自己想象力去开发自己各种各样喜欢的应用啊！比如大家学完之后，哎！你可以去，啧！你可以去打开一个 <code>steam</code> 对吧！或者 <code>4399</code> 网站啊！然后大家可以去 <code>4399</code> 网站上找找灵感，比如你可以开发一个黄金矿工，对吧！啊！或者是开发一个什么坦克大战，对不对！？嗯！当然更复杂一些的话，你比如说你可以开发一个我的世界，对吧！嗯哈，你可以试试看啊！嗯好！这是我们整个课程会带着大家做的项目，大家看一下有没有问题啊！对！包括 <code>qq</code> 飞车也可以做啊！</p>
<p>​	为什么 <code>django</code> 未来会越来越流行呢？</p>
<ul>
<li>原因就在于一方面他开发效率高，其实现在人脑是稀缺资源啊，计算资源其实并不太稀缺，另外大家可以发现计算机的计算速度越来越快，对吧！啊！但是其实我们有些时候我们并不需要那么高的计算速度啊！比如说我们自己开发网站，啊！其实当大家的用户量低于一万的时候，额！那么其实你只要租一个一核，就他内个哈哈学生机就行，就可以了，足以承载自己的需求了，然后</li>
<li>第二点的话就是他的运行效率其实并没有大家想象的那么低，他主要是权衡问题，他并不是一直慢，就是说你像让他快的时候，你可以话时间写 <code>c++</code> ，来让他快，啧哼！</li>
</ul>
<p>​	<code>django</code> 框架，首先 <code>python</code> 是一个完备的语言，也就是世间所有逻辑你都可以实现，啧啊！这是第一点，对吧！第二点，大家可以发现我们这个大家去开发的时候，不管你的网站还是 <code>acwing</code> 的云端 <code>app</code> ，都是所见即所得，就是你开发完之后可以立即上线，立即看到你的效果，所以开发的时候效率会很高，可以实时验证你的想法是不是正确，啊！大家想想怎么做就怎么做啊！可创造性很强，对不对！？你比如说这个 <code>acwing</code> 的话，就做了一套云端桌面系统，对不对！？啊！这个还是，对，应该是，对，大家应该在，应该平时没有见过这种东西，对吧！这个是咱们自己创造出来的东西，啊！很有成就感，对吧！？啊！包括你比如说把这个额额把这个微信移植到网站内部，对不对！？啊！大家以后也可以想象看能不能把其他的工具移植到网站内部，对不对！？你比如说你在这个里边可以实现，可以实现什么呢？可以实现一个额嗯计算器，对吧！这个比较简单，大家应该很容易可以实现，哪更复杂一些能不能，能不能实现一个画图呢？应该也可以实现，对把！？啊！再复杂一些能不能实现一个相册功能呢？对吧！啊！或者是视频播放器呢？音乐播放器呢？音乐盒呢？对不对！？都是可以实现的啊！啧！吭嗯！吭嗯！</p>
<h4 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805212212124.png" alt="image-20240805212212124"></p>
<p>​	开发项目最最最最麻烦的地方就是配环境，配环境会耗掉你很多很多的时间啊！而且配环境并不是所有问题都可以解决的，可能最后总会剩下那么百分之二十的问题解决不了，解决不了，对吧！就是有 <code>error</code> ，但他就是可以跑，对不对！？啊！那么这种其实都是会给大家未来写项目埋下很深的雷，啊！而且再一点，就是大家开发完你的项目之后，你会发现比较难，比较难做迁移，当你写了一个项目，发现云端是 <code>linux</code> ，本地是 <code>windows</code> ，会产生一堆奇奇怪怪的问题，啊！然后你需要去将云端，你你要将你的项目在云端跑起来，啊！可能就要经历，反复经历绝望，嘿嘿哈，然后然后这个这个额嗯啧！突然陷入绝望，因为你会因为你可能会突然发现一个问题，你好像解决不了，好像要重写，然后过了过了一会儿然后就，可能第二天你再搜的时候，发现啊！这个十年前有一个大神，对吧！把这个问题解决了，啊！然后就重新燃起了生的希望，然后突然又陷入了这个绝望当中，你可能又发现了一个无法解决的问题啊！你可能反复在这个过程当中死去活来持续很长的时间啊！那么这个的话其实是非常折寿的啊！这个我也是深有体会，这个东西的话，尤其是半夜大家去调的时候，有可能如果你上头的话很有可能猝死，嗯吭！还有另外一些，你比如说额嗯！？有一些包，对吧！比如说阿里云的一些服务，比如直播服务，你会发现他虽然是支持各种端的，虽然虽然说 <code>python</code> 是跨平台的一个语言，他这个可以在 <code>linux</code> 上装，在 <code>windows</code> 上也可以装啊！但你发现在 <code>linux</code> 上装的时候，你只要 <code>pip install</code> 一下就可以啦啊！但是你在 <code>windows</code> 上装的时候 <code>pip install</code> 就 <code>error</code> 了，他还会提示你装一大堆东西，啊！然后你发现在 <code>windows</code> 上装那一大堆东西非常的麻烦，啊！额嗯！还有啊！比如说这个，比如说大家，我们这个项目可能还比较特殊一些啊！咱们这个项目由于要去对接各种各样的服务器，会在服务器之间通信，你比如说我们会有一个 <code>django</code> 服务器，对吧！会有一个 <code>thrift</code> 服务器，大家可能还需要一个 <code>mysql</code> 服务器，这个可能还好一些啊！那么大家如果在本地调试，上线云端的话你会发现你需要频繁修改服务器之间的端口，啧！嗯！那就会非常非常的麻烦，啊！再举个例子啊！举一个这种额嗯！额哼！给大家举个例子啊！比如说这个，啧！额！比如说你想加一个新的 <code>thrift</code> 服务，那么如果你在本地去调试的时候啊！那么你加这个新的 <code>thrift</code> 服务，比如这个 <code>thrift</code> 服务可能会和其他的一些服务产生关联啊！那么你在去往里加的时候，如果你将这个这个项目在本地写的话你会发现你在本地发的请求他是可以在本地传给 <code>thrift</code> 的，但是你会发现这个 <code>thrift</code> 他将结果返回的是你云端的服务器，对吧！因为你这个云端写好之后啊！他一般来说，你比如这两个服务器（客户端，<code>thrift</code>服务）之间建立一个连接，那么他就永远是我（<code>thrift</code> 服务器）接一个请求，发结果，接一个请求，发结果；那你在本地调试的时候，你向这个服务器，向这个 <code>thrift</code> 发请求，他会将请求传回给云端（<code>django</code> ），而不会传回给你，所以大家就会发现非常的复杂啊！不是不能解决，只是非常浪费时间啊！所以说<strong>这个我们整个项目推荐大家直接在云端去开发？！</strong>就没有这个问题了，好吧！所以推荐大家我们整个项目的话直接在云端开发啊！额嗯，</p>
<p>​	然后我们整个的开发框架之前在 <code>linux</code> 基础课已经给大家讲过了啊！他是这样的一个结构啊！（如下图）</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240805212446697.png" alt="image-20240805212446697"></p>
<p>​	首先我们给大加提供了一个窗口，提供了一个终端他可以代替本地终端啊！可以 <code>ssh</code> 到自己的任何其他服务器上啊！需要租一个云服务器啊！在 <code>docker</code> 里开发，可以省去配环境的麻烦。<code>acwing</code> 在 <code>AC Terminal</code> 提供镜像，将其上传到自己的服务器，利用镜像生成一个容器就可以了，那么这样大家用的这个容器啊！就跟所有同学的容器环境完全一致了，就不会出现版本不兼容的问题，可以吧！啊！对！所以我觉得在这块的话，咱们这个 <code>acwing</code> 的这个教学的话我觉得还是比较有创新的啊！就是执行了一个标准化，我觉得这个标准化非常重要，就类似于书同文车同轨，类似于推广普通话，那否则的话两个人没法交流，对吧，你是这个 <code>centos</code> 版本，我是 <code>ubuntu</code> 版本，那么两个人遇到的问题完全不一样，啊！这样的话会非常浪费时间啊！但如果大家，所有同学都用同一个版本的话就没有这个问题啊！这是第一个好处啊！第二个好处就是大家这个如果是在自己 <code>docker</code> 容器里去开发的话，你可以脱离云服务器商的一个限制，啊！你比如说啊！未来如果阿里云发现他比较贵对吧！比较坑的话，那么你想从阿里云上迁移到华为云的时候或者迁移到腾讯云的时候非常的容易啊！两三行命令你就可以将容器打包成一个文件然后通过 <code>scp</code> 传到，传给另外一个服务器，然后再解压出来，你就可以将环境迁移过去了，也就是你可以脱离这个云平台的管控，相当于是你本来他对你控制的比较强，对吧！那么这样的话，你可以完全自主控制自己的镜像，更加安全一些，可以吧！额嗯！而且我们这个，咱们这个整个，然后大家部署完容器之后啊！这个容器是可以配置 <code>ssh</code> 登录的，大家可以在 <code>AC  Terminal</code> 里配置一个免密登录，然后配置一个别名，配置一个免密登录，大家就可以直接通过 <code>ssh</code> 登录到自己的服务器里了，好吧！啊！啧嗯！对，一定要租云服务器啊！因为没有云服务器的话你就没有公网 <code>IP</code>，没有公网 <code>IP</code> 的话，大家就不能访问到你的网站，你只能在本地访问你的网站，啧额嗯！对，这就是咱们这个过程的好处，所有同学的学习环境都完全一样，不用去太关注于各种各样的配置问题，啊！可以有效的延长，延年益寿，对吧！啊！额吭！啧！啊！不是在服务器上开发吗？为什么要用 <code>Terminal</code> 呢？这个 <code>AC Terminal</code> 的话是一个，不是 <code>AC Terminal</code> 的话是登录到你的服务器上，他还是在你的服务器上开发，可以 <code>ssh</code> 登录到你的服务器上，当然登录服务器的话，你可以用 <code>AC Terminal</code> ，也可以用本地的终端啊！都是可以的，这个是没有限制的，但是我们的镜像会传到 <code>AC Terminal</code> 上啊！好啊！然后啊！这个最大的好处是什么呢？大家可以仔细观察这个架构啊！你会发现我们给大家提供的这个提供的这个开发环境啊！他最大的好处是什么就是可以在网吧开发，对吧！（<img src="C:\Users\20344\AppData\Local\Temp\SGPicFaceTpBq\2840\085E940F.png" alt="085E940F">)，大家仔细观察可以发现 <code>acwing</code> 的所有课程你在学的时候啊！你会严格发现真的只用打开一个网站就可以了，完全不用任何本地的开发环境，也就是你在任何一个有电脑的地方只要打开浏览器登录 <code>acwing</code> 账号你就可以学，对不对！？这个是未来的趋势啊！大家以后去自习室的话可能不需要自己再背电脑了，类似于额嗯，类似于比如说这个十年前大家出门的话需要带现金，然后大家会发现现在出门的话，兜里基本都没有现金，对吧！因为你的钱本来是纸质版式存到兜里的，然后你会发现现在的前都是存到云端的，对吧！啊！嗯额！然后同样的话你的开发环境也是一样，或者你的数据也是一样，啊！以前，现在你的数据的话都是存，很多都存到本地的电脑里边，对吧！包括你的开发环境是在本地电脑里面的啊！那么你可能废了半天劲配了个环境，但是当你去，比如你去网吧的时候（<img src="C:\Users\20344\AppData\Local\Temp\SGPicFaceTpBq\2840\0865E0B6.png" alt="0865E0B6">)，你去自习室的时候，你都需要带上你的电脑，因为不带你的电脑的话，你的环境就带不过去，对不对！？就很麻烦，啊！但大家像这样做的时候，所有的开发环境全部在云端啊！就很省事，对不对！？啊！然后我们的后端的话是在 <code>AC Termianl</code> 里开发，然后我们 <code>level-3</code> 的这个 <code>web</code> 的话也会给大家这个 <code>web</code> 的话会讲一讲咱们的前端，对吧！到时候将 <code>web-3</code> 的时候，我们会在 <code>AC Editor</code> 里集成开发前端的功能，就，反正就是可以可以脱离本地的限制。</p>
<p>​	咳嗯！啧！好！那么！具体讲一下我们的整个开发流程啊！</p>
<ul>
<li>完全无需配置本地环境<ul>
<li>利用 <code>AC Terminal</code> 在云端开发就可以了</li>
<li><code>django</code> 框架是 <code>python</code> 语言，也不太需要自动补全；如果想要自动补全的话，**<code>vim</code> 可以配置自动补全，好吧！**</li>
<li>平时写 <code>c++</code> 代码的时候写 <code>c++</code> 题目的时候不用自动补全，对不对！那 <code>python</code> 就更不用自动补全了啊！</li>
<li>开发工具 <code>vim</code> 加 <code>tmux</code> ，这个技术栈还是不错的啊！<code>vim</code> 加 <code>tmux</code> 非常好用啊！<ul>
<li><code>tmux</code> 可以分屏，对不对！？</li>
<li>然后 <code>vim</code> 的话，你可以编辑，对吧！（<code>vim</code> 看代码的话有时候眼睛比较疼）</li>
</ul>
</li>
<li>本地编辑器的作用<ul>
<li>1、多窗口：<code>tmux</code> 可以实现</li>
<li>2、编辑：通过 <code>vim</code> 来实现</li>
<li>3、自动补全：<code>python</code> 的话不太需要自动补全</li>
<li>4、全文检索：可以通过 <code>ag</code> 命令实现</li>
</ul>
</li>
<li>可以配置本地 <code>pycharm</code> （<code>vscode</code>）连接云端服务器<ul>
<li>代码一定要在服务器上，你不要在，这个代码千万不要在本地上啊！</li>
<li>不推荐代码存到本地上，可能设计多台服务器之间的通信，如果你在本地开发的话会非常的难调试</li>
<li>本地环境不统一，不好迁移</li>
</ul>
</li>
</ul>
</li>
<li>租云服务器<ul>
<li>学生的时候几十块钱，平时大几百块钱</li>
</ul>
</li>
<li>安装 <code>docker</code>，可以随意迁移</li>
<li>将 <code>AC Terminal</code> 的 <code>/var/lib/acwing/docker/images/</code> 目录下 <code>yxc</code> 提供的 <code>docker</code> 镜像上传到自己租的服务器上<ul>
<li>省去配环境的环节</li>
<li>标准化开发环境，避免软件版本不兼容</li>
</ul>
</li>
<li>使用 <code>AC Git</code> 管理项目<ul>
<li>方便回滚代码（自己开发）</li>
<li>可以在 <code>WEB-IDE</code> 里写代码</li>
<li>多人开发（方便协作）</li>
<li>可以查看各个版本</li>
</ul>
</li>
</ul>
<h4 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h4><h4 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h4><p>以前 <code>django</code> 的版本是用函数来去实现每一个方法的，现在的 <code>django</code> 的话是用 <code>class</code> 来实现每一个方法的，所以说这个需要给大家讲一些 <code>class</code> 的概念，面向对象的概念，但是不会讲太多啊！我们用多少讲多少，大家也是一样，技术都是手段，对吧！学了技术是为了做项目，项目里用不到的话你可以放到后面再学，啧！嗯！可以用 <code>python</code> 来做算法题来练习吗？可以呀！大家如果想练习 <code>python </code> 的话，大家可以拿这个语法基础课的题来练习，啊！直接在题库里搜语法题就可以了，全是一些语法题，大家可以拿这些题来练 <code>python</code> ，啊嗯！啧！好，咳嗯！</p>
<p>记录一下这节课的操作流程</p>
<h4 id="python-文档介绍"><a href="#python-文档介绍" class="headerlink" title="python 文档介绍"></a><code>python</code> 文档介绍</h4><h4 id="1、课前甜点"><a href="#1、课前甜点" class="headerlink" title="1、课前甜点"></a>1、课前甜点</h4><ul>
<li>1、可以作为一个计算器</li>
<li>2、可以用来批量处理文件</li>
<li>3、可以用来写网站 </li>
<li>4、<code>python</code> 比较简洁，比其他语言的代码要短很多，有很多语法糖</li>
<li>5、使用缩进实现代码块</li>
<li>6、可以直接写，不用定义</li>
<li>7、<code>python</code> 语言非常容易扩展<ul>
<li><code>python</code> 的函数可以用 <code>c/c++</code> 写，然后编译成动态链接库调用</li>
</ul>
</li>
</ul>
<h4 id="python-解释器"><a href="#python-解释器" class="headerlink" title="python 解释器"></a><code>python</code> 解释器</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env	python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># 默认 utf-8 可以不写</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello world&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>加上可执行权限</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x *.py</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806123620324.png" alt="image-20240806123620324"></p>
<h6 id="python2-python3"><a href="#python2-python3" class="headerlink" title="python2 -&gt; python3"></a><code>python2</code> -&gt; <code>python3</code></h6><p><code>python2</code> 编码是特别麻烦的一个模块，所以 <code>python2</code> 不维护了，现在只维护 <code>python3</code></p>
<p><code>linux</code> 系统 <code>python</code> 默认是 <code>python2</code> </p>
<h4 id="2、解释型语言"><a href="#2、解释型语言" class="headerlink" title="2、解释型语言"></a>2、解释型语言</h4><h5 id="解释器页面"><a href="#解释器页面" class="headerlink" title="解释器页面"></a>解释器页面</h5><p><code>python</code> 可以一句话一句话的执行</p>
<img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806124212468.png" alt="image-20240806124212468" style="zoom:150%;" />

<p><code>ipython3</code> 解释器页面</p>
<ul>
<li><p><code>python</code> 取整向下取整，<code>c++</code> 取整向上取整</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806154849843.png" alt="image-20240806154849843"></p>
</li>
<li><p><code>round</code> ：保留两位小数</p>
</li>
</ul>
<h5 id="常用数据结构及操作"><a href="#常用数据结构及操作" class="headerlink" title="常用数据结构及操作"></a>常用数据结构及操作</h5><ul>
<li><pre><code class="python">&#39;a&#39; * 一个数字
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  ![image-20240806155852999](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806155852999.png)</span><br><span class="line"></span><br><span class="line">* 字符串</span><br><span class="line"></span><br><span class="line">  * `python` 里的字符串不能修改，`c++` 可以修改</span><br><span class="line"></span><br><span class="line">* 内置函数 `len` </span><br><span class="line"></span><br><span class="line">  * 可以求所有类型的长度</span><br><span class="line"></span><br><span class="line">    * 字符串长度 `str`</span><br><span class="line"></span><br><span class="line">    * 1、链表长度——数组（列表）`list` 数组 `[]`</span><br><span class="line"></span><br><span class="line">      * 使用中括号 `[]` ，元素使用 `,` 隔开，可以有整形，可以有其他元素</span><br><span class="line"></span><br><span class="line">        ![image-20240806161951795](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806161951795.png)</span><br><span class="line"></span><br><span class="line">        拷贝</span><br><span class="line"></span><br><span class="line">        * 深拷贝 ，复制列表值并且新开一块区域存储信息，用的不多啊！</span><br><span class="line">        * 修改新元素的值后，原本的元素值不变</span><br><span class="line"></span><br><span class="line">        ![image-20240806162328837](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806162328837.png)</span><br><span class="line"></span><br><span class="line">        * 浅拷贝，新增指向元素的指针</span><br><span class="line"></span><br><span class="line">          1.  复制拷贝</span><br><span class="line"></span><br><span class="line">          * ```python</span><br><span class="line">            a = [1, 2, [3, 4]]</span><br><span class="line">            b = a</span><br><span class="line">            b[0] = 111</span><br><span class="line">            b[2][0] = 333 </span><br></pre></td></tr></table></figure>

          ![image-20240812222037939](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240812222037939.png)

          1. `a.copy()`

        * ```py
          a = [1, 2, [3, 4]]
          b = a.copy()
          b[0] = 111
          b[2][0] = 333
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  ![image-20240812222243193](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240812222243193.png)</span><br><span class="line"></span><br><span class="line">  1. `b = deepcopy(a)`</span><br><span class="line"></span><br><span class="line">* ```python</span><br><span class="line">  import copy</span><br><span class="line">  copy.deepcopy(a)</span><br><span class="line">  a = [1, 2, [3, 4]]</span><br><span class="line">  b = copy.deepcopy(a)</span><br><span class="line">  b[0] = 111</span><br><span class="line">  b[2][0] = 333</span><br></pre></td></tr></table></figure>

          ![image-20240812222342449](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240812222342449.png)

      * 修改新变量的值相当于修改原变量的值

        * `a = [1, 2, 3]`
        * `b = a[:]`
        * `b = a`

        ![image-20240806162246288](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806162246288.png)

      * 数组支持相加操作

        ![image-20240806163945501](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806163945501.png)

        * 相加操作

          ![image-20240806164058616](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806164058616.png)

        * 修改数组中的一段

          ![image-20240806164304492](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806164304492.png)

  * 2、集合的大小 `set`  `set`

  * 3、字典的大小 `dict`  `map`
</code></pre>
</li>
</ul>
<h4 id="3、走向编程的第一步"><a href="#3、走向编程的第一步" class="headerlink" title="3、走向编程的第一步"></a>3、走向编程的第一步</h4><ul>
<li><p>复合赋值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, b = <span class="number">0</span>, <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>交换两个变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, b = b, a</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806165203653.png" alt="image-20240806165203653"></p>
</li>
<li><p><code>python</code> 循环后面需要加上一个冒号，跟 <code>c/c++</code> 不一样</p>
<ul>
<li>语句代码块：缩进相同的一些语句</li>
<li><code>python</code> 创始人比较有想象力，其实挺好用的啊！</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806165434700.png" alt="image-20240806165434700"></p>
<ul>
<li><p><code>print</code> 输出时使用其他符号代替换行符</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806170007197.png" alt="image-20240806170007197"></p>
</li>
</ul>
</li>
</ul>
<h4 id="4、其他流程控制工具"><a href="#4、其他流程控制工具" class="headerlink" title="4、其他流程控制工具"></a>4、其他流程控制工具</h4><ul>
<li><p><code>input</code></p>
<ul>
<li><pre><code class="python">input()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    会返回一个字符串（`str`），直接用 `int()` 函数，`int` 不是变量是函数</span><br><span class="line"></span><br><span class="line">* 判断语句</span><br><span class="line"></span><br><span class="line">  * 与 `if` 对齐的一个位置</span><br><span class="line"></span><br><span class="line">  * 1、`python` 不需要加括号，但是末尾需要加上冒号，表示 `if` 语句开始啦！</span><br><span class="line"></span><br><span class="line">  * 可以压行，不推荐压行</span><br><span class="line"></span><br><span class="line">    ```python</span><br><span class="line">    x = int(input(&quot;Please enter a integer: &quot;))</span><br><span class="line">    if x &lt; 0:</span><br><span class="line">        x = 0</span><br><span class="line">        print(&quot;Negative changed to zero&quot;)</span><br><span class="line">    elif x == 0:</span><br><span class="line">        print(&quot;Zero&quot;)</span><br><span class="line">    elif x == 1:</span><br><span class="line">        print(&quot;Single&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;More&quot;)</span><br></pre></td></tr></table></figure>

![image-20240806173021725](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806173021725.png)
</code></pre>
</li>
<li><p><code>python</code> 中类似三目运算法的表达式</p>
<ul>
<li><p>对的话选左边，错的话选右边</p>
</li>
<li><pre><code class="python">y = &#39;zero&#39; if x == 0 else &quot;not zero&quot;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    ![image-20240806173513348](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806173513348.png)</span><br><span class="line"></span><br><span class="line">* 创建指定类型大小的数组</span><br><span class="line"></span><br><span class="line">  * 语法糖</span><br><span class="line">  * 将  `i` 遍历一遍将 `i` 作为数组的值</span><br><span class="line"></span><br><span class="line">  ```python</span><br><span class="line">  [i for i in range(10)]</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806184545445.png" alt="image-20240806184545445"></p>
<p><strong>注意</strong>使用列表变量创建的时候，会使得十个列表元素指向同一个地址</p>
<p>定义了一个长度为 <code>10</code> 的二维数组，但是你写的时候，二维数组的每一个元素都是 <code>c=[0]</code> ，也就是虽然有十个元素，但是这个十个元素其实指向的是同一个位置，那么这样的话你就是会触发牵一发而动全身的一个问题，你只要改变其中一个值，就会全部变掉，一定要注意这种，一定要避免出现这种 <code>bug</code> 啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806185846715.png" alt="image-20240806185846715"></p>
</li>
<li><p>但是如果大家换一种定义方式，<code>a</code> 每次不是都用 <code>c</code> 了啊！你每次如果都是<strong>自己定义一个</strong>的话，那么这样的话我们改变 <code>a[0][0]</code> ，你会发现他就不会有这个问题</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806190252195.png" alt="image-20240806190252195"></p>
</li>
</ul>
</li>
</ul>
<h4 id="总结一下"><a href="#总结一下" class="headerlink" title="总结一下"></a>总结一下</h4><p>​	这节课，前半节课给大家讲了 <code>django</code> 课的一个概论，啊！后半节课给大家讲了一下 <code>python</code> 的语法，然后希望大家都可以跟下来啊！希望大家都可以跟下来，然后我们啧！最终都可以做出来一个网站啊！做出来一个前后端分离的网站加 <code>app</code> ，好吧！啊！预祝大家学习成功啊！好，大家看一下有没有问题，这个没有问题的话我们就准备下播啦</p>
<p>​	爬虫等的话，目前跟咱们 <code>django</code> 课没什么关系啊！<code>django</code> 里边不讲爬虫啊！大家看一下有没有问题啊！？没有问题的话就准备下播啦！大家课后的时候一定要把 <code>python</code> 好好复习一下啊！我课后会给大家留个，额留五道五道这个这个 <code>python</code> 的语法题，大家在课后的时候再打卡记录里做一下好吧！在打卡记录里做一下好吧！好！那我们这个直播到这里就结束了啊！大家早点休息，咱们这个 <code>python</code> 的话可能会加一节习题课啊！这个 <code>python</code> 语法的话我们在周四讲完之后在 <code>1024</code> 之后把！啊！给大家加一节习题课，把我们课上给大家发的这个布置的题目讲一下啊！会第一节课布置五道题，第二节课再布置五道题，啊！一共将 <code>10</code> 道题好吧！？爬虫的话违法吗？那你要去看一下能不能爬啊！嘿，这个东西有有些东西是违法的，额嗯，爬虫其实，我我我之前没怎么写过啊！啧！对！这种东西的话，因为我还是比较对，还是对开发 <code>app</code> 比较感兴趣，你比如说大家学会咱这 <code>django</code> 课之后啊！你半个月可以开发一个 <code>app</code> ，这是什么样的感觉，对不对！？会会很刺激啊！很爽，啧！好，那么我们这个直播到这里就结束啦！大家早点休息，拜拜！周四再见，拜拜！</p>
<ul>
<li><p><code>for</code> 循环</p>
<ul>
<li><p><code>python</code> 里的 <code>for</code> 循环是有一堆东西，然后一个一个的去枚举，不支持算术运算符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">words = [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;window&#x27;</span>, <span class="string">&#x27;defenestrate&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> words:</span><br><span class="line">    <span class="built_in">print</span>(w)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tel = &#123;<span class="string">&#x27;jack&#x27;</span>: <span class="number">4098</span>, <span class="string">&#x27;sape&#x27;</span>: <span class="number">4139</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> tel:</span><br><span class="line">    <span class="built_in">print</span>(k, tel[k])</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> v,k <span class="keyword">in</span> tel.items():</span><br><span class="line">    <span class="built_in">print</span>(v, k)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>字典不能边遍历边修改</p>
<ul>
<li><p>要想修改需要先将集合深度复制一遍再修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">users = &#123;<span class="string">&#x27;Hans&#x27;</span>:<span class="string">&#x27;active&#x27;</span>, <span class="string">&#x27;Eleonore&#x27;</span>:<span class="string">&#x27;inactive&#x27;</span>, <span class="string">&#x27;景太郎&#x27;</span>: <span class="string">&#x27;active&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> user, status <span class="keyword">in</span> users.copy().items():</span><br><span class="line">    <span class="keyword">if</span> status == <span class="string">&#x27;inactive&#x27;</span>:</span><br><span class="line">        <span class="keyword">del</span> users[user]</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806230939643.png" alt="image-20240806230939643"></p>
</li>
</ul>
</li>
<li><p><code>range</code> 函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240806231439487.png" alt="image-20240806231439487"></p>
</li>
</ul>
</li>
<li><p><code>for else</code></p>
<ul>
<li>使用 <code>flag</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">11</span>):</span><br><span class="line">    flag = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, i):</span><br><span class="line">        <span class="keyword">if</span> i % j == <span class="number">0</span>:</span><br><span class="line">            flag = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> flag:</span><br><span class="line">	    <span class="built_in">print</span>(i, <span class="string">&quot; is a prime&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 <code>for else</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">11</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, i):</span><br><span class="line">        <span class="keyword">if</span> i % j == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">//  i % j == <span class="number">0</span>: 全部不成立执行 <span class="keyword">else</span> 代码块      </span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">    	<span class="built_in">print</span>(i, <span class="string">&quot; is a prime&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>continue</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>pass</code> 不想实现某一个代码块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数定义 默认返回 <code>None</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807085627934.png" alt="image-20240807085627934"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">f(<span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>python</code> 变量的传递都是值传递；数组这里的传递都是引用</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807091501149.png" alt="image-20240807091501149"></p>
</li>
<li><p>函数类型可变</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807091727946.png" alt="image-20240807091727946"></p>
</li>
<li><p>多参数，默认值，必须是最后几个</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807091906173.png" alt="image-20240807091906173"></p>
</li>
<li><p>指定函数的参数名称，使用参数名称赋值</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807092108300.png" alt="image-20240807092108300"></p>
</li>
<li><p>函数赋值，没有指针的概念</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807092153229.png" alt="image-20240807092153229"></p>
</li>
<li><p>函数传递数组作为变量，解包 ——&gt; <code>*</code> 需要跟函数参数个数相同</p>
<p>将数组展开成若干个逗号分开的变量赋给 <code>f</code>，当作函数传递的函数</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807092357517.png" alt="image-20240807092357517"></p>
</li>
<li><p>解包字典 <code>**p</code> 两个星 需要跟函数参数个数相同</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807092744427.png" alt="image-20240807092744427"></p>
</li>
</ul>
</li>
<li><p><code>lambda</code> 表达式 &lt;——&gt; <code>c++</code> 里的匿名函数</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807093245556.png" alt="image-20240807093245556"></p>
</li>
</ul>
<h4 id="5、数据结构"><a href="#5、数据结构" class="headerlink" title="5、数据结构"></a>5、数据结构</h4><p><code>python</code> 中没有 <code>map</code> ，使用字典代替</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a, b = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"><span class="comment"># map 函数返回的是一个迭代器，而不是直接的可打印对象。因此，直接打印 map 对象会显示其内存地址而不是内容。如果你想要输出 map 对象的内容，你需要将其转换为列表或其他可迭代对象。</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>列表 可以修改元素值</p>
<ul>
<li><p>翻转列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.reverse()</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807124920107.png" alt="image-20240807124920107"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">reversed</span>(a)</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807124958759.png" alt="image-20240807124958759"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切片</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807125119539.png" alt="image-20240807125119539"></p>
</li>
<li><p>元素类型可以不一样</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807093518466.png" alt="image-20240807093518466"></p>
</li>
<li><p>将一个元组、集合、字典转换成列表</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807093737461.png" alt="image-20240807093737461"></p>
</li>
<li><p><code>len</code> 、 <code>append</code></p>
<ul>
<li><code>len</code> 求任意数据结构的长度</li>
<li><code>append</code> 向链表末尾添加一个元素</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807093850676.png" alt="image-20240807093850676"></p>
</li>
<li><p>修改链表的时候直接创建一个新的链表</p>
</li>
<li><p>列表推导式</p>
<ul>
<li><p>对序列或可迭代对象中的每个元素应用某种操作，用生成的结果创建新的列表，或用满足特定条件的元素创建子序列</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807094351238.png" alt="image-20240807094351238"></p>
</li>
</ul>
</li>
<li><p>链表一般最多两层，三层的话一般是数据结构设计有问题（机器学习定义三维还是很有可能的）</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807094611890.png" alt="image-20240807094611890"></p>
</li>
</ul>
</li>
<li><p>元组 不能修改元素值，不能增加元素</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807094737138.png" alt="image-20240807094737138"></p>
<ul>
<li>元组定义</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807094816759.png" alt="image-20240807094816759"></p>
<ul>
<li><p>元组解开</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807094920828.png" alt="image-20240807094920828"></p>
</li>
<li><p>使用元组交换两个变量</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807095028280.png" alt="image-20240807095028280"></p>
</li>
<li><p><code>split</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807095247643.png" alt="image-20240807095247643"></p>
</li>
</ul>
</li>
<li><p>集合 对应 <code>c++</code> 里的 <code>set</code>，字典对应 <code>c++</code> 里的 <code>map</code></p>
<p>空的 <code>&#123;&#125;</code> 是字典</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807095643999.png" alt="image-20240807095643999"></p>
<ul>
<li><p>对列表判重，重新生成一个列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># 将去重后的 a 集合作为一个列表的元素</span></span><br><span class="line">a = [<span class="built_in">set</span>(a)]</span><br></pre></td></tr></table></figure>



<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807100021512.png" alt="image-20240807100021512"></p>
</li>
</ul>
</li>
<li><p>字典</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807100533499.png" alt="image-20240807100533499"></p>
<ul>
<li><p>定义字典的格式比较清楚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将字典变成列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span> = &#123;</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&#x27;ada&#x27;</span>: <span class="string">&#x27;1212&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">dict</span>.items():</span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807124355984.png" alt="image-20240807124355984"></p>
</li>
</ul>
</li>
<li><p><code>sorted</code> 排序，不修改原序列的基础上，返回一个重新的序列</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807100729640.png" alt="image-20240807100729640"></p>
<ul>
<li><p><code>list.sort()</code> 修改原数组的值，没有返回值</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807100840677.png" alt="image-20240807100840677"></p>
</li>
</ul>
</li>
<li><p><code>zip</code> 函数</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807124619104.png" alt="image-20240807124619104"></p>
</li>
</ul>
<h4 id="6、模块"><a href="#6、模块" class="headerlink" title="6、模块"></a>6、模块</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807143935352.png" alt="image-20240807143935352"></p>
<p>​	模块这个概念的话是额嗯！就是说我们在去写的时候不可能把所有的内容都写到一个文件里，额啊！你比如大家写项目的时候，啊！嗯！可能写个一千行或者两万行对吧！啊！那么你不可能写到一个文件里，那么这样的话大家就，你这样的话很难调试，对吧！所以我们一般在去写的时候会将我们的内容分拆成若干个模块，啊！放到不同的文件夹里边，对吧！啊！然后~，</p>
<p>​	举个例子啊！</p>
<p>​	比如说我们创建了一个项目，比如叫 <code>python_lesson</code> ，啊！然后我们在 <code>python_lesson</code> 里面开始写啊！比如我们在 <code>python_lesson</code> 里面写了一个第一个模块啊！比如叫 <code>model_1</code> ，哎！然后创建了第二个模块，比如叫 <code>model_2</code> ，好，我们在 <code>model_1</code> 里，我就不再往下创建了，这个这个例子应该差不多了啊！然后啊！我们在 <code>model_1</code> 里，比如创建了一个函数，比比如写了一个 <code>python</code> 文件，比如叫 <code>mode</code> ，比如叫 <code>a</code> 吧！<code>a</code> 啊！<code>model_a.py</code> ，好，然后我们在里面实现了一个函数啊！比如叫这个斐波纳契函数，对吧！直接复制过来啦！偷个懒儿，啊！首先进到我们我们 <code>vim</code> 的，进到 <code>vim</code> 的编辑模式，额嗯！粘贴模式，第一个函数，然后又实现了第二个函数，这两个函数，第一个函数是求斐波那契数列，然后第一个函数的话是直接输出，额啊！第二个函数的话是返回一个斐波纳契列表，好，那比如说，哎！我们把他保存一下，啊！哎！卡了啊！我们稍等一下啊！可能网络不太好，哎！保存上了啊！啊！好！那么我们来看一下这个里边里边有没有问题啊！对吧！？好，那么我们现在文件结构是这样的对不对！？好！那么！</p>
<p>目录结构如下图所示：</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807131441047.png" alt="image-20240807131441047"></p>
<ul>
<li><p>使用 <code>model_1</code> 里的函数  <code>fib()</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807143609894.png" alt="image-20240807143609894"></p>
<ul>
<li><p>为函数起别名 </p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807143907034.png" alt="image-20240807143907034"></p>
</li>
</ul>
</li>
<li><p><code>python</code> 标准模块库</p>
<ul>
<li><p><code>randint</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    a = randint(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="comment"># 左闭右闭</span></span><br><span class="line">    <span class="keyword">if</span> a == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="7、字符串格式化"><a href="#7、字符串格式化" class="headerlink" title="7、字符串格式化"></a>7、字符串格式化</h4><ul>
<li><p>基本上 <code>c++</code> 格式化字符串的方式 <code>python</code> 都可以用</p>
<ul>
<li><pre><code class="python">s = &#39;%04d %.2f %s&#39; % (1, 2, 3)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  ![image-20240807191302002](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807191302002.png)</span><br><span class="line"></span><br><span class="line">##### 读写文件</span><br><span class="line"></span><br><span class="line">* 写文件：</span><br><span class="line"></span><br><span class="line">  * 直接打开文件，使用文件句柄进行操作，写入内容</span><br><span class="line"></span><br><span class="line">    ```python</span><br><span class="line">    fout = open(&quot;test.txt&quot;, &#x27;w&#x27;)</span><br><span class="line">    fout.write(&quot;111\n&quot;)</span><br><span class="line">    for i in range(10):</span><br><span class="line">        fout.write(str(1) + &#x27;\n&#x27;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807193725143.png" alt="image-20240807193725143"></p>
<ul>
<li><p><code>with</code> 打开文件并写文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;text.txt&quot;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> fout:</span><br><span class="line">    fout.write(<span class="string">&#x27;111\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        fout.write(<span class="built_in">str</span>(i) + <span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807194223277.png" alt="image-20240807194223277"></p>
</li>
</ul>
</li>
<li><p>读文件</p>
<ul>
<li><p>使用 <code>with</code> 比较好</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取整个文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;text.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fin:</span><br><span class="line">    <span class="built_in">print</span>(fin.read())</span><br><span class="line"><span class="comment"># 一行一行读取</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;text.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fin:</span><br><span class="line">    <span class="built_in">print</span>(fin.readlines())</span><br><span class="line"><span class="comment"># fin 句柄可以迭代，末尾以换行结束</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;text.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fin:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fin:</span><br><span class="line">        <span class="built_in">print</span>(line, end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807195144471.png" alt="image-20240807195144471"></p>
</li>
</ul>
</li>
</ul>
<h4 id="8、异常处理"><a href="#8、异常处理" class="headerlink" title="8、异常处理"></a>8、异常处理</h4><ul>
<li><p>1、这是一个，一个最简单的形式，也是我这个在，咱们在写网站的时候最常写的一个代码块啊！这个代码块的作用是啥呢？就是你比如说，有些时候大家打开 <code>acwing</code> ，你会发现 <code>502</code> 错误！对吧！啊！<del>，<code>502</code>错误就是你程序发生，就我就程序发生了异常啊！那么你如果不想让用户看到 <code>502</code> 错误的话，他一旦发生异常，哎！在这里直接把异常捕获掉，他就不会出现 <code>502</code> 了，啊！可以吧！你可以跳到一个 <code>404</code> 页面，啊！好，我们来试一下啊！<code>divide</code> 这个除法的话如果除零的话会发生一个异常大家知道了吧！除零的话会发生一个这个这个异常啊！异常的话叫 <code>zero division error</code> ，除零错误，啊！除零的话是操作系统级别的一个中断，啊！级别非常高，大家不要感觉他是一个数学概念啊！他是一个操作系统级别的一个中断，啊！非常牛逼的一个中断啊！然后，<code>divide</code> 好！比如说我们哎！出现了除零错误，那么我们会发现我们执行的是这句话对吧！啊！这个意思就是说如果我 <code>try</code> 里面这个代码段发生了异常的话啊！我就直接输出这段内容，然后程序不报错，大家看到没！，程序没有报错对吧！啊！如果我们直接除零的话，会发现程序报错了，啊！这时候你代码就结束了，啊！后面东西就不执行了，啊！然后如果你把这个异常捕获掉的话他就还会继续执行，啊！就是这段代码如果发生错误啦！啊！我们一般在去写这个网站的时候啊！大家都要把自己代码框起来，通过 <code>try</code> 和 <code>except</code> 框起来，因为你比如说这个用户访问访问了一个非法数据，在查数据库的时候访问了一个不存在的数据，他会给你抛个异常对吧！啊！你要把他自己拿到，你不拿到的话，给用户看到就 <code>502</code> ，啊！额嗯吭！拿到了，对不对！？然后如果没有除零错误的话，比如 <code>1/1</code> 对吧！那就没有任何问题，啊！这是我们最常用的一个，两个东西啊！然后这两东西的话还有额外的一些信息啊！比如说我们还有一个 <code>else</code> ，<code>else</code> 是啥，<code>else</code> 是说如果这段代码没有发生异常的话，他就不会执行这句话，对吧！那我们可以执行 <code>else</code> 这句话，那么 <code>else</code> 的话我们可以执行的是 <code>result is res</code> 这样的话是说，我如果发生异常了会执行这句话，如果不发生异常会执行第二句话，我们来试一下，不发生异常执行第二句话，对吧！<code>result is 1.0</code> ，如果发生异常的话执行第一句话 <code>division by zero</code> ，还有一个额外信息啊！叫 <code>finally</code> ，<code>finally</code> 的意思就是说我不管有没有发生异常我都一定会执行这句话，啊！就是我不管有没有发生异常，我都会执行这句话，这是 <code>finally</code> ，何恩何恩，他一般用来关闭数据库啥的，你不管查询数据库有没有发生异常你都要去关闭数据库对吧！啊！否则的话，否则的话会内存泄漏啊！啧嗯</del>，额嗯对！把这抄过来啊！大家可以试一下啊！你比如说啊！比如说这个哎！没有发生异常那么会执行这句话，对不对！如果发生异常了，哎！也会执行这句话，那么这就是大家，异常的话目前只要掌握到这个程度就可以啦！啧！对！很精简对吧！所以 <code>python</code> 很好学啊！大家如果把前面这些都看到看完的话，你会感觉很头晕啊！  后面大家可以作为课外读物去看，现在可以先跳过好，然后第九章是类啊！ </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">divide</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        res = x / y</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(e))</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="9、class-对象"><a href="#9、class-对象" class="headerlink" title="9、class 对象"></a>9、class 对象</h4><ul>
<li><p>类静态变量——所有对象共用一个变量</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807203615601.png" alt="image-20240807203615601"></p>
</li>
<li><p>非静态变量</p>
<ul>
<li>定义成员变量</li>
</ul>
<p>​	构造函数第一个，一定要加一个参数名啊！一定要加这个 <code>self</code> ，这个是很多同学写 <code>python</code> 的时候忘记加的一个东西啊！好，那么在 <code>self</code> 函数里边，这个这个函数里边，这个函数就是说我在去创造这个类的时候，他就会默认执行这个函数，比如我们执行一下这个函数，什么 <code>created</code> 的把！好，然后，我们可以在这个函数里，这里可能有同学会问，那这个 <code>python</code> 里怎么定义自己啊！自己的这个成员函数，成员变量啊！你看 <code>c++</code> 定义成员变量的时候一开始定义到函数外面，对吧！<code>python</code> 里是定义到函数里边的啊！就是哎！我在我想定义一个成员变量就是 <code>self.a = []</code> ，我们的，等于什么呢？等于个等于个这个这个数组，对吧！好！我们再定义一下 <code>Car()</code> 啊！<code>b = Car()</code> ，好，大家会发现定义，在去构造我们的额嗯！咱们的这个对象，这个类对象的时候，他就会调用这个函数对吧！好！那么 <code>a</code> 里面有一个 <code>a</code> ，那么 <code>a.a.append</code> 一个 <code>1</code> ，然后 <code>b.a.append</code> 一个 <code>2</code> ，好，那么我们来看一下， <code>a.a</code> 的话是 <code>1</code> ，<code>b.a</code> 的话是 <code>2</code> ，</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807212025148.png" alt="image-20240807212025148"></p>
<p>​	大家会发现如果我是这样去定义的 <code>self.a</code> 的话，他每一个对象是自己独有的一个变量，而不是公共变量，<code>self</code> 的话是 <code>python</code> 里的一个关键字，你可以认为就是我对象内部的东西，啊！<code>self.</code> <code>self</code> <code>self</code> 就表示 <code>c++</code> 的 <code>this</code> ，啊！对象内的东西，就这个类本身，这个对象本身可能会更加合适一些啊！ 咳嗯！可以吧！啧！而且 <code>python</code> 的类其实非常灵活，你比如说定义一个 <code>a.x = 5</code> </p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807212143710.png" alt="image-20240807212143710"></p>
<ul>
<li>定义成员函数</li>
</ul>
<p>​	啊！嗯哼哈！大家大家可以发现这个 <code>python</code> 的话你不用显示的去定义他所有成员变量啊！这个 <code>a</code> 这个 <code>a</code> 的话是一个 <code>Car</code> 类型，是一个 <code>Car</code> 类型的一个对象，对吧！<code>Car</code> 类的一个对象啊！然后，<code>Car</code> 类对象里没有 <code>x</code> 这个变量，对吧！我们可以给他赋值，我们可以给他赋赋一个 <code>x</code> ，所以这个 <code>python</code> 的话就很随意，没有可以可以在你生成完再定义，这在 <code>c++</code> 是不可想象的，对吧！你 <code>c++</code> 的话，你一定要先把他定义好，只有定义了才可以用，<code>python</code> 不需要啊！啧！嗯！吭！好啊！然后，这个 <code>python</code> 的话也可以定义一些成员函数啊！比如我们可以定义一个成员函数啊！叫什么呢？比如叫 <code>update</code> 啊！叫 <code>update</code> 、这里 <code>update</code> 的的话也要加 <code>self</code> ，所有的成员内部的函数都要加一个 <code>self</code> 啊！好，然后，比如 <code>update</code> 的话我们要干嘛呢？是将 <code>a</code> 里所有元素比如乘乘个 <code>2</code> ，那就是 <code>for i in range(len(self.a))</code> ，注意啊！是 <code>self.a</code> ，而不是 <code>a</code> 啊！然后 <code>self.a[i] * = 2</code> ，可以吧！那么定义一个 <code>Car()</code> 啊！然后比如说 <code>a.a.append</code> 的一个，比如说 <code>a.a</code> 加上一段数组啊！<code>[1, 2, 3]</code>  ，那么 <code>a.a</code> 的话就是 <code>[1, 2, 3]</code> 对吧！那么我们可以 <code>update</code> 一下，那么 <code>a.a</code> 就变成了 <code>[2, 4, 6]</code> </p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807212527358.png" alt="image-20240807212527358"></p>
<p>​	啊！啧！嗯~！对啊！额嗯！额吭！啧！然后，可以吧！同学们，是不是很随意，<code>python</code> 的话很随意，而且很好用啊！额嗯，这是我们的这个 <code>Car</code> ，啊！当然，我们在去定义一个函数的时候啊！定义一个类的时候，你可以，啊！这里，构造函数里可以传参数的，比如可以传 <code>2, 3</code> ，可可以传 <code>x, y</code> 对吧！那么我们 <code>x, y</code> 的话就是我们在构造的时候可以直接将 <code>x, y</code> 放到我们的 <code>a</code> 里，<code>a</code> 的话我们直接哎！<code>Car()</code> ，这样就不对了对吧！因为我们需要两个参数啊！好那么就可以 <code>1, 2</code> ，这样的话我们相当于是在构造的时候就把 <code>1</code> 和 <code>2</code> 放进去了，对吧！啊！额嗯！然后，我们来试一下能不能用这种哎比如说这个 <code>y=1, x=2</code> ，看看能不能这样这样的方式来定义啊！哎！这样也可以对吧！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807212833905.png" alt="image-20240807212833905"></p>
<p>大家可以发现这个咳嗯！啧！大家可以把这个类完全当成一个函数来用，对吧！啊！完全当做一个函数来用，啊！然后 <code>a= [1, 2]</code> ，然后我们可以试一下啊！应该也可以用解包的方式来给他赋值啊！果然，对吧！啊！所以大家发现定义完 <code>class</code> 之后啊！用法跟函数完全一样，对不对！？啊！额吭！好，那这是我们 <code>python</code> 的一个类啊！ </p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807213038186.png" alt="image-20240807213038186"></p>
<p>​	<code>python</code> 类的话也是可以继承的啊！比如说我们额嗯！咱们这个这个定义一个什么呢？定义一个交通工具吧！啊！我们 <code>class</code> 额嗯，交通工具比如咱们就叫工具吧！<code>Tool</code>, 那么怎么继承一个类呢？就是 <code>Car</code> 就可以了啊！这样就可以定义类了啊！非常的简单对吧！然后我们这个交通工具的话也可以去构造一个哎！一个构造函数 <code>init</code> ，一定要加一个 <code>self</code> ，<code>print</code> <code>print</code> 那这个叫 <code>create tool</code> ，好，然后，我们构造一个 <code>tool</code> 啊！<code>t</code> 就等于 <code>Tool</code> 啊！那么 <code>t</code> 的话应该有个 <code>a</code> ，对吧！<code>t.a</code> ，哎！怎么没有 <code>a</code> 啊！额！不知道为啥没有 <code>a</code> 啊！这个我们来试一下啊！可能使我们的，啧！可能是我们的这个基类的构造函数没有调用，对吧！我们调用一下啊！哎！<code>1, 2</code> ，<code>t = Tool()</code> ，哎！啊！我们可以发现，哦！对！我们可以发现他这个 <code>python</code> 一个很好玩的一个性质啊！就是我们可以继承一个 <code>Car</code> ，但是可以他可以，他如果不调用基类的构造函数的话，啊！他就真的，他就真的不会把这个基类构造出来，对吧！啊！只有我们显式的调用这个构造函数，他才会真的执行这个构造函数，嗯！他会构造出来，但他不会执行这个构造函数，对吧！啊！只有我们显式的去调用基类的构造函数，<code>python</code> 的类里面有个 <code>super</code> 啊！<code>super</code> 的话是找到他的基类，这是调用基类的构造函数他就会把基类的构造函数调用一遍，啊！啧！好！这是我们的一个 <code>python</code> ，不过大家不太不太不太需要管这块啊！这块还是比较复杂的，不太需要管这块，我们在去写 <code>django</code> 的时候啊！只会用到你只要把基类放到括号里，剩下的，剩下的内容就跟基类无关了啊！就是，这是 <code>python</code> <code>django</code> ，这是经过我这么多年研研究 <code>django</code> 的一个结论啊！是这样的啊！而且其实我们后面给大家讲 <code>django</code> 的时候啊！<code>django</code> 里的很多特性啊！也是坑，倒也并不是说他没用，啧！就是因为我写到很后我才发现那个东西确实可以用，但是不如自己写，对！很麻烦啊！嗯！咱们这节课给大家讲的时候我已经给大家删啦！好吭嗯！嗯！啊！嗯！这样的话类也讲完啦！继承也将完啦！对吧！迭代器这个不用看啊！生成器也可以不用看，生成表达式也可以不用看！好！至此的话我们给大家把所有 <code>python</code> 语法讲完啦啊！就是大家只要把我们上课给大家讲的知识点看完就可以啦，他这个讲道理的话他这个整个的 <code>python</code> 版的简易版文档也非常多非常长，大家有些东西都可以不用看！然后只用把我们上课讲的内容看完就可以啦！然后我们这节课讲完之后课后我再给大家布置五道新的习题啊！大家课后把这些习题做一下啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807223242098.png" alt="image-20240807223242098"></p>
</li>
</ul>
<h4 id="AcWing-生态之-AC-Terminal"><a href="#AcWing-生态之-AC-Terminal" class="headerlink" title="AcWing 生态之 AC Terminal"></a><code>AcWing</code> 生态之 <code>AC Terminal</code></h4><p><code>AcWing</code> 服务器啊！大概率是可以永久给大家用的啊！永久给大家免费用这个咱们的这个 <code>AC Terminal</code> 服务器，啊！为什么呢？因为 <code>AC Terminal</code> 就是未来大家开发咱们云端 <code>AcWing</code> 云端应用，<code>AcWing</code> 云端应用的一个窗口啊！相当于是进入 <code>AcWing</code> 大门的一个一个门口，一个大门对吧！大门是不能收费的啊！是我们 <code>AcWing</code> 生态的一部分，所以这个咱们 <code>AC Terminal</code> ，大概率，大概率是会给大家永久免费的啊！啧！啊！这里这里有同学有问题啊！我们一块来看一下啊！这位同学的问题是：</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240807223912352.png" alt="image-20240807223912352"></p>
<p>对了 <code>y</code> 总，一直有一个疑惑，就是 <code>python</code> 解释器在解释到当前这行代码的时候，其变量的内存空间会不会创建呢？一直有一点他的内存的创建就还是说预处理才使用使用才定义呢？使用到才定义啊！如果没有猜错的话（<img src="C:\Users\20344\AppData\Local\Temp\SGPicFaceTpBq\27112\07F1228B.png" alt="07F1228B">)，这个我也不太了解，我也没有调研过啊！大家如果感兴趣的话可以自己查一查啊！啧！好！咳嗯！然后我们来看一下第 <code>608</code> 题啊！正好讲讲怎么来打卡啊！啧！嗯！</p>
<h4 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h4><ul>
<li><p>608、差</p>
<ul>
<li><pre><code class="python">a = int(input().split())
b = int(input().split())
c = int(input().split())
d = int(input().split())
print(&quot;DIFERENCA = %d&quot; % (a * b - c * d))
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 665、倍数</span><br><span class="line"></span><br><span class="line">  * 读入的话是读入一整行，那怎么将一整行分成两个数呢？`input()` 是返回一个字符串对吧！啊！`.split(&#x27; &#x27;)` ，空格隔开的两个整数（默认空格隔开），那么这样的话我们 `a` 和 `b` ，都是字符串，而不是整数，怎么办呢？`python` 里有一个，`python` 里有一个啊！`map` 函数，`map` 函数的话是可以将一个一堆东西同，分别操作一下每一个函数，我们是可以将后面这两个东西啊！这玩意儿，这东西用空格分隔开之后会变成两个元素 `6` 和 `24` 字符串，将这两个元素操作一下 `int` 数函数，这个 `int` 是一个函数，他不是一个变量，在 `python` 里边的话 `int` 是一个函数，表示将一堆东西变成 `int` 啊！那么这个意思就是说将后面的内容每一块、每一项分别用 `int` 操作一下，然后赋给 `a` 和 `b` ，那这样的话 `a` 和 `b` 就是两个整数了啊！</span><br><span class="line"></span><br><span class="line">    ```python</span><br><span class="line">    a,b = input().split()</span><br><span class="line">    # 然后判断一下啊，如果说 a % b == 0 或者 b % a == 0 输出 print(“扫码忒跑死”)，对吧！否则输出闹扫码忒跑死，调试一下</span><br><span class="line">    # 好，提交一下，好，那么，这样就过掉了，大家看一下有没有问题啊！没有问题的话打一个一</span><br><span class="line">    if a % b == 0 or b % a == 0:</span><br><span class="line">        print(&quot;Sao Multiplos&quot;)</span><br><span class="line">    else:</span><br><span class="line">    	print(&quot;Nao Sao Multiplos&quot;)</span><br><span class="line">    # 然后给大家把代码存一下，大家课后的时候可以过来参考一下啊！</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>这个 <code>python</code> 代码确实短，比如大家可以看到我之前写的 <code>c++</code> 代码，对吧！额嗯！<code>c++</code> 代码的话也不长啊哈！（<img src="C:\Users\20344\AppData\Local\Temp\SGPicFaceTpBq\27112\0804FEC5.png" alt="0804FEC5">)<img src="C:\Users\20344\AppData\Local\Temp\SGPicFaceTpBq\27112\0805948D.png" alt="0805948D">，这个这个题差不多</p>
</li>
</ul>
</li>
<li><p>670、动物</p>
<ul>
<li><p>好，然后我们来看一下第三题啊！第三题的话是动物，额，这个题的话就是一堆判断了啊！我们要根据上表啊！输入包含三个单词啊！每行一个啊！用以识别动物啊！然后单词用，单词由小写字母构成，然后我们要输出一下每一个动物的标志，每一个动物的名称，这大家就一个一个判断，首先判断第一个是内一个，是哪一个的话就进哪一个分支就可以了啊！那么这个题主要是判断大家的，主要是判断大家的 <code>if else</code> 的熟练，使用的熟练度啊！当然了这个题有很多种实现方式额嗯，大家可以最好用这个这个，额额什么呢？最好用 <code>if else</code> 实现一下，这样可以锻炼 <code>if else</code> 的写法啊！</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">input</span>()</span><br><span class="line">b = <span class="built_in">input</span>()</span><br><span class="line">c = <span class="built_in">input</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a == <span class="string">&quot;vertebrado&quot;</span>:</span><br><span class="line">    <span class="keyword">if</span> b == <span class="string">&quot;ave&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">&quot;carnivoro&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;aguia&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> c == <span class="string">&quot;onivoro&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;pomba&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> b == <span class="string">&quot;mamifero&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">&quot;onivoro&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;homem&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> c == <span class="string">&quot;herbivoro&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;vaca&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> a == <span class="string">&quot;invertebrado&quot;</span>:</span><br><span class="line">    <span class="keyword">if</span> b == <span class="string">&quot;inseto&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">&quot;hematofago&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;pulga&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> c == <span class="string">&quot;herbivoro&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;lagarta&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> b == <span class="string">&quot;anelideo&quot;</span>:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">&quot;hematofago&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;sanguessuga&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> c == <span class="string">&quot;onivoro&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;minhoca&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>哎<del>，我们今天讲完之后还是再给大家去，这应该是西班牙语把！我不太清楚啊！会再给大家布置五道新题啊！我们上次的五道题主要是锻炼了大家的这个判断，判断还有列表，啊！这次的五道题给大家会这个考察大家的一个循环，然后数组，好，然后，来看一下第三题啊！（由于第三题比较麻烦，所以将第四题说成了第三题），第三题是零食这个题，商店有五种零食，然后编号一到五，然后价格分别是，第一个价格是四四四块，第二个价格是四块五，五块，两块，一块五，然后给定某种的编号和数量，请你计算一下总价值啊！额嗯！这题的话可以用判断来实现，也可以用数组来实现，对吧！啊！我们来看一下怎么用数组来实现啊！啧！首先读入两个整数啊！<code>x, y</code> ，那么 <code>x, y</code> 就应该等于 <code>map(int, input().split(&#39; &#39;))</code> ， <code>map</code> <code>int</code> 然后 <code>input.split</code> ，空格，好，然后</del>这里的话我们要判断一下啊！根据 <code>x</code> 来判断 <code>x</code> 是一的话是第一个数，<code>2</code> 的话第二个数，那么这里的话我们可以用一个列表来实现啊！价格的话可以用 <code>price</code> ，<code>prices = </code> 啧！第零个位置没有用过对吧！所以用零来表示占位符，然后第一，后面的话分别是四块，四点五块，五块，两块，一点五块，额（要打嗝），直接输出就可以啦！输出的话用格式化输出，啧！这是保留两位小数，所以是 <code>%.2f</code> ，好，百分百好，应该是 <code>prices[x]</code> 乘以一个 <code>y</code> 啊！然后来调试一下，十块对吧！提交一下！啧！那么这样的话就过掉了，大家看一下有没有问题啊！这里应该也可以用 <code>lf</code> 吧，不太清楚啊！试一下！可以用，对吧！啊！所以 <code>python</code> 真的短啊！只要三行啊！葡萄牙语，刚才那是葡萄牙语，大家看一下有没有问题啊！啧！大家基本上把咱们额给大家布置的十道题都做一遍你这个 <code>python</code> 就学会了啊！当然你在做的时候要边写边查啊！因为大家只停一次课的话肯定有很多，很多的细节你掌握的不是很清楚，但是你查一查就好了，好，我们来看一下第五题，第五题的话是字符串长度，然后，由于 <code>python</code> 的 <code>input</code> 直接输入的就是一行啊！所以这题非常简单啊！直接输出，直接是吧 <code>input</code> 长度输出就可以了，调试一下，提交一下。好，那么这样就过掉了，大家看一下有没有问题啊！没有问题的话打一个一啊！对，最后一题，最后一题考察的是字符串，嗯！啧！<code>split</code> 里面也可以省略空格，应该也可以，<code>split</code> 要是没有参数的话，默认是用空格隔开的，我们可以来试一下啊！对！大家学，对！哎！对！大家学 <code>python</code> 的话不用在黑框里学啊！在 <code>acwing</code> 这里学也可以的啊！其实，比如说我们可以试一下这个，对吧！那我们可以直接输出啊！<code>s.split()</code> ，我们什么也不加的话，那么我们会发现他默认按照空格隔开的，对吧！好，这样的话，我们这节课的内容就讲完啦！大家看一下有没有问题啊！没有问题的话打一个一啊！额嗯！我们这节课讲完之后会给大家再布置五道新题啊！大家最好做一做啊！然后明天的话是开始正式讲我们的 <code>django</code> 课，第一节课没什么内容啊！明天第一节课就是带着大家去把项目创建出来啊！然后让你能在你的服务器上运行起来，并且可以在自己的浏览器里，啧！啊！输入一串网址，然后可以打开你的页面，这就是我们明天的任务，好吧！啊！明天不讲那么多内容的原因也是因为咱们还有还有很多同学还没有额嗯搞定服务器这块，对吧！所以再给大家一周的时间，再给大家一周末的时间把服务器搞出来啊！啧！对！我们下周二的话是十一月二号，对吧！啊！啧！然后，我也会去这个阿里云上看一下，阿里云好像有一些福利活动啊！好像好像这个可以给大家做一些返现啊！阿里云上给大家做一些返现不过他内个返现其实力度不大，嗯哼！最多每位同学好像返现六十块，啊！基本上等于没返，对吧！因为大家学生时代去租云服务器的话本身他已经打了 <code>0.9</code> 折了啊！打了 <code>1</code> 折了，对不对？！啊！所以返六十块区别不是太大，啧！不需要预习，不需要预习，好，我们这个直播到这里就结束啦！大家一定要跟上进度我们从下周开始进入正课啦，前面都是打铺垫，前面都是打铺垫啊！大家没有搞定服务器的同学抓紧时间啦！额嗯学生学生时代一定要搞搞服务器，因为学生学生时代搞服务器非常便宜啊！啧！我们明天就开始讲 <code>django</code> 了啊！明天的话就会用到 <code>django</code> 了，啊！所以大家今天晚上，明天讲课之前争取先把服务器搞定，同学们，对！争取先把学生机搞定，啊！把这个服务器搞定，啊！那其实其实福利要不要无所谓，时间成本比较重要啊！大家以后工作之后，每天的工资都好几百，啊哈！对吧！啊！服务器没多少钱，啧！对！然后，包括你像 <code>acwing</code> 给大家提供了一个永久的，大概率永久免费的服务器对吧！好！那么我们今天的直播到这里就结束啦！然后，大家早点休息，拜拜！明晚见，啊！明晚见！</p>
</li>
</ul>
<h4 id="习题课"><a href="#习题课" class="headerlink" title="习题课"></a>习题课</h4></li>
</ul>
<h3 id="2-配置docker、git环境与项目创建"><a href="#2-配置docker、git环境与项目创建" class="headerlink" title="2  配置docker、git环境与项目创建"></a>2  配置docker、git环境与项目创建</h3><h4 id="三种模式"><a href="#三种模式" class="headerlink" title="三种模式"></a>三种模式</h4><p>写菜单页面，单机模式——人机对战，<code>p</code>vp ——多人匹配，好友对战——好友之间组成一局去匹配</p>
<ul>
<li>人机对战</li>
<li>多人匹配</li>
<li>好友对战<ul>
<li>当然稍微会做的复杂一些啊！你比如说我们有两个好友，就，当然咱们做的时候可能不会做的那么复杂，你比如说这个其实匹配模式跟好友对战应该是放到一块的对吧！因为你比如说一句对战里有四位同学啊！那么我跟好友占两个人，然后两个人可以一块匹配，按理来说，应该做成这样啊！但是我们在写的时候可能没有那么复杂。</li>
</ul>
</li>
</ul>
<p>然后我们本周的这个目标的话是写菜单页面，还有我们的人机对战的一个界面，好吧！啊！这个，当然本周不一定能写完啊！因为人机对战的话还需要写一些 <code>AI</code> ，对不对！？比较麻烦一些啊！啧！嗯！用啥做，还是在我们的 <code>django</code> 里去完善啊！还是在我们的 <code>django</code> 里去完善啊！然后我们目前用的 <code>http</code> 协议，主要是练习一下怎么用 <code>pyhon</code> 去写函数，怎么用 <code>python</code> 写路由，写界面，以及前端怎么去操作，啊！</p>
<p>主题写菜单页面以及人机对战——需要写一些 <code>AI</code> ，写一些电脑的一个操作 <code>AI</code> </p>
<h4 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h4><p><code>django</code> 不需要配置虚拟环境了，因为我们本来就是在 <code>docker</code> 里写的，<code>docker</code> 里已经是一个虚拟环境了，虚拟环境里再配虚拟环境的话没有必要</p>
<h5 id="指定与云服务器的映射端口，然后运行容器-django-lesson-1-0"><a href="#指定与云服务器的映射端口，然后运行容器-django-lesson-1-0" class="headerlink" title="指定与云服务器的映射端口，然后运行容器 django_lesson:1.0"></a>指定与云服务器的映射端口，然后运行容器 <code>django_lesson:1.0</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 20000:22 -p 8000:8000 --name django_server -itd django_lesson:1.0</span><br></pre></td></tr></table></figure>

<h5 id="进入容器，添加用户-acs，给用户-acs-赋予-sudo-权限"><a href="#进入容器，添加用户-acs，给用户-acs-赋予-sudo-权限" class="headerlink" title="进入容器，添加用户 acs，给用户 acs 赋予 sudo 权限"></a>进入容器，添加用户 <code>acs</code>，给用户 <code>acs</code> 赋予 <code>sudo</code> 权限</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240808095600487.png" alt="image-20240808095600487"></p>
<ul>
<li>挂起容器：先按 <code>ctrl + p</code> ，再按 <code>ctrl + q</code></li>
</ul>
<h5 id="怎么给容器开放其他的端口"><a href="#怎么给容器开放其他的端口" class="headerlink" title="怎么给容器开放其他的端口"></a>怎么给容器开放其他的端口</h5><p>绕一步</p>
<p>先将容器 <code>commit</code> 成一个镜像，然后重新生成一个新的容器</p>
<h5 id="ssh-登录到容器"><a href="#ssh-登录到容器" class="headerlink" title="ssh 登录到容器"></a>ssh 登录到容器</h5><p><code>ctrl d</code> 退出 <code>ssh</code> 连接</p>
<h5 id="配置服务器上的容器的免密登录"><a href="#配置服务器上的容器的免密登录" class="headerlink" title="配置服务器上的容器的免密登录"></a>配置服务器上的容器的免密登录</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240808111732646.png" alt="image-20240808111732646"></p>
<h5 id="配置-vim-shell-tmux"><a href="#配置-vim-shell-tmux" class="headerlink" title="配置 vim shell tmux"></a>配置 <code>vim</code> <code>shell</code> <code>tmux</code></h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240808112014826.png" alt="image-20240808112014826"> </p>
<h3 id="学算法的话大部分精力都在思考上，写工程的话大部分精力在于怎么能让项目跑起来，只要能跑起来的话，大家就已经成功一半了"><a href="#学算法的话大部分精力都在思考上，写工程的话大部分精力在于怎么能让项目跑起来，只要能跑起来的话，大家就已经成功一半了" class="headerlink" title="学算法的话大部分精力都在思考上，写工程的话大部分精力在于怎么能让项目跑起来，只要能跑起来的话，大家就已经成功一半了"></a>学算法的话大部分精力都在思考上，写工程的话大部分精力在于怎么能让项目跑起来，只要能跑起来的话，大家就已经成功一半了</h3><ul>
<li><p>创建项目</p>
<ul>
<li><pre><code class="shell">django-admin startproject acapp
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![image-20240808112625815](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240808112625815.png)</span><br><span class="line"></span><br><span class="line">* 配置 `git`</span><br><span class="line">  * `git` 其实是用 `ssh` 实现的，所以 `git` 传文件的时候也要有一个 `key` </span><br><span class="line">  * 在自己的项目里生成一个 `ssh`</span><br><span class="line">  * `git` 就是在 `ssh` 的基础上搭建的，需要将本地的秘钥传到 `acgit` 上</span><br><span class="line">  * `git` 就是在本地打包，然后通过基于 `scp` 的 `git push` 传到云端，云端相当于备份</span><br><span class="line"></span><br><span class="line">### `django` 基础知识</span><br><span class="line"></span><br><span class="line">这两条命令用于 Django 框架中的数据库迁移。</span><br><span class="line"></span><br><span class="line">1. `python manage.py makemigrations`：生成数据库迁移文件。这一步会检查你的模型变化，并创建相应的迁移文件。</span><br><span class="line"></span><br><span class="line">2. `python manage.py migrate`：应用迁移文件到数据库，更新数据库结构以反映模型的变化。</span><br><span class="line"></span><br><span class="line">简而言之，第一条命令用于准备迁移，第二条命令执行迁移。</span><br><span class="line"></span><br><span class="line">#### wsgi</span><br><span class="line"></span><br><span class="line">WSGI 服务器是 Web 服务器网关接口（Web Server Gateway Interface）的缩写。它是一种 Python Web 应用程序和服务器之间的标准接口，使得二者能够高效地交互。WSGI 服务器的主要功能是接收来自客户端的请求，将请求传递给相应的 Python 应用程序，并将应用程序的响应返回给客户端。常见的 WSGI 服务器有 uWSGI、Gunicorn 和 Waitress。通过使用 WSGI，可以实现 Python Web 应用的可移植性和灵活性。</span><br><span class="line"></span><br><span class="line">#### asgi</span><br><span class="line"></span><br><span class="line">ASGI（Asynchronous Server Gateway Interface）是一种用于 Python 的 Web 服务器接口标准，旨在支持异步编程。它允许 Python Web 应用程序与服务器之间进行更加高效的通信，支持长连接和实时功能，如 WebSocket。ASGI 是 WSGI（Web Server Gateway Interface）的一个升级，适用于需要处理大量并发连接的场景。</span><br><span class="line"></span><br><span class="line">#### SPA</span><br><span class="line"></span><br><span class="line">“SPA 传达服务器上”可以理解为“在服务器上传递单页面应用（SPA）”。这里的“SPA”指的是单页面应用，它是一种网页应用，通过动态加载内容来提高用户体验。在服务器上传达与SPA相关的信息，意味着在服务器端处理和提供必要的数据和资源，以支持前端的单页面应用。</span><br><span class="line"></span><br><span class="line">#### django.contrib.staticfiles</span><br><span class="line"></span><br><span class="line">`django.contrib.staticfiles`是Django框架中的一个应用，用于处理静态文件。静态文件是指不需要经过服务器端处理的文件，例如CSS、JavaScript和图片等。这个模块提供了一系列工具和命令，帮助开发者管理、收集和服务这些静态文件，使得在开发和生产环境中都能够方便地使用和部署它们。通过这个模块，开发者可以轻松地配置静态文件的存放位置和访问方式。</span><br><span class="line"></span><br><span class="line">它提供了以下功能：</span><br><span class="line"></span><br><span class="line">1. **静态文件查找**：可以轻松查找项目中的静态文件。</span><br><span class="line">2. **收集静态文件**：通过 `collectstatic` 命令，将所有应用的静态文件收集到一个指定的目录，便于在生产环境中部署。</span><br><span class="line">3. **模板标签**：提供模板标签，如 `&#123;% static %&#125;`，方便在 HTML 模板中引用静态文件。</span><br><span class="line"></span><br><span class="line">##### 提供模板标签，如 &#123;% static %&#125; 是什么怎么用</span><br><span class="line"></span><br><span class="line">`&#123;% static %&#125;` 是 Django 中用于引用静态文件的模板标签。它简化了在 HTML 模板中添加静态文件的过程，无论这些文件的位置如何变化，使用该标签都可以确保正确的路径被生成。</span><br><span class="line"></span><br><span class="line">* 使用方法：</span><br><span class="line"></span><br><span class="line">  1. **加载静态文件库**：在使用 `&#123;% static %&#125;` 标签之前，首先需要在模板的顶部加载静态文件库：</span><br><span class="line"></span><br><span class="line">     ```django</span><br><span class="line">     &#123;% load static %&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li><p><strong>引用静态文件</strong>：使用 <code>&#123;% static %&#125;</code> 标签引用静态文件。该标签内接受一个文件路径作为参数，例如：</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;</span></span></span><span class="template-tag">&#123;% <span class="name"><span class="name">static</span></span> &#x27;css/styles.css&#x27; %&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;</span></span></span><span class="template-tag">&#123;% <span class="name"><span class="name">static</span></span> &#x27;js/scripts.js&#x27; %&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;</span></span></span><span class="template-tag">&#123;% <span class="name"><span class="name">static</span></span> &#x27;images/logo.png&#x27; %&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Logo&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>注意事项：</p>
<ul>
<li><p>文件路径是相对于你项目的静态文件目录（通常是在 <code>STATICFILES_DIRS</code> 或 <code>STATIC_ROOT</code> 中配置的目录）。</p>
</li>
<li><p>在开发模式下，Django 会自动从应用的 <code>static</code> 目录提供这些静态文件，而在生产环境中，需要使用 <code>collectstatic</code> 命令将静态文件集中到一个目录中供服务器使用。</p>
</li>
</ul>
</li>
<li><p>示例：</p>
<ul>
<li><p>假设你的项目结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">myproject/</span><br><span class="line">    static/</span><br><span class="line">        css/</span><br><span class="line">            styles.css</span><br><span class="line">        js/</span><br><span class="line">            script.js</span><br><span class="line">        images/</span><br><span class="line">            logo.png</span><br><span class="line">    templates/</span><br><span class="line">        index.html</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>index.html</code> 中，你可以这样使用 <code>&#123;% static %&#125;</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;css/styles.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;images/logo.png&#x27; %&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Logo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;js/script.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>这样，在渲染这个模板时，Django 会确保 <code>&#123;% static 'css/styles.css' %&#125;</code> 被替换为正确的静态文件 URL。</p>
<h5 id="这与普通的html写法相比有什么好处呢"><a href="#这与普通的html写法相比有什么好处呢" class="headerlink" title="这与普通的html写法相比有什么好处呢"></a>这与普通的html写法相比有什么好处呢</h5><p>使用 <code>&#123;% static %&#125;</code> 模板标签与在 HTML 中直接写文件路径相比，具有以下优点：</p>
<ol>
<li><p><strong>灵活性</strong>：</p>
<ul>
<li>使用 <code>&#123;% static %&#125;</code>，Django 会自动处理静态文件的路径，确保即使在不同环境（开发、生产）中也能正确找到文件。直接写路径可能在不同环境下不起作用。</li>
</ul>
</li>
<li><p><strong>易于维护</strong>：</p>
<ul>
<li>如果更改了静态文件的存储结构，只需调整静态文件目录的配置，而不需要逐个修改每个模板中的路径。</li>
</ul>
</li>
<li><p><strong>支持版本管理</strong>：</p>
<ul>
<li>Django 可以方便地为静态文件添加版本，如果文件内容更改，可以通过更改文件名或路径来避免浏览器缓存问题，而 <code>&#123;% static %&#125;</code> 会自动更新路径。</li>
</ul>
</li>
<li><p><strong>代码清晰</strong>：</p>
<ul>
<li>使用 <code>&#123;% static %&#125;</code> 可以使代码更具可读性，清晰地指出这些路径是指向静态资源，而不是动态生成的内容。</li>
</ul>
</li>
<li><p><strong>跨应用共享</strong>：</p>
<ul>
<li>在大型项目中，静态文件可能分布在多个应用中。使用 <code>&#123;% static %&#125;</code> 可以有效地管理和引用这些文件，无需担心路径冲突或不一致的问题。</li>
</ul>
</li>
</ol>
<h6 id="示例对比："><a href="#示例对比：" class="headerlink" title="示例对比："></a>示例对比：</h6><p><strong>直接写法</strong>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/static/css/styles.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>**使用 <code>&#123;% static %&#125;</code>**：</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">load</span></span> static %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;</span></span></span><span class="template-tag">&#123;% <span class="name"><span class="name">static</span></span> &#x27;css/styles.css&#x27; %&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>在开发和生产环境中，Django 可以根据配置自动处理 <code>/static/</code> 前缀，这样可以更便捷地部署和维护。总的来说，使用 <code>&#123;% static %&#125;</code> 显著提高了代码的可维护性和可移植性。</p>
<h4 id="内容分发网络"><a href="#内容分发网络" class="headerlink" title="内容分发网络"></a>内容分发网络</h4><p>​	<code>CDN</code>（内容分发网络）是一种通过分布在不同地理位置的服务器网络，将网站内容快速传输给用户的技术。它的主要目的是提高网站的加载速度、减少延迟、提升用户体验，并减轻源服务器的压力。CDN会存储静态内容的缓存，比如图像、视频和网页文件，以便用户可以从离他们<strong>最近的服务器</strong>获取这些内容。</p>
<h4 id="ANSI-colored-output"><a href="#ANSI-colored-output" class="headerlink" title="ANSI-colored output"></a>ANSI-colored output</h4><p>ANSI 彩色输出是一种使用 ANSI 转义码来在终端或控制台中显示带颜色的文本和图形效果的方法。这种输出格式允许开发者通过特定的代码来改变文本的颜色、背景色以及样式，以提高可读性和美观度。常用于命令行界面和终端应用程序中。</p>
<h4 id="django-admin-inspectdb-black-的意思是："><a href="#django-admin-inspectdb-black-的意思是：" class="headerlink" title="django-admin inspectdb | black - 的意思是："></a><code>django-admin inspectdb | black -</code> 的意思是：</h4><ol>
<li><p><code>django-admin inspectdb</code>：这是一个 <code>Django</code> 命令，用于从数据库生成模型代码。它会自动检测数据库中的表并生成相应的 <code>Django</code> 模型。</p>
</li>
<li><p><code>|</code>：这是一个管道符，表示将前一个命令的输出传递给后一个命令。</p>
</li>
<li><p><code>black -</code>：<code>black</code> 是一个代码格式化工具，<code>-</code> 表示从标准输入读取数据并格式化。</p>
</li>
</ol>
<p>综上所述，这个命令的作用是：从数据库生成 <code>Django</code> 模型代码，然后将生成的代码通过 <code>black</code> 工具进行格式化。</p>
<h4 id="路径在加载时被编译成正则表达式。"><a href="#路径在加载时被编译成正则表达式。" class="headerlink" title="路径在加载时被编译成正则表达式。"></a>路径在加载时被编译成正则表达式。</h4><p>在 Django 中，这句话的意思是当你定义 URL 路径时，Django 会在加载这些路径时将它们转换为正则表达式。这使得 Django 能够匹配用户请求的 URL，以确定应调用哪个视图函数。通过使用正则表达式，Django 能够灵活地处理各种 URL 格式。</p>
<ul>
<li><p>正则表达式很快吗？</p>
<p>正则表达式的性能通常取决于多个因素，包括：</p>
<ol>
<li><strong>复杂性</strong>：简单的正则表达式执行更快，而复杂的或重复的模式可能会导致性能下降。</li>
<li><strong>输入长度</strong>：长输入字符串可能会增加匹配时间，尤其是对于复杂模式。</li>
<li><strong>优化</strong>：某些正则表达式引擎会进行优化，提升执行效率。</li>
</ol>
<p>总体来说，正则表达式在处理一般字符串匹配时速度较快，但对于非常复杂的模式或大规模数据，可能会受到性能影响。在 Django 中，由于路径匹配通常涉及较小的模式，性能通常是足够的。</p>
</li>
<li><p>相比普通的匹配为什么正则表达式匹配比较快呢？</p>
<p>正则表达式匹配并不一定比普通匹配更快，性能的快慢取决于具体情况。以下是一些原因，正则表达式在某些场景下可能表现得更好：</p>
<ol>
<li><p><strong>灵活性</strong>：正则表达式可以用较少的代码处理复杂的匹配情况，而普通匹配可能需要更多的条件判断和逻辑处理。</p>
</li>
<li><p><strong>一次性匹配</strong>：正则表达式能够同时处理多个匹配条件，这可能使得匹配流程更加高效，避免了重复的字符串操作。</p>
</li>
<li><p><strong>预编译</strong>：一些正则表达式引擎支持预编译，让同样的表达式可以被多次使用，节省匹配时间。</p>
</li>
</ol>
<p>然而，在某些简单的匹配情况下，普通字符串匹配可能会更快，因为它不涉及正则表达式解析的开销。因此，选择使用正则表达式还是普通匹配，取决于具体需求和场景。</p>
</li>
<li><p>有什么例子吗</p>
<p>当然，这里有一些简单的例子，帮助你理解普通匹配与正则表达式匹配的区别：</p>
<h3 id="例子-1：邮箱验证"><a href="#例子-1：邮箱验证" class="headerlink" title="例子 1：邮箱验证"></a>例子 1：邮箱验证</h3><ul>
<li><strong>使用普通匹配</strong>：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_valid_email</span>(<span class="params">email</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;@&quot;</span> <span class="keyword">in</span> email <span class="keyword">and</span> email.count(<span class="string">&quot;.&quot;</span>) &gt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用正则表达式</strong>：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_valid_email</span>(<span class="params">email</span>):</span><br><span class="line">    pattern = <span class="string">r&quot;^[\w\.-]+@[\w\.-]+\.\w+$&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">bool</span>(re.<span class="keyword">match</span>(pattern, email))</span><br></pre></td></tr></table></figure>

<h3 id="例子-2：提取数字"><a href="#例子-2：提取数字" class="headerlink" title="例子 2：提取数字"></a>例子 2：提取数字</h3><ul>
<li><strong>使用普通匹配</strong>：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">extract_numbers</span>(<span class="params">s</span>):</span><br><span class="line">    numbers = []</span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> s.split():</span><br><span class="line">        <span class="keyword">if</span> part.isdigit():</span><br><span class="line">            numbers.append(part)</span><br><span class="line">    <span class="keyword">return</span> numbers</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用正则表达式</strong>：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">extract_numbers</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="keyword">return</span> re.findall(<span class="string">r&#x27;\d+&#x27;</span>, s)</span><br></pre></td></tr></table></figure>

<h3 id="例子-3：匹配以特定前缀开头的字符串"><a href="#例子-3：匹配以特定前缀开头的字符串" class="headerlink" title="例子 3：匹配以特定前缀开头的字符串"></a>例子 3：匹配以特定前缀开头的字符串</h3><ul>
<li><strong>使用普通匹配</strong>：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">starts_with_prefix</span>(<span class="params">s, prefix</span>):</span><br><span class="line">    <span class="keyword">return</span> s[:<span class="built_in">len</span>(prefix)] == prefix</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用正则表达式</strong>：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">starts_with_prefix</span>(<span class="params">s, prefix</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">bool</span>(re.<span class="keyword">match</span>(<span class="string">rf&#x27;^<span class="subst">&#123;re.escape(prefix)&#125;</span>&#x27;</span>, s))</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>在第一和第二个例子中，正则表达式提供了更为简洁的解决方案，适合处理复杂的模式要求。</li>
<li>在第三个例子中，使用普通匹配可能更快，因为这是一个简单的前缀比较。</li>
</ul>
<p>选择哪种方式取决于具体场景的需求复杂性和性能考虑。</p>
<h4 id="RSS-和-Atom-提要"><a href="#RSS-和-Atom-提要" class="headerlink" title="RSS 和 Atom 提要"></a>RSS 和 Atom 提要</h4><p>RSS 和 Atom 提要是用于在<strong>网上分发内容</strong>的两种格式。它们允许用户订阅网站更新，自动获取最新内容，而无需手动访问每个网站。</p>
<ul>
<li><p><strong>RSS</strong>：完全称为“简易聚合”（Really Simple Syndication），是一种广泛使用的提要格式。它的结构相对简单，易于实现。</p>
</li>
<li><p><strong>Atom</strong>：是一种更现代的提要格式，具有更强的灵活性和扩展性。Atom 的设计考虑了更多的功能和更复杂的数据结构。</p>
</li>
</ul>
<p>两者都允许用户通过RSS阅读器或聚合工具获取最新信息，方便及时跟踪感兴趣的网站更新。</p>
</li>
</ul>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p><code>django</code> <strong>导入函数的包路径</strong>从 <code>django</code> 创建的项目目录名开始，逐层找到 <code>views</code> 里的函数</p>
<p>养成好习惯，改点，一般自己写的时候没必要这么频繁，每天工作到最后提交一下</p>
<p>短短的几分钟已经创建了将近十个文件了，所以咱们的开发效率还是非常高的（<code>django</code>）</p>
<p>大家写的时候一定要在 <code>tmux</code> 里写，防止终端意外退出，你的工作进度损失掉（声音低八度）</p>
<ul>
<li><p>1、<code>__pycache__</code> 是系统生成的加速运行的，不是源代码</p>
</li>
<li><p>2、编译好的中间文件不要传到 <code>git</code> 上，会污染代码，会让你的代码看起来很乱，只维护用得到的东西，大部分会维护代码，少部分可能会维护一些图片</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240808225717666.png" alt="image-20240808225717666"></p>
</li>
<li><p>3、维护数据库吗</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240808225942217.png" alt="image-20240808225942217"></p>
</li>
</ul>
<h5 id="创建-django-自己的-app-（自己的页面将在这里创建编写），可以创建多个-app"><a href="#创建-django-自己的-app-（自己的页面将在这里创建编写），可以创建多个-app" class="headerlink" title="创建 django 自己的 app （自己的页面将在这里创建编写），可以创建多个 app"></a>创建 <code>django</code> 自己的 app （自己的页面将在这里创建编写），可以创建多个 <code>app</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py startapp game</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809100848742.png" alt="image-20240809100848742"></p>
<ul>
<li><p><code>django</code> 项目目录结构</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809101114786.png" alt="image-20240809101114786"></p>
<ul>
<li><code>admin.py</code>：存储管理信息，管理员页面能看到内些数据库</li>
<li><code>apps.py</code> ：只会用一次</li>
<li><code>migrations</code> ：系统生成的，不用管</li>
<li><code>models</code> ：定义自己网站里的各种数据库表</li>
<li><code>tests</code> ：一般不写 <code>test</code></li>
<li><code>views</code> ：写视图，写函数<ul>
<li>在接收前端请求时，会有一个请求参数 <code>request</code> 传给 <code>views</code> 里的函数，需要在函数中注明</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="django-自带-admin-页面"><a href="#django-自带-admin-页面" class="headerlink" title="django 自带 admin 页面"></a><code>django</code> 自带 <code>admin</code> 页面</h5><ul>
<li><pre><code class="shell">python3 manage.py migrate # 同步数据库修改
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  ![image-20240809102128520](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809102128520.png)</span><br><span class="line"></span><br><span class="line">  ![image-20240809102424899](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809102424899.png)</span><br><span class="line"></span><br><span class="line">* 创建超级用户</span><br><span class="line"></span><br><span class="line">  * ```shell</span><br><span class="line">    python3 manage.py createsuperuser</span><br></pre></td></tr></table></figure>

  ![image-20240809102715728](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809102715728.png)

* 咱们已经实现了一堆页面了啊！
</code></pre>
</li>
</ul>
<h4 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py runserver 0.0.0.0:8000 # 指定 所有人都可以在 8000 端口访问</span><br></pre></td></tr></table></figure>

<ul>
<li><p>创建自己的页面</p>
<ul>
<li><p>需要在自己的 <code>app</code> —— <code>game</code> 中创建自己的页面</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809104041745.png" alt="image-20240809104041745"></p>
</li>
<li><p>创建 <code>templates</code> 文件夹</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809104513755.png" alt="image-20240809104513755"></p>
<ul>
<li><code>models</code> ：存数据结构&#x2F;存数据库里的表&#x2F;存各种 <code>class</code>（数据存储格式是什么样的） ；可能有多个数据表，需要将其扩展成一个文件夹</li>
<li><code>views</code> ：存我们的视图&#x2F;函数逻辑&#x2F;（客户端的每一次操作（比如<strong>点击按钮</strong>）都是调用服务器端的<strong>一个函数</strong>（在 <code>views</code> 里实现）），随着业务量扩大，<code>views</code> 较大可能有好几百行，把他变成一个文件夹，拆分成更细的模块，类似汉武帝的推恩令，当一个模块过于臃肿的时候，你就把他一分为几，把文件改成文件夹，一分为几<ul>
<li><code>python</code> 一分为几很容易，直接创建一个文件夹，在文件夹里创建一个 <code>__init__</code> 就可以了</li>
</ul>
</li>
<li><code>urls</code> ：路由，用户访问网页的时候（点击按钮或者其他操作，传给服务器——<code>app</code> 的是地址——<code>url</code>，服务器端接到这个地址之后，我们要看一下这个<strong>地址</strong>要调用内个<strong>函数</strong>（进行业务处理，返回给用户相应的信息），<strong>地址</strong>调用<strong>函数</strong>需要做一个<strong>路由</strong>，）</li>
<li><code>templates</code> ：网页模版——<code>html</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="写代码"><a href="#写代码" class="headerlink" title="写代码"></a>写代码</h4><h5 id="game-里的-urls"><a href="#game-里的-urls" class="headerlink" title="game 里的 urls"></a><code>game</code> 里的 <code>urls</code></h5><h5 id="链接可以直接访问：直接跑在云端，有公网-IP，可以让每一个人直接访问"><a href="#链接可以直接访问：直接跑在云端，有公网-IP，可以让每一个人直接访问" class="headerlink" title="链接可以直接访问：直接跑在云端，有公网 IP，可以让每一个人直接访问"></a>链接可以直接访问：直接跑在云端，有公网 IP，可以让每一个人直接访问</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809115946534.png" alt="image-20240809115946534"></p>
<h5 id="自己的代码"><a href="#自己的代码" class="headerlink" title="自己的代码"></a>自己的代码</h5><ul>
<li><p>非前后端代码写法</p>
</li>
<li><p>代码截图</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809203908392.png" alt="image-20240809203908392"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809122937584.png" alt="image-20240809122937584"></p>
</li>
<li><p>运行效果截图</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809124148820.png" alt="image-20240809124148820"></p>
</li>
</ul>
<h4 id="网页源码"><a href="#网页源码" class="headerlink" title="网页源码"></a>网页源码</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809130218421.png" alt="image-20240809130218421"></p>
<h4 id="监控网络"><a href="#监控网络" class="headerlink" title="监控网络"></a>监控网络</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809123503936.png" alt="image-20240809123503936"></p>
<p>不到 <code>0.1</code> 就打开啦，非常快啊！而且我们布置完 <code>nginx</code> 会更快，有些同学在疯狂刷新</p>
<h1 id="经验之谈"><a href="#经验之谈" class="headerlink" title="经验之谈"></a>经验之谈</h1><h2 id="实践，学习写代码和写工程的话，实践是最好的老师"><a href="#实践，学习写代码和写工程的话，实践是最好的老师" class="headerlink" title="实践，学习写代码和写工程的话，实践是最好的老师"></a>实践，学习写代码和写工程的话，实践是最好的老师</h2><h2 id="pycharm-也可以啊！但是-pycharm-你要自己去配置一下怎么去连服务器，还是比较麻烦的啊！其实没啥必要"><a href="#pycharm-也可以啊！但是-pycharm-你要自己去配置一下怎么去连服务器，还是比较麻烦的啊！其实没啥必要" class="headerlink" title="pycharm 也可以啊！但是 pycharm 你要自己去配置一下怎么去连服务器，还是比较麻烦的啊！其实没啥必要"></a><code>pycharm</code> 也可以啊！但是 <code>pycharm</code> 你要自己去配置一下怎么去连服务器，还是比较麻烦的啊！其实没啥必要</h2><p>这个 <code>vim</code> 的话，大家在，是这样，是我这个录像，是我直播的颜色有点问题，大家如果直接看自己的话其实没有那么吃力，然后另外的话，接下来给大家加上一个背景，颜色风格，会给大家推出一个白色模式，就你在看 <code>vim</code> 的时候，白底黑字了，就会好很多，好吧！</p>
<h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><p>​	我们第一节课其实是配环境啊！让我们的项目可以跑在云端，在云端跑大家可以发现你在云端跑的时候，改完已保存就会<strong>立即更新</strong>，对吧！啊！所以这是一个所见即所得的开发模式啊！而且你更新完之后，就以为着什么呢？意味着所有同学都可以看到，全世界全世界的人都可以看到啊！并不是只有在你本地可以看到啊！这一点是非常爽的，我非常喜欢这种这种这种这种上线模式，</p>
<p>​	上传 <code>github</code> 和 <code>acgit</code>  有区别吗？</p>
<p>​	没有区别都可以啊！但是我相信大家如果用两次 <code>github</code> 的话就会跑回我们的 <code>acgit</code> 的大怀抱啊！我之前，我很早以前去写代码的时候也是在 <code>github</code> 上，但是后来确实是太坑了啊！就是有些时候你 <code>push</code> 一下会 <code>push</code> 不上去，他这个国内连 <code>github</code> 的话，他他他不光慢，还断断续续的，就特别的蛋疼，所以后来迫不得以，在国内自己搭</p>
<p>​	下一节课讲啥</p>
<p>​	下节课还没定啊！我们下节课就可以做一个精美的菜单界面啦，对！<code>git</code> 和 <code>acwing</code> 的唯一区别就是速度啊！别的没有任何区别</p>
<p>可以吧！同学们，进到游戏界面，返回游戏界面，然后，未来不光，我们这个是前后端分离的啊！就是你不光可以在自己地址栏里访问啊！而且以后也可以在这个地方啊！就跟就跟 <code>AC Saber</code> 一样，哎！进到天梯模式，哎！返回天梯模式，啊！这个这个，错了啊！进到天梯模式，对吧！哎！返回天梯模式，啊！跟这个是一样的，可以多端访问	</p>
<p>​	大家一刷新，大家一刷新这里就有一条访问记录啊！一刷新，一刷新就有一条记录，对吧！每点一下就有一个记录啊！大家可以试一下，比如点击这个返回主页主菜单，他就会返回主菜单，可以吧！进到游戏界面，就有一个 <code>play</code> ，对不对！？</p>
<p>​	这个服务开了之后需要关闭吗？</p>
<p>​	当然不用啊！大家的网站是不能关的啊，一定要给别人一直用啊！</p>
<p>我们 <code>nginx</code> 的话是在最后再部署，现在还，现在还不不部署，不用 <code>nginx</code> 部署</p>
<p>啧！好，大家看一下还有没有问题啊！没有问题的话，我们就准备下播啦！</p>
<p>大家这次的作业就是将，啊！我们在下周一，周二之前一定要打卡啊！没有打卡的同学我就当你没有完成作业啦！啊！同学们，这个可以当做是一个对自己的激励啊！我们看到又一个同学已经，哎！已经做完了一半作业啦！我们来试一下，好，可以， 同学们，这位同学也不错啊！完成了一半啊！完成了一半啊！不错！<del>，啧！大家这个也可以相互之间评论啊！评论一下，完成了一半啊！很棒哈哈（<img src="C:\Users\20344\AppData\Local\Temp\SGPicFaceTpBq\1568\105B87A1.png" alt="105B87A1">)，这个，加油</del>，再把，这个 <code>aciwng</code> 的话支持一些表情啊！比如这个 <code>thumbsup</code> 的话，啧！大拇指吭吭！这节课有讲义但是我们操作是没有讲义的啊！我们这节课的讲义是额嗯！前置知识点的讲义，好，大家看一下有没有问题啊！咳嗯！没有问题的话我们就讲完啦，同学们，就准备下播啦！啊！对！这节课这节课的网页这块，并没有教多少东西啊！但是核心，关键是配好 <code>docker</code> 环境啊！用 <code>git</code> 维护好自己的项目，以及将项目跑在云端，对吧！这是我们这三，这这是我们这节课的一些重点，而且让大家熟悉一下我们未来的开发流程对吧！开发流程非常简单，~啊！前面这一改一保存，这里一刷新，就有区别啦！啊！啧！添加链接的添加链接的网页地址怎么写，这种这种东西的话我们后面会讲，不要着急啊！下周不会鸽啊！我们来看一下有没有其他同学做完，啧啊！已经有六个同学打卡了啊！我们来往后看一看啊！这位同学，来看一下！第一个项目，哎！不错啊！这个是也是不错啦！额嗯！做完一个项目的话我们给一个 <code>thumbsup</code> ，做完两个的话给个赞，可以吧！哎！<code>thumbsup</code> 一个赞，<code>flight</code> ，这同学已经有 <code>flight</code> 了，哎嘿，这位同学牛逼啊！哦哈，我来看一下这位同学源码啊！啊哈，这位同学很强啊！很强，这应该是搞了一个，额嗯！对！这应该同学搞了一份，这个这个这个现成代码，直接拿过来了啊！很强，啊！不错啊！可以给两个 <code>thumbsup</code> ，啧！不错啊！额嗯！啧！对！大家如果打算把这代码复制过来的话，也很简单啊！直接把这代码抄过来就可以了啊！抄过来之后的话，我们再把他改一改，啧！比如说这个 <code>line4</code> 对吧！咱把这个 <code>line2</code> 直接改成，改掉，不要图片了，然后，打开打开抄袭模式，对吧！打开粘贴模式啊！然后复制过来，哎嘿，我们这个，我们这个还不太行啊！啧！这样，咱把前面的没用的部分都删掉，只留这个 <code>line2</code> 试一下，啊！这个同学应该还有一些静态文件，然后，我们这个没有静态文件，对吧！这同学还有一些静态文件啊！他这个没有静态文件啊！这个这个暂时就算啦！好吧！可以回滚一下！啧！咳嗯！好！这些东西不用，只要集成可以啊！，这个接下来我们会给大家讲在国外 <code>AC Terminal</code> 延迟比较大怎么办啊！那就，在国外的话，目前只能用本地终端，额嗯！额！<code>django</code> 创建应用，创建应用在第一个 <code>acapp</code> 目录下，还是里面的 <code>acapp</code> 啊！对！他会连续创两个相同项目目录的名字，这个内部的名字，你可以认为是一个总共的一个项目，这个总共项目可以管理好多其他 <code>app</code> ，</p>
<p>三个点和一个点有啥区别</p>
<p>三个点的话是可以换行</p>
<p>啧！这个页面就是函数名吗？</p>
<p>这个页面就是用函数返回一个字符串，</p>
<p>好，大家看一下有没有问题啊！没有问题的话咱们就准备下播啦！同学们，好，那我们这节课内容到这里就结束啦！大家这个课后，额嗯！课后把这两个作业做完啊！第一个的话是要部署自己的一个 <code>django</code> 页面，好吧！第二个的话是要把项目传到 <code>acgit</code> 上啊！当然还有一些隐性作业啊！配好 <code>docker</code> 环境，把我们给大家提供的 <code>docker</code> 镜像存到自己的云服务器上，好吧！好，那我们这个直播到这里就结束啦！大家早点休息啊！拜拜！拜拜！啊！</p>
<h3 id="3-1、创建菜单界面"><a href="#3-1、创建菜单界面" class="headerlink" title="3.1、创建菜单界面"></a>3.1、创建菜单界面</h3><h4 id="本节课内容提要"><a href="#本节课内容提要" class="headerlink" title="本节课内容提要"></a>本节课内容提要</h4><p>今天是我们开始写我们的第一个界面，啊！讲义已经放到这个地方啊！我们这节课是写我们的菜单界面啊！然后，我们写的界面虽然说不多啊！但是这节课是未来我们<strong>后续课程的一个根基</strong>啊！为什么呢？因为这节课我们会给大家把我们整个的项目的系统架构哎！设计好，啊！未来的工作就是在我们今天设计的这个架构里边不断的去填充血肉就可以了，好吧！去丰富他的每一个细节就可以了啊！我们这节课是把骨架定出来啊！也就是之前一直有同学说怎么去做一个系统设计对吧！啊！那我们这节课就跟大家来这个展示一下我们这个项目是怎么来做一个宏观上的系统设计的，好吧！啊！啧！好！那我们来看一下这节课的内容啊！首先第一个是我们项目的一个系统设计啊！不光是我们这个游戏啊！就包括未来大家写的所有的项目，都可以用我们这样的一套方法论啊！来去逐步地分解成每一个我们可以操作的部分啊！然后各个击破就可以啦，好吧！啊！什么意思呢！？是这样一个意思啊！就为了我们写的时候，肯定是写一个项目，对吧！你不管项目是什么，那肯定是一个完整的项目，好，然后，写项目的时候啊！我们这个项目是一个整体，对吧！啊！我们不可能直接去做出来一个整体啊！所以肯定是先把这个项目分开成，分解成若干个部分啊！然后每一部分再继续分拆，啊！直到这一哥部分我们可以直接做为止，对吧！这是我们一般去写一个系统的核心思想，啊！那么在我们这个游戏里边，大家可以想一下啊！我们这个游戏的话，他是一个<strong>简易版吃鸡</strong>，啊！或者，<strong>其实就是术士之战</strong>，对吧！啊！术！士！之~战！对吧！那么我们这个游戏的话，首先第一步分，分，我们有很多种分法，那么我们这里给大家提供我给大家做的<strong>一种分法</strong>好吧！大家可以大家可以参考一下啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240809221252856.png" alt="image-20240809221252856"></p>
<p>​	那么我们这个项目的话，额嗯，我当时大概想了一下啊！我们的主界面稍等一下啊！我们这个主界面里面应该有三个按钮，对吧！？我当时大概设计了一下啊！第一个按钮的话应该是什么啊！应该是哎！单人模式，哎！就是我们单人和人机对战，对吧！第二个按钮的话是额嗯！多人模式，就是在线匹配模式或者跟好友对战的一个模式，第三个按钮的话是设置，那么这是我们的一个游戏界面，对吧！啊！好，那么我们如果要将我们整个项目分拆的话，我们要做的话可以这样来分啊！首先第一个部分是我们的哎！菜单，对吧！菜单，就是我们的菜单界面，这是我们第一个模块啊！然后第二个模块，不管是单人模式还是多人模式，大家可以想象一下，这两个模式他用的大部分的逻辑其实都是类似的，对吧！你不管是单人还是多人，你都是操控一个角色，啊！你的地图跟角色都是不变的啊！所以说我们这两个模式可以统称为一个模式啊！叫对战界面，啊！对吧！啊！那么，第三个部分就是我们的设置了，对吧！？设置的话可以单独拎出来，比如<strong>设置一下我们整体的声音</strong>啊！音效啊！对吧！或者背景颜色呀，背景风格呀！或者你的昵称啊！对不对！？都可以在设置里面去写，啊哈！额好，所以说我们这个项目的话可以分成三个部分来写，对吧！？第一个的话是菜单界面啊！第二个的话是对战界面，第三个的话是设置功能，对不对！？啊！然后，额嗯！我们接下来在做的时候啊！他每一个部分可能会比较复杂啊！菜单界面可能比较简单就无所谓了，对不对！？但是对战界面的话可能会比较复杂啊！那么当我们一个模块非常复杂的时候我们发现如果把他们罗列到一块非常混乱的时候，我们就可以再继续递归我们这个步骤，哎！我们可以再考虑一下，哎！这个对战界面的话我可以分成内些部分，对吧！？啊！比如说这个角色 <code>player</code> 是一个部分，然后另外这个比如额嗯！<strong>时间也是一个部分，对吧！计时器也是一个部分啊！</strong>，第三个的话比如说比如地图也是一个部分对吧！我们可以再继续做分拆啊！直到分拆到这个小模块我们可以直接实现为止啊！那比如说我们在做在写这个 <code>player</code> 的时候，大家会发现，哦！<code>player</code> 里面逻辑好像也比较多，对吧！啊！你比如说，移动也是一个模块，那么我们移动的话也可以单独拆成一个一个一个这个文件夹或者目录来做，对吧！？啊！然后，另外放技能可能也是会，可能玩家技能比较多，包含发火球，啊！有瞬移，有分身，有无敌，对吧！或者放大招，那么他的技能可能也会比较多！那么因此我们也可以再分出来一个技能模块，对吧！？啊！然后我们在写的时候，每一个技能都比较复杂，那么我们每个技能都可以再继续分，啊！所以大家可以发现啊！我们可以按照这样的一套逻辑啊！将任何一个比较大的项目分拆成一个一个独立的模块来做，啊，那么我们一般来说，在去写一个项目的时候，啊！都是用这样的一套方法来做好吧！啊！<strong>当然，这个是我给大家总结的一个方法，这个每个人见仁见智，好吧！我觉得这个方法的话是非常好用的啊！</strong>因为这个方法的话，啧！他比较通用啊！而且你不管是多么大的一个项目或者多么小的一个项目都可以用这个方法来做啊！那么具体在写项目的时候也比较简单啊！就是当大家发现我们某一个模块的代码很长的时候，你比如这个模块里面的这个代码有个一百行了，或者有个五百行了，那么大家就可以将这个代码分成多个目录，啊！那么我们将一个模块分成多个子模块的过程其实就是将我们的代码分成多个目录，这样去写好吧！？这个是我们的一个主导思想啊！好，那么~，后面这写我还没有分啊！所以暂时先没有，目前的话整个项目是分成了三个模块啊！菜单，对战和设置，好吧！啊！对战里面有两个模式啊！一个是单人啊！一个是多人，这个设计的时候，大家也可以自己见仁见智啊！因为我们这个对战界面不管单人还是多人，他有很多的内容都是相同的，都是重复的那所以说我们可以用参数的方法传到这个模块里，而不用分别写两个独立的模块，啊！可以吧！啊！嗯啧！好，那这是我们整个系统的一个设计啊！三个模块，我们这节课的话是实现第一个模块—菜单界面，啊！</p>
<p>​	然后，后面再给大家讲一下我们 <code>django</code> 的一个文件结构，啊！就是我们这个 <code>django</code> 他不是一个框架吗？！对吧！那么框架是干嘛用的呢？框架里面会有很多很多的目录，那么我们习惯上不同目录一般是用来管理不同内容的，好吧！那么我们先把这几个目给大家搞出来啊！额！首先为了给大家演示的话，啧！额！我们先登到我们的这个服务器里，对吧！大家每次开发的时候点开这个 <code>AC Terminal</code> ，啊！然后全屏啊！当然可以可以先放大一下，给大家放大一下字体啊！放大一下啊！然后，哎！登到自己的服务器里，你的服务器别名是什么，你就 <code>ssh</code> 什么就可以啦！啊！好，然后登进来之后的话呢！哎！好，我刚刚备课的时候啊！备完课之后我将我这个备课的内容删掉了啊！那么我们继续从上节课的内容开始写，啊！那么我们可以找到我上节课的内容啊！我上节课的内容应该是在我的这个打卡记录里啊！我们点开看一下，哎！在这个里面，对吧！？啊！我的项目地址，啧嗯！好，我们先把我们上节课的一个进度克隆（<code>clone</code>），啊！这样可以保证跟上节课完完完美对接，对吧！？把他，点一下克隆的这个 <code>git</code> ，用 <code>ssh</code> <code>ssh</code> 克隆 <code>git</code> ，啊！然后点开之后的话，我们把他克隆下来，哎！<code>git clone</code> 好，然后我们进到 <code>tmux</code> 里，在 <code>tmux</code> 里来写，啊！这样的话可以保证我们的进度不会丢失对吧！啊！然后 <code>tmux</code> 的话我一般习惯上先不管三七二十一，哎！先分成四个栏目，对吧！啊！好，啊！然后我们进到我们的 <code>acapp</code> 里，然后我们的目录啊！一般是在我们的 <code>game</code> 里面去看目录，<code>game</code> 外面这些东西的话，大家一般来说不用变啊！不用太管，我们进到我们 <code>game</code> 里边，好，那么我们来看一下我们的目录啊！</p>
<h4 id="写第一个界面：菜单界面"><a href="#写第一个界面：菜单界面" class="headerlink" title="写第一个界面：菜单界面"></a>写第一个界面：菜单界面</h4><ul>
<li>一般在 <code>django</code> 创建的目录中编写自己的代码</li>
</ul>
<h5 id="创建相应的文件夹"><a href="#创建相应的文件夹" class="headerlink" title="创建相应的文件夹"></a>创建相应的文件夹</h5><ul>
<li><p>1、<code>templates</code> ：</p>
</li>
<li><p><code>urls</code> 、<code>views</code> 、<code>models</code> 是 <code>python</code> 文件，<code>python</code> 文件管理的时候，如果向让我们通过 <code>import</code> ，<code>import</code> 进来的话，需要在文件夹下面创建一个 <code>__init__.py</code> 空文件</p>
<ul>
<li><p>2、<code>urls</code> ：存储链接和函数的对应关系，每次访问一个链接，每个链接我应该交给内个函数去处理呢？这个信息存到 <code>urls</code> 文件夹里边。 一个项目的路由的数量会非常多，你比如 <code>acwing</code> 有几百个链接，把几百个链接放到一起的话，未来管理起来会非常麻烦，你找不到你要管理的命令，创建目录</p>
<p>目前 <code>path</code> 里的 <code>name</code> 没有用上，如果写模版的话就会有用，如果不写模版的话就没有用</p>
</li>
<li><p>3、<code>views</code> ：管理 <code>http</code> 函数；视图，管理函数，链接（<code>client</code>）经过路由（<code>urls</code>）给某个函数（<code>function</code>）处理，函数应该实现在 <code>views</code> 目录里面</p>
</li>
<li><p>4、<code>models</code> ：管理数据库，管理数据库里边的数据</p>
</li>
<li><p><code>static</code> ：存储静态文件，<code>css</code> 文件 将静态文件通过链接直接返回</p>
</li>
<li><p>5、<code>css</code> ：对象的样式（不需要做拆分）</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240811094244580.png" alt="image-20240811094244580"></p>
</li>
<li><p>6、<code>js</code> ：写项目的核心，用来存储我们每一个对象的逻辑。比如我第一下鼠标，玩家会移过来，那么这个逻辑会存到 <code>js</code> 里边，我们这个项目是一个前后端分离的项目，所以说 <code>html</code> 的渲染都会在前端渲染，啧！那么渲染 <code>html</code> 的话也是在 <code>js</code> 这个部分啊！所以 <code>js</code> 里不仅可以处理不仅可以记录对象的逻辑，同时他还会负责管理对象的一个创建和销毁，你比如说咱们这个玩家一开始一上场会被创建出来，对吧！？啊！然后我们这个玩家比如说这个这个被击败之后他就会消失掉，那么 <code>js</code> 的话也要负责管理这一部分</p>
<ul>
<li>一个项目的 <code>js</code> 文件会非常多，下来可能会有几十个 <code>js</code> 文件，那么我们几十个 <code>js</code> 文件的话，我们在去从网页里加载的时候，一般不会加载几十个 <code>js</code> 文件，啊！因为这样一方面比较慢，啊！就是你加载的时候他一般是并行啊！这个，同时加载四个，然后如果你要全加载下来的话，会特别会特别特别慢啊！第二点的话是额这样调试的时候也不方便，啊！因为我们每加一个新的 <code>js</code> 文件，啊！你都要需要在 <code>html</code> 里边把他加进去就很麻烦，好吧！啊！所以我们 <code>js</code> 文件的话一般来说啊！分成两个文件夹来写啊！<ul>
<li><p>第一个文件一般叫 <code>dist</code> 存储生成好的文件</p>
</li>
<li><p>第二个文件夹一般叫 <code>src</code> 存储原始文件</p>
</li>
</ul>
</li>
<li>这个也比较容易理解（分成 <code>dist</code> 和 <code>src</code>）啊！就是 <code>dist</code> 的话就是我们最终生成的用来这个就最终使用的 <code>js</code> 文件，然后 <code>src</code> 里边一般存什么呢？一般存我们<strong>所有的 <code>js</code> 源文件</strong>，你比如说可能我们 <code>src</code> 里边会有几十个 <code>js</code> 文件，对吧！啊！那么我们要把这几十个 <code>js</code> 文件通过自己哎！操作一下，把他操作成一个完整的 <code>js</code> 文件放到 <code>dist</code> 里边，好吧！一般是这样来做的，啊！额！那么这个把这个 <code>src</code> 里面的几十个文件合并成一个 <code>js</code> 文件放到 <code>dist</code> 里边，这个大家自己写个脚本就可以了，非常简单啊！给大家举个例子啊！额嗯！吭嗯！啧！嗯！举个例子吧！比如说我们，咱们可以将所有脚本放到一个专门的文件里啊！这样我们之后比较容易找，比如我们可以放到我们项目目录的 <code>scripts</code> 里边，我们可以创建一个文件夹叫 <code>scripts</code> ，好，然后，<code>scripts</code> 里边的话我们可以创建一个脚本啊！这个脚本的作用啊！就是可以将 <code>src</code> 里的所有 <code>js</code> 文件啧！合并成一个完整的文件放到我们的 <code>dist</code> 里边，好吧！啊！啊！那么这个大家比如可以起个名字叫，可以叫合并可以叫压缩对吧！啊！比如我们可以叫压缩啊！<code>compress_js</code>、啊！<code>compress_game_js</code> 对吧！？咱们 <code>game</code> <code>app</code> 的一个 <code>js</code> ，<code>.sh</code> ，啊！这是一个 <code>shell</code> 脚本，<code>shell</code> 脚本如果忘记的话可以去复习一下 <code>linux</code> 基础课啊！这个 <code>li</code> <code>linux</code> 基础课第三讲，好吧！<code>shell</code> 脚本啊！如果要是没有，如果不想复习的话也没有关系，你直接把我这脚本抄过去就可以了啊！好，然后，嗯吭，这种脚本的话只用写一次啊！然后脚本的话开头是指定一下我们解释器对吧！？叫 <code>/bin/bash</code> ，好！然后我们这个脚本的主要作用啊！就是将这个文件（<code>js</code>）夹里的 <code>src</code> 文件夹里的所有 <code>js</code> 文件啊！合并成一个文件放到 <code>dist</code> 里边，好吧啊！哎！就是<strong>打包！</strong>，啊！对！就是打包的意思啊！额嗯，然后我们现在的话先给大家自己裸写一个非常简单的啊！方便自己调试的一个打包的一个脚本，好吧！啊！ 大家可以看一下，其实原理非常简单啊！首先先为了方便先定义几个变量，啊！<code>path</code> <code>js_path</code> 我们的 <code>js</code> 目录，<code>js</code> 路径，对吧！？啊！这个路径等于什么呢？把这个路径抄过来就可以了啊！<code>pwd</code> 抄过来一下，<code>tmux</code> 里的复制还记得吧！？<code>ctrl a + [</code> ，是复制啊！然后 <code>ctrl a</code> + <code>]</code> 是粘贴，啊！好，那么我们 <code>js_path_dist</code> 也给他搞一下啊！<code>=js_path</code> ，额嗯，当然这个最好加上 <code>-</code> 啊，对！额，然后后面的话我们 <code>js</code> 这个目录下的 <code>dist</code> 目录，哎！是我们我们用这个变量 <code>js_path_dist</code> 来表示啊！<code>js_path</code> 这个目录下的 <code>src</code> 目录，哎！用 <code>js_src_path</code> 来表示，好吧！？啊！好！ 那么我们怎么实现将 <code>src</code> 里的所有 <code>js</code> 打包成一个文件呢？大家可以手写一个啊！首先，哎！可以先找到当前目录下的所有文件，大家可以用 <code>find</code> 命令，对不对！？<code>find</code> 的命令的话是在哪儿讲过，是在这个 <code>linux</code> 基础课第七讲，对吧！？啊！第七讲的常用命令里讲过啊！<code>find</code> 命令，当然大家如果要是你不想复习的话直接把这抄过来也可以，因为这个命令的话大家，大家这个这个这个只用使用一次啊！好，那么我们是从 <code>js_path_src</code> 这个路径下去找，对吧！？找所有的文件，所以 <code>type -f</code> ，这是所有的文件啊！找所有的 <code>.js</code> 文件，所以是 <code>*.js</code> ，这个一定要加上，因为如果你不加的话他可能会将一些 <code>.swp</code> 文件加进去就很麻烦啊！好！然后为了保证一致性，啊！就为了保证你每次打包顺序不会乱，你给他 <code>sort</code> 一遍，按照字典序（文件名字典序）来 <code>sort</code> 一遍，好吧！？啊！好，然后将所有的文件名 <code>sort</code> 完之后通过我们的 <code>cat</code> ，通过 <code>cat</code> 统一输出到标准输出里啊！然后将标准输出里的内容统一写入到我们的 <code>js_path_dist</code> ，叫什么来着，起个名字啊！这个可以叫，当然这个也要加上 <code>-</code> 啊！啊！比如可以叫 <code>game.js</code> ，对吧！啊！这样就可以了啊！啧！嗯~！ 这个命令大家如果要是看不懂的话就是你学 <code>linux</code> 基础课还没有学到内个程，还没有学到第七讲，或者还没有报 <code>lin</code> <code>linux</code> 基础的话没有关系啊！大家直接把这命令背过就可以了，啊！直接把他抄下来就可以了，好吧！啊！啊！课后可以从我的项目目录里，从我这 <code>acgit</code> 上复制下来就可以了，好吧！因为我这个代码的话是会传到 <code>acgit</code> 上的，啊！好，那么我们先把他加上一个可执行权限，哎！<code>chmod +x</code> 对吧！？</li>
</ul>
</li>
<li><p>7、<code>image</code> ：图片</p>
<ul>
<li><p><code>wget</code> 下载图片到云服务<strong>本地</strong> <code>linux</code> 操作系统，可以在浏览器<strong>通过链接</strong>访问</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810191101483.png" alt="image-20240810191101483"></p>
<ul>
<li><p>未来想去在我们的网站里展示这张图片的话用这个地址就可以了，啊！很方便，对不对！？好，那大家看一下有没有问题啊！我们稍微停顿一下啊！给大家一些时间有没有问题啊！嗯啊！我们现在已经打通了这个静态文件，对不对！？啊！包括大家以后想放声音的话，也可以将你的这个声音文件放到 <code>static</code> 目录下，就 <code>static</code> 目录是怎么进去的，你链接里怎么写就可以了，可以吧！？同学们，啧~嗯！嗯好，接下来的话我们看一下这个 <code>static</code> 文件啊！我们先从这个 <code>static</code> 文件入手，那么 <code>static</code> 文件里边我们一般会存啊！主要存的啊！除了图片这种静态文件之外啊！主要存的是 <code>css</code> ，还有 <code>js</code> ，那么我们一个项目啊！根据我多年经验啊！一个项目啧！一个项目只要有一个 <code>css</code> 文件就可以了，啊！<code>css</code> 文件不需要做拆分，啊！就按照我们刚刚的这个理论这个 <code>css</code> 文件也是要拆分成三个模块的，对不对！？但是一般不需要，啊！一把不需要，所以大家这个 <code>css</code> 的话，搞一个文件就可以啦！啊！我们可以叫 <code>game.css</code> ，把他保存一下，可以吧！啊！<code>game.css</code> ，啧！（打拇指轻擦鼻子），刚刚内个 <code>BASE_DIR</code> 什么意思啊！刚刚那个 <code>BASE_DIR</code>的话就是当前当前项目的目录，刚刚那个 <code>settings</code> 目录里的配置啊！额嗯！内个内个配置的话，你大概知道干嘛的就可以，不太需要了解到太太过于细节啊！啊！你只要知道他是将额嗯 <code>static</code> 这个 <code>url</code> 对应到本地的 <code>static</code> 文件夹就可以，啊！然后你将静态文件放到本地的文件夹里之后，你可以通过这个 <code>url</code> 来访问就可以啦，好吧！啊！啧！</p>
</li>
<li><pre><code class="shell">wget --output-document=自定义图片名称 图片地址
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  * 8、`audio` ：声音</span><br><span class="line"></span><br><span class="line">* 在 `1-6` 和 `8` 、**`8` 个文件夹中创建**细分出来的 `menu` 、`playground` 、`settings` 界面的文件</span><br><span class="line"></span><br><span class="line">  * 整个项目分成了三个部分，啊！那么我们后续在写写的时候，啊！那么我们后续在写的时候啊！后面的每一个目录你最好都分成三个目录，你比如说 `templates` 里边你最好有三个文件夹，分别叫 `menu`、`playground` 、`settings`，`urls` 里面，同理也是对应三个文件夹，分别叫 `menu` 、`playground` 、还有这个 `settings` ，好吧！就是这个项目的系统设计啊！你要对应到每一个文件夹里边，你每一个文件夹都要分别创建这三个模块，好吧！每一个文件夹里都要创建这三个模块啊！我们当我们对项目的某一个模块做细分的时候，你要改变每一个文件夹里的细分方式，好吧！啊！这样不容易乱，啊~！好，吭，我们在 `image` 里面，所以说我们要创建三个文件，对不对！？分别叫 `menu` 、`playground` 、这个我们第一节课给大家一定要先把这个骨架定好，因为骨架定好之后，你后面去写的时候，你就往里丰富东西就可以了，啊！就不容易乱！好吧！大家一定不要偷懒儿~！因为我们第一节课只实现了一个界面，可能有些同学觉得哎！这界面我干嘛要分那么细呢？他可能就不分这么细了，直接写了，这样会导致以后我们在往后开发的时候，你会发现很难去细分啊！就写的时候就很乱，还有一个叫 `settings` 啊！那么，顾名思义啊！我们要将，我们就是要将这个和背景菜单儿和这个这个和菜单相关的图片放到 `menu` 里面，啊！和主界面和这个游戏界面相关的界面放到 `playground` 的里面，和设置相关的图片，放到 `settings` 里边，很清楚，对吧！那我们在 `menu` 里搞一个图片啊！那么图片的话已经把这个地址放到了后面啊！就本节课用到的素材地址给大家提供出来啦！大家怎么去把图片搞出来呢！？首先你可以看一下图片是什么东西啊！这图片是一个非常炫酷的动图，啊！可以吧！？啊！我们就用这个动图来作为我们的这个背景图片啊！额，然后，怎么将这个动图下到你的服务器里呢？有一个命令叫 `wget` ，咱把这个命令抄下来就可以啦，</span><br><span class="line"></span><br><span class="line">  * `wget`</span><br><span class="line"></span><br><span class="line">    * ```shell</span><br><span class="line">      wget --output-document=自定义图片名称 图片地址</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>consumers</code> ：管理 <code>websocker</code> 函数，讲 <code>websocker</code> 协议的时候会用的，好吧！</p>
</li>
</ul>
<h5 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h5><ul>
<li><p>查看项目配置文件修改添加的信息，设置内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py diffsettings</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810130330902.png" alt="image-20240810130330902"></p>
</li>
<li><p>修改时区</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810122541292.png" alt="image-20240810122541292"></p>
<ul>
<li><p>默认时区是格林尼治时间——<code>UTC</code> 标准时间，需要改成中国的时区</p>
<ul>
<li><p>统领全局：在全局配置文件里边，在 <code>acapp/acapp</code> 文件夹下面的 <code>settings</code> 文件设置时区信息</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810122908766.png" alt="image-20240810122908766"></p>
</li>
<li><p>修改成 <code>Asia/Shanghai</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810123145565.png" alt="image-20240810123145565"></p>
</li>
</ul>
</li>
<li><p>语言</p>
<ul>
<li>语言的话，我不推荐大家改成中文，因为 <code>dajngo</code> 你改成中文的话，那么你在当你报错之后你在去搜这个错误的时候，不一定能搜到结果，英文生态要比中文生态要好一些，所以这个的话大家就保留英文就可以了，好吧！啊！</li>
</ul>
</li>
<li><p>将写的 <code>app</code> 装进来</p>
<ul>
<li><p>在 创建的 <code>django</code> 项目 <code>game</code> 中有一个文件 <code>apps.py</code> </p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810123650694.png" alt="image-20240810123650694"></p>
</li>
<li><p>需要将 <code>GameConfig</code> 加到我们全局配置的 <code>settings</code> 里面，创建的 <code>app</code> 需要手动加到配置文件里，与 <code>django</code> 内置数据库有关</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810123957936.png" alt="image-20240810123957936"></p>
</li>
</ul>
</li>
<li><p>设置静态文件的地址</p>
<ul>
<li><p>查找静态文件地址</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py findstatic css/base.css --verbosity 3</span><br></pre></td></tr></table></figure>

<p>在 <code>django</code> 项目中创建项目 <code>game</code> ，在 <code>game</code> 中创建 <code>static</code> 文件夹，并在其中创建 <code>css</code> 、<code>js</code> 、<code>image</code> 、<code>audio</code> 文件夹</p>
</li>
<li><pre><code>STATIC_URL = &#39;/static/&#39;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 需要再加上三句话</span><br><span class="line"></span><br><span class="line">  ```shell</span><br><span class="line">  STATIC_ROOT = os.path.join(BASE_DIR, &#x27;static&#x27;) # 我们的静态文件存到我们整个项目目录的内一个文件夹里边；放到 BASE_DIR 的 `static` 目录下</span><br><span class="line">  # join 将两个路径合并</span><br><span class="line">  STATIC_URL = &#x27;/static/&#x27;</span><br><span class="line">  MEDIA_ROOT = os.path.join(BASE_DIR, &#x27;media&#x27;) # `media` 存用户的文件</span><br><span class="line">  MEDIA_URL = &#x27;/mdeia/&#x27;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>修改配置文件</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810124746866.png" alt="image-20240810124746866"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810181016161.png" alt="image-20240810181016161"></p>
</li>
<li><p><code>static </code> 里存开发者的文件</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240810162350865.png" alt="image-20240810162350865"></p>
</li>
<li><p><code>media</code> 存用户的文件</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="django-命令解释"><a href="#django-命令解释" class="headerlink" title="django 命令解释"></a><code>django</code> 命令解释</h3><h4 id="运行项目的命令"><a href="#运行项目的命令" class="headerlink" title="运行项目的命令"></a>运行项目的命令</h4><h5 id="django-admin-runserver-–nostatic-–insecure"><a href="#django-admin-runserver-–nostatic-–insecure" class="headerlink" title="django-admin runserver –nostatic –insecure"></a>django-admin runserver –nostatic –insecure</h5><p>使用 <code>--insecure</code> 选项强制通过 <code>staticfiles</code> 应用提供静态文件，即使 <code>DEBUG</code> 设置为 <code>False</code>。使用该选项表示您意识到这非常低效且可能不安全。此选项仅适用于本地开发，不应在生产环境中使用，并且只有在 <code>INSTALLED_APPS</code> 设置中包含 <code>staticfiles</code> 应用时才能使用。</p>
<p><code>--insecure</code> 与 <code>ManifestStaticFilesStorage</code> 不兼容。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin runserver --insecure</span><br></pre></td></tr></table></figure>

<h5 id="djanog-admin-runserver-是什么命令"><a href="#djanog-admin-runserver-是什么命令" class="headerlink" title="djanog-admin runserver 是什么命令"></a>djanog-admin runserver 是什么命令</h5><p><code>django-admin runserver</code> 是 Django 框架中的一个命令，用于启动开发服务器。它允许开发者在本地环境中测试和调试他们的 Django 应用程序。</p>
<ul>
<li><p>主要功能：</p>
<ul>
<li><p><strong>启动服务器</strong>：在本地启动一个轻量级的 HTTP 服务器。</p>
</li>
<li><p><strong>自动重新加载</strong>：在代码更改时，服务器会自动重新加载，以便实时查看更改效果。</p>
</li>
</ul>
</li>
<li><p>基本用法：</p>
<ul>
<li><p>运行命令时，可以指定主机和端口，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin runserver 0.0.0.0:8000  </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>这将使服务器在所有可用的 IP 地址上监听 8000 端口。</p>
<ul>
<li>注意事项：<ul>
<li>该命令主要用于开发环境，不建议在生产环境中使用。</li>
</ul>
</li>
</ul>
<h5 id="python3-manege-py-runserver-0-0-0-0-8000"><a href="#python3-manege-py-runserver-0-0-0-0-8000" class="headerlink" title="python3 manege.py runserver 0.0.0.0:8000"></a>python3 manege.py runserver 0.0.0.0:8000</h5><ul>
<li><p><code>python3 manage.py runserver 0.0.0.0:8000</code> 和 <code>django-admin runserver 0.0.0.0:8000</code> 的主要区别在于它们的使用场景和语法：</p>
</li>
<li><p>使用方式：</p>
<ul>
<li>**<code>python3 manage.py runserver 0.0.0.0:8000</code>**：<ul>
<li>这个命令需要你指明 <code>manage.py</code>，这是 Django 项目自带的管理脚本，通常用于执行项目特定的管理和命令。</li>
<li>适合在特定项目环境中运行。</li>
</ul>
</li>
<li>**<code>django-admin runserver 0.0.0.0:8000</code>**：<ul>
<li>这个命令使用 Django 的通用管理工具，而不必在项目目录中运行。</li>
<li>在某些情况下，更加方便，但通常需要确保环境路径的配置。</li>
</ul>
</li>
</ul>
</li>
<li><ol start="2">
<li>环境上下文：</li>
</ol>
<ul>
<li><code>manage.py</code> 是特定于某个 Django 项目的。它会自动配置该项目所需的环境设置。</li>
<li><code>django-admin</code> 可以在没有项目上下文的情况下使用，因为它是全局命令，但它可能无法正确处理某些项目特定的配置。</li>
</ul>
</li>
<li><p>总结：</p>
<p>虽然两者功能类似，都用来启动开发服务器，但使用 <code>manage.py</code> 命令时会更好地适应特定项目的上下文和配置，因此在实际开发中，建议使用 <code>python3 manage.py runserver</code>。</p>
</li>
</ul>
<h4 id="创建项目结构，包括-js-、css-、html、menu、settings、playground-目录、-scripts-项目管理脚本"><a href="#创建项目结构，包括-js-、css-、html、menu、settings、playground-目录、-scripts-项目管理脚本" class="headerlink" title="创建项目结构，包括 js 、css 、html、menu、settings、playground 目录、**scripts 项目管理脚本**"></a>创建项目结构，包括 <code>js</code> 、<code>css</code> 、<code>html</code>、<code>menu</code>、<code>settings</code>、<code>playground</code> 目录、**<code>scripts</code> 项目管理脚本**</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240812113814812.png" alt="image-20240812113814812"></p>
<p> 好，然后那么我们继续啊！我们有了这个 <code>static</code> 文件之后啊！我们就可以写，<strong>就可以创建我们的 <code>html</code> 文件了</strong>，好吧！那我们来创建</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240812235906317.png" alt="image-20240812235906317"></p>
<p>一下我们的 <code>html</code> 文件啊！那么我们首先进到我们的 <code>templates</code> 里边，哎！那么我们 <code>templates</code> 里边也是要创建这三个项目的，因为我们的 <code>html</code>  文件可能会比较多，对吧！那我们也要创建三个文件夹啊！分别叫 <code>menu</code> ，第二个叫 <code>playground</code> ，第三个叫，叫什么，叫 <code>settings</code> 对吧！？啊！大家这个打项目的时候你会发现打到后期会非常爽，因为他不需要动脑筋啊！然后可以噼里啪啦敲键盘，对不对！？会很很刺激啊！吭！好！那么，然后，我们这个项目还是一个支持多终端的项目，就他既可以在网页里跑，未来也是可以在 <code>acwing</code> 的应用里跑的，也就也就是说大家可以打开一个框框，啊！这个框框里就你的游戏，啊！比如说这个 <code>ac saber</code> 把！打开一个框框，你的这个游戏是可以在框框里跑的，而且一个页面里可以跑可以跑多个游戏啊！你比如说，你可以同时打开三个，那你就三个人可以哎！直接匹配，可以吧！啊！好，那么因此要支持多终端的话啊！大家可以再创建一个新的文件夹用来存储不同终端的这个代码，好吧！啊！我们可以创建一个新的文件夹啊！比如叫 <code>multiends</code> ，当然这个名字是我瞎起的，大家如果不想叫这个名字的话可以随便起一个啊！好，我们可以进到我们这个 <code>multiends</code> 里边去写啊！<code>multiends</code> 里面去写，啊！我们，额！我们这周啊！只支持 <code>web</code> 端的，啊！还暂时不支持 <code>acwing</code> 云端 <code>app</code> 端的，好吧！我们可能会下周，或者下下周就会支持另外一个端口，另外一个端的显示了，啊！好，那么我们在 <code>web</code> 端的话可以叫起个名字叫 <code>web.html</code> ，可以吧！好，那么这个里边啊！就是大家可以看一下啊！我们这个文件是在哪儿啊！这个文件的话是在额 <code>templates</code> 里边的 <code>multiends</code> 里面创建了一个文件，啊！叫 <code>web.html</code> ，啊！这个 <code>web.html</code> 就是我们的 <code>html</code> 文件，好吧！啊！那我们来看一下这个 <code>html</code> 怎么写啊！这个 <code>html</code> 如果大家之前没有接触过的话，没有关系啊！因为我们这里只会用到其中很少的一部分啊！大家直接这部分照抄就可以了，额，这个前端代码你就照抄两遍你就会啊！这个非常简单啊！好，那么，我们 <code>html</code> 的话一般需要这么几个结构啊！咱们只写最简单的啊！首先第一个是需要 <code>head</code> 标签，对吧！？啊！然后再杠一下 <code>head</code> ，哎！额！<code>vim</code> 的话是会自动补全，自动帮你调整格式的，大家会，大家可以看到自动帮我这个，额！往前缩进了一格，对吧！？啊！好，那么我们 <code>head</code> 里边的话，首先你需要将所有的 <code>web</code> 资源文件放到 <code>head</code> 里边，啊！那么我们在这节课当中啊！我们用一下这 <code>jquery</code> ，好吧！啊！额！这个额嗯！额！前端的这些工具啊！有很多，我们现在给大家选的是一个非常简单的，不太需要去提前看的，可以直接上手写的一个工具，啊！叫 <code>jquery</code> ，啊！然后，目前比较主流的还是 <code>vue</code> ，就 <code>vue</code> ，<code>vue</code> 的话我们放到 <code>level-3</code> 去仔细讲，好吧！啊！我们现在的话只是先暂时用一下 <code>jquery</code> ，好！那么，这两行的话，这两行的话大家直接复制过来就可以了，那么只要将这两行加到 <code>head</code> 中间，哎！你就可以用 <code>jquey</code> 里面的一些，<code>jquery</code> 里面的一些语法糖了啊！好吧！啊！<code>jquery</code> 顾名思义啊！就是 <code>javascript``query</code> ，什么意思呢？就是你在 <code>javascript</code> 里边去查询 <code>html</code> 对象的时候，写起来很短，啊！这就 <code>jquery</code> 的一个特点，啊！啧！好！再把第二行抄过来，啊！这两行的话，大家可以仔细看一下啊！第一行的话就是 <code>css</code> 文件，对吧！？<code>jquery</code> <code>css</code> 文件，啊！第二行的话就 <code>jquery</code> 的一个 <code>js</code> 文件，啊！对！<code>html</code> 就是一棵树啊！后面啊！后面大家在把自己刚刚定义的，你自己的 <code>css</code> 文件和 <code>js</code> 文件也加入进来，啊！我们可以仿照上面的格式啊！首先用 <code>link</code> 来将我们的额 <code>css</code> 文件抄，把这个第一行抄下来就可以啦，<code>stylesheet</code> 哦，<code>styleshet</code> ，额！然后，<code>href</code> 等于什么呢？额！我们在 <code>django</code> 里边啊！在去写的时候啊！在这个 <code>django</code> 的 <code>html</code> 文件里边可以用它提供的一些工具来帮我们快速的查找文件啊！你比如说我们如果向查找 <code>static</code> 目录下的某些文件啊，比如 <code>game/static/</code> 目录下的 <code>css</code> 目录下的这个文件的话，我们可以直接这样写，就是 <code>static</code> 然后后面接 <code>static</code> 目录后面的路径就可以了啊！我们的路径应该是 <code>css</code> 对吧！然后 <code>game.css</code> 啊！可以吧！啊！就是这个 <code>static</code> 的话就表示我要从这个路径下开始往后走，啊！先走到 <code>css</code> 目录啊！再把里边的 <code>game.css</code> 文件搞过来啊！然后大家如果用到了 <code>static</code> 这个关键字的话，你要在最开头加上一行啊！这直接背过就可以啦加上一行 <code>&#123;% load static %&#125;</code> 就可以啦！额嗯！对！嗯！<code>django</code> 版本更新过啊！以前的话需要写的是这个 <code>staticfiles</code> ，现在这个最新版本的话写个 <code>static</code> 就可以了，啊！额，对！大家，大家用的这个是（嘴角微微上扬）<code>acwing</code> 的 <code>cdn</code> 啊！所以比较快啊！用国外的 <code>cdn</code> 的话可能会比较卡，哎！（喝可乐），好，那么然后，这样的话就将我们的 <code>css</code> 文件加到我们的页面里啦，啊！然后再将我们的 <code>js</code> 文件加进来，<code>js</code> 的话大家，刚刚大家已经看到了啊！就是我们是将我们的 <code>js</code> 打包到我们的打包到我们的 <code>static/js/dist</code> 目录下的 <code>game.js</code> ，就我们不管有多少个 <code>js</code> 文件都会打包成这同一个文件，对吧！啊！好，所以说我们这里的话可以将，当然这个，这里这里有句题外话，打包文件有很多种工具，啊！我们后面会给大家介绍一种工具，就是他不光可以帮你打包，还可以帮你压缩代码，还可以帮你删注释，啊！就是会更加的方便，然后，这里的话是为了给大家说明他的原理是什么，所以我咱们给大家手写了一个打包的一个工具，啊！就是将所有的文件，其实就是将所有文件手动粘到一块去，然后 <code>script</code> ，<code>src</code>，后面的话也是一个额！静态文件对吧！？啊！这个<code>django</code> 里边静态文件需要这样写啊！就是大括号，然后这个这个百分百号，后面的话也是百分百号，大括号，<code>static</code> 然后这里的话应该是 <code>js/dist</code> ，这个路径是什么就抄，路径是什么就，这里就怎么写就可以了，哦他是在 <code>js</code> 的 <code>dist</code> 里边的 <code>game.js</code> 里边，对吧？！然后注意这个 <code>script</code> 的话需要闭标签啊！ <code>link</code> 不需要，<code>script</code> 的话需要闭标签啊！<code>script</code>  好，咱们整个项目，咱们整个课的话只会用到 <code>jquery</code> 啊！别的都不会用到，好吧！<code>jquery</code> 的话基本上不用提前学，啊！你就一看就会写，咳嗯！好！咳嗯！然后，啧！选 <code>jquery</code> 选 <code>jqeury</code> <code>jquery</code> 的原因也是这个，就是因为他不需要提前学啊！好，然后，后面就是写我们的 <code>body</code> 啦！<code>body</code> 的话是我们的主要组成部分，就我们未来所有东西都会放到 <code>body</code> 里啊！然后  <code>body</code> 这里一定要家一个样式啊！这里直接照抄就可以啦！叫 <code>margin: 0</code> ，<strong>这个 <code>margin:0</code> 是什么意思呢？</strong></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240812232028886.png" alt="image-20240812232028886"></p>
<p>啧！就是我们这个 <code>html</code> 里边，每一个东西啊！他都是有一个属性叫 <code>margin</code> 的啊！举个例子啊！比如我们在页面里面有一个矩形啊！那么这个矩形的 <code>margin</code> 是什么意思呢？你比如说 <code>margin</code> 如果等于 <code>55</code> 像素的话，那就表示说，哎！他，相，他的真实宽度其实是这一圈加上 <code>5</code> 像素，好吧！啊！那么 <code>margin</code> 等于 <code>0</code> 表示的是啊！我周围一圈没有啦！哎！我的边界就是我的，就是，我当前的边界就是我真实边界，啊！<code>margin</code> 这个词应该是不边界的意思啊！就是我的边界要不要外延，<code>margin:0</code> 的话表示我的边界不要外延，啊！如果大家不加这句话的话，他默认会外延一小部分，啊！会非常丑啊！啧！好！那么！然后，后面的部分啊！就是我们接下来要去写我们写我们这个界面的，或者写我们整个网站内容的时候啊！就不再用 <code>html</code> 继续写啦！而是用 <code>js</code> 去动态渲染，啊！所以后面的话是我们引入一个 <code>js</code> 文件就可以啦！我我我们调用这个 <code>js</code> 的一个 <code>api</code> 就可以啦！啊！然后，我们这里的话首先先去创建一下我们整个游戏的一个框架啊！比如可以叫 <code>div</code> ，啊！然后随便起一个 <code>id</code> 啊！这个 <code>id</code> 的话比如可以叫 <code>ac</code> <code>ac_game</code> 对吧！？然后随便加一个编号，比如<code>12345678</code> ，好，随便起一个就可以啦，好！然后，我们后面的话引入 <code>js</code> 文件，引入 <code>js</code> 代码，<code>script</code> 好，那么这里的话我们这几行照抄就可以啦！因为这几行的话只会写一遍啊！然后我们这里的话，这个 <code>jquery</code> 的一个关键字叫 <code>document.ready</code> 就表示我们整个文件已经准备好啦！<code>function</code> 好，然后，我们在这个 <code>function</code> 里边创建一个我们未来要创建的一个 <code>js</code> 代码啊！比如说我们这个代码叫，额！比如说我们随便定义一个名字啊！比如叫这个 <code>ac_game</code> 对吧！？这是我们的对象，我们整，我们未来整个游戏界面都是在一个 <code>class</code> 里面，好吧！都是在一个 <code>class</code> 里边，这个 <code>class</code> 的名字我们可以叫 <code>ac_game</code> 这个名字是我们是我们自己随便起的啊！好吧！？嗯！错啦！？额哦哦！额吭嗯！好吧！这就是我们的一个这哥个前端代码啊！嗯！然后，以后，也就是说我们未来在写的时候啊！真实渲染我们界面内容的部分其实是在 <code>js</code> 里边，啊！所以说我们整个页面其实是前端渲染的啊！不是后端渲染的，啥意思呢？啊！这里要给大家讲一下就是我们刚刚大家看一下这大家可以看一下这些文件结构啊，就是额 <code>views</code> 里边所有的函数，<code>views</code> <code>urls</code> 里边所有的函数都是在服务器端跑的，也都也就是都是在大家在大家的机器上跑的，啊！（甩头，酷）然后 <code>js</code> 里的所有的函数都是在客户端跑的，客户端跑的，举个例子啊！比如说，啊！这是我的客户端，对吧！？额！那么，我在这个页面里，就我 <code>js</code> 的话是在这个页面里跑的，也就是都在我浏览器浏览器里跑的，啊！然后我的 <code>views</code> 这些函数啊！都是在我们的这个 <code>ac</code> ，都是在我们的云端服务器里跑的，他是不一样的，好吧！啊！如果渲染 <code>html</code> 是在客户端渲染的，也就是如果是用 <code>js</code> 渲染的，那就是，那就是前后端分离的，啊！好吧！他会对大家的服务器压力会很小，因为是在用户的浏览器里渲染的，对不对！？啊！好，那么我们整个这个项目的话都是在，他的主要界面渲染方式都是在客户端，也就是说啊！我们将这个代码传给用户的浏览器，然后，用，在用户端浏览器里边执行这句话，哎！我们创建了一个这个对象，好吧！啊！那么这个对象的话，大家是需要自己实现的啊！<strong>我们来开看一下这个 <code>js</code> 怎么来实现啊！？</strong></p>
<p>​	我们在这个 <code>src</code> 里边啧！嗯！我们的这个 <code>js</code> 里边分成三个部分啊！分别是 <code>menu</code> 、<code>playground</code> 、还有这个<code>settings</code> 、我们也是继续分啊！啧！每一个代码量比较大的部分都要继续分，啊哈！创建三个目录，分别叫 <code>menu</code> 、<code>playground</code> 、还有啊这个 <code>settings</code> 、好吧！啊！然后我们在这个文件夹里边啊！创建一个总的文件，啊！这个比如可以叫 <code>zbase.js</code> 啊！为什么叫 <code>zbase</code> 呢！嗯嘿嘿（得意<img src="C:\Users\20344\AppData\Local\Temp\SGPicFaceTpBq\31260\258165F2.png" alt="258165F2">)，啊哈呵，这个是我的一些习惯啊！因为我们的打包工具是按照字典序打包的，对吧？！啊！我们的打包工具是按照字典序打包的，啊！然后，我们这个是总的一个 <code>class</code> （<code>static/js/src</code>目录下)  ，我们总的 <code>class</code> 里边会调用这三个文件夹里的其他的 <code>class</code> ，啊！那么 <code>js</code> 的话在调用之前你必须要先把他定义好，额！也就是说啊！我们在打包成一个文件之后，啊！需要保证这三个目录里的文件要在我总文件的前面，啧！啊！那么由于我们在打包的时候是按照文件名字典序去打包的啊！额！前面加个 <code>z</code> 的话字典序一般比较大，额吭呵呵，就这意思啊！前面加个 <code>z</code> 的话就可以保证我们这个 <code>zbase</code> 一定会被排到前面三个（<code>menu</code> 、<code>playground</code> 、<code>settings</code>) 目录的所有文件的后面啊！好，然后我们这里面定义一个 <code>class</code> 啊！嗯哼，<code>js</code> 的 <code>js</code> 大家如果没有学过的话没有关系啊！其实跟 <code>python</code> 或者 <code>c++</code> 是类似的，大家直接照抄就可以啦啊！<code>class</code> 然后名字的话就叫 <code>AcGame</code> ，啊！这个大家名字可以随便起啊！你这里叫什么，你这个你这个 <code>class</code> 名就叫什么，只要对应起来就可以啦，<code>AcGame</code> 然后 <code>AcGame</code> 里边这个 <code>js</code> 的 <code>class</code> 里边有一个构造函数，叫 <code>constructor</code> ，这个 <code>constructor</code> 的话就是 <code>c++</code> 里面的构造函数，好吧！啊！或者是 <code>python</code> 里面的 <code>__init__.</code> 函数，是一个东西啊！那么这个函数我们一般会传一个参数啊！叫 <code>id</code> ，大家可以看到我们这里传了一个参数，对不对！？这个 <code>id</code> 的话是将哎！他的，他会渲染到这个 <code>div</code> 里边，他会将这个 <code>div</code> 的 <code>id</code> 传进来啊！<code>ac_game</code> 抄过来啊！<code>12345678</code> ，抄过来，好吧！？啊！额！</p>
<p>​	为什么不在 <code>html</code> 为什么不写在 <code>html</code> 里，而是用 <code>js</code> 去渲染，</p>
<p>​	对！这个主要是为了多，<strong>主要是为了多终端啊！而且另外一点是为了减轻大家服务器的压力啊！</strong>就是大家如果是直接在这里写上，啊！就这里如果你不用 <code>js</code> 渲染啊！而是直接写 <code>html</code> 的话，那么他会在后端渲染，啊！也就是所有用户在去调用你网页的时候，你都都是在后端先把网页生成好，再传给前端，啊！你这样的话服务器的计算量会非常大！啊！会比较吃资源啊！然后，但是如果大家将这个文件啪传给用户的话，那么是在用户电脑上去去渲染，这样的话你的服务器压力会很小而且用户操作体验也会更加高，也会，也会更加好一些，啧！吭吭！</p>
<p>​	好，那么大家在执行，大家在写完这个，啧！大家在写完这个文件之后啊！你一定要，<strong>你每次在改完这个 <code>js</code> 文件之后一定要将他重新打包一下</strong>，再执行一遍，好吧！？啊！执行完之后大家可以看一下这个 <code>dist</code> 文件里面有没有变啊！啧！啊！他已经变过来了！对吧！他就是将他就是将我们 <code>src</code> 里面的所有 <code>js</code> 文件额额！全部贴在一起啊！按照字典序贴在一起，按照文件名字典序贴在一起，啊！吭嗯！好，那么这样的话我们的这个 <code>html</code> 就写完啦，就我们接下来很长一段时间可能都不会再写 <code>html</code> 啦！好吧！接下来我们所有的 <code>html</code> 都是在 <code>js</code> 里写，啊！（抿了抿嘴唇），好，那我们这个 <code>html</code> 写完之后啊！下一个就是需要去写我们的 <code>views</code> 文件啦！啊！这个 <code>views</code> 就是用来返回 <code>html</code> 的，对不对！？或者返回数据的，啊！我们 <code>html</code> 写完之后就可以写 <code>views</code> 啦！啊！我们来看一下 <code>views</code> 怎么写，好，那么 <code>views</code> 里边也是一样啊！我们 <strong><code>views</code> 里边未来函数</strong>会非常多~，啊！那么我们需要将所有的函数分成三大类啊！就是 <code>menu</code> 的放到 <code>menu</code> 里边，<code>playground</code> 放到 <code>playgroud</code> 里边，啊！<code>settings</code> 的放到 <code>settings</code> 里面，所有说我们的 <code>views</code> 里边也需要创建三个文件啊！叫这个叫什么叫 <code>menu</code> 对吧！啊！然后 <code>playground</code> 、还有一个叫 <code>settings</code> ，对吧！那么同理这是一个 <code>python</code> 文件夹，对不对！？那么 <code>python</code> 每一个文件夹里边都需要加上一个 <code>__init__.py</code> 文件，好，那么我们先进到 <code>menu</code> 里面，哎！创建一个 <code>__init__.py</code> ，然后，返回到 <code>playground</code> 里边，啊！创建一个 <code>__init__.py</code> 文件啊！返回到 <code>settings</code> 里边，啊！创建一个 <code>__init__.py</code> 文件可以吧！啊！所有大家会发现，写这种项目代码很爽，因为大家一直在疯狂敲键盘，啊！就这种就很爽，啊！跟算法题不一样，算法题的话一直在想，对不对！？啊！吭嗯！好！然后，我们接下来是需要写一个 <code>index.py</code> 文件，写一个总的函数，这个总的函数是干嘛的呢？啧！嗯！这个总的函数只会在 <code>html</code> ，只会在 <code>html</code> 端被调用，啊！只会在 <code>web</code> 端被调用，啊！未来在其他端是不会被调用的啊！这个函数啊！主要就是用来返回我们刚刚的写的那个 <code>html</code> 文件的，好吧！？啊！那么咱把他写一下啊！那么我们这里的话是需要渲染一个文件，那么渲染的话 <code>django</code> 里面也有一个 <code>api</code> 叫 <code>django.shortcuts</code> ，然后 <code>import</code> 一个 <code>render</code> 函数啊！**<code>render</code> 函数的话<strong>就是在服务器端渲染一个 <code>html</code> 文件啊！所谓渲染的意思，就是将 <code>html</code> 内个文件，额嗯！的内容拿过来好吧！他就是将 <code>html</code> 文件的内容生成好啊！这个是渲染的意思，啊！其实就是拼接字符串，啊！好，然后我们随便定义一个名字，比如叫这个 <code>index</code> ，啊！然后，每一个函数都会传一个 <code>request</code> 信息，这个未来会用，暂时不会用，啊！然后我们 <code>return</code> 一个 <code>render</code> 函数，啊！<code>render</code> 函数的第一个参数一定是 <code>request</code> 第二个参数啧！是我们刚刚在 <code>templates</code> 文件夹下的 <code>html</code> 的一个路径啊！我们可以看一下刚刚的这个路径是什么啊！刚刚的路径是在 <code>templates</code>  里边的 <code>multiends</code> 里边，对吧！啊！那么这里的路径要从 <code>templates</code> 后面开始写，那么这里应该是 <code>multiends/web.html</code> ，对吧！啊！好，那么这样的话我们的 <code>view</code> 函数就写完啦，啊啊嗯！<code>view</code> 函数就写完啦，对不对！？啊！</strong>那么写完 <code>view</code> 之后<strong>，啊！我们</strong>就可以写我们的路由了**，因为函数已经有了啊！所有我们可以将我们的链接对应到我们的某个函数啦！啊！</p>
<p>​	那么我们来看一下路由怎么写，啊！路由的话也是一样，<strong>进到 <code>urls</code> 里边去</strong>，啊！那么这个里边也是一样啊！就是我们我们未来的链接可能会非常多啊！你比如一个网站，一个 <code>acwing</code> 的话几百个链接，我们要把他分个类，啊！我们这里的话这个项目的话是分成三大类，对吧！？啊！<code>menu</code> 、<code>playground</code> 、还有 <code>settings</code> 啊！创建三个文件夹，<code>menu</code>、啊！<code>playground</code> 、还有一个叫 <code>settings</code> ，对吧！啊！先这些啊！咱们现在还没有还没有正式开始写这个界面啊！一一直在处理文件结构的问题啊！额嗯！这个文件结构非常的重要啊！因为未来的话额嗯！我们的项目能不能写的很独立啊！能不能解耦合全看今天啦！好，那么这些也是 <code>python</code> 文件，那么 <code>python</code> 文件的话同样道理都需要在每个文件里面创建一个 <code>__init__.py</code> 文件，啊！好！那么我们进到三个文件夹里边，哎！创建一个 <code>__init__.py</code> 啊！然后返回到 <code>playground</code> 里边，哎！创建一个 <code>__init__.py</code> 然后返回到 <code>settings</code> 里边，哎！创建一个 <code>__init__.py</code> 啊！可以吧！啊！啊！对！这个渲染，所谓的渲染文件，渲染前端页面就是在 <code>python</code> 里面把这个字符串拼接出来啊！拼接字符串，你想在后端如果在后端渲染就是后端渲染，如果放到前端渲染就是前就是前端渲染啊！前后端分离就是放到前端去渲染，啊！为什么是从 <code>multiends</code> 开始，不是从 <code>templates</code> 开始，因为这是 <code>django</code> 定义的，啊哈，因为 <code>django</code> 他，作者就这么写的，啊！你可以去问问作者为什么这样定义啊！都是写默认值啊！都是些默认值，啊！写完之后，我们 <code>tree</code> 一下，可以的，啊！嗯吭吭！好，那么然后我们也是一样啊！需要在当前目录下创建一个 <code>index.py</code> 啊，这个 <code>index.py</code> 啊！每个 <code>urls</code> <code>urls</code> 文件夹下面都会有一个 <code>index.py</code> 啊！这个玩意儿干嘛的呢？这个玩意儿是用来将他所有，额！这个路径下其他文件夹里边的这个路径 <code>include</code> 进来的一个作用啊！我们来看一下怎么去写，那么我们嗯吭！这里可以仿照我们这个整个项目目录的总的 <code>urls</code> 去写啊！整个项目目录的总 <code>urls</code> 是在这个 <code>acapp/acapp</code> 里边，对吧！点开，打开这个 <code>urls</code> 里边，打开 <code>url——s.py</code> 啊！好，大家把他抄过来就可以了，<code>django.urls import</code> 一个 <code>path</code> 还有一个 <code>include</code> ，好，那么他这个里边是需要定义一个变量叫 <code>urlpatterns</code> ，注意这个变量名不要打错啊！上次我看到群里有同学打错这个变量名啦啊！<code>urlpatterns</code> 对吧！？好，那么我们先去这三个子文件里边将这三个文件创建出来啊！ 同样道理都是一样的啊！进到 <code>menu</code> 里边创建一个 <code>index.py</code> ，然后 <code>from django.</code> 啊！<code>urls</code> 对吧！<code>urls import</code> 一个 <code>path</code> ，<code>path</code> 就可以啦，暂时用不到 <code>include</code> 的啊！<code>urlpatterns =</code> 一开始什么都没有，所以空的就可以啊！好，然后返回到我们的，哎！这个 <code>playground</code> 里边，好，然后，创建一个 <code>index.py</code> ，啊！然后 <code>from django.urls import path</code> 啊！把这个再抄一遍，在复习一遍，当然大家可以把刚刚那个文件直接复制过来但是我推荐大家自己手写一遍，这样可以加深记忆啊！<code>patterns</code> ，好！然后，再同理在进到我们的 <code>settings</code> 里边，再创建一个 <code>index.py</code> ，好，<code>from django,urls import path</code> ，然后 <code>urlpatterns =</code> ，然后我们返回到这三个文件夹的总文件夹里边，哎！进到我们总文件夹的 <code>idnex</code> 里边，这样我们就可以 <code>index</code>了啊！这样我们就可以将刚刚定义的几个文件 <code>include</code> 进来了，啊！一共要 <code>include</code> <code>3</code> 个东西，对吧！分别叫做 <code>path path path</code> ，第一个的话应该是，额！<code>menu</code> 类的路径啊！<code>menu</code>   类的路径，我们可以放到 <code>menu</code> 里边，啊！额！这个路由待会待会给大家讲他的规则是什么，啊<del>，好，那么，我们需要将，这个 <code>menu</code> 里面是要将什么呢？哎！要将我们的这个 <code>game.urls</code> 里边的啊！他这个是按照文件夹路径来写的啊！大家可以看一下我们的一开始是 <code>game</code> ，对不对！？啊！进到 <code>game</code> 的里边的 <code>urls</code> 里边，啊！那么进到 <code>urls</code> 里边的 <code>menu</code> 里边，啊！那么在 <code>menu</code> 里边有一个文件叫 <code>index.py</code> ，对不对！？啊！所以这里要写的时候是 <code>game.urls</code> 啊！<code>.menu.index</code> 就可以啦，注意没有 <code>.py</code>   啊！那么第二个也是类似的去写啊！这个叫 <code>playground</code> 的啊！好，然后也是将 <code>playground</code> 的文件夹的文件 <code>include</code> 进来，好，<code>game.urls.playground</code> 里边也有一个 <code>index</code> ，对吧！啊！好，然后，第三个也是一样啊！类似的，把他抄过来就可以啦！就是 <code>settings</code> 啊！然后，<code>include</code> <code>game.urls.settings.index</code> ，好，就可以啦，好吧！？啧！啊</del>！，吭嗯！然后，当然啦这个我们刚刚不是实现了一个函数吗？同学们，还记得吗？我们刚刚实现了一个函数啊！实现了内个函数呢？哎！实现了一个在 <code>views</code> 里边，实现了一个全局函数，队不对？，他可以返回我们刚刚，他可以返回我们刚刚写的内个 <code>html</code> 文件，<del>啊！那么这个函数的话他其实是一个他其实是一个什么概念呢？其实是一个总函数啊！就是我们整个游戏只有一个链接，啊！那么因此我们可以将这个函数直接写到这里，感觉上比较合理，对吧！啊！可以写到这里啊！好，那么我们将他先 <code>import</code> 进来啊！应该是 <code>game.views.index</code> 啊！就是从 <code>game</code> 的文件夹里边的 <code>views</code> 文件夹里边的 <code>index</code>文件里边 <code>import</code> 一个 <code>index</code> 函数，啊！对吧！啊！好，这里的话，我们可以直接将他加进来，啊呵，那么由于他是一个总函数，啊！所有我们这里就不要写路径啦，直接 <code>index</code> 就可以，然后起个名字 <code>name</code> 就等于全局的 <code>index</code> 啊！就是 <code>index</code> ，注意这里不要写东西啊！因为你这里如果写东西的话，那么在我们访问游戏的时候，你就后面就需要加东西，你比如比如这里写个 <code>menu</code> 的话，那你这里就要加上一个 <code>menu</code> ，就就就需要加上一个 <code>menu</code> ，很麻烦啊！所以这里的话，大家一般不要写，空的就可以啦！啧！嗯哈！这个项目，这个 <code>django</code> <code>django</code> 项目的最终实现之后能发布到哪里呢啊！一个是可以做成你自己的网站，另外一个的话是我们这个项目做完之后发布到两个地方啊！一个是自己的网站，你可以直接在链接里打开啊！另外一个的话是可以在 <code>acwing</code> 的 <code>ac</code> 这个 <code>acapp</code> 里打开，用一个窗口打开，就跟 <code>Saber</code> 是一样的，可以吧！啊！嗯吭！当然 <code>django</code> 后面可以对接各种终端，比如说 <code>app</code> 对吧！也，这个也是可以对接的，啊！额嗯</del>！好，然后，另外大家还要注意一下要改一下全局的 <code>urls</code> 啊！返回到我们的 <code>acapp</code> ，然后 <code>acapp</code> 里边，额！然后打开这个哎！全局的 <code>urls</code> 里边，啊！然后我们这里刚刚不是注释了一个路由吗？需要把这个路由放开，那么这个路由需要将 <code>urls</code> 里边的 <code>index</code> 加进来，那就是 <code>urls</code> 然后 <code>.index</code> ，将他加进来就可以啦！好吧！啊！然后，后面给大吉讲一下啊！咱们这样，咱们先把这个代码存一下啊！然后，给大家看一下我们的这个啊啊！文件结构啊！刚刚有同学说要看一下文件结构，对吧！给大家看一下啊！啧！额！当然这个文件结构比较乱啊！大家可以去 <code>acgit</code> 上看，咱们先把这个代码先存一下，大家可以看到，我刚刚一下瞬间改了好多，对不对！？啊！<code>git add .</code> ，好，然后，<code>commit</code> 一下啊！这个叫什么呢？这个叫额 <code>write</code> 我们可以大概看一下我们改了什么东西啊！<code>write views</code> ，对吧！改了，应该是加了 <code>views</code> ，加了 <code>js</code> ，加了 <code>html</code> ，<code>js</code> ，<code>view</code> 还有 <code>urls</code> ，对不对！加东西加东西比较多，大家都可以写上啊！<code>write html js</code> 然后，<code>views</code> ，啊！<code>urls</code> ，好，然后 <code>push</code> 一下，好，大家可以去云端看一下啊！可以去咱们的 <code>acigt</code> 里边看一下我们的文件结构，刷新一下，哎！这样的话就可以看到了，对吧！大家可以看一下啊！这个文件结构就是这样的啊！然后，啊哼！我们的全局的 <code>urls</code> 是在这个 <code>acapp</code> 里面改的，在这里面改的，也就是整个 <code>django</code> 项目，啊！在我们访问的时候，啊！大家可以刷新一下，诶！啊！大家可以看到我们刷新之后，我们访问的是这个链接对吧！啊！那么这个链接，他就优先会进到全局的 <code>urls</code> 里边，啊！对！然后，进来之后，当然他会去匹配啊！会先看第一项，每一项是用这个 <code>/</code> 隔开的，啊！那么大家可以发现第一项，我们啥都没有，所以他肯定不能匹配 <code>admin</code> ，对不对！？好，如果大家加的是 <code>admin</code> 的话，比如 <code>/admin</code> ，那么一回车他就会调到 <code>admin</code> 页面，啊！就他会会去路由在这里，他会去分类，他会去看第一个字符串啊！如果是空的那就是这种，对吧！啊！否则如果是 <code>admin</code> 的话，哎！他就会跳到第二种，他会根据这个来跳，啊！那么如果我们是空的话，啥都没有，对不对！？那么那么他就会调到这个里边去，这个里边的话，这个是在 <code>game.urls.index</code> 里边，那么大家可以找到 <code>game.</code> <code>.</code> 这个 <code>urls</code> <code>.index</code> ，应该是这个对吧！？那么进来这个里边之后，他会再去看啊！那么我们可以发现，那么如果他后面是 <code>menu</code> 的话，他就会进到这个里面，他就会进到 <code>menu</code> 的 <code>index</code> 里边去看，可以吧！啊！那么他如果是空的，那么他就会直接访问这个函数，啊！这个函数的话是 <code>game.views.index</code> 里边的 <code>index</code> 函数啊！那么因此的话如果我们是空的，他就会直接进到这个函数里边，那么这个函数就是我们的 <code>views</code> <code>views.index</code> 里边的 <code>index</code> 函数，对吧！啊！那么我们这个 <code>index</code> 函数他会渲染一个，他会渲染一个 <code>html</code> 页面，也就是会返回一个字符串，对吧！啊！这个字符串的内容就是我们 <code>multiends</code> 里边的 <code>web.html</code> 的内容啊！那么因此他返回的就是就是我们这个直接访问的话，他返回的就是这个 <code>html</code> 文件里的内容，那么我们可以看一下，这个内容是什么东西啊！这个这个内容的话就是 <code>templates</code> 里边的 <code>multiends</code> 里边的 <code>web.html</code> ，啊！好，那么大家可以看一下他返回的内容是不是这个东西啊！大家可以右键查看网页源码，大家会发现，噢！跟这东西一模一样啊！所以这个就是原理，啊！他每来一个链接会先去 <code>urls</code> 里边一步一步去看他应该对应到哪个函数啊！当找到这个函数之后，他就会在 <code>views</code> 里边调用这个函数，啊！然后这个 <code>views</code> 函数会返回一个拼好的字符串，或者返回一个数据，啊！那么会返回到前端啊！那么这个，他返回的是一个 <code>html</code> 文件，对吧！大家可以看一下这个 <code>html</code> 文件写的是什么东西啊！那么这个 <code>html</code> 写的东西是这样的，对不对！？那么他返回的就是这样的，大家可以自己试一下啊！你比如说我们可以稍微改点东西，你可以看一下是不是能够返回过去啊！额！举个例子，比如说，我们可以在我们这个 <code>templates</code> 里边，啊！随便改点东西啊！比如我们在和这个里边，哎！进到 <code>web.html</code> 里边，对吧！？我们可以随便，比如说咱们可以输出一个东西，对吧！啊！这个 <code>html</code> ，输出的话是 <code>console.log()</code> 啊！这个就类似于 <code>printf</code> 的一个东西，啊！这个可以输出一个 <code>hello world</code>，对不对！？然后，保存一下，然后，你刷新一下，右键啊！你要右键，因为因为他这个东西是显示不到前端的啊！然后右键看源码，你就会发现，哦！多了一个 <code>hello world</code> ，对不对！？那这里可能可能有同学会问了，那这个输出到什么地方了呢？他是输出到了 <code>f12</code> 里边，大家摁一下 <code>f12</code> ，啧！嗯！如果是 <code>mac</code> 的话你要去，你可以，你你可以去查一下这个 <code>mac</code> 的 <code>chrmo</code> 怎么打开这个这个调试功能，啊！然后，右键检查应该可以打开，好吧！右键检查就打开啦！好，那么这个 <code>console</code> 的输出是在这个调试模式的 <code>console</code> 里边大家可以发现有一个 <code>hello world</code> ，队不对！？有一 <code>hello world</code> 啊！然后，这里报错啦！啊！哦！这里应该加上一个 <code>new</code> 啊！报错啦，这里要，这个 <code>js</code> 里的这个创建对象的话要加上一个 <code>new</code> ，好，大家再刷新一下，诶！就有了一 <code>hello world</code> ，对不对！？大家可以试一下，你比如这里的话加上一个 <code>！！！</code>，哎！一保存，那你一刷新这里就会有<code>！！！</code> ，好吧！啊！好，然后，给大家一些时间看一下有没有问题啊！啧！那么到此位置的话我们终于把我们的前期准备工作做好了啊！后面的话就开始写我们的这个这个菜单界面啦！哈哈哼嗯！前面的话都是在做准备工作啊！这个准备工作非常的重要啊！因为我们接下来整个项目都会在整个文件结构里去写，都在这个文件结构里去写，大家一定要搞清楚这个项目项目的系统设计这三个部分是干嘛的，然后要搞清楚 <code>django</code> 里面每一个目录是干嘛的，啊！然后每一个目录都要分成三个部分，分别写，可以吧！？ 啊！对！大家把这写完之后啊！这游戏写完之后，可以向 <code>saber</code>内样将链接发给好友你就可以对战啦！啊！这个并不难只是东西比较多啊！大家课后的时候你不要担心，你在课后的时候，你把我们上课讲的代码一个一个抄一遍，你就会啦！啊！其实这个没什么难度啊！大家可以发现跟比跟算法比起来不需要动脑筋，对不对！？啊！你只要知道内一个文件夹里存什么东西就可以啦！啊！然后，大家这个上完课之后啊！你可以自己去捋一遍啊！比如说访问这个链接之后，他是怎么着把这个 <code>hello world</code> 搞出来的啊！一步一步一步搞出来啊！就他第一步会先进到 <code>acapp</code> 的，我再带大家捋一遍啊！他会先进到先进到 <code>acapp</code> 的 <code>urls</code> 文件里边，那么大家会发现这个后面没有 <code>admin</code> ，啊！所以他会进到第一个这个这个这个，第一个路径里边，那么第一个路径是 <code>game.urls.index</code> ，我们知道 <code>game.urls.index</code> 那么他就会进到这个里边，对吧！？那么在这个里边的话，一共有四种路由，大家会发现后面没有字符串，所以只能对应第一种路由，啊！那么第一种路由的话他就会调用这个函数，这个函数是什么函数呢？是 <code>game.views.index</code> 里面的 <code>index</code> 函数啊！所以我们可以点开 <code>views.index</code> 里边的 <code>index</code> 函数，啊！那么，因此，这个链接就会调用这个函数，那么这个函数会返回这个 <code>web.html</code> 里面的内容啊！那么我们可以看一下这个这个 <code>html</code> 文件的话要在 <code>templates</code> 里面去找，对吧？！<code>templates</code> 里边的 <code>mutliends</code> 里边的 <code>web.html</code> 里面，那么因此我们的这个链接会返回这个内容，对吧！啊！对不对！？那么这个内容里边，我们刚刚在本地改了对吧！这个内容里边刚刚 <code>console</code> 输出了一个东西啊！那么他在返回给用户前端之后，那么用户前端会执行他的 <code>js</code> 代码，这个 <code>js</code> 代码里边刚刚有一个输出 <code>hello world</code> ，所以就会在前端看到一个输出 <code>hello world</code> ，好吧！啊！啧！啊！这个路径有没有斜杠，这个比较模糊啊！有没有斜杠其实都可以，好吧！他这个是模糊判断，很多情况下没有问题，但有些有些情况下可能会有问题啊！坑坑嗯！好，给大家一些时间看一下有没有问题啊！然后我先去一下厕所啊！啊！大家可以先看一下啊！好吧！啊！好，后面就开始写我们的界面啦！啊！啊！这个为什么路径不加一个 <code>template</code> , 因为这个 <code>django</code> 定义的啊！ <code>django</code> 就这么定义的！加不加都可以，只是当时作者写的时候， <code>django</code> 作者写的时候没有加，我们就不用加了，为啥 <code>html</code> 代码里边可以不写 <code>html</code> 标签啊！本来就可以不用写啊！好，啊！那么，然后我们来看一下，额吭！这大家不用担心啊！你刚开始听的时候肯定会云里雾里，对吧！啊！？但是后面我们会写很多很多的函数啊！每一个函数都会重复一遍这个过程啊！重复多了你就会了，啊！好，那么，然后我们来看一下后面的内容啊！后面的话我们就开始正式写我们的代码啦！啊！我们后面写代码的话就完全是在 <code>js</code> 里面写啦！就大家发现没有，就是这个 <code>html</code> 的作用就是啊！将 <code>html</code> 返回给前端啊！那么前端一看有一个这个，有一个 <code>js</code> 代码需要执行，那么前端就会执行这份代码啊！这份代码他就会创建一个 <code>ac_game</code> 的 <code>class</code> ，那么我们接下来渲染页面全部是在这个 <code>class</code> 里面去写，好吧！啊！他会创建一个这个 <code>class</code> ，那么创建一个 <code>class</code> 的话，他就会调用这个 <code>class</code> 的一个构造函数，啊！我么我们来看一下啊！创建 <code>class</code> ，他就会构造，他就会调用我们这个 <code>class</code> 的一个构造函数啊！<code>static</code> 里边的 <code>js/src</code> 里边的 <code>zbase</code> 里边的这个构造函数，对吧！他就会，他就会调用这构造函数，啊！我们可以试一下，在这个构造函数里输出一个，输出什么输出一个 <code>create ac game</code> 对吧！啊！大家每次改完 <code>js</code> 之后啊！一定要记得重新打包一下啊！然后刷新一下，你会发现在右边输出了一个，右边输出的话一定要点 <code>console</code> 啊！你这个这个 <code>elements</code> 不是输出啊！然后他就会执行这句话，就说明我们这个函数确实被调用了，对吧！？啊！然后我们接下来在函数里创建我们这个界面啊！那么我们的这个菜单界面的话首先需要有一个背景，对不对！？啊！所以说我们需要创建一个背景啊！怎么创建呢？那么我们这个 <code>AcGame</code>   的话他还不是，我们这 <code>AcGit</code> 的话整个游戏对吧！？那么我们一般要分门别类啊！我们要在这个里边创建一个菜单界面，啊！那么每一个结构都是一个 <code>class</code> ，在我们这个设计模式之下啊！每一个结构都是一个 <code>class</code> ，啊！这个每一个结构你比如说我一个矩形啊！他就一 <code>class</code> ，他会跟这 <code>class</code> 绑定，啊！这个 <code>class</code> 会负责控制这个对象的所有的所有的功能啊！当然如果如果一个模块很小的话你没有必要给他单开一个 <code>class</code> 啊！你比如说，额额！但是当这个这个你比如说像界面这种一个比较大的一个对象的话，我们一般都会付一个 <code>class</code>  ，用来管理他所有的所有的所有的一个操作行为，啊！好，那么因此的话我们就需要去创建一个我们其实这个这个啊啊！在当前这个界面下应该是创建一个菜单界面的对象，对不对！？啊！好，那么我们菜单对象的话是在 <code>menu</code> 里边，然后我们在 <code>menu</code> 里边要创建一个 <code>menu</code> 的对象，那么我们首先需要定义一个我们的这个这个额嗯额嗯！<code>js</code> 文件对吧！？叫 <code>zbase.js</code> ，这个 <code>z</code> 一般来说这个 <code>base</code> 前边都加，都最好加上一个 <code>z</code> 啊！因为在咱们的这个压缩工具里边，打包工具里边他是按照文件名字典序排序的啊！加上 <code>z</code> 的话他的字典序比较大！他就会排到最后，对吧！啊！他就可以加进来你这个文件夹里边所有其他的内容，啊！否则的话顺序一颠倒他会发生我先调用再定义，就会报错，啊！好，那么我们这个 <code>class</code> 名字的话起的最好最好有规律一些啊！比如叫这个 <code>AcGameMenu</code> 对吧！？啊！<code>AcGame</code> 的 <code>Menu</code> ，对不对！？啊！（看了一眼聊天记录，哼了一下鼻子），好，那么我们这个里边也是一样啊！这也是一个 <code>class</code> ，对吧！那么这 <code>class</code> 的话也是会有一个构造函数叫 <code>constructor</code> 对不对！？<code>constructor</code> 啊！这个我们除了根，除了这个总对象之外，总对象的话是 <code>AcGame</code> 对不对！？除了总对象之外一般都传一个参数叫 <code>root</code> ，就是传我们总对象的内个对象，传递这个 <code>root</code> 是什么东西呢？啊！传的这个 <code>root</code> 其实就是我们 <code>AcGame</code> 这个对象，好吧，传的就是 <code>ac_game</code> 这个对象，啊！最好传，因为后面可能用到</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240814093900559.png" alt="image-20240814093900559"></p>
<p><code>root</code> 的信息啊！好，那么传完之后要记得将 <code>ro</code> 将这个信息存下来，存存的话就是 <code>this.root = root</code> ，存下来就可以啦！好，存完之后的话我们首先需要创建一下当前界面，对不对！？啊！那么创建当前界面的话，哎！可以这样去写，<code>menu</code> ，这个在 <code>jquery</code> 这种结构里边啊！如果一个是 <code>html</code> 对象的话，前面一般可以加上一个 <code>$</code> 符号，啊！这你加不加都可以，就是说这个，这个 <code>js</code> 对象的变量名前面可以加 <code>$</code> 的，好吧！我们一般习惯上如果是一个 <code>html</code> 对象的话，我们会加上一个 <code>$</code> ，如果是一个普通对象的话不加 <code>$</code> ，好吧！？啊！那么我们这个 <code>html</code> 对象创建的话也非常简单啊！就是 <code>$()</code> ，啊！然后后面加两个点啊！这两个点注意一下他不是单引号，他是 <code>esc</code> 键下面内个点，也就是波浪线内个按钮，摁两下，好吧！？啊！那么这里就是你怎么写他就会咱们显示到前端，好吧！啊！这个类似于 <code>python</code> 里边的三个单引号啊！好，我们创建一下啊！额嗯，我们首先创建一个背景，背景的话也是一个 <code>div</code> ， 他这个 <code>html</code> 里所有东西大部分都是 <code>div</code> ，就是一个结构，啊！ <code>div</code> 的话他就是一个树形结构，啊！<code>/div</code> 啊！好，然后定义一个 <code>class</code> ，<code>class</code> 的话我们可以叫这个叫 <code>ac</code> 对吧！<code>ac-game-menu</code> 啊！这个<strong>用下划线用减号都可以</strong>，<code>class</code> 名字， <code>js</code> 的 <code>class</code> 名，<code>html</code> 的 <code>class</code> 名用下划线用减号都可以，啊！啧！好，那么我们额吭！这样的话就定义了一个背景图案，对吧！啊！我们定义完背景图案之后，你要设置一下背景图案的样式啊！那么设置样式的话要用到 <code>css</code> 文件啦，进到我们的 <code>game</code> 里边，啊！然后进到我们的 <code>static/css/</code> 里边，啊！然后，打开我们的 <code>game</code> ，啊！这里怎么去设置样式呢？就是你看一下他这个名字叫什么，他的这个类名叫 <code>ac-game-menu</code> ，对不对！？啊！好，那么你想去设置这个类别所有的 <code>div</code> 的样式的话那就可以这样写就是 <code>.</code> 前面加一个点啊！如果是类的话前面加上一个点啊！<code>ac-game-menu</code> ，注意点一定要有啊！没有的话就就识别不了了啊！好，那么我们这个东西他的样式，他的样式的话首先我们要，这个，他的这个长宽都是百分之百对不对？！他要去覆盖整个页面对不对？！我们的整个背景要覆盖整个页面，那么覆盖整个页面的话，我们这个，他有一些属性啊！就 <code>css</code> 里边每一个对象都有一些属性啊！额！这些属性如果大家没有见过的话可以直接背过因为一共常用的就这么几个属性，都背完就完事儿了，一个是宽度，宽度的话是百分之百，容易理解，对吧？！啊！宽度的话百分之百，啊！就是撑满整个页面，高度的话百分之百，撑满整个页面，对吧！？啊！然后<strong>，背景的话 <code>background</code> ，<code>background-image</code></strong> ，我们这个我们这个背景的话是一个图片，对吧！？啊！这个图片的格式直接照抄就可以啦！然后我们<strong>图片的地址是什么</strong>？同学们还记得吗？图片地址的话大家还记得吗？是在这个 <code>static</code> 这个东西，大家把这个地址抄过来就可以啦啊！注意前面的链接不用抄，<strong>从 <code>8000</code> 后面开始抄</strong>，复制过来，然后粘过来就行啦！好，然后我们这个图片要注意一下啊！他<strong>要去做一个拉伸</strong>啊！大家这个每次写完之后，你可以直接去看一下啊！边看边调就可以啦啊！好，那么我们假设先写到这里好吧！好，那么我们这个 <code>html</code> 创建完之后，创建完之后我们需要将他加到我们的页面里边啊！那怎么加到页面里呢？啧！我们首先需要返回我们刚刚的总对象啊！总对象，也就是这个 <code>js</code> 根目录下的一个对象，也就是 <code>Ac_Game</code> 这个对象，好，那么这个对象里边，我们首先<strong>需要将 <code>id</code> 存下来</strong>啊！需要先将 <code>id</code> 存下来，那么这个 <code>id</code> 是什么东西呢？他传进来的 <code>id</code> ，大家可以看一下啊！他传进来的 <code>id</code> 是这个 <code>div</code> 的 <code>id</code> ，  啊！好！那么这个 <code>div</code> 的 <code>id</code> 我们需要把这个 <code>div</code> 找出来，那</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240814101319120.png" alt="image-20240814101319120"></p>
<h5 id="jqeury-找元素"><a href="#jqeury-找元素" class="headerlink" title="jqeury 找元素"></a><code>jqeury</code> 找元素</h5><p>么 <code>jquery</code> 找这个 <code>div</code> 非常的容易啊！就是比如说这个东西叫这个东西，<strong>这个 <code>div</code> 咱给他起个名字啊！</strong>可以叫 <code>ac_game</code> ，可以吧！？<code>ac_game</code> ，那么 <code>jquery</code> 找 <code>id</code> 是这个 <code>id</code> 的对象（<code>html</code> 的 <code>div</code> 元素 ）非常容易，<strong>就是 <code>#</code> 加上 <code>id</code></strong> ，啊！<strong>就是 <code>$()</code> 然后里边 <code>#</code> 加上这个 <code>id</code></strong> ，他就可以将这个 <code>div</code> <strong>找出来</strong>好吧！啊！然后将这个 <code>div</code> 找出来之后，<strong>赋给我</strong>们的 <code>this.$ac_game</code> （<code>js</code> 变量）啊！赋完啦啊！那么，赋完之后的话，我们这里需要去<strong>创建出来一个菜单</strong>，所以这里应该是 <code>menu = new</code> 一个 <code>AcGameMenu</code> 啊！然后这个 <code>menu</code> 有一<strong>个参数是我们的根对象</strong>，根对象就是当前对象自己，对吧？！啊！所以传一个 <code>this</code> ，就可以啦啊！好，然后我们在返回我们的 <code>menu</code> 文件，再去继续看啊！那么在这个文件里边啊！我们这个对象创建完之后，我们需要将他添加到 <code>div</code> 里边，因为这个 <code>div</code> 他是空的，对吧！？啊！我们需要在里边添加一个对象，这个对象的背景是我们刚刚内个图片，对吧！？啊！或者大家可以这样看，嗯 <code>f</code> <code>f12</code> ，啊！就是你可以看当前我们的 <code>div</code> 是这个东西，对不对！？啊！好，那么我们需要添加一个对象，将这个对象添加到这个 <code>div</code> 里边，啊！怎么办呢？<code>jquery</code> 里边也有一个 <code>api</code> 就是 <code>this.root</code> <code>this.root</code> 就是刚刚内个对象，内对象里有一个变量，刚刚自己定义的对吧！？叫 <code>ac_game.append()</code>，这个可以将我们的对象加进去了啊！<code>this.menu</code> ，就加进来啦！可以吧！啊！这样就可以动态的生成一个页面，啊！大家可以自己，大家可以执行一下，试一下啊！这个<strong>每次执行之前需要先打个包</strong>啊！刷新一下，出来了。同学们啊！出来了啊！这个怎么出来的呢？就是这样出来的，就是首先啊！他会先调用一下我们的，大家可以看一下啊！右键他会先这个当这个代码传给用户的时候，在用户客户端会发现哦这里有一个函数叫，这里这里有一段 <code>js</code> 代码需要执行，啊！这个代码的话是在用户的浏览器里执行的啊！执行的时候，他会创建一个这个 <code>class</code> ，对吧？！啊！那么创建 <code>class</code> 的话，他就会调用这个 <code>class</code> 的一个构造函数，来看一下啊！他就会调用我们这个 <code>zbase</code> 的构造函数，这个构造函数里边，首先赋一个 <code>id</code> ，对吧！然后将这个 <code>div</code> 的，将这个 <code>div</code> 存到 <code>this.$ac_game</code> 里面，哎！也就是将这个 <code>div</code> 存到我们的这个变量里边然后创建一个 <code>AcGameMenu</code> 啊！那么 <code>AcGameMenu</code> 他创建的时候就会调用 <code>AcGameMenu</code> 的一个构造函数对吧？！啊！那么我们，大家可以进到 <code>menu</code> 里边啊！可以看一下，他就会执行这个构造函数，那么这个构造函数里的话呢？哎！他就会创建一个这个 <code>menu</code> 的一个 <code>html</code> 对象，也就是一段 <code>html</code> 代码，啊！创建完之后会将这段代码直接存到 <code>ac_game</code> 里边，也就是存到这个这个 <code>div</code> 里边，大家会发现这个 <code>div</code> 里边确实多了一个，多了一段代码，对不对？！这段代码大家可以看一下啊！<code>div class = ac-game-menu</code> 他就是我们这段代码，对吧！？啊！啧！嗯哈！嗯（表示赞同的语气，很欣慰），嗯嗯！对，这个大家第一遍接受可能会比较陌生啊！后面就比较简单啦！因为每次都是一样的，啊！好，那么，但但是大家可以发现你这样的话这个图片好像是被哎！<strong>好像是格式不太对！对吧！？他会复制几遍</strong>，对不对！？啊！那么我们我们要想做的就是将这个图片整个百分之百填充到整个的这个页面里边，你不要给我重复，对吧！？啊！好，那么填充的话，也有一些参数啊！大家直接背过就可以啦！就是这个叫 <code>background-size: </code> <code>size</code> 的话第一个是宽度啊！占到百分之百，第二个的话是高度，占到百分之百，那么这样一回车，大家一刷新，哎！占满了，好吧！啊！哦！这个 <code>js</code> 不用提前学，因为这个我们用的 <code>js</code> 语法很少，啊！你直接照抄就可以啦，抄两遍就会啦！啊！未来我们未来自己写项目的时候，不会用新的语法，你只会用我们上课将的语法，啊！把上课讲的代码抄过去改一改就可以啦啊！我之前学这个学这个这个写前端就这样学的，就抄抄一抄，然后，抄完之后，为了再根据自己的需求改，就可以了，额吭！那么这样的话，大家可以看到我们这个，哎！咱们这个背景的话就是，哎！可以随我们的浏览器窗口，哎嘿！随我们浏览器窗口不断伸缩，对吧？！可以吧！？啊！啧！额吭！嗯嗯！<code>css</code> 文件刚刚已经导入了啊！同学们啊！<code>css</code> <code>css</code> 文件大家右键一下啊！是在这个 <code>head</code> 里边导入的，在这里导入的，对吧！我们刚刚改的 <code>css</code> 文件是在这里，对吧！大家可以看到我们这里有一个百分之百！对吧！？在这里啊！然后，刚刚写的这个 <code>css</code> 文件是在打包之后，是在这里，大家可以看到，我们这打包到话其实就是将两个函数按照字典序，按照这个文件名字典序直接粘到一块儿了，对不对！？啊！第一个的话是 <code>AcGameMenu</code> 、第二个的话是 <code>AcGame</code> ，啊！可以吧！？啊！额吭！好，1那这样的话我们的这个背景就有了，对吧！？啊！而且大家可以试下摁下 <code>f11</code> 哎！就会发现，哎！这个东西就是全屏了，对吧！？就跟一个全屏游戏是一样的对不对？！啊！额嗯！我们上课讲的都要背过啊！上课讲的都要背过对吧！摁下 <code>f11</code> ，你会发现，哎！就直接全屏了，对吧！？非常刺激啊！额吭嗯！包括你这里写的啊！未来大家可以看到，现在的话你要在一个浏览器里，才可以打开，对吧！啊！然后未来的话大家可以直接在 <code>ac</code> 直接在这个我们我们未来会，可能会在下周或者下下周会支持 <code>acapp</code> 端，那么这样的话，大家就会像打开 <code>ac saber</code> 一样，打开自己的一个游戏啦！好吧！你看这里，现在的话你只能去在浏览器里打开，对吧！？他他只能这样整个浏览器啊！然后未来的话大家可以集成到 <code>acwing</code> 的这个，集成到 <code>acwing</code> 的云端操作系统里边啊！就可以被其他用户安装啦！可以吧同学们，而且可以一个页面支持多个窗口，所以说，所以说咱们这个模式的话是很容易移植的啊！之所以这么麻烦就是因为可以移植啊！好，那么这样的话我们就，哎！完成了第一大步啦啊！然后再继续看啊！那么我们接下来需要加几个菜单选项，对吧！那么我们继续加菜单选项，啊~~菜单选项的话就是在我们的这个菜单界面里边再加新东西啊！我们首先需要加一个额嗯！存放菜单的框，对吧！啊！这个叫 <code>class=&quot;ac-game&quot;</code> 随便起个名字就可以了啊！这个名字主要是用来我们未来调整样式的，啊！这个名字的核心作用有两个，一个是帮我们调整样式，因为未来我们调整样式的时候是根据他的名字来调整的，对不对！？啊！这个 <code>.ac-game-menu</code> 是调整的是这个 <code>class</code> 啊！那么这里的话名字可以随便起一个啊！可以叫 <code>ac-game-menu-</code> 然后叫，叫 <code>field</code> 对吧！你随便起一个名字就可以啦！区域啊！啧！好！那么我们这个区域里边应该会有三个按钮，对吧！啊！额嗯！第一个按钮的话是 <code>class=&quot;ac-game-menu&quot;</code> 啊！<code>field</code> 啊！大家这个一般来说起名的时候啊！如果说你是在某一个 <code>div</code> 内部去去创建一个新的 <code>div</code> 的话啊！这个 <code>class</code> 的话你最好是用他的父节点啊！作为前缀，啊！你比如这个 <code>div</code> 和这个 <code>div</code> 啊！这个 <code>div</code> 是在外层 <code>div</code> 的里边，对吧！？啊！那么因此内层 <code>div</code> 的这个 <code>class</code> 名字，他的前缀就是外层 <code>div</code> ，这样的话你后面比较容易，后面不容易乱，好，那么我们后面，这个这个这个这个额 <code>ac-game-menu-field</code> 的里边还有新的 <code>div</code> 可以后面再加一个，再加一个后缀，对吧！比如叫 <code>item</code> ，就是有好多项，对不对！？第一项的话叫单人模式啊！好！那么第二项，注意我们现在写前端的时候啥也没用，对不对！？因为咱们这个咱们这节，咱们 <code>django</code> 课的核心不是前端啊！额！未来 <code>djan</code> ，未来前端会有很多工具会在 <code>level-3</code> 里讲，好吧！啊！咱们这个项目不太需要用到各种包啊！为了省，为了这个节约大家的学习时间，对吧！啊！让大家可以尽快上手，咱就不教很多东西啦！啊！很多东西可以可以先放到，可以暂时不用不用教，大家这个用现在这些比较基础的前端技能就已经可以实现了啊！啧！咳嗯！好，然后，<code>game</code>这是一样的啊！<code>menu-field-item</code> ，第二个叫多人模式，对吧！啊！好，第三个 <code>ac-game-menu-field-item</code> 设置，对不对！？<code>设置</code> ，啧！嗯！好，然后，我们这三个按钮是需要点的对吧！？啊！点不同按钮是需要调到不同的地方的啊！所以这三个按钮的话你是需要把他索引出来的啊！第二个叫 <code>multi</code> 对吧！？好，然后的话，第三个叫 <code>ac-game-menu-field -item-settings</code> ，好，然后我们把这三个按钮搞出来啊！这三个按钮的话 <code>this.$single</code> ，怎么搞这三个按钮呢？非常简单，就是 <code>this.$menu.find()</code> 就可以啦！啊！<code>jquery</code> 有一个函数叫 <code>find</code> 函数啊！他可以 <code>find</code> 出来，他可以在这个 <code>menu</code> 里边找到某一个 <code>class</code> 对应的对象啊！那么第一个的话应该是这段对吧！？在 <code>tmux</code> 里复制的话是 <code>ctrl a + [</code> ，复制，然后，在 <code>tmux</code> 粘贴，在 <code>tmux</code> 里粘贴的话是 <code>ctrl a + ]</code> ，把他粘贴过来啊！然后注意 <code>class</code> 名前面需要加上 <code>.</code> 啊！<code>class</code> 的话需要加点，<code>id</code> 的话是加 <code>#</code> ，好，那这是我们的这个 <code>single</code> 按钮，对不对！？啊！啧！嗯！额！然后，还有 <code>multi</code> 按钮，啊！<code>find</code> 在粘一遍啊！<code>multi</code> 的话把他改成 <code>multi</code> 就可以啦，对吧！大家可以发现我们这个为什么要起个名字啊！？啊！额嗯！起名字的话啧！主要是为了让我们找出来这三个按钮，对不对！？你第一个按钮的话是 <code>-single</code> ，第二个按钮的话是 <code>-multi</code> ，第三个按钮的话是 <code>-settings</code> ，第三个的话哎！<code>settings = this.$menu.find()</code> ，<code>. ctrl a +]</code>  ，就可以粘贴了，对不对！？最后一个是 <code>settings</code> ，好，那这样的话，我们就把三个按钮搞出来了啊！搞完之后，我们这个按钮的样式还没有设置，所以大家还需要设置一下样式啊！大家可以保存一下，保存完之后要打包，你可以先看一下，什么东西啊！打家可以发现，额！刚刚写这个按钮的话是有的，但是在这里，对不对！？就很不清楚啊！然后我们需要设置一下他的样式啊！啧嗯！好，我们可以分开来设置，哎！可以先设置一下我们的这个这个 <code>field</code> ，对不对！？这个 <code>field</code> 什么东西呢？大家可以看一下啊！就是你可以先摁一下 <code>f12</code> ，额嗯，大家可以可以往下点，你可以看一看啊！就是这个<code>field</code> 什么东西呢？哎！这个 <code>field</code> 的话就是就是蓝色区域，看到没，啊！然后里边每一项是里边的每一项，对吧！？啊！那么我们需要去设置一下他的一些参数啊！先设置一下 <code>field</code> 参数啊！吭吭嗯！那么 <code>field</code> 的话就是 <code>ac-game-menu-field</code> 好，那么，我们这个的话首先需要设置一下什么啊！？额嗯！啧！设置一下他的高度，对吧！？啊！高度，<code>height</code> ，高度的话我们可以搞成比如说 <code>7 vh</code> ，这个 <code>vh</code> 是一个单位啊！额嗯！<code>js</code> 语法不需要讲，大家直接被就可以啦！额嗯！这个很容易理解，你比如 <code>find</code> 的话就是在某个对象内部找，找某个 <code>class</code> ，啊！你第一遍不会，背过了，第二遍就会了，对吧！？啊！所以这个前端为什么简单啊！就是因为他这个虽然说 <code>api</code> 比较多，对吧！但每个 <code>api</code> 的含义比较容易理解，啊！啧！学习前端最好的方式就是多背啊！哈！好，这个 <code>vh</code> 的话是什么意思啊！就是整个页面的高度啊！整个浏览器的高度，啧！你不管怎么去，大家可以去看一下啊！你不管怎么去调整他的高度啊！啧！他的百分百高度，就是一百 <code>vh</code>，啊！然后，百分百宽度的话就是一百 <code>vw</code> ，这里的话是用百分比，这个窗口大小百分比来设置他的一个高度啊！这个比较和合理，对吧！？啊！因为我们的这个窗口小了之后，你比如说有些同学电脑分辨率比较比较小，对吧！？啊！那么他窗口会比较小，窗口比较小的话，那么我们菜单大小应该应该就会小一些，对吧！？啊！所以一般去设置写游戏的时候啊！一般去设置大小的时候用 <code>vh</code> 和 <code>vw</code> ，啊！百分比的一个参数，而不是用 <code>px</code> ，啊！不是用内个像素，啧！咳嗯！<code>px</code> 的话是像素，<code>vh</code> 的话是百分比，啊！整个高度是一百一百 <code>vh</code> ，啊！然后你 <code>1 vh</code> 的话就是高度的百分之一，啊！啧！好，咳，那么我们可以定成 <code>7vh</code> ，啊！然后宽度的话，这个我之前调试过啊！咱把之前调试的直接直接抄过来啊！就不给大家重新试了啊！这个调试前端是一个比较恶心的事情，就是大家，如果看着不舒服你可以自己调一调好吧！看一下我之前是怎么写的啊！抄过来就可以了，额嗯！<code>static</code> ，然后，<code>css</code> ，然后，<code>base</code> ，啧！嗯！我们之前调的高度是这样的啊！就是这个 <code>field</code> 的高度没设置，啊！这个高度没设置，啊！把这高度删了啊！宽度的话是，额嗯！宽度的百分之二十 <code>20vw</code> ，好，然后 <code>position</code> 的话啊！给大家讲一下啊！这个 <code>position</code> 的话就是他的一个位置怎么去设置啊！我们这里的 <code>postion</code> 选的是 <code>relative</code> ，啊！<code>relative</code> 的话意思就是相对，相对位置，好吧！啊！这个位置有很多种选择啊！还有这种什么 <code>absolute</code> ，就是还有 <code>fixed</code> ，就是绝对的，还有固定的，大家如果感兴趣的话你可以百度一下啊！我们现在只会用到 <code>relative</code> ，那么我们定好 <code>relative</code> 之后啊！我们当前这个框框，他的位置啊！就可以被坐标所确定，啊！<code>top</code> 是，<code>top</code> 定定位定位的是左上角距离上方的高度，啊！设置一下啊！<code>top</code> 的话是左上角距离上方的高度啊！我们之前调的是 <code>40vh</code> 也就是 <code>top</code> 到上面的距离是百分之四十的高度，啊！然后，到左边的宽度是十九 <code>vw</code> ，啊！也就说我们这个框框到左边的宽度是十百分之十九的宽度，好吧！？啊！啧！吭吭吭！调试前端需要 <code>ps</code> 知识？啊！不太需要啊！不太需要，好，那么！这样大家设置完之后啊！你可以保存一下，看一下效果啊！大家可以发现，哎！我们的这个，咱们的这个东西啊！咱们的这个这个这个按钮就变位置了，对吧！大家可以改一改，你比如说，啊！如果我们将这个高度调的大一些，比如调到 <code>60</code> ，啊！那么也就是说我们的这块区域离上面更加远一些，一刷新他就会往下移，对吧！？啊！如果你觉得不合适的话，你可以往上调，这个四十和十九是我自己手动调出来的啊！我感觉一个比较舒服的高度啊！吭嗯！好，啊！好，然后，接下来，我们要设置一下，每一个条目的格式，啊！每一个条目的格式，那每一个条目的话就是 <code>.ac-game-menu</code> ，啊！然后是 <code>field</code> 对吧！？啊！<code>item</code> ，好，那么每一个条目的话我们首先需要设置一下字体颜色，啊！我们的字体颜色可以改成白色啊！这个我也是直接抄过来的啊！我就不再，不再重新调了啊！额吭！这个颜色是白色，对吧！？啊！然后字体的高度</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240816221746412.png" alt="image-20240816221746412"></p>
<p>啊！字体的，我们这个框框的高度，他每一个，这个每每一个 <code>div</code> 都有一个高度，对吧！？这高度我们之前调的是，额嗯！十八 <code>7vh</code> 对吧！？百分百分之七的高度然后宽度的话是 <code>18vw</code> 啊！然后颜色是白色对吧！字体大小啊！我们这里的话是六 <code>vh</code> ，也就是说字体大小是跟我们的，字体大小是跟我们的高度成正比的，他这个字体大小的话是高度的百分之六，好吧！啊！还有几个参数啊！然后还有这个哎！<code>font-style</code> <code>font-style</code> 的话是他是不是斜体啊！<code>italic</code> 是斜体的意思，额嗯！<code>padding</code> 的话是，<code>padding</code> 的话是这个意思啊！就是说我们这个额吭！你比如说这是我们的一个 <code>div</code> 啊！这个前端 <code>css</code> 知识很容易学啊！就是大家如果不知道什么含义的话，你改一下，你看你看一下是什么，他内块变了，哎！你就知道他变的是内块，控制的是内块了，对不对！？啊！这个 <code>padding</code> 是这个意思啊！我们大家比如说啊！比如大家不知道 <code>padding</code> 什么意思啊！那你保存一下刷新一下，啧！你看啊！额！<code>padding</code> 是什么意思呢！？如果大家不知道的话，啧！大家把右边这个拉开，然后往下翻你会发现这个 <code>padding</code> 的话是，额嗯！你点到这个，你点一下这个这个 <code>item</code> 啊！大家会发现这个 <code>item</code> 是有 <code>padding</code> 的，对不对！？你 <code>padding</code> 不知道啥意思的时候啊！你可以把这个 <code>padding</code> 调一下，这可以调的，调成 <code>1</code> ，你会发现，调成 <code>1</code> 你会发现这个绿色区域会稍微小一些，对吧？啊！调成 <code>3</code> 的时候，绿色区域会稍微大一些，对不对！？那么我们调的是 <code>2</code> ，那么绿色区域刚好不多不少，啊！那么这是啥意思呢？就是说啊！我们这个吭嗯！往往一个 <code>div</code> 里去填字的时候，啊！如果 <code>padding</code> 是 <code>0</code> 表示我可以顶头去填，如果我有 <code>padding</code> 的话，那么就表示我这个内部的一圈区域是不能填的，啊！这个，这片区域的宽度就是我 <code>padding</code> 大小，好吧！？啊！啧！呜呼<del>！嗯哼！啧！好！然后，这个字体，比如说这个这个 <code>font-style</code> ，大家如果不知道啥意思的话你可以删掉，删完之后你可以刷新一下在看心一下，就变成正体了啊！所有这样的话，你再把他恢复回来，大家会发现，哦！<code>italic</code> 控制的就是一个斜体，对吧！？啊！控制的就是斜体！包括这个 <code>photo-size</code> 也是一样，大家如果不知道 <code>photo-size</code> 是啥意思的话，可以改成 <code>3</code> 对吧！？我们再刷新一下试一下，你会发现，哦！字体变小了，对不对！？<code>padding</code> 就是内边距的意思啊！额嗯！然后，那么我们再把它改成 <code>6</code> 你会发现，对吧！哦！他就变大了，对不对！？所以这是很容易理解的啊！啧！嗯哼哼！啧！好，然后，我们继续看啊！啧！额！那么还有一个是我们的这个字体要居中对吧！这个 <code>text-align</code> 大家可以看下当前这个字的话是都是左对齐的，对不对！？啊！然后，我们这个字的话是可以居中的啊！居中的话是这个 <code>text-align</code> ，对吧！？ <code>text-align</code> 然后，<code>center</code>，那么居中完之后，大家一刷新就会发现，哎！居中了对吧！？啊！啊！嗯！这些东西，就我现在写的时候，我也经常忘，啊！就一般来说，忘了之后，就百度搜一下，或者谷歌搜一下就可以了，这些东西的话我到现在都没有记住啊！啊哈哈！额！然后，还有比如说这个背景颜色啊！我们这个之前的按钮是有背景颜色的，颜色的话也是我之前硬调出来的啊！这啊哈</del>，大家这这可以直接复制过来啊！这个背景颜色的话推荐大家直接抄过来，把这些数直接抄过来就可以了，前三项是 <code>rgb</code>啊！最后一项是透明度，大家刷新一下，看一下，哎！哎？大家好像发现不同按钮好像跌在一块了，对吧！中间有缝隙啊！那么我们可以让中间加一些缝隙啊！就是加一些回车，对吧！啊！加回车的话可以在上面的 <code>html</code> 里加，啊！每两个按钮之间加一个回车，回车的话是 <code>br</code> ，再刷新一下，哦！每次改完 <code>js</code> 之后，一定要记得重新打包一下啊！可以吧！啊！嗯吭！好啊！那么，这样的话我们就有一个这个这个背景了，对不对！？好，继续继续往后看啊！我们这边还有一个东西叫 <code>border-radius</code> ，这啥意思呢？大家根据字面来理解啊！<code>border-radius</code> <code>radius</code> 啊！这个意思就是说，角，每个角的一个圆弧的一个半径，啊！这个是数越大他的角越圆，大家可以看到我们现在这个角的话都是直角，对不对！？啊！那比如说我们设成 <code>10px</code> ，就 <code>10</code> 像素，一刷新，你会发现，哎！变圆了，可以吧！？啊！然后可以试着大一些，比如说设成 <code>50</code> 像素，已刷新哎！变成这样了，好吧！？啊！啧！额嗯！我们这里的话搞成 <code>10</code> 像素就可以啦！然后另外这个 <code>vim</code> 是帮你自动去判断你有没有写错的啊！你比如说我们这里，这个 <code>radius</code> 词记错了，写成 <code>e</code> 了，大家就会发现他就不会变绿，对吧！？啊！只有你写对了，才会汴变绿啊！所以说 <code>vim</code> 还是比较神奇的，好，然后，另外还有一项啊！这个是叫这个 <code>letter-spacing</code>  <code>letter-spacing</code> 控制的话是两个字之间的一个宽度啊！我们可以试一下啊！叫 <code>letter-spacing</code> <code>0.5vw</code> ，就每两个字之间间距，字间距是百分之零点五的宽度，啊！刷新一下， 把这个 <code>Dev</code> 给关掉啊！哎！啧！看起来就比较正常了，对吧！？啊！啊！看起来就比较正常了啊！额嗯！好，然后我们好像还是有一些问题，你比如说我们鼠标放上去之后啊！如果是按钮的话我们的鼠标应该是会变成一个小手的形状，而不是这种指针的形状，对不对！？啊！所以我还需要控制一下这个，控制一下我们鼠标的一个样子啊！有一个，有一个参数叫 <code>cursor</code> ，我不知道他怎么念啊！应该叫 <code>cursor</code> ，对吧！？啊！我帮大家百度一下，额嗯！<code>cursor</code> 对对对！就叫 <code>cursor</code> ，<code>cursor</code> 的话就叫光标，光标的话有很多种，啊！<code>pointer</code> 意思就是说哎！我光标移到这里面之后会变成一个小手的形状，刷新一下，对不对！？同学们，变成小手了，对不对！？啊！小手了啊！额嗯！然后这些内容的话这个，额嗯！直接背过就可以啦！因为这这这个东西其实就跟按钮一样，大家用这个 <code>word</code> 去调整字体大小是一样的，只不过写网站的是需要你手动用代码来调的，好吧！？啊！好，然后，还有吗？还有比如说鼠标放上去之后啊！一般来说如果是按钮的话都会有一个动态效果，对吧！？啊！那么动态效果也可以有的啊！比如说鼠标悬浮动态效果，就可以把这个类名抄过来啊！<code>ac-game-</code> 这个类名的话是什么？<code>ac-game-menu-</code> 啊！<code>field</code> ，<code>item</code> 啊！冒号，<code>hover</code> ，注意不要有空格啊！冒号左右两边不要有空格啊！<code>hover</code> 的意思就是说，当我鼠标悬浮在上面的时候，我样式怎么变，啧！啊！我们这里有<strong>一个叫 <code>transform</code> 的东西</strong>啊！<code>transform</code> <code>transform: scale(1.2)</code> ，啥意思呢？这个<strong>直接背过</strong>就可以啦，就是我们如果鼠标悬浮上来之后，他的大小会乘以 <code>1.2</code> ，啊！嗯！这个记得刷新一下啊！对吧！？啊！大小会乘以一个 <code>1.2</code> ，啊！鼠标放上去，放上去之后会变大，啊！额嗯！然后，还有一个参数叫 <code>transition</code> 就是我们，大家可以看，大家可以看到就是我们鼠标放上去之后，他立即变大，一一拿走立即恢复原状啊！不太平滑，对吧！？啊！所以我们可以加上一个时间，就你这你这变化时间是什么，就 <code>transition</code> 啊！我们可以比如定义成这个 <code>1000 ms</code> ，大家可以试一下啊！就是你放上去之后，他一秒钟，他会用一秒钟的时间变大啊！对吧！？啊！ 啧！然后，不过这个一秒钟的话太久了啊！我们一般搞个 <code>100ms</code> 就可以啦！稍微平滑一下就可以啦啊！刷新一下，就比较正常了，对不对！？啊！比较正常啦！啊！可以吧！？同学们，啊！比较正常啦！啊！啧！好，那么这节课菜单界面就做完啦啊！我们来看一下有没有漏掉的 <code>css</code> 啊！我之前也是调了好久啊！这个 <code>css</code> 很好调，大家如果调的时候一般是在前端调，啊！你在这儿可以调，啧！比如说，你像调这个东西，对吧！？你点一下这个这个这个箭头啊！选一下他啊！然后你就可以调他的一个样式了，啊！你比如说你可以调，额嗯！他的高度，对吧！？啊！如果 <code>7</code> 太大的话，啊！可以，比如说可以调成 <code>6</code> ，哎！那就会小一些，对不对！？啊！<code>4</code> 的话就小一些然后，<code>5</code> 的话就更小一些，对不对！？啊！包括这个字体大小大家如果觉得字体大小太大的话你可以说比如改成 <code>4</code> ，对吧！啊！可以随时调的，啊！当然你在后端调也可以啊！后端调完之后，保存一下前端一刷新也可以，可以吧！？啊！啧！嗯好，那么这是我们的一个菜单界面，然后本节课还没有结束啊！同学们，先不，先不要着急啊！我，先让我对一遍，看有没有漏掉的，哦！对！还有一个，大家你去拖动鼠标的话你会发现这个按钮他会被选中，对吧！？啊！但是如果我们是一个游戏的话，<strong>游戏你摁完 <code>f11</code> 之后</strong>，比如大家在打撸啊撸的时候，你这样一拖，你就不应该选中这些字对不对！？啊！所以说我们要把这个字能不能被选中也要关掉啊！这个也是有参数的，就是，所有的样式都是有参数的，啊！啧！这个参数叫什么呢？叫 <code>user-select</code> ，大家可以直接从，直接将整个界面都关掉，是 <code>user-select: none</code> 就可以啦！啊！加上这句话，那么这个页面就不能被<img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240817115056543.png" alt="image-20240817115056543">选中了，啧！选中不了了，看到没，好，摁下 <code>f11</code> ，就特别像游戏了，对吧！？啊！啧！4好，然后，我们后面还有一个知识点啊！大家不要着急啊！我们还有一个知识点是怎么去切换我们的页面，啊！你看我们上面给大家讲切换的时候，他是用链接来切换的，对不对！？啊！然后我们这个是一个前端渲染的一个页面，也就是说我们切换页面的时候其实是在用户端自己渲染的，他不会跟服务器产生交互，啧！嗯！咳咳嗯，好，那么，我们来看一下怎么去，怎么去用，怎么在前端去切换一个页眉，啊！其实非常容易，啊！就是利用 <code>js</code> ，用 <code>js</code> 硬操作就可以啦啊！首先 我们 <code>ac</code> ，<code>ac-game-menu</code> 对不对！？我们需要为了方便，我们需要给这个 <code>class</code> 定一些操作函数啊！啧！那么我们首先这个需要定义什么函数呢？就是我们点击这个按钮的时候需要有些操作，对吧！？啊！所以需要给他绑定一些函数啊！那么绑定函数的话，可以这样去写，就因为他会调用这个 <code>constructor</code> 函数名，对不对！？啊！ 那那那在这个 <code>constructor</code> 里他创建的时候就会调用就会调用他啊！啊！啊！那么调用他的时候啊！我们这里可以定义一个函数叫 <code>start</code> ，我一般都喜欢定义一个 <code>start</code>  ，就我写游戏的话一般来说，当然如果写个 <code>unity</code> 的话应该是有这个习惯，对吧！？这个东西被创建出来的时候会自动调用自动调用一个 <code>start</code> 函数，啊！那么写游戏的时候都是这样，他这个这个东西被创建出来的时候就自动调用一个 <code>start</code> 函数啊！好，那么，我们在 <code>start</code> 里边可以绑定一些事件啊！比如，可可以绑定一些事件，我们绑定事件的话可以叫 <code>add_listenning_</code> ，<code>listen</code> 这个词不记得怎么写了啊！我们百度一下，啊！<code>listen</code> ，啧！啊哈！主要是这个 <code>t</code> 不发音啊！感觉好奇怪啊！<code>listenning</code> 啊！<code>events</code> 就是给我们的 这个<code>menu</code> 绑定监听函数，好吧！啊！那么我们在初始化的时候会调用 <code>constructor</code> 函数，在 <code>constructor</code> 里面会调用 <code>start</code> 函数，<code>start</code> 里面我们可以调用一下我们的 <code>add_listening_events</code> 函数，好，<code>add_events_listening</code> 函数里我们可以给我们三个按钮绑定三个函数啊！怎么绑定函数呢？非常简单啊！这个 <code>jquey</code> 的话也有一些封装，啊！不需要用 <code>a</code> 标签啊！我们这个是动态页面啊！这个不需要用<code>a</code>，直接用 <code>js</code> 去搞就可以啦！啊！然后，<code>this.</code> ，我们的第一个按钮是什么啊！第一个按钮是单人模式，对不对！？单人模式按钮已经被放到了 <code>this.$single</code> 里边，啊！所以 <code>this.$singale.click</code> 这个啊！然后 <code>.click</code> 然后， <code>function</code> ，好，那么！这个里边填什么呢？就是当我们的 <code>single</code> 这个按钮被点击的时候，他就会自动调用这个函数，好吧，啊！好，那么调用这个函数的时候啊！一定要注意一下啊！在这个函数内部，如果调用 <code>this</code> 的话，啧！这是 <code>js</code> 的一个特点，就是如果我们，如果在函数内部调用 <code>this</code> 的话，他其实是这个 <code>function</code> 本身，而不是外边的 <code>this</code> （类)，啊！就里边的这个 <code>this</code> ，跟外边这个 <code>this</code> 不是一个 <code>this</code> ，啊！那么如果我们想在里边去调用外边的 <code>this</code> 怎么办呢？需要先把外边这个 <code>this</code> 存下来，改个名字就可以了，比如我们可以叫 <code>outer</code> 或者可以叫 <code>that</code> ，对吧！？啊！你可以随便起个名都可以啊！<code>o</code> 我一般习惯叫 <code>outer</code> ，啊！就是如果我想在里边调用外边的这个 <code>this</code> 的话你要写 <code>outer</code> ，因为里边这个 <code>this</code> 他有特殊含义，啊！不一样，好吧，啊！嗯啧！好，那么我们现在可以先不写这个函数，啊！可以先直接输出一句话，表示哎！点击了我，啊！这个叫 <code>click</code> ，<code>single</code> ，<code>mode</code> 对吧！？啊！这个叫 <code>single mode</code> ，我们这个这个类名的话可以加的稍微详细一些啊！<code>mode</code> 对吧！模式，<code>single-mode</code> 、<code>mulit-mode</code> 、<code>settings-mode</code> ，这个也是要改一下啊！<code>single-mode</code> 、然后，<code>multi-mode</code> 、然后前面这个也要改一下，啊！<code>single-mode</code> 、<code>mulit-mode</code> 、名字起的尽可能标准一些啊！尽可能合理一些，这样后期比较容易调试吭吭嗯！然后同理我们的 <code>multi-mode.click</code>，好，然后，我们这里是先不进行任何操作，先输出一下啊！表示我们已经点这个按钮啦！<code>console.log(&quot;click&quot;)</code> 啊！<code>multi mode</code> ，同理还有一个叫 <code>settings</code> 对吧！？啊！<code>settings.click</code> ，<code>console.log(&quot;click settings&quot;)</code>，好，然后，保存一下啊！我们把它打包一下，额，调试一下啊！点一下，哎，大家会发现，多了一句话，对不对！？<code>click single mode</code> 、点一下， <code>click mulit mode</code> ，点一下 <code>click settins</code> ，没有问题，对不对！？啧！啊！嗯吭！对，这节课内容比较多，啊！大家课后的时候，直接照抄就可以了，一行一行照抄就可以了，学习写前端的话就一行行照抄，抄完你就会了，<code>python</code> 确实不多，啊！对！<code>python</code> 确实不多， 啊！嗯<del>嗯·！<code>python</code> 在后面会比较多，你比如说匹配的时候，或者是文字聊天的时候，会比较多啊！咳咳嗯！好，那么，然后我们为了给大家演示他切切换界面我们后面还需要写出来一个新的界面，对吧！？啊！我们再把新的界面写一下啊！啧！这个 <code>css</code> 这节课已经不需要再用了，我们打开一个界面啊！比如说咱们把这个额嗯！游戏模式，哎！搞出来啊！把这个游戏模式搞出来，我们先进到 <code>playground</code> 里面，额嗯！进到，进这个 <code>playground</code> 之前的话我们需要先在我们的这个 <code>menu</code> <code>menu</code> 对象先写两个辅助函数啊！函数叫 <code>show</code> 函数，就是展示当前界面，显示菜单，或者叫 <code>menu</code>界面，还有一个函数叫 <code>hide()</code> ，两个辅助函数，叫关闭啊！<code>menu</code> 界面，就是当我们点完你看啊！额！当我们点完这个单人模式之后，我们应该是关闭菜单界面，然后打开一个游戏界面，对吧！？啊！这是我们的逻辑啊！所以说我们需要然后我们返回到菜单界面的时候需要关闭游戏界面，打开菜单界面啊！所以说每一个界面都需要两个函数啊！一个是 <code>show</code> ，一个是 <code>hide</code> ，对吧！？啊！那么<code>show</code> 的话也是有 <code>api</code> 的，啊！就是 <code>this.$menu</code>，当前整个对象的 <code>html</code> 是 <code>menu</code> 对不对！？<code>$menu</code> 啊！<code>show</code> 的话就是 <code>.show</code> ，哈！这非常简单啊！然后 <code>hide</code> 的话就是 <code>.hide</code> ，<code>this.$menu.hide()</code> ，可以吧！？啊！非常容易啊！额！这些都是 <code>jquery</code> 的一些一些 <code>api</code> 啊！好，然后我们给他为了给大家演示界面的切换啊！额嗯！吭！啊！额！我们这个这个吭吭！啧！嗯！咱们实现一个 <code>playground</code> 的一个界面，好吧！？啊！跟刚刚的内个界面是完全一样的，把这个稍微抄一抄就可以了啊！首先我们创建一个 <code>zbase.js</code> ，啊！然后，创建一个 <code>class</code> ，<code>class</code> 的话照猫画虎写就可以啦， <code>AcGamePlayGround</code> ，所有大家可以发现，你把这个 <code>AcGameMenu</code> 抄一遍，那么 <code>AcGamePlayGround</code> 你就会了，对吧！？啊！照抄就可以啦啊！然后有一个构造函数叫 <code>constructor</code> ，啊！<code>constructor</code> 里边需要传入一个 <code>root</code> 啊！那么我们这里的话需要先把 <code>root</code> 存下来，啊！好，然后，<code>this.playground</code> ，我们这个第二个的 <code>html</code> 对象可以叫 <code>playground</code> ，然后，<code>html</code> 对象一般加一个 <code>$</code> 啊！这样的话你自己比较容易认，就是他主要是给你自己认的，我一看 <code>$</code> 就是他的一个 <code>html</code>对象啊！好，那么他就应该等于什么呢？这里我们随便搞一个就可以啦啊！我们这里可以稍微写的简单一些，比如这个叫 <code>游戏界面</code> ，好吧，就这样的啊！然后，何恩！啊嗯！然后我们首先嗯嗯！需要将他加到我们的加到我们的界面里面，对吧！？啊！所以他应该是 <code>this.root.$ac_game.append(this.$playground)</code>，需要加到我们的界面里，啊！当然了啊！额嗯！我们一开始打开这个游戏的时候应该是先打开的是菜单界面，而不是游戏界面，所以游戏界面你一开始需要先关掉对吧！？啊！额！那么，因此我们游戏界面的话也需要实现一个 <code>show</code> 函数和一个关闭函数啊！那么 <code>show</code> 函数的话，大家最好加个注释啊！这个叫啊嗯！打开 <code>playground</code> 界面，然后第二个叫关闭 <code>playground</code> 界面，好，那么 <code>show</code> 的话就是 <code>this.$playground.show()</code> 啊！很容易，对吧！？啊！就是调用 <code>api</code> 就可以啦！啊！然后关闭的话就是 <code>this.$playground.hide()</code> ，啊哈！就是关闭啊！好，那么我们再把他加到我们的父父对象之前，你先把他关掉啊！<code>this.hide()</code> ，啧！可以吧！当然同理啊！这里我们每一个对象，最好你都有 <code>start</code> 函数，啊！这是一个好习惯啊！就是 <code>start</code> 函数的话就是用来放你所有比如说这个给这个对象绑定监听函数啊！或者设置一些初值的时候，都可以放到 <code>start</code> 里面，啊！那么 <code>start</code> 的话一般是在我们的这个构造函数里调用的，然后未来我们写游戏的时候啊！还会有一个额外的函数就是 <code>update</code> 函数啊！啊！这是都是写游戏的时候常用的模式啊！我们可以把写游戏的常用模式带到写 <code>app</code> 里边，因为本质上，写 <code>app</code> 跟写游戏是一样的，对吧！？啊！啧！额！这些内容很多哎！是这样的，大家可能刚开始听的时候啊！云里雾里，完全不会，老师怎么办，啊！我好要疯了啊！对吧！？其实你你在课后你抄着抄着就会发现原来噢！这么简单，这个前端的这个技能都是这样，前端的话，就为什么大家都说前端内卷啊！因为前端门槛低，对吧！？啊！为什么前端门槛儿低啊！？因为他东西很多，但是没有难度，对吧！？啊！他这个没有思维难度啊！就大家课后的时候你不要，哎！没关系，只要把他，你只要跟着我这个录像一行一行抄下来，哎！你就全会了，就这么简单，好，咳嗯！吭吭嗯！然后大家可能感觉这节课有很多新东西，对吧！？啊！但是我们可能后面的还有十七节课，对不对！？后面十七节课就是不断把这节课的内容不断重复重复重复重复重复，啊！是绝大部分的新东西可能前几节课就讲完了啊！后面全是重复了，啊！所有大家不要有心理负担啊！啧！额！咳嗯！啊啊！那么然后，我们首先，我们要回到我们的根目录，对吧！？啊！<code>zbase</code> 里边，我们创建了界面对象，啊！我们还要创建一，创建了菜单对象，那么同理我们还要创建一个哎！游戏界面对象 <code>playground=new AcGamePlayground</code> ，一样的对吧！？完全一样，当然这个函数你最好也，也是有一个 <code>start</code> 的啊！养成好习惯啊！最好也有一个 <code>start</code> ，然后有一些有一些比如初始化的操作可以完全都放到这个 <code>start</code> 函数里，啧！这个 <code>start</code> 其实就是我们额！构造函数的一个延伸啊！好，那么然后，大家写完之后，哎！这个这个压缩一下，啊！压缩完之后，大家运行一下，看看有没有，看下有没有报错，好吧！？啊！额！没报错，对吧！？很完美，啊！大家可以看一下这个 <code>js</code> 文件有没有更新啊！已经很长了，对吧！？同学们，已经很长了啊！额！咳嗯！这打包之后的函数就是将我们几个文件直接粘到一块，对吧！？啊！好，啊！然后，我们接下来就是要搞我们的界面切换啦！同学们！啊！这个界面切换，其实就是代码的一些逻辑啊！就是怎么去操作字符串的逻辑，啊！非常容易啊！我们来看一下，那比如说啊！我们点击单人模式之后，因为我们接下来要写的是单人模式对吧！？啊！我们周四是写单人模式，那么我们现在只需要实现单人模式就可以啦啊！把这句话删掉，我们点的话应该干嘛呢？！哎！应该先将我们当前的对象关闭，对不对！？然后将游戏界面打开，游戏界面的话应该是 <code>outer.root.</code> 这个时候就用到 <code>root</code> 了，对不对！？那么 <code>outer.root</code> 什么东西呢？ <code>outer.root</code> 大家可以看一下, <code>outer.root</code> 就是我们的 <code>this</code> ，对吧！？啊！这个传进去的 <code>this</code> ，啊！那么 <code>this</code> 里边是有 <code>playground</code> 的，对不对！？啊！那么我们再 <code>.playground</code> 就可以找到第二个对象啦！那么第二个对象里边有一个函数叫 <code>hide</code> ，那么我们调用 <code>playground</code> 的 <code>hide</code> 哎！<code>show</code> 对吧！？啊！他就会将我们的 <code>playground</code> 显示出来啊！所以说点完这个按钮的效果就是将我们的菜单隐藏，然后将我们的游戏界面显示出来，然后改完之后，打包一下啊！刷新一下，点，跳过来啦，同学们，啊！可以吧！啊！然后，如果向返回的话，一定要注意一下啊！我们这种，这种这个前端渲染模式你点返回时没有用的，因为这个他没有，浏览器不认这种，就是，浏览器是无法识别这种行为的，浏览器认为我们只是一个界面，好吧！？啊！所以当你想返回的时候，刷新就可以啦！进到游戏界面了，对不对！？一刷新就回来啦！啊！可以吧！？啊！一刷新就回来啦！进到游戏界面一刷新就回来啦！啊！然后，我们周四的话会给大家写，会带着大家去写游戏界面，啊！这个游戏界面的话现在还光秃秃一片，对吧！？啊！我们周四的时候，就主要是写这个界面啦！啊！就可能会有一个计时器，啊！有一个血条，啊！有一个这个菜单，对吧！？啊！然后还有一个技能列表，啧！啊！一刷新就回来啦！一点进去了，一点就回来了啊！然后我们这节课的话也是有打卡的啊！同学们，打卡的话大家也是一样，啊！将你最后的成品，你比如说啊！最后的成品是这个东西，对不对！？啊！将我的成品直接存到这里就可以啦！我的这个我看一下我上节课是怎么打卡的啊！？啊</del>我配置好环境的网址，直接复制过来，直接复制过来啊！然后我的项目地址，对吧！？啊！啧！我的项目地址的话是我看一下啊！项目，您的项目，还是这个对吧！？还是这个啊！打卡，啊！额嗯！当然大家在打卡的时候啊！我推荐大家还是要好好的把这个过程记一记啊！比如说我们上节课大家可以看到有些同学这个笔记还是非常漂亮的，比如说，哎！这位同学的笔记，哎！他就会把我们上课的额嗯！每一步都写下来，对不对！？啊！大家在写的时候尽可能详细一些，啊！你比如说你在这次打卡的时候啊！你可以将我们每，讲义里边每一个目录是干嘛的，好好的写一写，啊！然后比如说你可以在，你可以在打卡的时候记录一下我打开一个链接之后，他是如何去将这些东西渲染出来的呢？他首先是要通过路由一步一步路由到我们的函数，对吧！？啊！然后 <code>views</code> 函数里边会返回一个 <code>html</code> 文件，啊！ <code>html</code> 文件返回完之后，他在用户的前端接收到这个接收到这个接收到这 <code>html</code> 文件之后，前，用户的浏览器会去检测里边的 <code>js</code> 代码，然后去执行，那么这个 <code>js</code> 代码里面有一个生成创建一个 <code>ac_game</code> 对象，对吧！？啊！那么在 <code>ac_game</code> 对象里边，嗯吭吭吭！在 <code>ac_game</code> 对象里边，再看一下啊！那么创建一个 <code>ac_game</code> 对象的话他就会调用我们 <code>ac_game</code> 对象的一个构造函数啊！那么在这构造函数里边，我们就会创建一个 <code>menu</code> 对象，同时创建一个 <code>playground</code> 对象，对吧！？啊！那么创建 <code>menu</code> 对象的时候，他就会把 <code>menu</code> 的这个 <code>html</code> 渲染出来，然后添加到整个页面里面，那这样的话我们就把这个页面渲染出来啦！对不对！？啊！大家可以将这个流程啊！在自己打卡，在<strong>自己打卡代码里描述一遍</strong>，这样的话未来自己复习起来会很方便，好吧！啊！大家写完之后一定要记得保存一下啊！ <code>git status</code> ，我一般保存的话比较暴力啊！就 <code>git add . </code> ，就可以啦啊！可以看一下有没有不需要存的东西啊！哎！我们好像多了一个文件，我我们来看一下啊！发现里面多了一个文件，把这文件删掉啊！ <code>git add . </code> ，然后， <code>git</code> ，额嗯！ <code>git status</code> 看一下，我们可以看到我们现在加了很多文件，对不对！？啊！ 那么将这些文件加进来之后，哎！这个保存到我们版本库里啊！起个名字啊！我们可以看一下这些文件是干嘛的啊！这个叫编写界面，对不对！？啊！ <code>write </code> ，啊！编写界面，界面的话应该是什么，啊！啊！<code>write</code> ，就 <code>menu and playground</code> 就好了，对不对！？<code>playground</code> ，然后，界面的话可以随便起个名字，比如叫 <code>scene</code> 对不对！？啊！好，然后 <code>push</code> 一下，就可以啦，那么这样的话，我这次上课的这个项目就已经存到了我们项目项目记，存到了 <code>ac_git</code> 上，大家课后课后参考的时候可以来这里参考好吧啊！在这里的话你点这个 <code>web ide</code> ，额嗯<del>！会更加清楚的看到代码结构，可以吧！？啊！这里的话看代码结构会会更加清楚一些啊！啧！但是其实本质上都是一样的对吧！？你在这里看的话只是你可能会更加习惯一些，啊！但是后端你习惯之后也差不了太多吗！？好，嗯哼哼！啧！好，那么！这样的话我们这节课内容就讲完啦！大家看一下有没有问题啊！呼</del>！啊！这节课内容比较多啊！额<del>！大家不用担心啊！就我们现在基本上已经基本上把我们后面开发的这个百分之七十的新内容都讲完啦！啊！我们后面去开发的时候就是不断的去重复这个过程，啊！重复写 <code>url</code> ，写 <code>views</code> 函数，啊！写这个这个 <code>js</code> 的 <code>class</code> 啊！写这个 <code>css</code> 会不断重复我们今天的内容好吧！啊！啧！呼唏</del>啧！嗯！对，我们目前的话有些有些文件夹暂时还没有用到，啊！但是没有用到没有关系吗！啊！如果最后都用不到可以把他删掉，对不对！？你比如说这个，有同学发现这个 <code>templates</code> 里边哦！大家会发现我们这个 <code>templates</code> 里边好像这个 <code>menu</code> 啊！<code>playground</code> 的啊！还有 <code>settings</code> 啊！好像都用不到，对不对！？你后期用不到的话可以删掉啊！但是他占坑还是要占坑的，这样的话可以让我们整个项目结构会更加完整一些啊！啧！好，大家可以看一下有没有问题啊！啧！额嗯！然后另外大家注意一下啊！就是我们这节课虽然最后做的界面比较简单啊！额嗯！但是啊！这个大家的这个项目结构一定要一定要按照我们上课给大家讲的这个结构去写啊！因为这样去写的话未来一方面是好扩充啊！另外一方面好移植，好去做多终端支持，啊！就是这样的话就可以很容易的将你的网站直接比如说直接集成到 <code>app</code> 里，啊！或者集成到 <code>acapp</code> 里，对吧！就集成到 <code>acwing</code> 的框框里边，好吧！？啊！就可以直接让你的网站啊！就稍微配置一下啊，比如将你的 <code>ip</code> 地址配置过来就可以啦！那么这样的话你就可以在 <code>acwing</code> 上创建一个应用啊！那么在这个应用里边一打开就可以打开啧！你这个游戏界面啦！可以吧！？啊！而且关键是可以支持一个界面内打开多个游戏啊！单浏览器内支持多，支持多对象，这是可以做到的，好吧！？所以打击一定要按照这个结构来做啊！千万不要偷懒儿啊！啧！额！好，大家看一下有没有问题啊！嗯嗯！啧！嗯！我们，咱们这个开发模式的话，就是 <code>django</code> 里的有些功能是用不到的，你比如说这个 <code>forms</code> 表单功能，其实真用不到啊！额！那个功能吧！他啧！哎呀！他内个功能是比较，我觉得比较适合开发 <code>web 2.0</code> 啊！就比较适合开发比如说一个电商网站，对吧！？啊！都是些图文啊！额嗯！不适合开发 <code>web 3.0</code> ，不适合开发 <code>web app</code> ，会比较麻烦啊！ 开发这个 <code>web app</code> 的话我们未来去调用后端的话都是从 <code>ajax</code>，都是通过 <code>ajax</code>  去调用啊！啧！不是通过不是通过内个内个内个 <code>form</code> 表单去调用啊！啧！都是通过 <code>ajax</code> <code>.get</code> ，<code>.post</code> 就可以啦！啊！非常的方便！啧！嗯吭吭！啊！集成到微信，支付宝什么意思啊！我没懂没没没懂你什么意思，啊哈！额吭！好，大家看一下有没有问题啊！额！咱们这个界面的话还是比较比较帅气的对吧！？啊！然后我们，额！这节课下课之后大家要抽出时间把我们上课的内容复现一遍，啊！就把我们上课的内容你逐行去跟着敲一遍就可以啦！啊！一般不会太久可能也就两三个小时就可以敲一遍啊！然后我们周四的时候就开始写我们的游，写我们的这个单机界面，啊！写我们的单人模式界面，好吧！啊！到时候把这个界面重新粉装一下，然后加一些这种特效啊！然后可以创建一个玩家可以移动可以放技能啊！啧！啊！微信小程序，可以直接集成，都是可以的啊！非常简单啊！咱们这个模式很容易扩充到其他的模式上啊！啧！因为大家你本质会发现就是这样打击写完之后啊！你就会发现你的网站其实就是什么东西呢？其实就是两个文件，同学们！大家的网站啊！按照这个模式写完之后就是两个文件啊！别的啥也没有，大家，你可以你可以看一下啊！你可以右键查看网页源码，这样写完之后，你这网页源码的这个界面就永远都是这样不可能再丰富了，啊！大家额吭！你的这个网站的内容集中在两个文件里面，第一个是 <code>game.css</code> 里边，第二个是额这个 <code>game.js</code> 文件里边，啧！啊哈<del>，就这两个文件，对不对！就，未来去集成的话你只要将这两个文件的地址传过去就可以集成进去，非常的轻松，所以这个模式是很棒的啊！你像传统开发网站的模式，大家是需要写一大堆的 <code>html</code> 文件，对不对！？啊！那如果你想集成的话你需要把这一大堆 <code>html</code> 文件都传过去啊！但是我们这个模式不需要啊！只要一个 <code>js</code> 文件和一个 <code>css</code> 文件足够啦！啧！可以做成小程序吗？完全可以啊！相当于只要引入一个 <code>js</code> 文件就可以进去啦！非常简单啊！就这样大家开发的网站跨平台会非常容易做啊！啧！啊！这个注册功能，这个这个这个账号功能需要用到 <code>models</code> 啊！<code>models</code> 我们现在先暂时不涉及啊！因为我们现在大家可以看到我们这节课只给大家讲了 <code>views</code> 、<code>urls</code> 还有 <code>static</code> ，东西很多啦啊！我们给大家讲的时候不可能一下把所有功能一下都灌给你对吧！？啊！咱们得一步一步来啊！我们这个账户管理功能估计得在下周或者下下周才能开始做，好吧！？啊！大家需，大家可以先把我们这节课讲的内容先熟悉一下啊！一步一步来 ，啧！嗯吭吭！嗯！对！<code>models</code> 就数据库管理这块还没有讲，然后等我们这块熟悉之后	 然后会加一个数据库模块啊！然后数据库模块熟悉之后会加一个 <code>websocket</code> 模块啊！<code>websocket</code> 模块熟悉之后会加一个 <code>redis</code> 模块啊！一个一个往上加，不要着急啊！ 我们周四的话核心就是开发这个页面了啊！啧！周四新东西不会太多啊！主要还是在前端上啊！但是前端大家应该很开心才对！因为前端的话你抄一遍就会了，啊哈</del>就这么简单，啧！有管理员功能，肯定有管理员功能呀！我们现在还没有数据，还不用管理数据啊！所以说不需要用管理员，不需要看管理员界面啊！然后未来我们需要管理数据的时候，啊！这个管理员功能才会给大家介绍，好，大家看一下有没有问题啊！咱们这个给大吉备课内容还是很多的，对吧！大家可以看到我们今天周二给大家讲的时候额嗯！两个多小时的量，量还是非常大的啊！啧！咱们这个工程课啊！这 <code>django</code> 课备课比 <code>linux</code> 备课要容易一些啊！额！因为 <code>django</code> 课的话他都是一些比，相对于算法来说更是体力活了，对吧！？那么体力活的话就需要就是比较容易备课，额！所以大家，咱们这 <code>django</code> 课，额！一般不会因为备课慢的原因鸽掉，啊！这大家可以放心啊！啧！你看我们这个 <code>linux</code> 课的话经常会因为备课备不出来所以鸽一次对不对！？<code>django</code> 课不会啊！<code>django</code> 课备课比较容易啊！就是备课跟讲课时间基本上一比一啊！<code>linux</code> 课的话可能讲课一小时备课三小时，啧！吭吭吭， 好，大家看一下有没有问题啊！刚刚讲的东西比较多啊！大家课后的时候学的方法就是把我们上课内容一行一行复现一遍就可以啦啊！额！<code>y</code> 总说一下都买啥服务器，趁着双十一赶紧买，啊！服务器只要选最好选 <code>ecs</code> ，啊！如果你选成了轻量级问题也不是太大，只要你能够装上 <code>docker</code> 就可以啊！对吧！？因为咱们所有开发环境都是 <code>docker</code> 容器，对吧！？啊！那么大家这个在 <code>docker</code> 里开发的话你未来换服务器也方便，换个服务器之后把，在新服务器上装的 <code>docker</code> 你就可以将这个服务器上的容器迁移过去了，也可以直接将你的环境整个迁移出去，然后这个服务器怎么去租啊！租完之后怎么去配置啊！以及可以选内些服务器，咱们讲义里是有的啊！同学们啊！我这个讲义第一章，第二章讲义给大家把第二章 <code>django</code> 课、 <code>django</code> 课第二章讲义里边给大家把 <code>linux</code> 基础课第八讲的所有内容全部放过来了啊！<code>linux</code> 基础课第八讲的所有内容就是交给大家怎么去云平台租服务器啊！租的时候怎么去点界面，给大家演示，当时给大家在课程里面给大家演示了阿里云、腾讯云、华为云都演示了一遍，可以吧！？啊！ 然后租完之后怎么去配环境，对吧！？你要你要创建一个非根目录，然后要配置免密登录，对吧！？啊！然后怎么去装 <code>docker</code>，啊！都在里面是有的啊！大家可以自己去看一看，这个是，第一个视频是讲怎么去租云服务器啊！第二个视频讲的是 <code>docker</code> ，啧！这个 <code>docker</code> 最后的话给大家讲了一下怎么去额额！怎么去配置 <code>docker</code> 环境啊！然后装 <code>docker</code> 的话也是在第一个录像里面，好吧！？啊！然后，注意一下，我们在第一个录像里给大家讲的时候说一定要租一定要去装 <code>ubuntu 20.04</code> 啊！其实也非必须啊！但是最好，版本一样，啊！如果你版本不一样的话也没有关系，因为 <code>docker</code> 的话其实装到任何的这个 <code>linux</code> 版本上都是可以的，所以这个配置稍微有一些出入问题也不算太大啊！额额！<code>y</code> 总想问个题外话，将来如果自己的项目被人抄袭怎么办？这个是比较难的啊！就是现在我们交给大家的时候我们现在压缩的工具啊！额是直接将所有代码直接硬贴在一块儿对吧！？啊！所以大家一打开之后你会发现就是你的源码！对不对！？但是我们在这节课在这个 <code>django</code> 课后半段啊！会给大家这个会给大家介绍一个工具啊！就是你用内个工具，你用内个工具去打包的话他会将你的 <code>js</code> 代码做一个简化，首先会把你的注释都删掉啊！其次会给你压成一行的格式而且会给你把所有的变量名都替换成一个字符啊！就是如果说就是额额！别人去看你 <code>js</code> 代码的时候是面目全非的，啊！完全看不懂，所以不太用担心被抄袭，对不太担心需要担心这个问题，额！然后另外一个的话他这个是有先发优势的，你比如说这个大家如果自己做网站的话他可能确实是比较，维权可能会难一些啊！但大家你比如说在 <code>AcWing</code> 上去发布一个 <code>app</code> 那么你先发布了，后面一个同学把你的应用，把你的这个 <code>js</code> 文件拷下来再重新发布，啊！那么我们可以帮你把另外一个同学直接搬掉，对吧！？啊！这样就可以了，啧！对！当然大家也可以自己申请一下<strong>软件著作权</strong>之类的，这个也是可以去申请的啊！开源不好吗？开源肯定不好呀！啊！额嗯！因为开源的话，额嗯！吭！这个这个开源的话额嗯！就会导致开发者没有动力，你知道吧！？就是只有做的东西属于自己啊！才会有动力去做，那你就类似于家庭联产承包责任制，出来之后啊！农民的劳动积极性才有了质的飞跃，大家如果都吃大锅饭的话，谁会好好做事啊！对不对！？啊！所以说这个在一定程度上啊！自己开发项目闭源的话其实是尤其要保护知识产权啊！这个是更能调动其他同学的积极性的，啊！对！尤其对于小型的开发者，如果是平台型公司的话会开源很多东西，对吧！？因为他确实不靠这个东西来赚钱，玩自己游戏能给自己开挂吗？肯定可以啊！啊！你比如说你可以特判一下，如果你是超级管理员的话你可以把你的血量调成 <code>100</code> 倍，对不对！？呵，都可以啊！额嗯！另外一点就是我们这节课给大家教的这种开发模式啊！理论上其实其实也没有太难啊！就是理论跟实际差距很小，大家可以去搬任何的 <code>app</code> 啊！你比如说你像这个这个你可你比如说这个啊！搬一个微信，对吧！？啊！其实微信他，这个 <code>acwing</code> 的 <code>ac chat</code> 本质上就是这么搬过来的，啊！一步一步做切分，整个界面分成很多模块，对吧！？左边这个模块是一个 <code>class</code> ，右边这个模块是另外一个 <code>class</code> ，左边这个模块有好多，好多细的功能每个功能都是一个 <code>class</code> ，啊！额！那么这个套路的话你是可以将任何一个项目无限细分啊！直到细分到这个模块功能不多为止，然后就可以实现它了，所以大家可以发现这个模式是可以搬所有东西的啊！那么所以说大家这个在去学完咱们这个 <code>django</code> 课之后啊！额嗯！我们虽然大家做的都是同一个游戏啊！但是你用这个开发模式很容易去 <code>4399</code> 上，比如或者去 <code>steam</code> 上啊！去仿制出来任何一个游戏，啊！都是可以的，啊！所以这个开发模式是很强的啊！对！大家之后可以去 <code>4399</code> 上去找灵感，对不对！？你比如说这个黄金矿工啊！或者是什么或者是什么这坦克大作战啊！都可以去 <code>copy</code> 过来，都可以去这个这个仿照过来，黄金矿工，包括还有这个付赖皮博得对吧！？啊！当然这个比较简单啦！还有比如愤怒的小鸟啊！都是可以的啊！因为每一个项目你都可以无限细分啊！总可以细分到自己可以做为止，对吧！？啊！额啊！<code>ac chat</code> 源码可以给看吗？肯定不给看啊！这个是显然的啊！啊，大家在 <code>acwing</code> 上开发的这个，如果接入 <code>acapp</code> 的话那你的源码也是不给别人看的啊！吭！对吧！？啊！所以大家这个而而且这个模式啊！大家熟悉之后啊！额嗯！<code>acwing</code> 这个生就是我们的口号，<code>acwing</code> 工程课系列口号是什么，一个人一个月上线一款 <code>app</code> ，啊！完全可以做到啊！你像你比如说大家开发一个黄金矿工的话，半个月就可以上线啦啊！非常的容易啊！按照我们这个模式你可以将一个东西无限细分，每一个部分都都是一个都是一个 <code>class</code> , <code>js class</code> 啊！然后用 <code>css</code> 控制样式，很容易实现出来，不止，不止可以 <code>4399</code> 啊！任何一个都可以，你只要，额哼，你只要一个项目，当你项目很大的时候，你可以找同学一块儿来做，对吧！？你比如将一个项目分成了啊！很多模块，啊！分成了五十个模块，那你可以找二十个同学，一块来做，每个人负责 <code>2.5</code> 个模块，就可以啦！大家开发一个黄金矿工的话半个多月就可以上线啦！啊！非常的容易，看着别人的游戏然后复现算抄袭吗？这个你要看这游戏有没有版权啊！如果有版权的话肯定算抄袭，啊！现在这个国家对知识产权保护还是比较严格的，啊！但是有一些经典游戏，哎！你你翻一下问题好像也不是太大，对吧！？有有有一些非常经典的游戏，对吧！？啊！比如你发现 <code>4399</code> 上已经黄金矿工已经有一百款了，那你再做一款好像问题也不是太大对不对！？对！咱们这个 <code>acwing</code> 这个模式啊！交给大家这个技术啊！一个人一个月一款 <code>app</code> 很轻松啊！很轻松啊！就是每一个项目可以无限细分，分完的每一个模块，都是一个 <code>js</code> 对象，咳嗯！好，那么大家看一下有没有问题啊！没有问题的话我们就准备下播啦！同学们，这节课内容量比较大啊！这节课的话咱们这个录像的话有两个办小时啊！大家要好好的去复习好吧！？啊！我们周四的话还有一节课，额！周四之前大家最好把这个项目课上项目抄一遍啊！最好最好抄一遍啊！你就算抄不下啦，你也先 <code>clone</code> 下来跑一遍，啊！啧！好，啊！那我们这个直播到这里就结束啦！大家早点休息啊！拜拜！																																																																		</p>
<h5 id="前端小技巧"><a href="#前端小技巧" class="headerlink" title="前端小技巧"></a>前端小技巧</h5><ul>
<li>如果是在某一个 <code>div</code> 内部创建一个新的 <code>div</code> ，<code>class</code> 使用父节点作为前缀，后面不容易乱；同一层的一些 <code>div</code> 起一个相同的类名</li>
</ul>
<ol>
<li><code>django</code> 项目基本上没有使用其他的包（需要提前学习），为了节约大家的时间，让大家可以尽快上手</li>
<li>使用比较基础的前端技能如 <code>jquery</code> 就可以实现了</li>
</ol>
<p>由于 <code>menu</code> 界面的三个按钮需要点击，响应用户的操作，需要把三个按钮索引出来，除了共同的类名之外，再起一个不一样的类名</p>
<ul>
<li><p>大家可以发现为什么给 <code>html</code> 元素要起名字（类名，<code>id</code> ）</p>
<ul>
<li>方便查找元素，对元素进行操作</li>
</ul>
</li>
<li><p><code>js</code> 语法不需要讲，大家直接背就可以了，第一遍不会，第二遍背过了，就会了</p>
<ul>
<li>虽然 <code>api</code> 比较多，但 <code>api</code> 含义比较容易理解，学习前端最好的方式就是多背</li>
<li>面试背的八股文同理，场景基本遇到的都一样</li>
</ul>
</li>
</ul>
<h5 id="vh-vw"><a href="#vh-vw" class="headerlink" title="vh vw"></a><code>vh vw</code></h5><p>整个页面所占的百分比，不是用 <code>px</code> 页面窗口大小改变，图片的大小也随之改变，写游戏时用百分比的参数，而不是 <code>px</code>，很合理</p>
<ul>
<li><code>px</code> 像素</li>
<li><code>vh</code> 百分比</li>
</ul>
<h3 id="4、创建游戏界面"><a href="#4、创建游戏界面" class="headerlink" title="4、创建游戏界面"></a>4、创建游戏界面</h3><p>第四讲：创建游戏界面</p>
<p>没有讲义，因为都是一些操作啊！然后，我们这节课内容比较多，所以说大家一定要先做好心理准备啊！额！但是虽然内容比较多，但是内容比较单一，都是前端，就都是<strong>纯 <code>js</code> 内容</strong>，所以大家也不用太担心啊！我们上节课有很多杂七杂八的内容，对吧！？啊！大家可能感觉很乱，这节课的话只有 <code>js</code>，啊！别的啥都没有，啊！啊！网络编程，我们是，以实用为目的啊！只会讲用到的东西啊！用不到的就不讲了啊！好！然后，我们这节课做出来的<strong>最终效果是这样</strong>的啊！不一定能够讲完，啊哈！因为这量比较大，啊！然后可以给大家展示一下啊！就是你一刷新，哎！然后我们，我们是<strong>控制我们的小白球去移动</strong>啊！人机模式的话是，其他是由电脑控制的啊！额！然后，<strong>未来</strong>多人对战的时候每<strong>一个小球都是一名玩家</strong>，啊！然后，未来我们的<strong>地图也会做一个丰富</strong>，啊！会做成<strong>吃鸡的模式</strong>，啊！每过一段时间这个<strong>毒圈会缩小</strong>，然后圈外的人会，圈外都是火焰，啊！然后他会掉血好吧！？啊！然后我们的<strong>操控模式</strong>是跟 <code>moba</code> 类游戏是一样的啊！跟 <code>dota</code> 和 <code>lol</code> 是一样的，鼠标<strong>右键是控制移动</strong>，你可以点到目的地对吧！？啊！所有你跟人去打的时候，你可以<strong>左右移动</strong>，对不对！？可以走位走位走位！啊！然后，额嗯！<strong>键盘的 <code>Q</code> 和 <code>qwer</code> 是放技能</strong>啊！然后我们的 <strong><code>q</code> 键是放一个火球</strong>，大家摁一下 <code>q</code>，在鼠标点方向，就可以发出去啦！看到没！啊！然后我们的火球击中目标之后，哎！他就会有一个<strong>这种位移效果</strong>啊！我们这个游戏啊！就是术士之战这个游戏，他主要是通过位移将玩家<strong>击退到圈外</strong>啊！来造成伤害，本身<strong>火球的伤害并不是很高</strong>啊！然后，未来我们也会给大家实现很多，额！也会有很多丰富的技能<strong>比如说有冰球</strong>，当然，冰球现在没有实现啊！然后冰球的话击中目标之后，对方会获得一个<strong>减速的 <code>deff</code><strong>，对不对！？比如</strong>减速个百分之五十，然后减五秒钟</strong>，啊！包括也会有，这个这个<strong>闪现对吧</strong>！？啊！就是你摁一下这个这个 <code>f</code> 键，<strong>他就会朝你的指定目标瞬移一段距离</strong>，啊！当然也会有<strong>隐身</strong>，对吧！？啊！你比如说，你一放隐身，别人就看不见你啦！啊！当然也会有<strong>超必杀</strong>，对吧！？啊！可能会发一个<strong>超大个的一个 <code>aoe</code><strong>，啊！都是可以的，啊！额嗯！对！我们啧！这个球的话未来会未来会</strong>换成特别帅气的一个人物的一个头像啊！</strong>目前我们<strong>只是实现了逻辑</strong>啊！所以说<strong>这个图案这块做的还是比较简单啊</strong>！用<strong>纯色</strong>来表示好吧！？啊！额嗯！</p>
<p>好，额吭！那么，然后，额！我们来看一下这节课的内容啊！额！然后，这节课给大家讲的这个游戏的实现方式啊！我们是拿纯 <code>js</code> 来实现，啊！但是我们会先去实现一个额！<strong>简单的类似于 <code>unity-3d</code> 的一个游戏引擎</strong>，啊！然后我们再用这个引擎去写我们的游戏好吧！？啊！好，内容比较多啊！大家要打起精神来啊！这节课做完之后，你就可以，啊！你就可以，如果我们可以讲完的话啊！<strong>你</strong>就可以去实现一个这种，哎！好像可以<strong>人机对战的一个游戏啦</strong>！对吧！？啊！每个小球的话每次<strong>击中之后，他就会变小</strong>，看到没，而且会有一个这种，额！会有一种！哎！击中的哎！一个效果，比较<strong>漂亮啊</strong>！当然<strong>未来也可以加上音效</strong>，啊！好，那么这个游戏的话我就先把他删掉了啊！然后我们从上节课的额！结尾部分开始继续写我们的游戏啊！我们来，首先打开我们的 <code>Ac Terminal</code> ，对吧！？啊！稍等一下啊！我先把空调调一下啊！额！<code>js</code> 这块内容的话大家不需要去先补 <code>js</code> 的知识啊！因为 <strong><code>js</code> 这个语言他门槛儿比较低</strong>，为什么门槛儿比较低呢？是因为他难度不高，他这个很，<strong>他是基本上属于所见即所得</strong>，啊！<strong>思维</strong>难度并不高，啊！所以大家没有学过 <code>js</code> 的同学没有关系，啧！你模仿我们上课代码去写一遍就可以啦！啊！其实就是把上课代码抄一遍就可以了，啊！然后，未来自己去写项目的时候<strong>其实是仿照课上的函数稍微变一变参数就可以啦</strong>！啊！我当时学 <code>js</code> 就这样来学的啊！就是<strong>不用学 <code>js</code> 语法</strong>，<strong>直接看一个教程</strong>，<strong>边看边写</strong>，然后未来再<strong>根据自己的需求</strong>，啊！<strong>要写的时候</strong>你就将<strong>你之前模仿的函数</strong>抄过来，然后改吧改吧！就可以啦！好吧！？啊！额！没看上节课内容，可以看这节课内容吗？可以的，我们这节课是<strong>纯前端内容</strong>啊！因为我们<strong>最后还是要做一个一个一个 <code>app</code></strong> 对吧！？所以<strong>还是要用到前端的</strong>啊！吭！好，那么我们先登到我们的这个我们的云服务里啊！登录到 <code>django</code> 里边，然后我先把我们上节课的内容先回滚一下啊！回滚到上节课的内容，好，我们把上节课的内容 <code>copy</code> 下来，上节课内容是在我们的 <code>acgit</code> 里边，对吧！？啊！大家可以打开一下自己的 <code>acgit</code> 主页啊！去看一眼，上节课内容在这里，额！然后，点这个克隆，然后，点这个按钮复制，啊！复制完之后的话，我们 <code>git clone</code> ，好，那这样就复制下来了，对吧！？啊！然后，我们进到，我们，然后先打开 <code>tmux</code> ，啊！为了防止自己的工作进度丢失啊！一定要进到 <code>tmux</code> 里，啊！然后在 <code>tmux</code> 里边我们先运行我们的服务啊！我们<strong>在去写的时候一定要运行一个服务啊</strong>！这样的话我们改完之后<strong>可以立即看到效果</strong>啊！<code>python3 manage.py 0.0.0.0:8000</code> ，<strong>这个 <code>0.0.0.0</code> 最好加上啊！</strong>啧！你不叫的时候，有些时候你访问不到啊！啊！<code>runserver</code> 少一个 <code>runserver</code> 对吧！？啊！回车！回车！哎<del>！好，这样的话我们就可以访问我们的网站啦！啊！一刷新，一刷新，哎！我们就回到了我们上节课的页面，对吧！？啊！好，额吭！**额</del>这个前端内容其实都比较简单啊！纯前端都比较简单<strong>，同学们啊！大家不要有心理压力啊！因为大家，你去网上搜，随便一搜就发现，哦~！前端门槛儿低！哎呀！前端简单，对不对！？其实确实不是很难啊！额！然后前端的话还比较好玩，</strong>因为你写完之后可以立即看到效果啊<strong>！所以大家学前端的时候，</strong>还是应该还是很有动力的啊！<strong>好，然后我们再打开一个新的 <code>tmux</code> ，用来写代码，我一般习惯先把 <code>tmux</code> 分成四栏儿啊！这样的话，一般够用了啊！不够用的话再加新的栏儿就可以了，啊！嗯！我们首先需要先将上节课的代码稍微改一改，啊！我们</strong>上节课这种代码引用方式他会有一个弊端啊<strong>！大家可以点开这个网页源码看一下啊！就通过这个 <code>script src</code> 这种命令啊！将代码引入进来之后啊！会导致一个什么问题呢？会导致，你像我们这种定义的所有名字，什么 <code>AcGameMenu</code> ，啊！还有这什么 <code>AcGamePlayGround</code> ，还有 <code>AcGame</code> ，</strong>这些全局变量啊！他都会变成整个网页内部的全局变量<strong>，那么当我们引入多个 <code>js</code> 文件的时候，</strong>不同 <code>js</code> 文件之间如果有重名的话就会导致我们代码可能会有冲突<strong>，对吧！？啊！所以这种引入方式的话目前来说不太好，我们</strong>最后做一个模块化<strong>！啊！那么 <strong><code>js</code> 最新版本就 <code>ecm6</code></strong> 就 <code>js</code> 最新版本是支持</strong>面向对象<strong>的，啊！也就是说我们可以用</strong>模块的方式将他重新组织一下<strong>啊！什么意思呢？其实非常简单啊！说了半天其实非常简单，我们来看一下，在我们的代码里稍微修改一下就可以啦啊！进到 <code>game</code> 里边，然后进到 <code>migrations</code> 里边，进到这个这个 <code>templates</code> 里边，进到 <code>multiends</code> 里边，然后打开我们的 <code>web.html</code> ，然后我们不通过这种模式来引用了啊！而是通过模块的方式来引用，啊！就</strong>这里 <code>type</code> 改成 <code>module</code> 就可以啦！<strong>好，然后，当我们需要某一个名称的时候，我们</strong>只将这一个名称引入进来<strong>，而不是将他里面的所有内容全部变成全局变量，怎么来做呢？这样来做啊！</strong>类似于 <code>python</code> ，就 <code>import</code> 一个 <code>AcGame</code> 对吧！？<strong>啊！大家可以发现我们只会用到 <code>AcGame</code> 对不对！？所以我们 <code>import</code> 一个 <code>AcGame</code> ，啊！从哪儿 <code>import</code> 呢？从这个地址的地方，把他 <code>copy</code> 下来就可以啦！<code>ctrl a + [</code> ，把他 <code>copy</code> 下来，好！<code>ctrl a + ]</code> ，好，那么这样的话我们就只会从这一个文件当中啊！额！</strong>载入一个一个名字，就是我们的 <code>AcGame</code>** ，其他的东西都不会载入进来啊！而且我们载入的这个 <code>AcGame</code> 也不会作为全局的全局变量，啊！这就很方便，对吧！？啊！这可以删掉啊！好，那么这样做完之后的话，大家可以去调试一下啊！刷新一下，你会发现，摁下 <code>f12</code> ，你会发现报错了啊！他会告诉我们说哎！我们加载的这个模块需要提供一个暴露出来的一个名字，啊！什么意思呢？就是我们如果想去加载我们的 <code>AcGame</code> 的话，我们需要在我们<strong>的 <code>AcGame</code> 前面加上一个关键字 <code>export</code> 就可以啦</strong>！好吧！？啊！咳嗯！这块东西，额！这块的话大家只要知道这，只要知道这些就可以啦啊！这个更深的东西，大家可以先暂时跳过，好吧！？啊！好，那么因此的话我们需要进到我们的上一次，上一次写的文件里边啊！<code>static/js/</code> 然后，<code>src</code>，打开 <code>zbaise</code>，<code>zbase</code>，额！然后由于我们需要，外面需要 <code>import</code> 一个 <code>AcGame</code> 对吧！？啊！所以我们在这个 <code>class</code> 前面加上一个 <code>import</code> 就可以啦啊！非常的简单，加完之后大家一定要记得去更新一下自己代码，啊！更新一下自己代码，就是重新打包一下，进到我们的这个 <code>scripts</code> 里边，然后 <code>./</code> 打包一下，好，这块的话大家可以直接照抄下来，啊！因为我们这块只会用一次，啊！只会用一次，未来不会用的东西，大家就都可以照抄，<strong>当你未来需要用的时候，你才需要去深究一下他到底怎么用</strong>啊！然后一刷新就好啦！好吧！？啊！啊！那这是对上节课的一个内容的一个完善，啊！额！然后我们来看一下这节课具体的内容啊！那么我们这节课要写的，要实现的是我们的<strong>单人模式里的游戏界面</strong>，对不对！？啊！好，啊！所以说，<strong>为了我们调试方便啊</strong>！我们每次刷新的时候，大家会发现，我们都会进到菜单界面，然后我们需要点一下才可以进到单人界面，对吧！？啊！那么为了方办方便我们调试，我们可以<strong>先将菜单页面关闭</strong>，啊！<strong>只显示我们的游戏界面</strong>，啊！这样我们每次去调试的时候，一刷新就可以啦！啊！好，那这个怎么做呢？这个是打开我们的 <code>zbase</code> 对吧！？啊！然后将<strong>创建菜单界面这个命令注释掉</strong>就可以啦！啊！可以吧！？啊！注释完之后的话，我们打开我们的，哎！我们的 <code>playground</code>，我们今天的话只在这个文件夹里写，打开这个 <code>zbase</code> ，那么在这个里边我们一上来<strong>不要把他隐藏掉</strong>啊！千万不要隐藏掉，好吧！？啊！然后我们这里的话，这几个字也可以关掉了，删掉了，然后 <code>class</code> 的话起个名字，名字的话可以叫 <code>ac-game-playground</code> ，好，然后，我们定义了<strong>一个新的类</strong>啊！大家一定要注意一下，一定要记得将这个类的样式重新写一下，啊！命令补全的<strong>快捷键是什么， <code>ctrl + r</code></strong> 啊！额！咳嗯！再看一下这个，你可以直接打开我这个，咱们这教学界面，网址，然后<strong>右键看网页源码</strong>，就可以看到了，好吧！？啊！咳嗯！好！啊！那么，然后，我们接下来是，额！需要设置一下我们这个 <code>ac-game-playground</code> 的一个样式，对不对！？那么我们可以在下面啊！进到我们的 <code>game</code>，然后 <code>static/css</code> 里边，哎！然后我们加一个新的样式，所有大家可以发现额！接下来每次课的内容都是重复上节课内容，对吧！？啊！然后 <code>.ac-game-playground</code>，那么这里的话我们只需要三个属性就可以啦！一个是宽度 <code>100%</code> ，占满，然后，高度也是百分之百，也是占满，然后也是用户不能去选中里边的字啊！就是 <code>user-</code> 啊！<code>select</code>，<code>none</code> ，好，就可以啦，然后，我们，额！然后我们来重新压缩一下，啊！然后来刷新一下，好，那么大家这里报了个错啊！这个报错可以可以先不用管，他是说我们网站这个地方没有图标，啊！这个不用管，跟咱没什么关系啊！未来要加图标的时候可以到时候再加就可以啦！啊！我们可以看一下 <code>elements</code>，看一下我们这里对不对！？啊！啧！我们这里面有一个 <code>playground</code> 是占满了，对不对！？对不对！？哎！没有问题，好，啊！那么，然后我们再继续往后看，啊！那么后面的内容就是纯 <code>js</code> 啦！我们前面先做了一些铺垫，同学们啊！一定要坚持住啊！这个，啧！对！这节课这这节课内容是比较重要的，而且比较好玩啊！好，啊！然后我们接下来是干嘛呢？啊！我们接下来先做一些铺垫啊！就是我们首先当前有一个画布，对不对！？有一个这游戏界面，那么这游戏界面的长和宽，啊！我们为了方便，可以先把他存下来，因为这个东西未来会经常用啊！我们的宽度记到 <code>this.width</code> 里边啊！他就等于 <code>this.$playground</code> <code>playground.width</code> ，好，然后，<code>this.height</code>，<code>height</code> 的话是高度，<code>this.playground.height</code> 好，啊！那么然后的话我们在讲后面的内容之前，先给<strong>大家讲一讲我们的游戏一般是怎么来实现的，啊！</strong>：</p>
<p>你比如说刚刚给大家演示的时候发现我们的，啧！大家会发现我们这个小球可以动的对吧！？啊！那么游戏里边动是怎么来做的呢？啧！他其实是这样的啊！先讲一下啊！额嗯！你比如说我们有一个这个游戏，对吧！？啊！然后里边有一个小球，或者有一个人物，那么这个这个小球是怎么动，怎么实现动的效果，啧！啊！额！他其实是这样的啊！就是说我们每秒钟啊！额！会将整个就是这跟电影是一样的，你看电影每秒钟会播放很多图片啊！然后，当很多图片额！飞快地播放的时候，我们人眼就会感觉他是在动！对不对！？那么游戏也是这样啊！游戏的话你比如说这个小球动的效果怎么实现的呢？啊！他就是，哎！我小球在这里放一张图片，啊！然后，我再将这个小球往移动一点，往右移动一点，再放一张图片啊！我再移动一点，再放一张图片，啊！他一秒钟会刷新 <code>724</code> 次，在我们这里的话会每秒钟刷新 <code>60</code> 次，啊！也就是每秒钟会给大家播放 <code>60</code> 张图，啊！然后，每张图，这个小球都会向右移动一丁点那么当我们去按照描述去飞快的播放这些图片的时候啊！我们这个小球就看起来就向右动了，好吧！？啊！所以我们接下来实现这个游戏里边动的概念的时候，啊！其实就是每秒钟重新画一张图啊！然后我们这个小球的坐标在每一张图片里边都向右移动一丁点，啊！这样小小球就可以动啦！啊！那当我们有多个小球的时候呢？你比如说啊！这个小球向右动，然后，另外一个小球向向向这个右下动，额！那么这个怎么来实现呢？其实是一样的啊！就是我们也是每秒钟画六十张图，啊！第一张图里，这两个小球在这个位置，对吧！？啊！那么第二张小球里这两个小球会稍微向右错一点，然后重新画一遍，啊！然后这个小球会向右下错一点，在重新画一遍，然后依次类推，这样就看起来是两个小球分别动啦！啊！同理，你比如说我们这个小球发了一个火球啊！那么发了一个火球，怎么实现发火球这个效果呢？也是一样，对不对！？他发了一个火球啊！那么接下来每一秒钟，每每一张图片里边，我们这个小火球都会朝着他前进方向前进一步，啊！这样就可以实现一个动画效果啦！好吧！？啊！额！然后我们这个每一张图片啊！他一般在游戏里边被称为帧，每一帧，这个帧是这么写的吧！？这个提笔忘字了啊！我看一下啊！每一帧，对就这么写啊！就是一个一个巾字旁，哎~哎！？啊！每一帧图片，我们这每一张图片一般被称为每一帧图片啊！然后我们这里的话是每秒钟刷新六十次，好吧！？啊！好，额吭！那么，给大家讲完这个之后啊！大家可以发现我们这个游戏里边，每一个小球他都有类似的一个操作，对不对！？啊！就是他每一秒钟都要去刷新六十次，小球需要每秒钟刷新，需要每秒钟画六十次啊！这小球也要画六十次，这个火球也要画六十次包括整张图每秒钟都要画六十次，啊！那么因此我们可以发现整个游戏里边很多物体，他每秒钟都要花都要画六十次，<strong>啊！那么因此我们就可以实现一个通用的类</strong>，</p>
<p>啊！叫 <code>game</code> 、<code>game_object</code> 、这个类的作用就是去让每一个物体在画的过程当中，啊！每一帧都画一次，啊！所有我们这里的话先实现一个基类叫 <code>AcGame_Object</code> ，这里的话就是我们先实现一个简易的游戏引擎的一个概念啊！就是我们先你像 <code>unity</code> 写游戏就是这样的，我们直接去啊！<code>extends</code> 一个什么 <code>model-behavior</code> 的一个基类，那么这个基类去帮我们每每一帧渲染一遍我们的图片，啊！那么在我们 <code>js</code> 里边，我们需要手写一下这个基类，好吧！？啊！叫 <code>ac-game-object</code> ，非常简单啊！<code>acwing-game-object</code> ，随便起了个名字，那么这个基类的作用啊！就是所有是这个基类的对象，啊！我们每一帧都会调用他的一个刷新函数，好吧！？啊！每一个每一帧都会调用他的刷新函数，然后我们来看一下，怎么来实现啊！就我们先实现一个简易的游戏引擎，吭吭！好，那么首先我们先创建一个 <code>ac-game-object</code> 这个东西啊！他是我们未来所有游戏画面里的 <code>class</code> 的一个基类，啊！他帮我们实现的作用就是每秒钟啊嗯！每一帧图片都帮我们重新渲染一遍我们的这个物体啊！好，啊！然我们进到 <code>ac-game-object</code> 里边，然后定义一个 <code>zbase.js</code> ，好，然后我们创建一个 <code>class</code> <code>AcGameObject</code> ，那么这个基类的话有一个构造函数，对吧！？啊！<code>constructor</code> ，好，那么我们这个基类里边每一个 是这个基类的物体每一帧都要重新画一次，啊！那么因此我们在创建这个对象的时候啊！在创建这个物体的时候，就需要先将他存到一个全局数组里，啊！存到全局数组里之后，我们每秒钟调用这个数组里的对象，调用六十次，啊！好，我们实现一个我们搞一个全局变量啊！比如叫 <code>AC_GAME_OBJECTS</code> ，一个数组啊！然后每一次我们再去创建这个物体的时候，哎！都将这个对象直接加到我们的全局数组里 <code>AC_GAME_OBJECTS</code> ，<code>.push</code> 一个 <code>this</code> ，</p>
<p><strong>好，啊！然后，我们这个物体啊！他一般来说会有三个函数</strong>，第一种函数的话是他刚刚开始的时候执行一次，啊啧！就我们某一个物体，你比如说我这个，咱们这个小球对吧！？啊！我刚出现的哎！我需要给他设置一下什么呢？需要设置一下他的颜色呀，分值呀，昵称呀，对吧！？啊！从服务器端加载出来他的昵称是什么对不对！？啊！然后有一些操作，需要每一帧都要执行，啊！你比如说我渲染啊！需要每一帧执行，那么因此我们可以将所有的函数啊！分成三大类，第一类的话第一个函数叫，函数接口叫 <code>start</code> ，哎！这个函数的话就是额！只会在第一帧执行啊！只会在第一帧执行一次，啊！另外这个函数叫 <code>update</code> ，啊！这个是每一帧都会执行一次，每一帧均会执行一次，啊！第三个的话叫 <code>destroy</code> ，就把他删掉啊！<code>destroy</code> 啊！好，那么这个是删掉该对象，删掉当前物体啊！删掉该物体，那么删掉该物体的话在 <code>js</code> 里边就是将他从数组里边删掉就可以啦啊！在 <code>js</code> 里边，当一个对象没有被任何的变量存下来的时候，他就会被自动的释放掉，啊！那么我们将他从 <code>AC_GAME_OBJECTS</code> 里边删掉就可以啦！我们可以枚举一下，<code>let i = 0; i</code> <code>i</code> 从 <code>0</code>，<code>i</code> 小于 <code>AC_GAME_OBJECTS.length</code> ，好，然后，判断一下，那么如果我们发现 <code>AC_GAME_OBJECTS[i] === this</code> 的话我们就把他删掉啊！额！注意 <code>js</code> 里面的删除函数比较特殊啊！这个叫 <code>AC_GAME_OBJECTS.splice</code> ， 很神奇的一个函数啊！，这可以直接背过啊！就是从 <code>i</code> 开始删一个，啊！<code>splice</code>，删完之后就可以 <code>break</code> 掉了啊！好，然后，我们一般来说啊！一个物体在被删之前可能还需要去恢复现场，比如说我们人在被删之前，</p>
<p><strong>哎！我可能需要给我的对手加分，对吧！？啊！他需要捡我的包</strong>，对不对！？啊！所以说我们一般还需要一个函数啊！叫 <code>on_destroy</code> ，就是我在被删除之前我执行一次啊！在被销毁前执行一次，那么这个函数的话就是在被销毁前执行一次啊！在这里执行一次就可以啦啊！<code>this.on_destroy</code>，好，那么这样的话我们就已经实现了我们一个简易的游戏引擎啦啊！好吧！？啊！哎！对！哎！就是这两个函数啊！就大家未来在去写 <code>unity</code> 的时候也是一样，啊！这两个函数 <code>start</code> 跟 <code>update</code> ，</p>
<p>好，啊！那么，然后我们需要去实现让，<strong>实现每一帧去循环一遍这个数组里的所有对象</strong>，啊！对吧！？啊！那这个怎么来实现呢？这个 <code>js</code> 的话提供了一个，提供了一个 <code>api</code> ，啊！叫什么呢？叫 <code>requestAnimationFrame</code> ，这个可以直接背过啊！因为他只会用一次啊！这个函数就是会在一秒钟之内调用六十次啊！每一次，额！每一帧他这个函数意思是什么呢？意思是我会在额！我将一秒钟分成六十份，对吧！？啊！等分成六十份，啊！等分成六十份啊！那么我如果执行这个函数的话，就是说我会在下一次这个事件触发的时候执行一遍这个函数好吧！？</p>
<p>啊！好，那么我们可以<strong>先定义先定义一个函数</strong>啊！比如叫这个 <code>AC_GAME_ANIMATION</code> ， 等于什么呢？等于一个函数啊！然后这个函数的话，额！他在调用这个函数的时候，给他传一个参数啊！这个参数的话叫 <code>timestamp</code> ，就是一个时间戳，就是我是在内一个时刻啊！调用的这个函数啊！好，那么我们接下来可以在，可以将 <code>AC_GAME_ANIMATION</code> ，传给这个 <code>requestanimationframe</code> 这个函数，这样的话我就是说，我会在下一帧的时候调用这个函数，同时给他一个参数叫 <code>timestamp</code> 表示我是在内个时刻调用的他，啊！好，那么我怎么实现我怎么实现一，我怎么实现每一帧都调用这个函数呢？啊！递归就可以了啊！啊！就是我们在结尾的时候再递归一下，啊！<code>requestanimationframe</code> ，然后，<code>ac_game_animation</code> 啊！好，那么这样大家可以仔细，大家可以想想这个执行过程啊！第一次我会在下一帧调用这个函数，啊！那么在这一帧调用完之后，我在递归的时候，他就会在这一帧的下一帧调用一遍，那么又会在，对吧！？我会先在第一帧调用一遍，然后第二帧又会调用一遍，第三帧又会调用一遍，啊！那么这样就可以实现，我每一帧都会调用一次，对吧！？啊！每一帧都会调用一次，啊！啧！这是三个等号，<code>js</code> 里边啊！最好用三个等号，表示全等，嗯！好，</p>
<p>那么每一帧我们需要干嘛呢？啊！每一帧的话需要去遍历一下我们这个数组里的所有物体啊！然后执行一遍 <code>update</code> 函数，对吧！？啊！然后，内个物体比较特殊啊！就是他这个 <code>start</code> 函数会执行一次，然后 <code>update</code> 是每一帧都执行，除了第一帧之外，啊！好，那么**为了实现这个逻辑，我们需要标记一下每一个函数有没有执行过 <code>start</code>**函数，啊！这里的话标记一下啊！就是 <code>this.has_called_start</code> 表示他有没有执行过 <code>start</code> 函数啊！如果他没有执行过 <code>start</code> 函数的话我们就执行一遍 <code>start</code> 函数，啊！只执行一次啊！他执行过 <code>start</code> 函数之后，就每次执行 <code>update</code> 就可以啦啊！好吧！？啊！其实就是这个 <code>start</code> 就是把第一帧单独抽出来啊！单独特殊处理一下啊！额~嗯！这个注释，大家最好写一下啊！就是是否执行过 <code>start</code> 函数啊！</p>
<p><strong>好，然后另外我们在每一个对象里边还有一个东西比较常用啊！叫 <code>tiemdelta</code></strong> ，这什么意思呢？就是哎！额~！当前距离上一帧的，就两帧之间的事件间隔啊！当前距离上一帧的时间间隔，这个单位是毫秒啊！当前帧距离上一帧的时间间隔，为什么这个东西比较重要呢？就因为啊！他有些浏览器吧！他这个不一定每，这个不好说啊！就他有些浏览器他这个函数不一定每秒钟调用六十次啊！你比如有的浏览器他就是不是很标准啊！就你每秒钟调用三十次，啊！那么当我们，这样的话啊！我们相当于是在有些浏览器里边，两帧之间的间隔是三十分之一秒，对吧！？啊！然后，有些浏览器里，两帧之间的间隔是六十分之一秒，啊！那么这样的话当我们物体移动的时候啊！我们物体的移动速度啊！最好用时间来去衡量，而不是用帧来衡量，因为如果用帧来衡量的话那么在这个（三十分之一秒）浏览器里我的速度，我一秒钟之内会执行三十次，对吧！？啊！所以相当于 <code>30</code> 乘以 <code>v</code> 的一个速度，在第二个浏览器在第二个浏览器里那我的速度 <code>60</code> 乘以 <code>v</code> 啦！他就不一致了，对不对！？啊！所以我们一般为了统一我们的速度啊！速度一般是用时间来衡量的啊！那么因此我们需要去统计一下两帧之间的时间间隔，啊！然后，我们这个这个这个玩家或者物体在移动的时候是按照时间去走的，好吧！？啊！啧！好，啊！那么，然后，咳嗯！因此我们这个 <code>timedelta</code> ，需要去存一下，这个 <code>timedelta</code> 其实很容易算，对吧！？啊！因为我们可以发现，他每一帧都会给我们一个执行时间啊！那么当前这帧执行时间减去上一帧的时间戳，那就是两帧之间的时间间隔，对吧！？啊！好，所有说我们，还需要记录一下，上一帧的时间间隔啊！<code>last_timestamp</code> ，这个可以先，这个可以可以可以不用初始化，啊！好，然后枚举一下所有的物体，啊！这个 <code>AC_GAME_OBJECTS</code>这个叫 <code>lenght</code> 啊！这个 <code>lenght</code> 没有括号啊！大家语法上的话需要自己多熟悉熟悉啊！然后，我们当前的物体用 <code>obj</code> 来存下来，等于 <code>AC_GAME_OBJECTS</code>，好，额嗯！然后，判断一下啊！那么这个物体如果说他没有执行过第一帧的话啊！额！<code>has_called_start</code> 的话，哎！那么我们就需要执行一下第一帧，对吧！？啊！<code>obj.start</code> 执行一遍第一帧，然后同时标记一下他已经执行过第一帧啦！所以 <code>has_called_start = true</code> ，表示已经执行过了啊！好，那么如果不是第一帧的话那么我们就要执行 <code>update</code> 函数了，对不对！？那么在执行 <code>update</code> 函数之前啊！我们需要先去初始化一下我们的 <code>timedelta</code>，告诉我们这个对象啊！我这两帧之间的间隔是多少啊！那么因此这里需要写什么呢？啊！需要写的是 <code>this.</code> 啊！不对！？应该是 <code>obj.timedelta</code> 应该等于什么呢？等于当前的时间戳减去上一帧的时间戳 <code>timestamp</code> ，就可以啦！对不对！？啊！然后执行一下 <code>update</code> 函数啊！额！注意这个 <code>last_tiemstamp</code> ，可以可以不用初始化，为什么呢？因为我们可以发现他第一次执行的时候，他所有物体一定都是执行第一帧，啊！第一帧里我们是不需要初始化这个 <code>tiemdelta</code> 的，啊！所以当我们需要初始化 <code>tiemdelta</code> 的时候，他这个 <code>last_timestamp</code> 一定是有值的啊！好，然后每一帧执行完，之后啊！去啊！更新一下我们的 <code>last_timestamp</code> ，就上一帧的时间戳，<code>timestamp = timestamp</code> ，好，额吭！好，那么这样的话我们的一个简易版的游戏引擎就实现完啦！大家看一下有没有问题啊！啊！对！<code>let i = 0</code>，哎！这个没<code>ide</code> 记不住啊！这个没关系啊！我们这里给大家讲的时候，<code>api</code> 用的不多啊！所以大家用终端就可以啦！大家最好不要依赖 <code>ide</code> 啊！因为你依赖 <code>ide</code> 之后，就导致未来发展很收局限，好，咱们这样就实现了一个简易版的一个游戏引擎，对吧！？啊！哎！对！我们接下来就可以像写 <code>unity</code> 一样去写我们的游戏啦！啊！好，然后，写完这东西之后，这代码可能有 <code>bug</code> 啊！我们先留着啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240825085520271.png" alt="image-20240825085520271"></p>
<p>地图和玩家都是 <code>playground</code> 中的元素</p>
<p>我们打开一个新的界面啊！我们首先第一步需要创建的是什么啊！<strong>咱们第一步需要创建的是一个地图，对不对！？</strong>我们是有一个地图的概念的啊！那么地图本身也是一个 <code>game-object</code> 对吧！？啊！也是一个游戏对象，所有我们首先需要创建一个地图啊！<code>src</code>，进到 <code>playground</code> 里边，创建一个地图，那么地图本身里边可能元素比较多啊！比如可能还有障碍物啊！未来还有火焰呀！还有什么山啊！还有冰啊！对不对！？地面啊！砖块啊！都会有，对不对！？那么肯定东西比较多，所以我们可以先创建一个文件夹叫 <code>game_map</code> 对吧！？叫游戏地图，然后进到 <code>game_map</code> 里边，哎！然后我们创建一个游戏地图的对象 <code>zbase.js</code> ，然后，<code>zbase.js</code> 啊！好，然后我们创建一个游戏地图叫 <code>game_map</code> ，啊！他是 <code>extends</code> 我们的 <code>AcGameObject</code> 就是他这个类使我们这个类的一个派生类，对吧！？啊！就这个类（<code>GameMap</code>）是这个类（<code>AcGameObject</code>）的一个基类啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240823214942949.png" alt="image-20240823214942949"></p>
<p><strong>他是他的基类是什么意思呢？</strong>就是说他可以用他的函数啊！你比如说我们在基类里定义过 <code>start</code> 的话，如果如果定义过 <code>on_destroy</code> 的话，那么我们在 <code>gamemap</code> 这个类里也可以调用 <code>destroy</code> 的，这个在调用某个函数的时候他会先看自己类里有没有定义啊！如果自己类里没有定义，他就会调用基类里的这个这个这个 <code>destroy</code> ，啊！好吧！？啊！所有这就比较方便啊！那么我们这个 <code>gamemap</code> 的话也会有一个构造函数啊！ <code>constructor</code> <code>constructor</code> 函数啊！好，那么这构造函数的话我们首先在构造函数里需要调用一下我们他的基类的一个构造函数，啊！我调用基类构造函数的方式就是 <code>super</code> 括号就可以啦！啊！那么咳嗯！他这样调用完之后，他就相当于调用这个函数（基类的构造函数），他就相当于是将自己注册到了这个<code>AC_GAME_OBJECTS</code> 这个数组里面！对吧！？啊！咳咳嗯！对！大家这个嗯嗯嗯！如果如果可以的话最好还是不要太依赖于 <code>ide</code> 啊！这是我对大家的忠告啊！这样的话你未来发展不会受限，啊！额嗯！然后我们这个这个 <code>python</code> 和 <code>javascript</code> 的话其实，因为代码比较短，对吧！？啊！他不是 <code>java</code> 炸娃儿，<code>java</code> 的话不用 <code>ide</code> 基本上，基本上就会写死，其他语言的话我觉得还好，区别不是太大，额吭！好，啊！然后，我们接下来是额！我们需要将我们的这个 <code>playground</code> 传进来，因为未来我们可能会用到 <code>playground</code> 里面的一些参数啊！比如说这个 <code>playground</code> 里边的长宽，对不对！？啊！所以我们需要将 <code>playground</code> 传进来啊！这里的话我们可以这里再搞一个新的啊！这里我们可以打开 <code>playground</code> 看一下，哎！<code>game</code> 然后进到 <code>static</code> 里边，进到 <code>js</code> 里面，哎！进到我们的 <code>src/playground</code> <code>zbase</code> 好，我们可以看一下 <code>playground</code> 里边有一个 <code>width</code> 和 <code>height</code> 对不对！？这两个未来会用啊！就我们需要将 <code>playground</code> 传进来啊！<code>playground</code> 好，将他存下来，啊！<code>playground=playground</code> 好，</p>
<p>啊！然后我们需要在 <code>playground</code> 里边去<strong>渲染一个画面</strong>，对吧！？啊！那么 <code>js</code> 里边，啊！给我们提供了一个<strong>渲染画面的一个工具叫 <code>canvas</code></strong> ，啊！画布，<code>canvas</code> ，我们首先先创建一个 <code>canvas</code> ，啊！<code>canvas</code> 的话也是一个标签啊！好，啊！然后我们这个 <code>canvas</code> 里他有一些参数啊！首先的话他是有一个很重要的概念叫，额额额，<code>context</code> ，然后我们未来操作的时候是操作这个 <code>context</code> ，然后将他存到 <code>ctx</code> 里边，<code>this.$canvas[0]</code> <code>canvas</code> 是一个数组，<code>0.getContext()</code> ，然后我们这是一个 <code>2d</code> 的画布，啊！所以是 <code>2d</code> ，二维画布，未来还有 <code>3d</code> 画布啊！额嗯！当然我不知道这个 <code>2d</code> 是不是二维的意思啊！哎嘿！然后，啊！我们接下来是要设置一下我们这个画布的长宽，对吧！？啊！那么我们这个画布的话直接设置成全屏大小就可以啦！啊！我们的 <code>playground</code> 有多大他就多大！啊！那么这里怎么来设置呢？就是  <code>this.ctx.canvas.width</code> 等于什么呢？等于，像这些 <code>api</code> 啊！<code>ide</code> 一般也，一般来说也不一定能点出来大家一般还是要借助于百度啊！这个这个百度去搜一下 <code>canvas</code> 教程，啊！然后大家有什么 <code>api</code> 不会的话看这个教程就可以了，一共也没几页，一共就那么几个函数，好，咳嗯！然后等于什么呢？等于 <code>this.playgound.width</code> 啊！这个 <code>playground.width</code> 是我们在这里（<code>AcGamePlayGround</code>）定义的，对不对！？啊！好，同理再设置一下我们的高度，啊！<code>this.ctx.canvas.height = this.playground.height</code> ，好，啊！然后，定义完之后，我们需要将我们的 <code>canvas</code> 加到我们的 <code>playground</code> 里边，所以 <code>this.playground.</code> 这个 <code>playground</code> 的话他的里边的 <code>html</code> 标签是 <code>$playground</code> ，对不对！？啊！所以是 <code>$playground.append</code> 然后将我们的 <code>this.canvas</code> 加进来，就可以啦啊！加完之后的话我们这个 <code>gameobject</code>的话也需要去实现两个函数啊！一个叫 <code>start</code> ，还有一个叫 <code>update</code> ，好，然后，我们加完之后啊！我们调试一下啊！你每你每写完一段代码之后，最好先调试一下，啊！这样的话，额嗯！不至于全写完之后发现一堆 <code>bug</code> 啊！啧！好，然后刷新一下，看一下，然后我们来看一下这个 <code>elements</code> ，看一下，对不对！？啊！刷新一下，哎！不对啊！我们好像并没有创建我们的 <code>canvas</code> 对吧！？啊！按理来说我们的这个 <code>acgameplayground</code> 里边应该有一个 <code>canvas</code> 对不对！？但是没有创建，为什么没有，因为我们刚刚定义完之后还没有把他生成出来啊！这里需要生成出来，<code>this.game_map=</code> 哎！等于 <code>new GameMap()</code> ，好，里面有个参数，参数的话就是我们 <code>playground</code> 自己，<code>this</code>，好，打个包调试一下，这有一个 <code>canvas</code> 了，对不对！？好，创建完了啊！啧！学完，学完 <code>django</code> 前端都学会啦啊！我们 <code>django</code> 还没有，对！？<code>django</code> 很多功能还没有教啊！你像未来联机的话是需要用到 <code>django</code> 的，包括用来存对战记录的时候，还有用户信息的时候也是要用到 <code>django</code> 的一些一些东西的啊！啧！好！那么这样的话我们这个地图就渲染就创建出来啦！</p>
<p>啊！然后我们这个地图创建完之后啊！需要将他渲染出来，他创建完之后<strong>默认应该是没有颜色的或者是白色的</strong>，对不对！？额！然后我们刚刚看到我们颜色是黑色的，对不对！？啊！那么因此我们需要将他渲染出来啊！那么我们的 <code>game_object</code> ，<code>game_map</code> 这个对象需要有一个函数叫 <code>render</code> 函数，渲染啊！就是将他画出来，那么我们需要画一个矩形，对吧！？啊！这个矩形的颜色是什么呢？这个颜色的话我们可以先用额！黑色，对吧！？啊！可以用 <code>rgb</code> 来表示啊！<code>rgba</code> ，黑色的话就是 <code>(0, 0, 0, 1)</code> ，三维就是 <code>(0, 0, 0)</code>，好，然后将他画出来，这个是 <code>ctx.</code> 啊！<code>ctx.</code> 画矩形的话大家可以查一下 <code>api</code> 啊！直接搜一下啊！<code>rect</code>，大家可以发现，哦！画矩形的话是 <code>fillRect</code> 对不对！？左上坐标，右下坐标，啊！好，然后把他抄过来啊！<code>fillRect</code> 坐上坐标是 <code>(0, 0)</code>，图的坐标这块是<code>(0, 0)</code>，他是，坐标系是这样的啊！就是这块是 <code>(0, 0)</code> 啊！然后这块的话应该是 <code>(width, height)</code>，就是 <code>(w, h)</code>，啊！是这样的额吭！好，那么，然后我们这里的话是右下角应该是整个图的右下角，对不对！？这应该是 <code>this.</code> 哎！写哪儿去了，啊！应该是 <code>this.ctx.canvas.width</code> 宽度啊！然后 <code>this.ctx.canvas.height</code> 啊！好，然后我们在开始的时候，额！我们这个地图，咱们是每秒钟，每一帧都要重新画一遍，对不对！？啊！所以说我们这个函数啊！应该是在 <code>update</code> 里边执行，而不要而不要在 <code>start</code> 里边执行，在 <code>start</code> 里边执行的话只会画一次，我们这个图的话是每一帧都要画一次，他不要他不只是在第一帧画啊！所以这个函数要在要在 <code>update</code> 里边执行，啊！<code>render</code> ，每一帧都要画一次，啊！啧！然后打个包，试一下，哎！对吧！？变黑了啊！<code>js</code> 的类不需要自己定义的成员可以直接用，对吗？对的！跟 <code>python</code> 是一样的，啧！对吧！？啊！同学们变黑了啊！变黑啦！嗯！啧！</p>
<p>好，那么这样的话我们的 <code>game</code> ，咱们的<strong>地图就画完啦</strong>！对不对！？地图这个对象就写完啦！然后接下来就开始写玩家啦！<strong>玩家的话目前是一个圈</strong>，但你未来可以把圈<strong>换成人</strong>呀，对不对！？啊！都可以换的啊！然后，我们来写一下我们的这个人啊！人的话我们可以叫 <code>player</code> 啊！未来大家也可以给这个<strong>给这个玩家制定一个皮肤功能</strong>，对不对！？你可以<strong>付费换皮肤</strong>，对吧！？啊！或者可以直接换皮肤，对不对！？啊！我们进到 <code>player</code> 里边，创建一个 <code>player</code> 类，啊！<code>zbase.js</code> ，<code>class player</code> <code>player</code> 的话也是一个游戏对象，所以也要 <code>extends</code> ，也要从 <code>AcGameObject</code> 里边扩展出来啊！好，然后也是一个构造函数啊！<code>constructor</code> 啊！好，那么玩家的话需要传的东西就比较多了，啊！首先需要传我们的 <code>playground</code> ，这是我们的，需要传咱们的一个游戏场景对吧！？啊！</p>
<p><code>playground</code> 然后另外<strong>这个球的话他需要一个什么</strong>，我们写游戏的时候有<strong>有几个值是属性值</strong>啊！<strong>坐标值</strong>，第一个的话是 <code>x, y</code>，坐标，对不对！？这需要传一下啊！如果是 <code>3d</code> 的话，或者是 <strong><code>3d</code> 的话需要一个 <code>z</code> 对吧！？啊！需要一个 <code>z</code> 啊！然后如果有朝向的话，你还需要传一个朝向坐标</strong>，啊！当然我们目前的话这个球没有朝向，所以先不用写，啧！所有大家需要先实现一个需要先传入一个坐标啊！中心点，注意注意这是<strong>球的中心点坐标</strong>，啊！<code>x, y</code>，然后，另外<strong>还有一个球的半径</strong>，<code>radius</code> ，啊！还有<strong>一个是球的颜色</strong>，对吧！？啊！<code>color</code> ，还有我们这<strong>玩家的一个移动速度啊</strong>！我们这个这个移动速度的话表示<strong>每秒移动百分之多少</strong>啊！<code>speed</code> 等一下啊！额！我们这个是表示 <code>speed</code> 表示每秒钟移动百分之多少，我们是用高度的百分比来表示啊！每秒钟移动百分之多少，好吧！？啊！咱们为什么用高度的百分比来表示速度呢？是因为大家<strong>不同同学的浏览器</strong>是不一样的，你单机版玩是没有问题的，但如果你联机的话如果我们<strong>用像素来表示的话</strong>，那么有些同学他的他的<strong>分辨率比较高</strong>，那么他看起来<strong>移动速度比较慢</strong>，不合适，对吧！？啊！所以我们是<strong>以百分比来去定的啊！</strong>整个地图百分比，<strong>高度百分比来定我们的速度</strong>，每秒移动多少，然后另外还需要去<strong>存一下是不是自己</strong>，啊！<code>is_me</code> ，为什么要判断是不是是不是自己呢？啊！因为未来<strong>联机的时候</strong>啊！自己跟敌人的<strong>操作方式是不一样的</strong>啊！<strong>自己</strong>的操作方式是<strong>键盘和鼠标</strong>，啊！<strong>敌人</strong>的操作方式是<strong>通过网络传过来</strong>，对吧！？啊！所以是不一样的，这里需要<strong>加上一个标签</strong>，<strong>表示是不是自己</strong>啊！嗯！吭！这个 <code>acgit</code> 的问题的话我们课后再讨论好吧！？啊！咳嗯！<code>acgit</code> 有问题实在不行，可以把那个项目重新删掉，重新再创建一个就可以啦！啊！好，啊！然后，我们接下来是要，额！调用一下我们的这个基类，对不对！？啊！<strong>调用一下我们基类的构造函数</strong>，就是将他注册到我们的哎！这个全局数组里边，啊！然后每秒钟刷新一次，啊！每<strong>每秒钟刷新六十次</strong>，对吧！？啊！好，然后将<strong>他的横坐标存下来</strong>，啊！然后<strong>纵坐标存下来</strong>，啊！当然啦！这个 <code>playground</code> 也要存下来 <code>= playground</code>  啊！然后另外我们他也是需要找到画布的啊！<code>ctx</code> 就应该等于 <code>this.playground</code> 这个 <code>playground</code> 里边有一个东西叫 <code>gamemap</code> 对吧！？啊！啊！<code>gamemap</code> 里边的 <code>ctx</code> ，我们要把他搞出来，<strong>这个 <code>ctx</code> 就是画布的一个引用啊！</strong>好，然后，另外还需要<strong>半径</strong>，<code>radius</code> <code>=radius</code> ，半径啊！然后，<strong>颜色</strong>是 <code>color</code> 啊！然后<strong>速度</strong>是 <code>speed</code> ，啊！ <code>is_me</code> 啊！**<code>is_me</code>** 是 <code>is_me</code> ，然后，另外我们在去移动的时候<strong>涉及到浮点运算</strong>，我们还需要一个 <code>eps</code> ，是啥意思呢？这个这个这个 <code>eps</code> 的话就表示我们额！<strong>小于多少就算零</strong>，我们可以认为小于 <code>0.01</code> 就算零，好吧！？啊！只要误差在 <code>0.1</code> 以内就算零，好，那么 <code>player</code> <strong>也是需要几个函数</strong>的啊！一个是<strong>第一帧</strong>需要执行的函数<strong>叫 <code>start</code></strong> ，啊！然后，另外是<strong>每一帧</strong>需要执行的函数<strong>叫 <code>update</code></strong> ，好，另外一个<strong>是 <code>render</code> 函数</strong>，表示把他画出来。</p>
<p>啊！那么我们<strong>首先先把圆画出来</strong>啊！怎么画呢？哎！可以看一下这个 <code>canvas</code> 的一个教程，<strong>直接搜圆</strong>，哎！大家可以看到啊！方法是这样的啊！额嗯！**<code>beginpath</code> 直接把他抄过来就可以<strong>啦啊！我们把他抄过来，<code>ctx.beginpath</code> 大家可以看到这个</strong>写前端就是这样边抄<strong>，</strong>边查边写就可以啦<strong>！啊！画一个圆的话是 <code>ctx.arc</code> 啊！<code>arc</code> 哎？好，然后，<code>arc</code> 的话是</strong>圆心坐标<strong>，半径圆圆心坐标的话应该是 <code>this.x</code>半径的话，坐标的话 <code>x, y</code>，半径的话应该是 <code>this.radius</code> 啊！好，然后，起始角度我们</strong>从零度画到三百六十度<strong>，三百六十度应该是二π，对吧！？啊！<code>Math.PI  * 2</code> ，然后是否顺时针，逆时针，最后一个参数搞成 <code>false</code> 就可以啦啊！然后颜色的话是 <code>ctx.fillStyle = this.color</code> 是颜色啊！然后填充，把这个颜色填充进去就是 <code>ctx.fill</code> 好，那么这样就可以把圆画出来啦啊！然后我们这个玩家的话，注意一下啊！这个玩家的话</strong>他也是不要不能只画一次<strong>，对吧！？因为你只画一次的话，第一帧画完，后面就被覆盖掉了，就没有啦啊！所以这个玩家的话也要是</strong>也要在这个 <code>update</code> 里边去画<strong>啊！每一帧都要画一遍这个玩家啊！就是时间是流逝的啊！你只要这一帧没有，你就会被淘汰掉，因为我们这个</strong>整个地图是每秒钟刷新六十次<strong>，对吧！？啊！</strong>每一帧都会重新画一遍整张地图<strong>，啊！因为如果我这个玩家每次不画的话，他就</strong>会被后面的地图覆盖掉<strong>，就消失了啊！就跟人们不吃饭会似一样啊！这个这个这个这个这个这个圆圈每次不画他就会消失，好吧！？啊！<code>playground</code> 写错了吗？我来看一下啊！好，吭！噢！对！</strong>每次都要去画一遍啊**！人不吃饭就会是啊！然后这个物体每次不画就会消失啊！</p>
<p>好，啊！然后，我们接下来要<strong>把这个人物创建出来</strong>，对吧！？啊！我们<strong>先把自己创建</strong>出来，啊！我们可以在 <code>playground</code> 里边<strong>把这个玩家存下来</strong>，<code>players</code> 等于什么呢？等于一个数组，然后我们<strong>先把自己画出来</strong>，<code>player</code> <code>push</code> 一个自己，自己的话应该是 <code>player</code> 啊！然后，第一个参数是 <code>playground</code> ，第二个参数的话是横纵坐标啊！我们可以将我们可以将球<strong>画到整个整个图形的正中间</strong>，对吧！？啊！正中间的话应该是<strong>高度的应该是宽度的一半</strong>，<code>this.width / 2</code> ，然后，<code>this.height / 2</code> ，高度 &#x2F; 2，下一个参数是什么？下一个是<strong>半径</strong>，对吧！？啊！半径的话我们可以用<strong>高度的百分比</strong>（将高度作为参考）来表示啊！<strong>高度的零点零五</strong>来表示啊！这零点零五是我试出来的啊！刚刚看了下什么大小比较合适，然后一看这个百分之五比较合适，<code>color</code> 的话可以搞成白色啊！<strong>白色看起来比较高贵</strong>啊！然后 <code>speed</code> 的话可以，就是每秒钟他移动百分之多少，移动高度的百分之多少，这个的话是 <strong><code>height * 0.15</code> 左右</strong>差不多啊！然后是不是自己呢？是自己对不对！？所以是 <code>true</code> ，好，然后，我们来打包一下，哎！运行一下试一下啊！哎！报错了啊！我们来看一下，哎！大家可以看到啊！怎么来调试，对吧！？啊！你一刷新 <code>js</code> 调试的话一刷新这就会有报错信息，然后你点一下这里他就会跳到你报错的这一行，看到没，他会告诉你，告诉我这个 <code>ctx</code> 没有定义啊！确实没有定义，对吧！？啊！那么在调用 <code>ctx</code> 的时候，前面需要加上 <code>this</code> ，好，刷新一下，哎！我们中间出现了一个圆，同学们，对不对！？啊！中间，我们中间出现了一个圆，啊！额！然后，咳嗯！大家可以试一下，如果我，如果我不是在每一帧重新画这个圆的话他是不是会四，我们看一下啊！啊！这个需要打包一下！哎！大家会发现这个这个圆瞬间就消失了，对吧！？啊！就根本看不到他，对不对！？因为他没有每帧画，啊！额！</p>
<p>然后我们可以<strong>把这个图变的更加好看一些啊！</strong>怎么变得好看一些呢？我们可以让他每次去刷新的时候<strong>不要刷新一个不透明的板子</strong>，啊！而是<strong>刷新一个半透明的板子</strong>，这样就会产生一个什么效果呢？产生<strong>模糊的效果</strong>，啊！额！举个例子啊！比如说我们<strong>先打开我们的地图</strong>啊！<code>game/static</code> 然后 <code>js/src/playground/game_map</code>  就是我们每次在渲染的时候啊！你不要渲染一个不透明的啊！而是渲染一个半透明的比如，比如说百分之二十透明度，啊！打包一下，再试一下啊！对！大家可以发现，他有一个渐变的过程，对不对！？啊！就跟你<strong>不断往上涂一层半透明的颜料一样</strong>，你涂多了之后就会变成黑色，当然他有一个<strong>渐变的过程</strong>，可以吧！？啊！好，那么，比如说我们把这个球的颜色换成红色，你就可以看到他这个效效果啦！白色的看不出来啊！要打包一下，每次调完，每次改完之后都要打包一下，大家可以发现啊！我们这个红色的球啊！咱们这个球如果只在一开始渲染一次的话，大家会发现，这个球并不是消失了，而是变得非常模糊，看不清了，对吧！？啊！<strong>变得非常模糊看不清啦</strong>！对不对！？为什么会这样呢？就是因为我们<strong>只刷只画了一次</strong>，然后就会被我们哎！每一次刷新哎！每次去画颜色覆盖掉，啊！那么为了让我们这个红色的球永远哎！不消失，我们一定记得每次每天吃饭啊！每个 <code>update</code> 都要执行一遍啊！刷新一下！哎！那这样这个球就不消失了，对吧！？啊！好，然后，搞成白色，还是<strong>白色比较高贵</strong>啊！<strong>红色的话看着太鲜艳了</strong>，不好看啊！哎！好吧！？啊！</p>
<p>额！咳嗯！<strong>那么接下来要实现一下这个球的运动</strong>，啊！那么这个球怎么实现动呢？这个动的话我们要给他一个<strong>速度</strong>，对吧！？因为他速度变了，他有他有速度才会动啊！所以我们一般写游戏的时候啊！这个动，这个速，这个动的话是这样，定义两个变量<strong>叫速度</strong>啊！**<code>vx</code> 表示 <code>x</code> 方向的速度，然后 <code>vy</code> 表示 <code>y</code> 方向的速度<strong>，也就是说我们的速度都是 <code>1</code> ，啊！<code>1</code> 像素，好，那么每一次 <code>update</code>的时候，怎么实现移动呢？其实就是每一帧让他的坐标变一下就可以啦！</strong><code>this.x += this.vx</code> ，<code>this.y += this.vy</code> ，啊！刷新一下<strong>，哎！大家会发现球在动，对不对！？啊！而且</strong>有一个有一个这种这种尾部模糊<strong>的效果，啊！这个尾部模糊的效果怎么产生的呢？就是因为我们</strong>刚刚去刷背景的时候，刷的是一个，刷的是一个额嗯！半透明的一个背景<strong>，啊！那么半透明的背景会导致什么呢？会导致啊！我们这个球啊！在去走的过程当中啊！他，离他越远的</strong>这个尾巴被覆盖<strong>的，就是离他越远的尾巴啊！就是离他越远的轨迹啊！额！距离我们当前的时间越长啊！距离我们当前的时间越长的话啊！就会</strong>导致他被覆盖的层数越多<strong>啊！所以大家可以发现，离这个球越远的路径他就会越模糊不清啊！越近的哎！就会越清楚，那么整体来看就是一个有一个尾部的模糊效果，对吧！？啊！就会有一个残影效果，好，那这样就可以移动了啊！额！但是我们这个移动方式的话是采用 <code>moba</code> 类的移动方式，对吧！？啊！鼠标右键移动，我们希望实现这个球点哪儿移哪儿而不是像这样沿一个固定方向走，对吧！？那怎么办呢？我们需要去通过鼠标来操作我们的速度就可以啦！啊！好，我们来看一下怎么用鼠标来操作速度啊！额！我们，哎！跑哪儿去了，这儿对吧！？啊！首先，我们这速度初始的时候是零啊！好，然后我们首先需要找一个鼠标事件，因为我们需要去读取我们鼠标有没有点击，以及点击的坐标在什么地方，啊！好，然后我们这里的话可以加一个函数叫 <code>add_listening_events</code> 表示我们要加一个这个监听函数，要加一堆监听函数啊！这里判断一下啊！如果是自己的话，这里的 <code>is_me</code> 就用到了，对吧！？啊！就是我们自己是通过鼠标键盘来操作的啊！敌人不能通过鼠标键盘来操作，啊！所以这个监听函数只能加给自己不能加给敌人，所以如果是自己的话，好，那么我们就加一下监听函数啊！<code>add_listening_events</code> ，好，那么 <code>add_listening_events</code> 的话首先我们第一个啊！我们的右键，大家会发现，他右键会打开一个菜单，对吧！？啊！很恶心啊！我们希望把右键菜单功能删掉，怎么办呢？哎！可以这样来做啊！抄就可以啦！像这种 <code>api</code> 的话你一抄他文档就这么写的，把他复制过来就可以啦！然后 <code>this.</code> 首先找到我们的 <code>canvas</code> 啊！应该是 <code>playground.game_map.$canvas.on()</code> ，什么事件呢？这个事件叫 <code>contextmenu</code>  事件，就是菜单事件啊！那么这个事件我们把他截胡掉，对吧！？啊！把他这个，在这里处理掉，<code>function</code> 好，我们直接 <code>return false</code> 就表示这个事件，就表示这个事件就不处理了，啊！非常简单啊！直接 <code>return false</code> 就可以啦！啊！然后，大家再试一下，你会发现右键已经没有效果了，对吧！？啊！啊！很完美，然后我们还需要读取一下右键点击和右键点击的鼠标的坐标是什么，好，那么这里的话我们需要再绑定一个函数叫 <code>playground.game_map.$canvas.mousedown</code> 额！这里的话我们要绑定一个函数啊！这个函数的话我们需要读取他的坐标，那么读取坐标的话就需要截，就需要拿一个参数了啊！参数就是 <code>e</code> ，好，然后我们判断一下如果他是右键的话啊！右键的话是 <code>e.which === 3</code>，左键的话是等于 <code>3</code> ，滚轮的话是等于 <code>2</code> ，好，那么如果等于三的话，好，那么我们应该是移动某一个位置上，对不对！？我们，大家可以输出看一下啊！大家可以写个函数啊！比如叫 <code>move_to</code> 啊！移动内一个地方呢？就类似于红警，对吧！？你让你的小兵移到某一个地点啊！<code>tx ty</code> 就 <code>target x target y</code> ，然后我们可以输出看一下啊！<code>console.log()</code> 然后，哎！<code>move_to tx ty</code>，啊！然后，我们这里的话可以额！每次点击的时候啊！可以看一下我们这个点击事件有没有触发这个函数，啊！那就是 <code>outer.move_to</code> ，</strong>注意这里不要写 <code>this</code> 啊！**如果你在这函数里写 <code>this</code> 的话啊！这个 <code>this</code> 跟这个 <code>this</code> 不是一个 <code>this</code> 啊！这个 <code>this</code> 是这个函数本身，这个 <code>this</code> 才是指整个 <code>class</code> 啊！然后，我们想点的是这个 <code>this</code> 啊！那么我们怎么在这里边找到调外面的这个 <code>this</code> 呢？就你需要先把他存下来，喜欢用 <code>outer</code> 把他存下来，<code>outer</code> ，那这样的话我们就可以调用到我们外面的这个 <code>move_to</code> 函数了，我们的坐标也有一个 <code>api</code> 啊！就是 <code>e.clientX</code>  和 <code>e.clientY</code> ，好，然后，打个包，好，我们来，保存一下啊！然后点一下，大家看看这里啊！看这里啊！我们刷新一下啊！点一下那就是 <code>move_to</code> 噢！<code>697 202</code>，点这里 <code>move_to 67 40</code> ，点这里，<code>move_to 797 692</code> ，没有问题，对吧！？啊！对不对！？啊！好，啊！那么然后我们来看一下怎么让这里的话我们是将这个事件搞出来啦！</p>
<p>那么<strong>怎么让这个事件去影响我们的速度呢！？</strong>这里就需要去做一个计算了啊！额！好，那么我们要从当前的坐标啊！相当于什么呢？相当于从当前的 <code>x, y</code> 移动到 <code>tx ty</code> ，对吧！？啊！我们现在的这个事情是这样的啊！就是我们当前有一个坐标，对吧！？啊！这有一个坐标啊！要从<strong>这个坐标移到我们的鼠标点击的点</strong>，移到这个点，对吧！？啊！这个是 <code>x, y</code> ，然后要移到这儿对吧！？咱把这个圆删掉啦！相当于是<strong>从这个点 <code>x y</code> 移到这个点 <code>tx ty</code><strong>，对不对！？那怎么移呢？同学们，我们首先需要找到，这个方向，对不对！？啊！我们这个速度啊！<code>vx</code> 和 <code>vy</code>，速度的话</strong>分成两个部分</strong>啊！一个是<strong>方向</strong>，一个是<strong>模长</strong>，啊！就是一个是长度，一个是方向，啊！一般来说这样去分会好一些，啊！额！那么我们这个方向的话大家需要画一下啊！画个坐标轴出来啊！好，那么我们<strong>首先这里需要一个角度</strong>，对不对！？<code>θ</code> 角度，啊！然后，这个模长，是 <code>x, y</code>和 <code>tx ty</code> 之间的距离，对不对！？啊！这<strong>两点之间的距离很好算</strong>，我们先把他算出来啊！这<strong>比较好算啊</strong>！我们先实现一个函数叫<strong>求两点之间的欧几里得距离</strong>，啊！**<code>get_dist(x1, y1, x2, y2)</code>**，首先求出来这个会算，对吧！？啊！<br>$$<br>sqrt((x1 - x2)^2 + (y1 - y2)^2)<br>$$<br>啊！首先算一下 <code>x1 - x2</code>，<code>=x1 - x2</code> ，<code>y1 - y2=</code> ，<code>dy = y1 - y2</code> ，啊！那么这距离的话应该是 </p>
<p>$$<br>Math.sqrt(dx * dx + dy * dy)<br>$$<br><code>math.sqrt</code> <code>x</code> 差值平方加上 <code>y</code> 差值平方就可以啦！对吧！？啊！好，那么我们<strong>当前的距离</strong>就有啦！啊！我们这个距离就是我们要移动的距离，可以写成全局变量，**<code>this.move_length</code>表示我们要移动的距离<strong>，那么我们要移动的距离就是</strong>当前点到我们目标点之间的长度<strong>，对吧！？啊！所以说啊！这里的话应该是哎！<code>this.move_length</code> 啊！就</strong>应该等于 <code>get_dist()</code>** 啊！<code>this.x, this.y</code> 和 <code>tx ty</code> ，好，然后，下一个啊！下一个就是我们<strong>需要去找的这个角度</strong>啦啊！这个角度他有一个函数叫 <code>atan2</code> ，这个在游戏里边很常用啊！他可以求什么呢？他其实就是 <strong><code>arctan</code> 通过坐标的形式求出来</strong> <code>arctan</code> 就告诉我们啊！告诉我们这个点坐标，啊！<strong>这个 <code>atan2</code> 第一维写 <code>y</code> 第二位写 <code>x</code></strong> ，注意啊！这个 <code>x</code> 和 <code>y</code> 要颠倒一下，然后，传入 <code>y x</code> ，啊！他就可以求出来这个角度，好吧！？啊！大家所以说我们可以把这个角度求一下啊！角度的话是 <code>angle</code> ，<code>angle</code> 对吧！？啊！等于 <code>Math.atan2</code> ，然后，先写 <code>y</code>，注意我们这里的这个<strong>这个 <code>y</code> 的话</strong>应该是<strong>偏移量</strong>对吧！？啊！也就是 <code>ty - y</code>，<code>ty - this.y</code> 同理，<code>tx - this.x</code> ，额嗯！好，那么有了角度之后啊！我们的横坐标这个点就是这个咱们的这个 <code>vx vy</code> 只表示方向，对吧！？啊！那么表示方向的时候，我们<strong>其实是在一个单位圆上去表示方向</strong>啊！那么我们 <strong><code>vx vy</code> 其实存的是这个点，单位圆标准化</strong>，好吧！？啊！那么这点坐标应该是什么呢？这点坐标的话应该是这个长度是 <code>1</code> ，**<code>1</code> 乘以 <code>cosθ</code> ，**对不</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240828105653101.png" alt="image-20240828105653101">对！？啊！所以是 <code>vx</code>的话应该等于我这个<strong>横方向的速度</strong>应该是等于 <strong><code>Math.cos(angle)</code><strong>，然后纵方向的速度 <code>vy</code> 应该是等于 <strong><code>Math.sin(angle)</code><strong>，好，那这样的话我们的速度就有了啊！好，那么有了速度之后啊！我们来看一下每一秒钟怎么去更新他啊！这里要看一下啊！我们如果已经更新完了，就是如果我们发现我们的 <code>this.move_length</code> 啊！已经小于 <code>this.eps</code> 啦！已经是零啦！那我们就不用移动了，对不对！？那么 <code>this.move_length = 0</code>就可以啦啊！然后，<code>this.vx = this.vy = 0</code> ，就是</strong>我们不需要移动</strong>啦！所以这个也是零，对吧！？啊！额！好，否则那么如果需要移动的话啊！那么我们要看一下我们额吭！大家这个对！大家这个有包的话你可以用包，啊！没有包的话大家可以自己实现啊！好吧！自己实现的话也没有太难，对不对！？啊！额！然后，我们接接下来的话是要</strong>朝这个方向移动</strong>（<code>vx, vy</code> 的合方向)，对吧！？啊！那么我们要算一下一秒钟之内就我们<strong>一帧之间要移动多少</strong>啊！我们的速度是<strong>每秒钟移动 <code>speed</code></strong> ，对吧！？啊！每秒钟移动 <code>speed</code> ，啊！那么我们<strong>当前到上一帧的时间戳</strong>，时间是，大家还记得吗？我们的这个实现过的啊！是 <code>timedelta</code> ，啊！那么我们一秒钟移动这么多，<strong>那么我们 <code>timedelta</code> 移动多少呢</strong>？那应该是 <code>timedelta</code> 对不对！？啊！<strong>乘以一个 <code>timedelta</code></strong> 就可以啦啊！<code>this.timedelta</code> ，然后，注意我们这个 <code>timedelta</code> ，的话单位是毫秒，所以再除以一个 <code>1000</code> ，这就是我们按照<strong>当前速度</strong>要移动的距离啊！但是我们总共要<strong>移动的距离</strong>是两者取一个 <code>min</code>啊！不要移出界啊！我们两者取一个 <strong><code>min</code><strong>，啊！这里的话我们</strong>用 <code>move_d</code> 来表示我们真实的移动距离</strong>啊！应该是 <code>Math.min</code>啊！额！<code>this.move_length</code> ，和我们按照当前速度要移动的话可以移动多少啊！那么 <code>moved</code> ，就是我们真实移动的距离，对吧！？啊！好，那么，<strong>真实移动距离乘上我们的速度</strong>，乘上我们的方向，就我们 <code>x</code> 方向的距离，对吧！？啊！**<code>this.vx</code> 乘上一个 <code>moved</code> 啊！然后 <code>this.y</code> 加上一个 <code>this.vy</code> 乘上一个 <code>moved</code>** ，那这样的话我们就写完啦啊！大家大家就可以打包来调试一下啊！刷新一下！点，报错了，对不对！？怎么来调试呢？点这里可以看到，啊！我们这里的话报错啦！说，<code>getdist</code>，没有实现，对！我们这 <code>getdist</code> 前面需要加上一个 <code>this</code> 啊！刷新一下，好，哎！我们的球呢？哎嘿！大家发现一点就消失了对吧！？我们球呢？额！我看一下啊！<strong>估计应该是移动太快了啊！我们这坐标就飞出去了</strong>，我们来看一下我们这个，看一下 <code>moved</code> 是多少啊！哦！对！还有一点就是我们<strong>每次移动完之后</strong>，啊！要记得我们移动的距离要从我们的 <code>move_lenght</code> 里面减去啊！稍等一下啊！重新打包一下！调试一下，哎！还是不对！啊！还是不对！那我们来看一下是什么问题啊！那每次我们把这个 <code>moved</code> 输出一下，看是不是太奇葩的一个数字啊！，额嗯！我们的 <code>moved</code> 是 <code>NaN</code>，对吧！？啊！这个 <code>NaN</code>，啊！<code>NaN</code>，额！我们来看一下那个是 <code>NaN</code> 啊！我们先来看需要 <code>move_length</code> 是不是对的啊！哦！这里，这里少打一个 <code>t</code> ，<code>timedelta</code> 拼错啦！好，哎！那么这样就对了！对不对！？哎！停下来啦啊！一点，停下来啦，一点，好，那这样我们<strong>到时候就可以跟咱们的对手走位</strong>了，对吧！？啊！可以<strong>幌对手一手</strong>，啊！然后，可以啦，然后，大家看一下有没有问题啊！没有问题的话打一个一啊！啧！到此的话<strong>我们就已经实现了移动</strong>啦啊！额！</p>
<p>然后，接下来的话<strong>实现发炮的功能</strong>，发炮的功能，发火球的功能，啊！哎<del>！可以吧！？啊！咳咳咳嗯！啧！嗯！咱们先稍微的停一停啊！先给大家一些时间消化一下，可以动了啊！可移动啦，对吧！？同学们，可以动啦！额嗯！咳嗯！好，那么接下来我们要实现发火球了啊！那么发火球的话我们就<strong>需要一个新的 <code>class</code> 叫火球</strong>对吧！？啊！啧！好，这个 <code>player</code> 的话这个可以关掉了啊！好，我们来实现一个新的 <code>class</code> 叫火球，那么我们的火球应该是<strong>一种技能</strong>，对吧！？啊！我们的技能应该会有很多，啊！所有我们这么想的话我们应该先创建一一个文件夹叫 <code>skill</code>，然后 <code>skill</code> 里边有一个技能叫火球，对不对！？<code>fireball</code> ，火球啊！进到 <code>fireball</code> 里边，好，然后我们这里创建一个 <code>class</code> 叫 <code>FireBall</code> ，啊！这个个也是 <code>extends</code> 到，从我们这个 <code>AcGameObject</code> <code>extends</code> ，这个火球跟人差不多啊！所以可以直接抄啊！咱把这个直接抄过来就可以了，<code>constructor</code> 啊！然后我们这里也是一样，首先先将我们的 <code>playground</code> 传进来，啊！然后另外的话我们还需要传一下 <code>player</code> 啊！为什么传 <code>player</code> 啊！额嗯！是因为我们这个火球啊！额嗯！你在攻击完对方之后啊！<strong>有一个计分系统，你需要知道谁打的</strong>，对吧！？你需要知道<strong>这火球属于谁</strong>！另外一个的话自己发的火球<strong>不能打中自己</strong>对吧！？啊！这也合情合理啊！随意说我们这个火球发生碰撞的时候你需要判断是谁是这火球是属于谁的，啊！不要误伤自己啊！额嗯！？写工程的时候 <code>DEBUG</code> 其实比算法题简单多了啊！因为大家是所见即所得，好，啊！然后，这个其实还好，这讲的其实不是特别快啊！大家课后可以好好的听一听啊！听课这个直播的时候你可以好好听一听轮廓啊！录播的时候可以好好跟着视频去做一遍啊！好，啊！那么我们首先这个需要传什么需要传一个坐标，对吧！？啊！这个火球的坐标啊！然后，火球的半径 <code>radius</code> ，然后火球的速度啊！这个火球是不能改变速度的对不对！？他速度一定确定就固定了啊！所以还需要传一个速度 <code>vx vy</code>，啊！然后另外一个颜色啊！还有一个 <code>speed</code> 啊！速度，移动速度，好，首先需要调用一下我们的这个基类的构造函数啊！函数接下来 <code>this.playground</code> ，把他抄下来就可以啦啊！？<code>= playground</code> ，好，<code>this.player = player</code>，好，然后 <code>this.ctx = this.playground.game_map.</code> 这个从下往上抄就可以啦啊！<code>this.x = x</code> <code>this.y = y</code>，然后，<code>this.vx = vx</code> ，<code>this.vy = vy</code>，啊！<code>this.radius = radius</code> ，<code>this.color = color</code> 啊！<code>this.speed = speed</code>，可以吧！？另外也是需要这几个函数啊，第一个是 <code>start</code> 函数啊！，第二个个是 <code>update</code> 函数，第三个是 <code>render</code> 函数，是把他渲染出来的一个函数啊！这个 <code>render</code> 函数的话跟火球没什么区别，因为他也是渲染一个球，对吧！？啊！所以这个的话也可以直接抄，哎</del>！ 也可以直接抄啊！我们把这个搞出来，这个叫 <code>this.ctx</code> 大家抄的时候最好不要复制啊！因为你打一遍就被过了，直接复制一遍的话背不过啊！<code>this.ctx.arc</code> 啊！然后 <code>this.x this.y</code> 啊！然后，<code>this.radius</code> ，<code>0</code>，啊！然后，<code>Math.PI * 2</code> 啊！<code>false</code> ，然后 <code>this.ctx.fillStyle = this.color</code> ，颜色啊！然后，<code>this.fill</code> 渲染一遍，哎！好，啊！然后我们把 <code>update</code> 里边，每一次啊！这也是一样，对吧！？啊！火球也是一样啊！人不吃饭就会四，火球不渲染就会消失啊！所以这里的话我们需要去额嗯！干嘛啊！啊！咱们这里的话需要让他每次去渲染一遍，对吧！？啊！然后另外我们这个火球里有一个射程的概念啊！他需要一个移动距离的概念，对吧！？啊！这里也需要一个移动距离，啊！<code>move_lenght</code>，<code>this.move_length</code>，啊！等于 <code> move_length</code>，啊哈打包的时候会不会乱啊！打包的时候我们是按照字典序排序的啊！你只要按照字典序排序就不会乱啊！额嗯！咳嗯！好，啊！那么然后，我们接下来这个是移动距离，对吧！？啊！火球是有射程的啊！火球不是无限射程，对不对！？啊！当然我们的火球可以升级啊！咱们未来技能是可以升级的，就跟你玩 <code>lol</code> ，玩 <code>dota</code> 你可以升级技能点一样啊！技能点越高射程越远，速度越快，<code>cd</code> 越短，对不对！？啊！啧！好，啊！那么然后我们接下来是每次去移动对吧！？啊！移动就很好说了啊！<code>this.</code> 这个 <code>vx vy</code> 也是一样啊！首先我们需要去判断一下移动的距离，这里要先判断一下，就是如果我们发现，他这里需要一个 <code>eps</code> 啊！表示一个精度啊！<code>eps = 0.1</code>，小于 <code>0.1</code> ，小于 <code>0.1</code> 就认为是 <code>0</code> 了啊！然后，如果那么我们发现 <code>move_length</code> 是小于 <code>this.eps</code> 啦！表示已经已经移动完啦啊！那么移动完了之后，我们就需要，就可以直接清空了，对吧！？啊！移动之后就可以直接清空了啊！<code>this.destroy</code> 就可以啦！这个 <code>destroy</code> 函数是咱们自己实现的，对吧！？啊！基类里边的函数啊！然后直接 <code>return false</code> 就可以了，表示这个这个这个火球就可以消失啦啊！消失啦啊！好，那么否则的话我们接下来要去移动啦，移动的话要看一下移动的距离是多少，应该是两者取一个 <code>min</code> 对吧！？啊！我们剩余的移动长度啊！<code>this.move_length</code> 还有我们的速度啊！ <code>this.speed</code> 乘上一个两帧之间的时间 <code>this.timedelta</code> ，除上一千，因为这个 <code>timedelta</code> 单位是毫秒，所以要除上一千，好，那么我们真实的移动距离应该是 <code>this.vx</code> 加上一个，<code>this.x</code> 加上一个 <code>this.v</code> 乘上一个 <code>this.vx</code> 乘上一个 <code>moved</code> 啊！方向乘以距离啊！然后 <code>this.y</code> 加上一个 <code>this.vy</code> 乘上一个 <code>moved</code> ，对吧！？啊！然后，<code>this.move_length</code> 减去一个我们移动的距离，<code>moved</code> 啊！就可以啦，嗯！好，那么这样的话我们的<strong>炮弹类</strong>啊！ 咱们的火球类，就，火球类就实现完啦！</p>
<p>啊！那么我们接下来应该是去<strong>实现我们发火球的功能</strong>，对吧！？啊！额！那<strong>在 <code>player</code> 里边</strong>实现，啊！怎么实现呢？啧！<strong>我们这里还是比较复杂</strong>的啊！因为<strong>未来我们技能可能比较多</strong>，啊！所以说我们这里的话需要先就跟玩 <code>lol</code> 一样，但是注意不是快速施法，而是普通施法，快速施法咱们先不实现啊！那么我们需要<strong>先在键盘上摁一个键选择技能，再用鼠标左键点方向确定</strong>，对吧！？啊！所以说我们这里啊！这个放技能的话其实还是比较复杂的啊！相对来说我们首先需要一个东西叫看一下我当前有没有有没有选择一个技能啊！所以这里的话应该叫额嗯！<code>this.hold_skill</code> ，或者叫 <code>cur_skill</code> ，对吧！？啊！就是<strong>我当前选的技能是什么玩意儿</strong>啊！当然我也我也有可能不选技能，对吧！？啊！额嗯！咳嗯！好，那么我们每一次在去按这个这个这个按键盘的时候，要看一下我选的技能是什么，对不对！？啊！好，那么我们这个<strong>获取键盘的事件</strong>的时候，注意<strong>不能用 <code>canvas</code> 啊！因为 <code>canvas</code>不能聚焦</strong>啊！所有我们获取键盘的按键的时候可以<strong>用 <code>window</code> 来获取</strong>，啊！可以用 <code>window</code> 来获取，啊！啧！然后，这个叫 <code>keydown</code> ，啊！<code>function</code> 然后<strong>也是传一个事件</strong>进来，好，那么我们要判断一下啊！如果<strong>发现 <code>e.which</code> 啊！等于什么</strong>呢？哎！我们这里要查一下我们这个按键什么东西啊！每个按键的编号是多少，啊！大家非常简单啊！你直接查 <code>keycode</code> 就可以了啊！网上有很多啊！**<code>keycode</code> 事件<strong>，哎！这居然没写，哎！这有一个对照表，对吧！？啊！对照表查一下，比如我们的火球应该是什么，是不是用 <code>f</code>更加合理一些，啊！额嗯！算了，我们还是用 <code>q</code> 吧！用 <code>q</code> 吧！因为 <code>qwer</code> 大家可能用的比较习惯一些啊！火球找找 <code>q</code> ，<code>q</code> 的话是 <code>81</code> ，对不对！？<code>q</code> 的话是 <code>81</code> ，所以我们</strong>这 <code>keycode</code> 如果等于 <code>81</code> 的话<strong>表示火球，对吧！？啊！表示 <code>q</code> 键，啊！这个叫 <code>q</code> 键，好，那么拿到 <code>q</code> 键之后，就可以 <code>return false</code> 了，表示我后续不处理了啊！好，那么如果是火球的话，好，那么我们应该是，这里的话也是一样啊！那么我们应该是 <code>outer.cur_skill</code> 啊！哎！等于火球，搞个字符串比如叫 <code>fireball</code> 火球，可以吧！？啊！好，那么我们的</strong>鼠标点击事件这里<strong>就有了啊！就是如果我们发现</strong>点的是鼠标左键<strong>的话，哎！点的是鼠标左键的话那么我们要判断一下啊！如果我们发现我们</strong>当前的技能<strong>是哎！</strong>等于 <code>fireball</code>** ，啊！等于火球的话，那么我们应该释放一个火球，对吧！？啊！那么<strong>释放火球的话我们也可以写写一个函数</strong>啊！比如叫 <code>shoot_fireball</code> 啊！释放一个，发射一个火球，对吧！？啊！额！发射火球的话我们这里需要写一个写一个这个<strong>鼠标左键点击的一个坐标</strong>啊！<code>tx ty</code> 朝这个点去发一个火球，好，那么我们这里的话可以 <code>outer.</code> 哎！<code>shoot_fireball</code> 啊！然后我们的事件，我们鼠标点击的坐标应该是 <code>e.clientX</code> 啊！ <code>e.clientY</code>，好，然后我们这里的话也可以先用 <code>console</code> 先不实现逻辑啊！先用 <code>console</code> 调试一下，啊！看下是不是有没有 <code>fireball</code> 啊，就是叫哎！<code>shoot_fireball</code> ，啊！然后，<code>tx ty</code> ，好，我们来调试一下，这是移动，对吧！？啊！然后，摁下 <code>console</code>，摁下 <code>q</code> ，鼠标左键点哎！成功了对不对！？啊！<code>q</code> 鼠标左键点，鼠标鼠标左键点，啊！注意一下啊我们一般来说在放技能的时候我一旦点完左键之后他就应该把这个技能释放掉，就应该取消选择这个技能，啊！所以我们这里一定要记得啊！你一旦释放完技能之后，啊！一一一旦确定完之后啊！这个 <code>cur_skill</code> 要清空，表示我当前已经把技能用完啦啊！不要再释放啦！等于 <code>false</code> 等于这个这个这个 <code>null</code> 等于空，好，重新打包啊！再试一下，好，大家可以发现，我们这个是可以移动攻击的对吧！？啊！后面可以给大家改掉啊！只要一攻击就会停下来啊！好，那么大家如果不嗯 <code>q</code> 的话直接点鼠标左键是没有用的你需要先选择技能再点才有用，对吧！？啊！额嗯！好，啊！大家这种东西都是孰能生巧啊！前端其实都不是很难，比算法题简单多啦！啊！额！好，那么然后咳嗯！我们我们来看一下怎么来具体的将这个火球发出去啊！啧！<code>fireball</code>对不对！？然后我们接下来就是激动人心的，将这个发出去的一个逻辑啦！那么怎么将这个火球发出去呢？啧！也是一样啊！我们首先额！需要先去确定一下我们火球的一些参数啊！首先需要一个参数叫 <code>x</code> 对吧！？那么火球的 <code>x</code> 应该跟我们当前中心点 <code>x</code> 中心点坐标是一样的，啊！<code>y</code> 的话应该也是跟我们球的中心点坐标 <code>y</code> 是一样的，好，那么然后，还有一个是半径，对吧！？啊！火球的半径的话我们可以比如说定成额！<code>playground.height.</code> 我们的人的半径是多少啊！人的半径是 <code>0.05</code> 对吧！？火球半径的话搞成 <code>0.02</code> 就差不多了，<code>0.01</code> 就差不多了，先这么定啊！不好看的话，再调就可以了啊！然后，下一个是 <code>vx vy</code> 啊！<code>vx vy</code> 的话我们首先需要确定一下我们的角度，啊！<code>angle</code> 应该是等于，一样的对吧！？<code>atan2</code> 啊！然后我们应该是 <code>ty - this.y</code> ，<code>tx - this.x</code> ，啊！这是我们的角度啊！那么有了角度之后，我们的 <code>vx</code> 应该是等于 <code>Math.cos(angle)</code>，<code>vy</code> 应该等于 <code>Math.sin(angle)</code> 啊！然后，颜色的话应该是等于橘黄色对吧！？啊！火球一般是橘黄色啊！然后速度的话啊！ <code>speed</code> 应该等于什么呢？我们人的速度是额嗯！<code>height * 0.15</code> ，火球速度应该比人的速度更快一些，对吧！？啊！这应该是等于 <code>playground.height * 0.3</code> 吧！比如 <code>0.</code> 这个是 <code>0.15</code> ，对吧！<code>0.3</code> 啊！是人的两倍，对不对！？或者 <code>0.5</code> ，啊！<code>0.5</code> 可能差不多啊！加快一些啊！好，这是火球的速度啊！然后还有一个是 <code>move</code> 的长度，那么 <code>move</code> 的长度的话应该是 <code>move_length</code> 应该是 <code>= get_dist()</code> ，啊！不对！这个 <code>move</code> 的长度可以自己定义一个啊！比如说比如说是我们高度的 <code>1.5</code> 倍啊！<code>1.5</code> 倍，啧！好，然后我们将这个，然后我们将我们的火球创建出来，啊！<code>new FireBall</code>，好，然后将这些参数传进去就可以啦啊！额！<code>this.playground</code> 啊！然后，<code>this</code> 啊！<code>x</code> ，<code>y</code> ，额！<code>radius</code> ，<code>vx</code> <code>vy</code>，照着这个写就行啦！然后 <code>color</code> ，然后 <code>speed</code> ，然后 <code>move_length</code> ，好，搞定啊！我们来打包一下，调试一下，<code>q</code> 发射，失败了啊！大概率会失败，我们来调试一下啊！点一下看需要时内块的错，额！咳嗯！这里是说，额！<code>playground</code> 打错啦！好，重新打包一下，然后回过来调试一下刷新一下，又错了，这个 <code>redis</code> 没有，<code>reids</code> <code>redis</code> 也打错了啊！好久没有打字了，容易打错啊！很尴尬，刷新一下，哎！对！？可以啦啊！同学们，额！我们哎！我们现在已经可以移动攻击了，对不对！？咱们的火球也有了，同学们，哎！是不是！哎！？<code>on_destroy</code> ，等一下啊！哎！我们的 <code>destroy</code> 有点问题，对吧！？<code>on_destroy</code> 没有定义过，这么神奇吗？我们在 <code>destroy</code> 的时候有点问题，所以说我们的这个 <code>ac_game_object</code> 可能有点问题啊！我们回到我们的 <code>ac_game_object</code> 里看一下，额！<code>on</code> 哦！打打错了啊！<code>destroy</code>，不是 <code>destory</code> ，好，刷新一下，然后我们再射一发，他这个，这个轨迹有点太长了啊！我们可以把轨迹搞短一点，啊！这个轨迹的话是 <code>1.5</code> 的高度，可以改成 <code>1</code> 倍高度，哎！差不对，对吧！？是一倍高度吗？啊！是一倍高度，差不多！好，咳嗯！对吧！？啊！然后，未来我们的火球是有 <code>cd</code> 的啊！现在没有 <code>cd</code> 啊！看起来很爽对吧！？就跟内个内个内个就跟内什么一样，内什么 <code>dota</code> 里的一种什么，额嗯！那个无 <code>cd</code> ，无技能 <code>cd</code> 模式一样，啊！好，然后，给大家一些时间看看有没有问题啊！对！先按一下 <code>q</code> 表示选择技能，啊！额！现在还没有提示，我未来我们底下会有一个几个按钮显示技能的 <code>cd</code> ，当你摁完 <code>q</code> 之后，这个按钮会有一个被选中的状态，你一下就知道你选的是内个技能，啊！而且你按完之后啊！鼠标会变成一个这种这种这种就是内种瞄准镜的一个图标，会告诉你现在选中一个方向，来方技能了，啊！目前我们这个鼠标没有变，啊！未来未来会给大家丰富上啊！哦！对！无限火力模式啊！对对对！好，那么我们的火球也实现完啦！同学们，啊！火球也实现完啦！</p>
<p>啊！啧！然后我们接下来<strong>可以加入一些敌人</strong>啊！可以加入一些敌人啊！额！敌人的话我们来看一下啊！我们的敌人可以就多加几个 <code>player</code> 呗 ，每一个人都是一个 <code>player</code> 啊！进到我们的 <code>player</code> 里边啊！九点半了对吧！？感觉时间还来得急吗？我们可以再多讲一些啊！哎！？他怎么提示我，稍等一下啊！哎！哦哦哦！额！打开错了啊！ <code>player</code> 跟这个是一样的啊！然后额！然后我们应该打开的是 <code>playground</code> 的啊！搞错了啊！好，你比如说我们未来可能是，额！比如说是这个这个这个六人一局对吧！？当然这可以随便定啊！我们先暂定六人一局，我们可以先创建我们的敌人啊！<code>i</code> 从 <code>0</code> 开始，<code>i</code> 小于 <code>5</code> ，<code>i ++</code> ，好，<code>this.playgers.push()</code> 好，那么，所有的直接照抄就可以了啊！<code>ctrl a + [</code>  ，复制，然后 <code>ctrl a + ]</code> ，粘贴，注意这些敌人，不是自己啊！敌人的话是敌人啊！所有这里应该是 <code>false</code> ，啊！敌人的话这个 <code>is_me</code> 应该是 <code>false</code> ，啊！好，然后我们来这个打包一下，刷新一下，哎！大家会发现这个敌人也是白色啊！我们敌人给他换个颜色啊！白色的话跟咱们容易混淆啊！比如说我们可以换成蓝色啊！好，敌人的话大家发现会重叠在一起，对吧！？啊！敌人还不能动，</p>
<p>啊！ 那么敌人的话我们需要去<strong>让他动起来</strong>，啊！我们需要去写<strong>一个简单的 <code>ai</code>啊</strong>！啧！需要写一个简单的 <code>ai</code> ，怎么写简单的 <code>ai</code> 同学们，啊！其实这个 <code>ai</code> 的话<strong>有很多种写法</strong>啊！我们嗯~，啧！比如说我们可以<strong>每次随机一个</strong>，咱们对于每个敌人来说啊！当他走到目的地之后啊！每一次可以<strong>随机一个其他的目的地</strong>，然后，就往内边，就往内个方向走，走到之后，走到目的地之后，<strong>再随机一个新的目的地</strong>，啊！像这样随机游走，可以吧！？啊！好，我们来看一下，所以我们这里要给他加上一个 <code>ai</code> 啊！那么加 <code>ai</code> 的话，在这里，在这里，对不对！？啊！就我们大家可以发现<strong>如果是自己</strong>的话那么需要用额！<strong>鼠标和键盘来操作</strong>，好，那么如果是<strong>敌人怎么办呢</strong>？如果是敌人的话那么我们需要给他<strong>定义一个随机方向</strong>啊！那么 <code>this.x</code> 额！大家想想啊！定义一个随机方向，对吧！？啊！那么 <code>let tx</code> 这是随机方向啊！这个应该是额！<code>Math.random</code> 这脉脉 <code>random</code> 的话会返回一个 <code>0</code> 到 <code>1</code> 之间的数啊！乘上一个 <code>this.playground.width</code> 就我们整个的宽度啊！好，然后 <code>ty</code> 的话，我们的目标的这个目标点的<strong>纵坐标也是随机一个</strong>，<code>random</code> 乘上一个 <code>this.playground.height</code>，<strong>注意这个逻辑不要硬背啊</strong>！大家可以发现我第一次写的逻辑跟我第二次讲的逻辑，就我今天下午备课写的逻辑跟我现在讲的逻辑不太一样了啊！ 就每次都会，<strong>你要跟着自己的想法去去写啊</strong>！<strong>就是这跟练习太极拳一样，不要硬记招式，你要去记想法啊！</strong>额嗯！好，我们目标之后啊！走过去就可以啦啊！<code>this.move_to</code> ，你看我们之前实现了一实现了一个实现过一个很棒的函数叫 <code>move_to</code> 就是走到这个点，对吧！？啊！那么我们可以直接将我们的，让我们的这个 <code>player</code> 移到 <code>tx ty</code> 这个点，就可以啦啊！然后，还要另外注意一下啊！就是当我们发现，哎！当我们<strong>发现停下来的时候</strong>，我们要判断一下，那么<strong>如果发现是 <code>ai</code> 的话</strong>，如果 <code>this.is_me</code> 是 <code>not</code> 的话，好，那么我们需要在给他去，再给他去搞一个新的额嗯！<strong>新的随机点</strong>，对吧！？啊！这里的话大家可以复制一下啊！复制一下，额嗯！对！如果发现是 <code>ai</code> 的话，他应该停下来，这个这个就跟生产队的驴一样，对吧！？啊！敌人的话就跟生产队的驴一样，不能停，一停下来一鞭子<strong>抽上去赶紧随机走</strong>，对吧！？啊！好，那么然后，哎嘿！我们来，这个写完之后我们来调试一下啊！<strong>这个 <code>ai</code> 的模型</strong>就是哎！他一停，一鞭子抽上去然后开始随机走，永远不会停下来啊！试一下，啧！非常的完美，大家可以看到啊！每一个哎！每一个这个 <code>ai</code> ，都在随机游走，对吧！？啊！都在随机游走，然后我们可以射他然后发现没有任何效果，对吧！？啊！可以吧！？啊！额！然后，对，我们这个人机模式的话就是 <code>ai</code> 啊！真人模式的话是每一个人操作一个小球，啊！然后比如说你在敌人，比如说你的同学在他电脑上<strong>向你上发了个炮弹</strong>，那么他就会传到你的这个，会传到你的前端，啊！通过服务器，通过 <code>django</code> 传到你的前端，<strong>告诉你</strong>他发了个炮弹，朝内个方向啊！那么你就会<strong>看到他发的炮弹</strong>了啊！然后这个你的同学<strong>比如移动了一下</strong>，那么你这里会看到，哦！我同学移动了一下，好吧！？啊！对，<strong>目前这个敌人还不会攻击</strong>啊！我们之后可以加上攻击啊！之后可以加上攻击<strong>咱咱一步一步来啊！</strong>，然后咱们接下来可以实现一个这个什么呢？我们大家可以发现我们的炮弹还<strong>不能对敌人产生效果</strong>，对吧！？啊！啊！他只是一个<strong>威慑效果</strong>啊！</p>
<p>然后我们接下来可以让我们的炮弹对敌人<strong>产生一个真实的效果</strong>，啊！怎么办呢？我们要，这里就要涉及到游戏里一个非常重要的概念叫碰撞，<strong>碰撞检测啊</strong>！就我们需要去判断一下啊！什么时候我的炮弹跟敌人碰到了啊！如果一旦碰到，我们应该是对敌人造成一个效果，对吧！？啊！啧！好，这里需要写一个碰撞检测啊！这个<strong>圆的碰撞检测非常容易</strong>，对吧！？啊！你比如说，怎么<strong>判断两个圆是不是碰到一块</strong>了，就是<strong>判断两个圆是不是相交</strong>就可以啦！啧！怎么判断呢？就你判断两个点，<strong>两个圆中心点的距离</strong>，啊！两个点，两个圆中心点的距离，加到一块儿啊！中心点的距离是不是<strong>小于等于两个圆的半径之和</strong>，啊！如果是的话表示已经碰上了，否则的话表示没有碰上，对吧！？啊！啧！额嗯！肯定会有延迟的，但我们会想一些办法，把<strong>延迟平平滑掉</strong>，啊！这个这个也是额额！<strong>网络游戏</strong>一个很重要的一个一个一个一个<strong>一个模块</strong>啊！就是去怎么去<strong>优化网络延迟</strong>，延迟不可能避免，但是我们可以<strong>让用户体验上没有延迟</strong>，啊！做一些差值就可以啦！咳嗯！不过我们可能不会那么复杂，因为我们这个是一个 <code>django</code> 项目对吧！？所以我们前端课的话可能<strong>讲一到两节</strong>就够啦啊！咳嗯咳嗯！主要<strong>还是后端</strong>啊！这节课没有办法呀！我们毕竟<strong>写一个这个项目</strong>，对不对！？所以前端的话还是需要一些的啊！所有我们这节课给大家讲一些前端课啊！其实也不是前端课对吧！？其实本身上是一个逻辑课，是 <code>js</code> 课啊！好，那么我们来看一下怎么去碰撞，碰撞的话我们可以在每个炮弹这块儿判断碰撞，就是在每一帧啊！炮弹的每一帧我都需要去判断一下，啧！判断下啥呢？判断一下我有没有击中我的敌人，对吧！？啊！那这里的话我需要枚举一下所有的，需要枚举一下所有的玩家，对不对！？<code>i</code> 从 <code>0</code> 开始，<code>i</code> 小于一个哎！<code>this.playground.players</code> 你看为什么把 <code>players</code> 记下来啊！就是因为要判断碰撞，对吧！？啊！好，我们把这个 <code>player</code> 搞出来啊！<code>player = this.playground.players.</code> <code>players[i]</code> ，然后判断一下如果我们发现这个 <code>plyaer</code> ，啊！我们，看，为什么我们要在，咱们为什么要在这个，当，每个炮弹里记录一个 <code>player</code> 啊！就是你要判断碰撞的时候，你不要伤害自己对吧！？啊！那么如果不相等的话，我们才去判断碰撞啊！好，并且 <code>is_collison</code> 啊！碰撞啊！这个跟这个玩家碰撞，那么如果碰撞的话，哎！我们应该是去击中这个玩家，对吧！？啊！所有应该是 <code>hit</code> 这个玩家啊！这个 <code>hit</code> 的话，就是 <code>hit</code> 某个玩家，啊！我们就应该是去击他一下啊！<code>hit</code> 一下，或者叫 <code>attact</code> 一下，他其实差不多啊！就是 <code>outer.</code> 哦！不对！应该是 <code>this.</code> 这个还是叫 <code>attack</code> 吧！攻击他一下啊！<code>this.attack</code> 这个玩家，好，那么我们这里需要实现两个函数啊！第一个函数的话是判断碰撞的函数啊！额！<code>is_collision</code> 对吧！？啊！<code>is_collision</code>，这个判断碰撞其实也比较容易啊！就是判断两个球之间的距离是不是小于等于半径之和，啊！那么我们这里的话还需要去，啊！那么我们这里的话是需要去注册登录我们注册登录需要用到数据库啊！我们数据库还没有讲到啊！先不要着急啊！<code>django</code> 里面是关于数据库是用 <code>models</code> 来管理啊！额！我们一步一步来，先把这个<strong>视图</strong>先讲完，好吧！？啊！额！咳嗯！啧！这个数据库的话估计得在下周或者下下周了啊！同学们啊！不要着急啊！好，那么我们要去求两个球心之间的距离对吧！？所以需要再实现一遍 <code>get_dist</code> 函数啊！我们自己写游戏的时候，像这种常见的函数大家最好<strong>写一个基类，啊！写一个工具类</strong>，用来将这些函数全部放进去啊！我们目前没写过，所以每个函数都自己写一遍啊！然后啊！<code>get_dist</code> 大家再把这个复习一遍啊！就是 <code>x1 y1 x2 y2</code> 啊！然后首先求一下 <code>x</code> 之间的差，之间的距离就是 <code>dx = x1 - x2</code> ，啊！然后 <code>dy = y1 - y2</code> ，啊！然后 <code>return</code> 一个开根号 <code>Math.sqrt()</code> 啊！<code>dx * dx + dy * dy</code> ，好，然后，我们这里的话是需要求一下两个球心之间的距离对吧！？啊！距离的话可以用 <code>distance</code> 来表示啊！等于额！<code>this.get_dist</code> ，好，然后，我们当前我们的这个子弹的，咱们的球火球的球心应该是 <code>this.x this.y</code> 啊！然后这个 <code>player</code> 的中心坐标应该是 <code>player.x</code>和 <code>player.y</code> 对吧！？啊！然后判断一下如果发现这个 <code>distance</code> 是小于等于他们两之间的距离的话，其实如果擦边的话应该不算击中对吧！？啊！所以是判断小于就可以啦啊！咳嗯！小于不过这个区别不大啊！因为有精度问题，对吧！？所以区别不大啊！小于我们当前球的一个半径啊！加上一个 <code>player</code>的一个半径，好，<code>return true</code> 啊！表示已经击上了，否则的话表示没有打上啊！好，那么如果击上的话咳嗯！额嗯！如果击上的话那么我们应该怎么办啊！啊！首先我们击中之后这个火球应该消失对吧！？啊！所以 <code>this.destroy</code> 啊！好，然后同时我们这个玩家应该被击中，对不对！？那么我们一般在设计的时候啊！被击中啊！所有作用到这个对象上的行为的函数我一般都喜欢写到 <code>player</code> 上啊！所以大家在 <code>player</code> 里需要写个函数叫 <code>be_attacked</code> 或者叫 <code>is_attacked</code> ，就是被攻击到了，对不对！？这个被攻击到的话，我们这个火球的话还需要一个伤害啊！啧！哎呀，这个额！这个伤害的话要不要传参数呢？我想想，啧！火球的话我们这个火球的话应该是有一个伤害值的对不对！？所以说我们这个火球这个参数需要加一个啊！叫伤害值，啊！<code>damage</code> ，<strong>因为不同火球的技能伤害不一样啊！所以还是要有的啊！</strong>（可以有增益状态：伤害加倍）<code>this.damage</code> ，等于 <code>damage</code>，好，那么我们再去发射火球的时候，在去构造火球的时候也要去传入一个 <code>damage</code> ，伤害值是啥！？额！伤害值的话，应该我想想啊！应该是，啧！一个数值对吧！？啊！啊！额！这个数值的话可以搞成，额！我们的，额！我们的高度值的一个比值吧！所有的值都跟高度值绑定，这样未来我们高度变的时候他就自动变了啊！比较合理一些啊！伤害值的话比如说我们可以定到，我们的这个每个玩家的半径是 <code>0.05</code> 对吧！？啊！所有我们伤害值的话可以定到 <code>0.01</code> 啊！这样相当于是每次可以打掉，打掉玩家百分之二十的血量，每次可以打掉玩家百分之二十的血量，额！未来会加上 <code>cd</code> 啊！现在还没有 <code>cd</code> 啊！额嗯！咳咳嗯！啊！好，然后，我们来看一下这个每次如果是攻击到这个玩家的话，那么这个玩家应该被 <code>attack</code> 到，应该被攻击到，对吧！？啊！<code>attacked</code> 到啊！那么，攻击的时候啊！我们需要给他传一个击中他的方向对吧！？啊！同时传一个这个方向是一个坐标，对不对！？同时传一个伤害值，对吧！？啊！好，那么这个方向加一个伤害值，伤害值的话应该是 <code>this.damage</code> 啊！那么这个方向应该是什么啊！我们击中这个玩家的方向是什么，啊！咱们假设就不考虑速度了啊！比如这是一个大球，然后我们这个小球在这里跟他碰撞了，碰撞完之后啊！我们简单一些啊！就是直接假设这个小球对这个大球产生了一个这种方向的一个撞击好吧！？啊！咱不管小球的方向，你按理来说，你要解一个这种这种你要接一个这种这种动量，动能方程，对吧！？啊！这太麻烦了啊！咱就不这么搞了啊！我们就假设你不管火球怎么飞过来的，只要这样一碰，哎！我们就朝这个方向，啧！给他一个这种方向的力，好吧！？啊！好，那么这个方向的话应该是什么呢？应该是这传一个角度就好啦！这这这里就不需要传这个额！坐标啦！我们的角度应该是 <code>angle</code> 应该是等于 <code>Math.atan2()</code> 应该是大球中心减小球中心对吧！？啊！也就是 <code>player.y - this.y</code> <code>player.x - this.x</code> ，啊！好，朝这个方向攻击了，这个打球一下，好，啊！那么我们这里的话啊！被攻击了啊！我们的攻击的话有一个角度，还有一个是伤害 <code>damage</code> ，好，那么我们这个人被攻击的话啊！首先我应该是要我们的这个人的半径啊！<code>.radius</code> ，啊！减去一个伤害值，我们的血量就是我们的半径啊！减去一个 <code>damage</code> ，然后，判断一下，如果发现 <code>player.radius</code> 已经很小啦！比如说小于额嗯！小于多少比如小于这个十像素，我们就认为他已经四了啊！他四了之后，我们就 <code>destroy</code> 就可以啦啊！<code>this.destroy</code> ，所以这里不应该是 <code>player</code> 应该是 <code>this</code> ，我们就认为他已经去世了啊！<code>destroy</code> ，然然后直接 <code>return</code> 就可以啦啊！好，那么否则的话否则的话我们要给他一个攻击力对吧！？啊！那么给他朝这个方向一个冲击力啊！这冲击力的话应该是什么呢？应该是给他一个速度，对不对！？啊！啧！那么我们这个球被击中的时候，他应该有一个眩晕效果，也就是我们这个球一旦被击中了啊！<strong>按理来说</strong>他就应该失去控制，然后朝这个方向咳嗯！滑动，对吧！？啊！所以说我们这里的话需要给他一个需要实现这一点就是我们一旦击中一旦击中某个球之后啊！那么这个球应该是失去玩家控制，啊！然后，会朝一个方向被推一段距离，啊！那也就是说我们一旦有伤害来了之后啊！他的这个 <code>vx</code> 和 <code>vy</code> 就应该失去作用，啊！就 <code>vx vy</code> ，不能用了啊！然后我们应该取而代之啊！用一个新的啊！比如叫额嗯！<code>damagex</code> 啊！<code>damage</code> 和这个 <code>damagey</code> ，就是我们伤害的这个速度，啊！还有一个是 <code>damage</code> 的距离啊！额应该叫 <code>damage</code> 的速度啊！我们这里可以用 <code>damage</code> 的速度啊！额咳嗯！<code>damage</code> 的速度，我们给他一个伤害的速度，然后，伤害速度的话也就是说这个人被击中的时候，他一开始会退的比较快，对吧！？啊！然后，越来会退的越来越慢，那因此，就类似于有一个摩擦力的概念，对不对！？啊！所有我们还需要定义一个摩擦力，啊！<code>friction</code> ，摩擦力比如可以定到 <code>0.9</code> ，这后面可以直接调啊！后面可以调啊！啧！好，那么我们在攻击之后啊！这个人的 <code>this.damage_x</code> 就应该等于 <code>Math.cos(angle)</code>，啊！<code>this.damage_y = Math.sin(angle)</code> ，<code>this.damage_speed</code> 啊！就被被伤害的后退速度啊！就应该等于 <code>damage</code> 比如说乘上一个系数啊！乘上一个 <code>2</code> 吧！好，啊！那么我们在 <code>update</code> 的时候就有一个新的优先级了啊！同学们啊！就是我们判断一下啊！如果我们发现我们当前 <code>damage</code> 的速度还有的话，哎！<code>this.damage_speed</code> 如果大于 <code>this.eps</code> 的话，哎！我们如果在被伤害，我们如果在被攻击，我们就不能操控啦！我们就应该是双手脱离键盘啊！等待对手的审判，哦！这个要调整下格式啊！<code>=</code> 可以调整格式对不对！？还记得吧！？同学们，等号大 <code>G</code> ，调整从这行往后的格式，啊！好，啊！那么，然后，如果我们这里要是在被伤害过程当中啊！好，那么我们的速度啊！就都应该清成零，等以零，然后 <code>this.move_length</code> 应该清成零，一旦被伤害，就停下来啦！然后就一直往后退，操作不了，物理没学好没关系吗？有关系吗？这个没关系啊！这跟物理，都都是一些初中物理啊！非常简单啊！啧！好，啊！然后，咳嗯！好，然后，我们接下来看一下这个 <code>damage</code> 的这个影响啊！那么我们要朝着 <code>damage</code> 这个方向，移动对吧！？啊！因此的话，额！我们这里要求一下啊！我们的 <code>this.x</code> 应该是加上 <code>this.vx</code> 啊！<code>this.damage_x</code> 乘上一个 <code>this.damage_speed</code> ，乘上一个 <code>this.timedelta</code> ，除上一个 <code>1000</code> ，对不对！？这是我们一旦有伤害的话我们就优先用伤害来移动我自己，然后我自己的移动就失去，就完全没有作用了，对吧！？啊！同理我的 <code>y</code> 也是一样，等于 <code>this.damage_y</code> 乘上一个 <code>this.damage_speed</code> 乘上一个 <code>this.timedelta</code> ，除上一个 <code>1000</code> ，好，啊！那么然后我们每一次啊！这个每一帧结束之后，要加上一个摩擦力，对吧！？啊！就是我们这个 <code>damage</code> 做完之后啊！这个 <code>damage_speed</code> 要变小一点，乘上一个 <code>this.firction</code> ，<strong>你像我们未来还有不同地形啊！你比如说土地的摩擦力就会大一些</strong>，你比如说冰面的话一旦被击中可能就划出去了，啊哈啊哈！就有可能啊！额！咳嗯！就冰面的这个 <code>friction</code> 会更加的这个小一些对吧！？啊！好，然后我们来打包试一下啊！被击中之后看一下是不是有一个，哎！哎！哎！出现了一些 <code>bug</code> ，哎！这哪儿出现 <code>bug</code> 啦！哦！<code>288</code> ，这个 <code>is_collision</code> 这个函数，这里啊！<code>is_collision</code> 这个函数后面这里少了一个右括号，刷新！哎！好！哎！我们一发射就发现哎！<code>is_collision</code> 函数没有没有没有定义啊！这里需要加上一个 <code>this</code> 啊！刷新，射，哎！大家可以发现，我们我们这个射击好像没有问题啊！但是他一下就将我们这个人消失掉了，对不对！？这不太对啊！我们这个人不应该直接被消失对吧！？所有应该是我们伤害系数搞的有点问题，啊！我们来看一下我们的伤害系数，啧！哎！哎<del>，我们的伤害系数，哦！<code>playground</code> ！？哎！大家可以看到啊！每一次攻击这个人都会都会变小一圈，对吧！？啊！哎！大家可以再试一下啊！一下，两下，哎！三下！四下！一下！两下！三下！四下！哎！四下就打死了！不是，怎么不是五下啊！四下打死了啊！嗯！大家可以发现我们这个火球啊！在我们这个设置之下，它不仅有攻击效果，还有一个攻击效果，对吧！？啊！眩晕一秒钟，对不对！？两秒钟，对不对！？啊！额！但是，不太对啊！我们应该按理来说应该是被击退，而不是原地眩晕住啊！啧！所以这这里还需要再调一下啊！ 哎！哎呀！我抄！吭吭！我们来看一下我们的 <code>damage</code> 是不是不太对啊！？我们我们没有移动没有移动位置的话说明什么问题呀！说明我们这个这一行应该是得零了对吧！？啊！所有我们可以看一下那个变量这么没有眼力见啊！居然取到零值了，<code>damage_x</code> ，刷新一下，哎！我们可以发现我们的 <code>damage_x</code> 是没有问题的，再来看一下 <code>damage_speed</code> 有没有问题，哎！我们这 <code>damage_speed</code> 也没有问题呀！玩的比较上头啊！哎！我们的 <code>damage_speed</code> 也没有问题，对吧！？啊！啊！这 <code>damage_speed</code> 的话不一定减成零啊！所以他只要小于某一个数，我们就认为他已经他已经没有效果了，我们可以直接把这行复制下来，看一下他是不是零，啊！哦！我们可以发现应该是我们的 <code>damage</code> 这个 <code>damage_speed</code> 太小了啊！我们这 <code>damage_speed</code> 可以搞大一些啊！额！我们这个 <code>damage</code> 的话比如说可以搞成他其实并没有，并不是他并不是没有动，而是动的太慢了，导致我们看起来他没有动而已，啊！所有比如可以搞成乘以 <code>20</code> ，啊！哎！大家可以哎！他已经动了一段了，对不对！？但动的还不尽如人意啊！搞成乘以 <code>100</code> ，哎！哎！哎！这差不多了啊！对吧！？啊！额！像这个速度啊！后期是一定要好好调的啊！一个游戏好不好玩，就看这些参数搞的好不好，然后我们这个 <code>damage</code> 的话不一定非要跟 <code>eps</code> 比，比如说我们这个 <code>damage</code> 发现他移动距离已经很小了，比如说这个小于 <code>10</code> 之后，就不再管他了啊！调试一下，哎！这差不多了，对不对！？同学们，哎！不错啊！额！然后我们接下来是可以吧！？同学们，啊！这个然后我们接下来是，额！再加一个这个撞击之后的离子效果我们今天课就结束了，啊！咳嗯！好吧！？啊！我们再加一个撞击之后的离子效果，我们的课就结束了啊！啧！其实我，其实咱们可以加一堆东西，啊！你比如说我们咱们攻击完这个人之后，啊！我们可以让这个这个人的这个玩家的速度减半，对吧！？啊！大家可以自己试一下啊！你比如说一旦被攻击了，哎！我的速度就减半啊！<code>this.speed</code> 哎！这个这个比如说每次减半，乘等于 <code>0.5</code> ，啊！或者除以 <code>2</code> 也可以啊！大家可以看一下什么效果啊！大家可以发现这个速度变慢了对吧！？再攻击一下，不动了，对吧！？啊！再攻击一下基本就被咱们玩弄于股掌之中啊！而且比如说哎！可以乘以 <code>0.8</code> 啊！<code>0.5</code> 的话有点太夸张了啊！这也比较合理，对吧！？啊！当一个人的血量变少的时候他就理应移动的慢一些，对吧！？哎！慢了一些，哎！再攻击一下，更慢了对吧！？啊！哎！再攻击一下再再攻击一下，哎！基本上已经不动了，对吧！？啊！这比较合理啊！然后直接打四就可以了啊！然后未来我们可能还会有比如说冰球的效果啊！比如闪电的效果，啊！额！这个还有一些绳索的效果，对吧！你比如说哎！你给他刷扔一个绳索，另一方就可能被紧固三秒钟，啊！咳嗯！对！？我们血条的话可以暂时先用大小大小来表示啊！未来可以加头顶脑门上放血条啊！这都是可以的啊！好，然后我们接下来再实现一个离子效果啊！就完事儿了啊！离子的话就我们攻击完之后啊！他应该会啪一下会感觉上他从从他身上掉下来一堆小颗粒一样，这种感觉就打出去之后，啪一下炸开，炸开这种感觉，啊！那么我们可以在在实现一个粒子效果，就是我们每次击中完之后啊！应该是随机生成一大堆小球，对吧！？啊！所以还需要一个新的类啊！小球类，我们来看一下，还有最后一个类啊！同学们，最后一个类啊！粒子效果啊！叫 <code>particle</code> ，<code>particle</code> 的英文是粒子的意思啊！粒子的意思，哎！？哦好！我先去一下厕所，大家可以先看一下有没有问题啊！好，啊！然后，我们来看一下这个粒子效果啊！<code>class</code> 今天晚上今天可能拖个二十分钟堂啊！坚持一下啊！坚持一下，额！<code>particle</code> 对吧！？啊！<code>extends</code> <code>AcGameObject</code>  ，好，先写一下我们的构造函数啊！<code>constructor</code> 好，然后调用一下我们的基类的构造函数啊！要每次调用一下啊！你不调用的话他不能渲染，他不能被注册到我们的全局数组里边，对吧！？好，这里边也是需要传一堆东西的啊！你比如说传一个，他这里边不太需要传 <code>playground</code> 对吧！？直接消失就完事儿了啊！那么我们传一个坐标就可以了，<code>x y </code> 坐标，啊！把这抄下来就可以了，<code>x y</code> 坐标，啊！然后，半径 <code>radius</code> ，啊！然后颜色啊！然后还有速度对吧！？啊！速度，速度啊！然后，这是速度的方向 <code>vx vy</code> 是速度的方向啊！然后 <code>speed</code> 的话是我们的移动速度，啊！这个离子的移动速度，然后还需要什么啊！额嗯！差不多了啊！好，然后 <code>this.x</code> 的话，哦！不对！？他他他他需要传 <code>playground</code> ，因为他也需要 <code>ctx</code> 啊！哎！<code>playground</code> ，好，然后我们的 <code>this.playground = playground</code> ，将这些变量存下来，啊！好，然后， <code>this.</code> <code>this.ctx</code> 应该是等于 <code>this.playground.game_map.ctx</code> 对吧！？啊！这这这都可以背过了啊！写的多了，都可以背过了，然后 <code>this.x = x</code> ，<code>this.y = y </code>,啊！然后， <code>this.radius = radius</code> 啊！<code>this.vx = vx</code> 啊！<code>this.vy = vy</code> ，<code>this.color = color</code> ，啊！<code>this.speed = speed</code> 啊！这个粒子也是有一个这种额！速度逐渐变慢的过程，所有他也有摩擦力，对吧！？啊！摩擦力的话也可以设置一下，<code>friction</code> 比如等于 <code>0.95</code> 啊！这个随便，后期可以随便调的啊！好，然后 <code>0.9</code> 吧！离子效果 <code>0.9</code> ，好，他也是有这么几个函数啊！<code>start</code> 是第一帧调用的函数，<code>update</code> 的话是每一帧调用的函数，然后 <code>radius</code> 的话是渲染函数，我们先把 <code>render</code> <code>render</code> 函数先抄一遍，啧！这个是 <code>this.ctx.beginPath()</code>，对吧！？啊！然后 <code>this.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false)</code> ，<code>this.ctx.fillStyle = this.color</code> ，好，然后，<code>this.ctx.fill()</code> 啊！好，然后我们 <code>update</code> 的话也是一样啊！每次我们 <code>render</code> 一下，啊！人不吃饭就会四，对吧！？啊！这个粒子不渲染就会消失，啊！额！然后，每一次我们先判断一下这个速度有没有变成很小的一个数啊！这里搞一个 <code>eps</code> ，好，<code>eps = 0.1</code> 就你看一下他速度小于什么的时候消失，啊！这个参数也可以随便设到时候大家可以根据效果来设啊！你可以自己调一调，这个写游戏的话调这种参数是一个主要的工作量啊！然后，不同参数的话游戏体验完全不一样，你比如说这个 <code>lol</code> 经常会改一些参数，比如说内个技能的伤害变高了，啊！内个技能的 <code>cd</code> 变短啦！他每改一次就会都会有质的飞跃，质的变化，所有游戏最关键的就是游戏参数的设置啊！好，那么如果我们发现 <code>speed</code> 是小于 <code>eps</code> 啦！那么这个这个粒子就可以消失了，这个也不用完全小于 <code>1</code> 啊！你比如小于 <code>3</code> 他就可以消失了，小于 <code>1</code> 是不是更好一些，后面再调吧！边试边调就可以了啊！好，那么消失的话就是 <code>this.destroy</code> ，啊！然后，<code>return false</code> ，直接 <code>return</code> 就可以啦啊！否则的话我们将他移动一下 <code>this.x += this.vx * this.speed * this.timedelta / 1000</code>，因为他单位是毫秒变成秒，然后 <code>this.y</code> 加上一个 <code>this.vy * this.speed * this.timedelta / 1000</code>  ，然后，每次我们的 <code>speed</code> 都会下一个摩擦力，乘上一个 <code>this.friction</code> ，这个 <code>friction</code> 的话是小于 <code>1</code> 的数对吧！？啊！所有乘乘乘乘到最后他就会他就会变成零了对吧！？啊！就无限趋近于零，啊！好，每一次我们这个玩家被击中的时候啊！被 <code>attack</code> 的时候，他都应该去释放，跟放烟花一样，对吧！？释放一个烟花出来，好，那么释放烟花的话我们可以来看一下，怎么来写啊！<code>i</code> 从零开始，<code>i</code> 释放烟花的数量应该是随机的对吧！？啊！我们可以五到十五之间，比如可以十到十五之间随机啊！加上一个 <code>Math.random()</code> 这个要转化整数啊！额！<code>Math.random</code> 然后乘上一个五就是零到五之间的一个数对吧！？啊！啧！然后，<code>i++</code>，好，然后，每一个粒子我们都应该是创造出来对吧！？啊！那就是额！这个粒子也有一些参数啊！这个粒子的啊！<code>x</code> 应该等于 <code>this.x</code> 就我们从中心绽开啊！然后 <code>y</code> 的话应该是 <code>this.y</code> 好，然后我们的 <code>radius</code> 的话应该是很小的一个数，对吧！？啊！<code>radius</code> 应该也是一个随机值，对吧！？比如说当前这个球的额！百分之，十分之一大小，后面可以，后面可以再调啊！十分之一大小，啊！这是 <code>radius</code> 啊！好，然后我们的 <code>vx</code> 是速度啊！这里先随机一个角度，角度的话应该是四面八方随机对吧！？应该是 <code>Math.PI * 2</code> ，乘上一个 <code>Math.random</code> ，这个<code>Math.random</code> 的话是一个零到一之间的一个数啊！好，然后那么我们的 <code>vx</code> 就应该等于 <code>Math.cos(angle)</code> ，<code>vy</code> 应该是等于 <code>Math.sin(angle)</code> ，对吧！？啊！<code>color</code> 的话应该是我们我们当前球什么颜色我就应该是什么颜色对吧！？因为是从我身上掉落的块啊！所以应该是 <code>this.color</code> ，然后 <code>speed</code> 的话应该是等于应该也是跟当前速度有关，对吧！？所以也可以搞成当前速度啊！<code>speed</code> 乘上一个比如乘上一个 <code>10</code> 啊！好，然后我们创建一个创建一个粒子啊！<code>Particle</code> ，好，这第一个应该是 <code>this.playground</code> ，第二个的话应该是 <code>x y</code>，然后 <code>radius</code> ，然后 <code>vx vy</code> 啊！<code>color</code> ，<code>speed</code> ，好，然后来打包一下啊！刷新一下，刷新一下，攻击一下，好，报错了啊！额！有一个 <code>radius</code> 没有定义啊！应该打错变量了啊！我们来试一下，哪儿，这哪儿啊！？，这是，看一下啊！额！<code>friction = 0.9</code> 啊！开头定义错了啊！应该是这里 <code>ius</code> ，好，刷新一下，攻击，攻击，哦！很漂亮，对吧！？啊！绽开同学们啊！哦！对！这个移动的距离，也应该有一些限制对吧！？他不应该都是一个圆形，所以我们这个移动的距离应该也有限制啊！额！这个移动的长度应该有一个限制，我们这里加上一个移动的长度啊！这个叫 <code>move_length</code> 对吧！？啊！粒子也有一个射程的效果啊！粒子呢？咱们的粒子呢？在这儿对吧！应该是 <code>let</code> 叫 <code>move_length</code> ，应该是等于 <code>this.radius</code> 啊！然后乘上一个 <code>Math.random</code> 啊！乘上一个十对吧！？啊！，这个长度也有一个限制啊！这个叫 <code>move_length</code> 啊！好，然后，我们这里的话那么就需要将将我们的 <code>move_length</code> 存下来了，<code>this.move_length = move_length</code> ，好，那在每次更新的时候啊！就又多了一个新的判断标准就是当我们的 <code>move_length</code> 他为零的时候，或者是当我们的速度为零的时候，就消失，对吧！？啊！好，那每次移动的距离也就有一个，就需要去一个 <code>min</code> 了啊！<code>moved</code> 就应该是等于 <code>Math.min(this.move_length, )</code>，就我们还剩下可以移动的距离，和我们 <code>this.speed</code> 乘上一个 <code>this.timedelta</code> 乘上 <code>1000</code> 和我们按照当前速度可以移动的距离取一个 <code>min</code> ，那么这里的话就应该是乘上一个 <code>moved</code> 啊！这里的话也是一样，乘上一个 <code>moved</code> ，好，那么这里的话我们每次移动的距离是剩余距离就应该是减去一个 <code>moved</code> ，啊！好，然后再调试一下，哎！？<code>move_length</code> 没有定义，看一下啊！啊！开头那个 <code>move_length</code> 没有定义，应该叫 <code>this.</code> 对吧！？射！哎！？这个叫 <code>moved</code> 啊！不叫 <code>move_length</code> ，好，发射火球，哎！漂亮，大家可以看到这绽开的还是很漂亮的，对不对！？啊！绽开的还是很漂亮的啊！我们发现我们这距离设太大了啊！因为大部分都是被速度拦下来的啊！所有这个长度的话我们可以搞成 <code>3</code> 试一下，<code>3</code> 的话太小了，啥都看不见啊！搞成个 <code>5</code> 试一下，哦！还不错啊！然后，我们的这个粒子感觉可以多一些啊！你比如说，额！粒子的话搞成多一倍啊！多一倍，当然这个粒子效果大家要慎重用啊！因为这个粒子效果一多的话就会导致大家的用户的画面会很卡，啧！可以啊！可以吧！？啊！啧！嗯！咳嗯！好，然后我们接下来最后啊！再给所有的敌人随机一个颜色啊！对！给所有敌人随机一个颜色，啊！那么我们这里的话可以搞几个颜色来随机一下，比如可以有，这叫什么，<code>get_random_color</code>，对吧！？啊！啊！<code>colors</code> 可以先定义几个啊！定义几个比较好看的啊！你比如说蓝色还可以啊！纯色其实都比较好看，啊！蓝色，红色，额！粉色，对吧！？啊！额嗯！啧！还有什么颜色啊！啧！还有灰色，是不是也还行啊！蓝色、红色、粉色、灰色，还有啥，攻击键是摁 <code>q</code> ，再摁左键就可以发射了啊！啧！绿色对！<code>green</code> 绿色，怎么能忘了呢？<code>AcWing</code> 的颜色，对吧！？啊！绿色，啊！然后每次我们可以随机啊！<code>colors[Math.random() * 5]</code> ，然后，下取整就可以了，<code>this.floor</code> ，好，每一次我们每个玩家都是随机的啊！颜色都是随机的，<code>this.get_random_color</code> 啊！颜色纯随机的话不好看啊！所以我觉得还是自己设定几个颜色，然后随机比较好， 啊哦！啥意思啊！哦！这个 <code>return</code> 打错了啊！额嗯！这个叫 <code>return</code> 啊！手抖了刚才，少打了一个 <code>e</code> 啊！打包一下，刷新一下，啧！这就很漂亮了，对吧！？啊！大家可以试一下啊！打这个打这个粉色就会掉粉色，对不对！？打这个打这个灰色就掉灰色，打红色掉红色啊！然后可以移动攻击，看到没，移动攻击啊！非常的帅气啊！然后，还有一个问题，大家会发现，打玩家最后一下的时候啊！他不会消失对吧！？啊！打玩家最后一下的时候，他并没有炸裂的效果啊！所以说咱们需要把这个粒子效果往前提一提，啊！只要击中就有粒子效果，而而而而不要这个我看一下啊！而不是说他不消失才有粒子效果，所以每次击中都要有粒子效果，所有咱们要把这效果放到开头啊！然后调整下格式，等号就可以调整格式，等号加大 <code>G</code> ，就可以调整格式啦啊！好，然后打包一下，哇全是红色，哎！漂亮同学们，看到没，啊！非常的帅气，啊！哎！这简直太棒了，对吧！？这个效果比我一开始备课的时候还漂亮啊！啧！简直完美啊！额！然后我们接下来可以再加一些 <code>ai</code> 你比如说我们的这个玩家可以，咱们的敌人也是可以随机哎！发射炮弹的怎么样，啊！咱们再加一个，大家这个课后课后你在学完之后，你可以来玩这个游戏啊！你可以边加边想边改，边玩，对不对！？我们可以试一下给他加一个额！随机发炮弹的一个效果，哎！不太对啊！好，随机发炮弹啊！每次会有一个自主攻击的效果啊！移动攻击对吧！？啊！这个叫什么来着，这个叫 <code>shoot</code> 对不对！？啊！叫什么来着，叫 <code>shoot_fireball</code> ，对不对！？<code>shoot_fireball</code> 啊！咱每次应该是朝我们的，就朝随机一个其他敌人发射一枚炮弹，啊！朝随机一个其他敌人，朝，发射一个炮弹，啊！那么这个发射概率应该不太大，对吧！？他每秒钟执行六十次，啊！我们你比如说，大家可以可以试一下啊！你比如说这个如果我们想平均啊！每五秒钟，平均每五秒钟发射或者平均每三秒钟发射一枚炮弹的话那么我们这个概率应该是一百八十分之一，对吧！？啊！因为这个函数会调用六十次，好像概率不是这么算的啊！是，啧！嗯！然后每一次，这个函数每一次，这个函数每秒钟调用六十次，然后每每三秒钟调用一百八十次，我们希望他一百八十次之内产生发射一枚炮弹，所以发炮弹的概率应该是一百八十分之一，对吧！？啊！好，<code>random</code> ，然后，比如说这个小于一百八十分之一应该是一除上一百八！好，我们应该是随机哎！随机发射一枚炮弹啊！应该是 <code>this.shoot_fireball</code> ，这个 <code>shoot_fireball</code> 之前给大家实现过了啊！就是朝一个方向射一个炮弹，对吧！？啊！我们朝着可以智能一些啊！啧！这个可以朝一个随机的敌人释放，炮弹，我们可以枚举一个敌人，随机的敌人，对吧！？啊！一个随机的敌人，额嗯！因为这是人机模式，人机模式的话他应该是朝我们射，对吧！？啊！所以这里就别随机了啊！朝玩家射就可以啦！额嗯！玩家的话应该是 <code>players[0]</code>，对吧！？啊！应该是 <code>players[0]</code> ，每次朝 <code>players[0]</code> 射啊！额额！首先需要，额！对！朝朝 <code>players[0]</code> 射，<code>players[0]</code> 是第一个被加进去的对不对！？啊！所以每次朝 <code>players[0]</code> 射就可以啦啊！那我们这坐标就很简单，啊！坐标的话应该是啊！ <code>this.playground</code> ，我们需要先把，先把这个 <code>player</code> 找出来，<code>players[0]</code> 找出来，他应该是 <code>this.playground.players[0]</code> 啊！好，每次朝 <code>players[0]</code> 射就可以啦啊！就是 <code>play</code> ，<code>player.x player.y</code>，就可以了啊！当然我们可以更狠一点啊！同学们我们可以解个方程，对吧！？啊！可以让电脑做一个预判，啊！就因为我们这个一般是朝一个方向动，对不对！？我们可以看一下，额！一个点你朝这个方向动，啊！然后我们要要要要要给你射发射一枚火球的话可以计算一下啊！我们应该朝内个方向射，啊！可以刚好命中你，队不对！？给你计算一下弹道啊！解个方程，不过这太麻烦了，咱就不这么搞了啊！咱就先假，咱们就先朝这个固定地点，射，好吧！？朝固定地点射啊！好，然后来试一下啊！这样的话会更刺激一些啊！刷新一下，咱已经死了，这！咱已经死了，哎呀，额！应该限定一下，比如说前五秒一定不能攻击啊！要不然上来就死，就太夸张了啊！我们应该前五秒不能攻击啊！前五秒是保护期，好吧！？啊！额！这个前五秒不能攻击啊！要不然要不然上来就死，不合适啊！啧！所以我，所以说咱们需要倒计时五秒钟啊！这属于冷静期对吧！？啊！额嗯！啧！搞一个时间吧！<code>this.spent_time = 0</code> 啊！表示过这个这个玩家生成的时间，然后每一帧啊！每一个 <code>update</code> ，我们都给他累加一下，<code>this.spent_time += this.timedelta</code>，然后，额嗯！每次要保证啊！<code>spent_time</code> 起码五秒钟之后再开始攻击啊！对吧！？要不然，上来就四啊！因为他一上来就攻击我们的话，哎！？他一上来就攻击我们的话就会导致我们的速度变慢对吧！？啊！同学们？哦对！？这里要记得除上一个 <code>1000</code> 啊！那么我们一上来被攻击两次，我们就跑不动了啊！所以基本上就 <code>GG</code> 了啊！所以说我们一上来，前五秒钟应该是冷静期，啊！五秒钟之后开始攻击啊！大家可以看一下，哎！这就对了，哎！</del>，哎！完完完了啊！完了，就只要只要一被攻击，基本上就死定了啊！所以大家可以走位，你可你可你可以走到你可以走到其他人，哎呀！我们这个一百八十分之一，每三秒钟射击一次扛不住啊！我们可以每五秒射击一次啊！三百，然后，前四秒啊！前四秒是是安全期好吧！？啊！咱们可以躲到别人的后面啊！因为他们之间也会相互攻击到的，走位走位走位走位走位走位走位走位走位走位，哎呀！被攻击一次，完啦！完啦！啊哈哈！这这时候应该赶紧赶紧把对方都打四，啊！我擦！<code>G</code> 了啊！额嗯！可以再试一次，走位走位走位走位走位走位高难度人机，哎！高难度人机，高高高！额哼！这基本上被打中一次就就就拜拜了啊！额！当然我们可以再加一些判断啊！你比如说，火球可以抵消掉，啊！就是额嗯！火球如果碰撞的话可以消失掉啊！我们再加一个，咱们再加一个功能啊！再加一个啊！额嗯！火球如果是碰撞到的话就火球可以怼火球，两个火球碰到的话可以消失掉啊！这样的话可能会更加好一些，这样的话咱们，对！相对来说就没有那么难了，啊！应该是进到 <code>skill</code> 好，我们这个 <code>collision</code> 的话也可以用来判断，不光可以用来判断，额！判断这个 <code>player</code> 啊！其实可以判断任何东西，啊！这可以改成 <code>object</code> ，改个名字，该不该其实都可以啊！因为名字无所谓啊！但是改完之后大家更容易理解一些，啊！好，然后我们这里的话可以再去，先去枚举一下炮弹有没有相撞啊！如果炮弹相撞的话，我们这炮弹就可以消失掉啊！（手指敲桌子，微笑）啧！这个炮弹好像没有我没有存下来，对吧！？啊！没存下来就不加了就这样吧！啊！没存下来就不加了啊！太麻烦了，要不然，好，那么我们这个游戏到此为止就已经完成了第一个版本了，大家可以自己试一下啊！难度还是比较大的啊！对吧！？啊！难度还是比较大的，我发现每所有人都针对我们自己的话还是比较难度比较大啊！我们可以把这个机制稍微改改，别每次针对我们自己，对吧！？啊！我们可以咱们可以随机一个人啊！随机一个人，随机一个人，每次开循环会不会开销太大，不大啊！我们一秒钟可以算十的八次方次同学们，你算算这这这几个 <code>for</code> 循环才多少啊！对吧！？一秒钟六十次，一秒六十帧，每帧的话你就 <code>n**2</code> 级别啊！一共才五个玩家，对吧！？啊！假设你有一百个炮弹，啊！额！六乘以一百，才六千的计算量，再乘个五个玩家，才才才几万的计算量，所有毫无压力啊！毫无压力啊！然后我们每次的话可以随机一个玩家攻击啊！随机一名玩家攻击，额！<code>player</code> 的话应该是随机啊！额！这里应该是改成随机<code>Math.floor()</code> 要不然所有人都针对我们，我们确实比较难打啊！<code>random</code> 乘上一个 <code>this.playground.players.length</code>，这样这样的话相互攻击，对吧！？啊！还好一些啊！现在看下效果，哎！这就对了吗，不能光攻击我们对不对！？哎！我曹！哎！大家可以发现一旦被攻击之后啊！你被攻击两次之后就跑不动了啊！好，啊！我们最终获得了胜利啊！大家会发现这样就好多了啊！ 一定不要在中心的位置，在中心的位置会非常的危险，哎！我曹！然后，现在这个炮弹是没有 <code>cd</code> 的啊！未来有 <code>cd</code> 就更好玩了，你就不能随心所欲的攻击了，啧！可以啦啊！好，可嗯嗯！好，大家可以自己试一下啊！其实还是很好玩的啊！我感觉这个游戏参数调的还不错啊！大家可以自己再调一调啊！估计可以更好玩，对吧！？这个比咱们刚开始上课的时候展示的内游戏更加好玩，对吧！？啊！哎！只剩只剩一名玩家，就非常容易可以欺负它，呵呵呵！咳嗯！哎！这就对啦！这就很棒，可以吧！？已经找到游戏的窍门了，我们未来还可以加一个，咱们接下来可以加一个这个，咱们接下来可以加一个这个游戏的可以加一个 <code>cd</code> 啊！就每，你不能一直发炮弹啊！这样的话就更方更加好玩一些啊！你看哎！击中一个那慢慢的接近他，然后再击中一下，对吧！？比如说每三秒钟发一次，哎！这个基本上变成小圈之后他就已经很难躲了啊！因为他移动速度很慢，可以吧！？但是他变小圈之后啊！他虽然移动速度变慢了，但是他的这个体积变小了，所以说也啧！你如果离他特别近的话就会很容易欺负他，如果离他比较远的话就比较难预判了，啧！好，大家看一下有没有问题啊！嗯嗯嗯！哎！我们这个炮弹，咱们这个怎么也会自己攻击呀！？我看一下啊！啊！对！注意啊！自己，我刚刚，这里要判断一下，不是自己呀！因为你自己的话这个随机攻击是电脑的行为，不是自己的行为，所以要特判一下啊！如果不是自己的话 <code>this.is_me</code> 并且，自己攻击太傻了啊！咳咳嗯！我们可以先等他们互相残杀啊！大家离离别人远一点，基本上不太会有事儿，你看看看看看咱这走位，离别人远一点基本上还是有反应时间的，啧！完了完了完了，不禁夸，咱们可以稍微加一些预判，同学们啊！可以让我们的 <code>ai</code> 更加牛逼一些，啊！额嗯！啧！就是我们可以大概算一下啊！可以稍微加一些预判啊！额！就是说我们可以大概算一下，比如说我们的这个离他的距离是多少啊！然后会沿着这个行动轨迹去朝着行动轨迹去射击啊！稍微的加一个啊！比如说我们的这个应该是，比如说这个行动轨迹乘以一个额嗯！速度乘上一个我想一下啊！额嗯！ <code>tx</code> 应该是等于 <code>player.x + </code> 他的速度对吧！？<code>player</code> 有一个速度啊！<code>player.speed</code> 啊！速度乘上一个他的他的这个方向，乘上一个 <code>this.timedelta</code> ，啊！除上个一千，我们比如说预判他一秒钟之后的位置，朝他一秒钟之后的位置射击，大家可以再试一下会不会感觉更难一些啊！ <code>player.y</code> <code>player.speed</code> 乘上一个 <code>this.</code> 这个精确一些的话你可以解个方程，啊！然后解方程的话太麻烦了啊！不想解了啊！乘上一个一，一秒钟之后的位置，啊！好，再打个包啊！再试一下，头，大大大家有没有发现更加智能了，同学们，但是好像预判一秒好像有点久了啊！我们可以比如预判个啧！比如说 <code>0.3</code> 秒吧！<code>0.3</code> 秒之后的位置啊！大家可以再试一下，大家可以发现他们相互之间的攻击还是很容易命中的，我擦！这两边夹击，太难啦！好，啊！好，大家看一下有没有问题啊！这没有问题的话我们就准备下播了啊！同学们，没有问题的话我们就准备下播了，啊！这个不用加 <code>A*</code> ，这个加一个内个加个解方程就可以了，你可以求解一下精确命中目标，啧！玩家没了，应该应该 <code>pop</code> 掉吗？应该 <code>pop</code> 掉啊！玩家没了会，额！对，我们玩家没了刚刚忘记加 <code>pop</code> 叼掉了啊！我稍等一下啊！我把他 <code>pop</code> 掉啊！额！我们需要当玩家四的时候啊！当玩家去世的时候需要将他删掉啊！我们刚刚忘记删了啊！额！有没有 <code>destroy</code> 函数，对！需要加上一个 <code>on_destroy</code> 函数啊！<code>this.palyground.players.length</code> 好，然后如果我们发现 <code>this.playground.players[i] === this</code> 的话我们应该将他删掉啊！好，<code>this.playground.players.splice(i, 1)</code> ，好，然后，我们来压缩一下啊！再试一下，看下有没有报错啊！这一定要把里自己近的先打死啊！离自己近的，自己不一定能反应过来，哎哟！我曹！哎！这还能这还能一下发两发了啊！哎！他这炮弹方向是不是不太对啊！同学们，好像出 <code>bug</code> 了啊！这样就对了啊！他内个炮弹方向不太对，可能是随机到自己了啊！因为随机到自己的话他会，他随机到自己的话他是一个这个这个零对吧！？朝自己发，没有特判掉啊！其实应该把朝自己发特判掉，大家如果感兴趣的话你可以课后课后自己去特判一下，好吧！？啊！好，大家看一下有没有问题啊！下节课讲什么还没有定啊！我们后面会继续继续讲，我们这个咱们这个项目会最终做的比较炫酷啊！目前还啥都没有，对吧！？啊！都是一些圈，对不对！？未来会变成一些一些一些玩家啊！然后地图的话也会更加丰富，会有一个会有一个这个吃鸡的一个模式，圈会不断不断缩小啊！然后另外会有一个联机的模式啊！好，那我们这个直播到这里就结束了，啊！大家看一下有没有问题啊！没有问题的话我们就准备下播了同学们！啊！啧！好，那咱这个直播到这里就结束了，同学们拜拜啊！拜拜！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240829170650061.png" alt="image-20240829170650061"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	<span class="title function_">move_to</span>(<span class="params">tx, ty</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">move_length</span> = <span class="variable language_">this</span>.<span class="title function_">get_dist</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, tx, ty);</span><br><span class="line">    <span class="keyword">let</span> angle = <span class="title class_">Math</span>.<span class="title function_">atan2</span>(ty - <span class="variable language_">this</span>.<span class="property">y</span>, tx - <span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vx</span> = <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vy</span> = <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p><strong>自己：</strong></p>
<p>玩家的移动，先确定移动的总距离 <code>move_length</code>和移动的方向（包括 <code>x</code> 方向和 <code>y</code> 方向），每次由 <code>x</code> 维度和 <code>y</code> 维度的速度和帧间时长求得下一帧要移动的位置，然后从 <code>move_length</code> 中减去这一段的距离，走到之后，走到目的地之后，啊！再随机一个新的目的地，啊！像这样随机游走，可以吧啊！？啊！好，我们来看一下，所以我们这里要给他加上一个 <code>ai</code> 啊！ 那么加 <code>ai</code> 的话在这里啊！在这里对不对！？就我们大家可以发现如果是自己的话那么需要用额！鼠标好键盘来操作，啊！好，那么如果是敌人的话怎么办呢？如果是敌人的话那么我们需要给他定义一个随机方向，啊！那么 <code>this.</code> <code>this.</code> 额！我想想啊！定义一个随机方向，对吧！？啊！那么 <code>let tx</code> 这是随机方向啊！这个应该是额！ <code>Math.random</code> 脉脉，这个 <code>random</code> 的话会返回一个 <code>0</code> 到  <code>1</code> 之间的数啊！乘上一个 <code>this.playground.width</code> 就我们整个</p>
<p><code>player</code> 属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 playground 中创建玩家对象 player</span></span><br><span class="line"><span class="comment">// 半径 0.05 地图高，速度玩家半径的三倍</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Player</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>.<span class="property">width</span> / <span class="number">2</span>, <span class="variable language_">this</span>.<span class="property">height</span> / <span class="number">2</span>, <span class="variable language_">this</span>.<span class="property">height</span> * <span class="number">0.05</span>, <span class="string">&#x27;white&#x27;</span>, <span class="variable language_">this</span>.<span class="property">height</span> * <span class="number">0.15</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">playground, x, y, radius, color, speed, is_me</span>) &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>fireball</code> 属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 player 中创建 fireball 对象，半径为玩家的五分之一</span></span><br><span class="line"><span class="comment">// 子弹速度为地图高度的 3 倍左右；（玩家速度的 50 / 15 倍，玩家半径的 10 倍）</span></span><br><span class="line"><span class="comment">//   0.5       1                0.15                0.05</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// damage: 玩家被攻击时，大小减少 height 的 1%</span></span><br><span class="line"><span class="comment">// 子弹速度远快于玩家速度，远大于玩家的大小</span></span><br><span class="line"><span class="comment">// 玩家速度稍大于玩家大小</span></span><br><span class="line"><span class="comment">// 移动距离为地图的十分之一</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;shoot fireball&quot;</span> + tx + <span class="string">&quot; &quot;</span> + ty);</span><br><span class="line"><span class="keyword">let</span> x = <span class="variable language_">this</span>.<span class="property">x</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="variable language_">this</span>.<span class="property">y</span>;</span><br><span class="line"><span class="keyword">let</span> radius = <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">height</span> * <span class="number">0.01</span>;</span><br><span class="line"><span class="keyword">let</span> angle = <span class="title class_">Math</span>.<span class="title function_">atan2</span>(ty - <span class="variable language_">this</span>.<span class="property">y</span>, tx - <span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line"><span class="keyword">let</span> vx = <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle);</span><br><span class="line"><span class="keyword">let</span> vy = <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle);</span><br><span class="line"><span class="keyword">let</span> color = <span class="string">&quot;orange&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> speed = <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">height</span> * <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">let</span> move_length = <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">height</span> * <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FireBall</span>(<span class="variable language_">this</span>.<span class="property">playground</span>, <span class="variable language_">this</span>, x, y, radius, vx, vy, color, speed, move_length, <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">height</span> * <span class="number">0.01</span>);</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">playground, player, x, y, radius, vx, vy, color, speed, move_length, damage</span>) &#123;</span><br><span class="line"><span class="comment">//	...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、部署nginx与对接acapp"><a href="#5、部署nginx与对接acapp" class="headerlink" title="5、部署nginx与对接acapp"></a>5、部署nginx与对接acapp</h3><p>什么意思呢？我们前几天网站是可以在浏览器里跑的，对吧！？啊！然后，我们这次的主要目的是让大家的网站也可以在我们的 <code>AcWing</code> 上去跑，就多端吗？前后端分离啊！一个后端可以对应多个前端，啊！一个前端是自己的浏览器，对吧！？啊！像我们之前访问的那样，打开一个网址就可以访问了，啊！比如说我们上节课的访问方式，对吧！？啊！点开这个网址，在<strong>浏览器里输入网址</strong>就可以访问了啊！这是第一种啊！第二种的话就是<strong>在 <code>acapp</code> 里打开</strong>像这样打开就可以啦，好吧！？啊！额嗯！然后我们现在已经给大家把创建应用的功能已经上线了，每个同学都可以创建自己的应用，目前仅对报名 <code>django</code> 课的同学开放，因为这个东西还是需要先教学，对吧！？啊！教完学之后，大家才会额嗯！上线起来才不会，才会游刃有余啊！额嗯！</p>
<p>然后另外上线的话按理来说大家要上线对接 <code>AcWing</code> 的话，那么<strong>需要支持 <code>https</code> 协议</strong>啊！什么叫 <code>https</code> 协议呢？就大家可以看一下这个浏览器左上方啊！那么像我们昨天这种模式打开之后，他会显示不安全，对吧！？啊！额！像 <code>AcWing</code> 的话他会显示一个带锁的形状啊！表示安全的，对吧！？连接是安全的，那么一般来说如果想把网站对接到 <code>https</code> 协议的话，就对接到安全连接的话那么大家本身也是需要去支持 <code>https</code> 协议的啊！那么如果想支持 <code>https</code> 协议的话，啊！一般来讲，啧！都需要去申请一个 <code>https</code> 的证书啊！这个证书的话各种云平台都有啊！免费的也有，付费的也有，额！然后大家如果想去搞一个 <code>https</code> 证书的话证书一般来讲都是要和域名挂钩的啊！额！对！这个域名啊！这个证书极少情况下可以直接跟 <code>ip</code> 直接绑定啊！绝大部分情况下都要和域名挂钩，那么因此如果大家要自己去对接的话，包括你自己未来去写小程序的话也是需要自己去搞一个域名，啊！那么在国内搞域名的话大家就需要去备案！对啊！所有这个流程一般来说是非常复杂的啊！需要先买个域名啊！然后申请个证书，啊！一般大家个人开发者的话申请的是额！免费版，啊！企业的话一般是付费版啊！然后还要去备案！啊！这个备案的话一般来讲，大概要花二十天左右，啊！就非常的额！繁琐，啊！那所以说我们给大家提供了另外一种解决方案啊！就是大家在去 <code>acwing</code> 开额嗯！上线 <code>app</code> 的时候啊！我们会给每个同学额！免费分配一个我们的域名，啊！然后同时会给大家提供一个 <code>https</code> 的哎！这个证书啊！这个证书是统一给大家买的，咱们这个证书的话大概一年一千来块钱，买的是比较便宜的付费版本，好吧！？啊！ 也就是大家这个在上线 <code>acapp</code> 的时候啊！额嗯！</p>
<p>需要<strong>买域名</strong>，<strong>申请证书</strong>，加<strong>备案</strong>，在 <code>acwing</code> 可以省去这几步操作，熟练的话十分钟就可以了</p>
<p>以往的方式，自己上线网站，小程序需要有域名而且备案，上线 <code>app</code> 手续更复杂</p>
<p>在 <code>acwing</code> 上线云端应用只需要去云平台租一个服务器就可以</p>
<p>有自己的域名，可以使用自己的域名</p>
<p><code>acwing</code> 提供免费分配的域名，没有申请过域名或者备案的同学可以直接使用</p>
<p><code>acwing</code> 云端 <code>app</code> 上线，直接把配置文件复制到 <code>app</code> 所在服务器即可，比如 <code>acapp.key</code> 、<code>acapp.pem</code> <code>nginx</code></p>
<p>今天的内容，逻辑不复杂，知识点杂，写了一个讲义</p>
<p>在访问网站的时候，对接 <code>acwing</code> 需要 <code>https</code> 协议，对应的端口是 <code>443</code> 端口，<code>http</code> 协议对应的端口是 <code>80</code> 端口</p>
<h4 id="第一步：开放端口，80、443，需要容器操作"><a href="#第一步：开放端口，80、443，需要容器操作" class="headerlink" title="第一步：开放端口，80、443，需要容器操作"></a>第一步：开放端口，80、443，需要容器操作</h4><p>第一步：需要通过 <code>https</code> 访问自己的服务器，需要去开放一下 <code>80</code> 和 <code>443</code> 端口，需要将容器保存成镜像，再用镜像生成容器并开通相应的端口，未来迁移应用，也是这样，先将容器打包生镜像，再网络输出到新的服务器，再生成新的容器（比如从一个云平台迁移到另一个云平台；从学生机迁移到高性能机器）</p>
<p>在 <code>acwing</code> 上，使用 <code>app</code> 的域名是统一的</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902160012035.png" alt="image-20240902160012035"></p>
<p>将容器生成一个镜像</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902160311288.png" alt="image-20240902160311288"></p>
<p>使用镜像重新生成一个容器，并开放相应的端口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 20000:22 -p 8000:8000 -p 80:80 -p 443:443 --name django_server -itd django_lesson:1.1</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902201406577.png" alt="image-20240902201406577"></p>
<p>将容器变成了镜像，镜像里有之前容器的公钥，有之前容器的配置文件的；所以使用创建的镜像重新生成容器的话原有的配置文件不变，</p>
<h4 id="第二步，创建-acapp-填写配置信息，在服务器上添加-nginx-配置文件和-acapp-配置文件"><a href="#第二步，创建-acapp-填写配置信息，在服务器上添加-nginx-配置文件和-acapp-配置文件" class="headerlink" title="第二步，创建 acapp 填写配置信息，在服务器上添加 nginx 配置文件和 acapp 配置文件"></a>第二步，创建 <code>acapp</code> 填写配置信息，在服务器上添加 <code>nginx</code> 配置文件和 <code>acapp</code> 配置文件</h4><p><strong>不需要重新配置免密登录</strong></p>
<p>创建新的 <code>acapp</code> 应用，将写好的配置文件放到云端 <code>acapp</code> 相应的目录下</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902202624262.png" alt="image-20240902202624262"></p>
<ul>
<li><code>nginx.conf</code> 中的内容写到云服务上的 <code>acapp</code> 应用的 <code>/etc/nginx/nginx/conf</code> 文件当中</li>
</ul>
<p>将 <code>.bashrc</code> 、<code>.tmux.conf</code> 传到 <code>/root/</code> 目录下，<code>.bashrc</code> 有一个特殊的</p>
<ul>
<li>将 <code>acapp.key</code> 、<code>acapp.pem</code> 放到 <code>/etc/nginx/cert/</code> 对应的文件中</li>
</ul>
<p><strong>启动 <code>nginx</code> 服务</strong>: <code>sudo /etc/init.d/nginx start</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902203753880.png" alt="image-20240902203753880"></p>
<p>基本上自己用的时候也是从网上搜，<code>acapp</code> 准备好了这些配置文件</p>
<p>重新加载 <code>nginx</code> 配置: <code>sudo nginx -s reload</code> </p>
<p>重新加载的时候可能会报错，根据提示修改，很有可能是路径名错误，或者到 <code>/var/log/nginx/</code> 目录下查看 <code>access.log</code> 和 <code>error.log</code> </p>
<p>如果环境不一样，对 <code>nginx.conf</code> 做一个修改就可以了，比如，如果是自己的域名，需要修改下面的内容；文件路径不一样</p>
<p>更换域名</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902211930376.png" alt="image-20240902211930376"></p>
<p>修改文件路径</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902212104732.png" alt="image-20240902212104732"></p>
<h4 id="第三步：修改-django-里的-settings-配置文件"><a href="#第三步：修改-django-里的-settings-配置文件" class="headerlink" title="第三步：修改 django 里的 settings 配置文件"></a>第三步：修改 <code>django</code> 里的 <code>settings</code> 配置文件</h4><p>修改 <code>settings</code> 配置文件</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902212426271.png" alt="image-20240902212426271"></p>
<h4 id="第四步：把静态资源放到-acapp-根目录下"><a href="#第四步：把静态资源放到-acapp-根目录下" class="headerlink" title="第四步：把静态资源放到 acapp 根目录下"></a>第四步：把静态资源放到 <code>acapp</code> 根目录下</h4><p>归档文件：<code>python3 manage.py collectstatic</code> </p>
<p>将 <code>static</code> 放到项目的根目录下</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902212556319.png" alt="image-20240902212556319"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902212751655.png" alt="image-20240902212751655"></p>
<p><code>nginx</code> 知识点，只要会操作就可以了啊！其实 <code>nginx</code> 的话我也不是太熟悉啊！额嗯！我我已经给大家讲过，我们在去学东西的时候，啊！目的导向会更加好一些，就是你看你的目标是什么，你的目标如果是做网站的话啊！那么所有不需要了解的细节能跳过的尽量先跳过，需要先把，就是你的项目能跑起来比你理解各种细节更加重要，啊！因为人生有限，对吧！？啊！咳嗯！好，！</p>
<p><code>nginx</code> 和<code>django</code> 之间啊！需要一个桥梁啊！</p>
<p>用户访问网站通过 <code>8000</code> 端口，直接访问到 <code>django</code> ，在 <code>django</code> 前面套了一层 <code>nginx</code> ，用户在访问的时候通过 <code>443</code> 端口，或者 <code>80</code> 端口访问 <code>nginx</code> ，<code>django</code> 在 <code>nginx</code> 后面，之间需要一个桥梁——<code>uwsgi</code> ，会用就可以了，这原理我也不是很了解啊！</p>
<h4 id="第五步：配置-uwsgi-协调-nginx-和-django"><a href="#第五步：配置-uwsgi-协调-nginx-和-django" class="headerlink" title="第五步：配置 uwsgi 协调 nginx 和 django"></a>第五步：配置 <code>uwsgi</code> 协调 <code>nginx</code> 和 <code>django</code></h4><p>配置 <code>uwsgi</code> 桥梁，可以在 <code>django</code> 和 <code>nginx</code> 之间架一座桥梁，而且这个访问效率比直接用 <code>python manage runserver</code> 要快非常多，而且支持并发，可以开好多进程，在 <code>/scripts/uwsgi.ini</code> （放到哪里都可以啊！）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line">socket          = 127.0.0.1:8000</span><br><span class="line">chdir           = /home/acs/acapp</span><br><span class="line">wsgi-file       = acapp/wsgi.py</span><br><span class="line">master          = true</span><br><span class="line">processes       = 2 # 2 个核</span><br><span class="line">threads         = 5 # 每个核最多运行 5 个线程</span><br><span class="line">vacuum          = true </span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902214130270.png" alt="image-20240902214130270"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902214231299.png" alt="image-20240902214231299"></p>
<p>启动 <code>uwsgi</code> 服务代替 <code>python3 manage.py runserver 0.0.0.0:8000</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uwsgi --ini scripts/uwsgi.ini</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902214713238.png" alt="image-20240902214713238"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902220258002.png" alt="image-20240902220258002"></p>
<h4 id="第六步：对-acapp-做适配，修改前端代码样式"><a href="#第六步：对-acapp-做适配，修改前端代码样式" class="headerlink" title="第六步：对 acapp 做适配，修改前端代码样式"></a>第六步：对 <code>acapp</code> 做适配，修改前端代码样式</h4><p>在 <code>acapp</code> 中定位左上角坐标，做一个映射，使得可以在浏览器任何位置，任何大小打开，都可以正常操作游戏界面和菜单界面</p>
<p>像这种东西的话很难背过啊！大家一边写一遍查就可以了啊！</p>
<p><code>player zbase.js</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240902222026342.png" alt="image-20240902222026342"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">add_listening_events</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// outer 保存 类 Player 的实例</span></span><br><span class="line">    <span class="keyword">let</span> outer = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">// 监听鼠标事件, 取消右键菜单</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">game_map</span>.<span class="property">$canvas</span>.<span class="title function_">on</span>(<span class="string">&quot;contextmenu&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">game_map</span>.<span class="property">$canvas</span>.<span class="title function_">mousedown</span>(<span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> rect = outer.<span class="property">ctx</span>.<span class="property">canvas</span>.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(e.<span class="property">which</span> === <span class="number">3</span>) &#123;</span><br><span class="line">            outer.<span class="title function_">move_to</span>(e.<span class="property">clientX</span> - rect.<span class="property">left</span>, e.<span class="property">clientY</span> - rect.<span class="property">top</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(e.<span class="property">which</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">radius</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 每一帧技能可以从一个状态转移到另一个状态</span></span><br><span class="line">            <span class="comment">// 已选择一个技能 --&gt; 已选择一个技能</span></span><br><span class="line">            <span class="comment">// 已选择一个技能 --&gt; 释放了一个技能</span></span><br><span class="line">            <span class="comment">// 不存在既释放了一个技能，然后又选择另一个技能的情况，这样的话技能就不需要选择了</span></span><br><span class="line">            <span class="comment">// 选择技能后，需要等到下一帧才能发射子弹</span></span><br><span class="line">            <span class="keyword">if</span>(outer.<span class="property">cur_skill</span> === <span class="string">&quot;none&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// 获取到的是整个屏幕的绝对坐标，整个屏幕左上角是 (0, 0) 点，</span></span><br><span class="line">                <span class="comment">// player 是画布的相对坐标，是画布的左上角 (0, 0)</span></span><br><span class="line">                <span class="comment">// 将鼠标的坐标映射到画布中</span></span><br><span class="line">                <span class="comment">// 求一下画布左上角的坐标在屏幕中的坐标</span></span><br><span class="line">                outer.<span class="title function_">check</span>(e.<span class="property">clientX</span> - rect.<span class="property">left</span>, e.<span class="property">clientY</span> - rect.<span class="property">top</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 点击鼠标左键时，检查技能是否可用，并发射子弹</span></span><br><span class="line">            <span class="comment">// 如果技能可用，并且点击非技能区域，则发射子弹</span></span><br><span class="line">            <span class="comment">// 否则，不发射子弹，更改玩家选择的子弹类型（技能类型）</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(outer.<span class="property">cur_skill</span> === <span class="string">&quot;fireball&quot;</span>) &#123;</span><br><span class="line">                outer.<span class="title function_">check</span>(e.<span class="property">clientX</span>, e.<span class="property">clientY</span>);</span><br><span class="line">                <span class="keyword">if</span>(outer.<span class="property">cur_skill</span> === <span class="string">&quot;fireball&quot;</span>)</span><br><span class="line">                    outer.<span class="title function_">shoot_fireball</span>(e.<span class="property">clientX</span> - rect.<span class="property">left</span>, e.<span class="property">clientY</span> - rect.<span class="property">top</span>);</span><br><span class="line">                    outer.<span class="property">cur_skill</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(outer.<span class="property">cur_skill</span> === <span class="string">&quot;iceball&quot;</span>) &#123;</span><br><span class="line">                outer.<span class="title function_">check</span>(e.<span class="property">clientX</span> - rect.<span class="property">left</span>, e.<span class="property">clientY</span> - rect.<span class="property">top</span>);</span><br><span class="line">                <span class="keyword">if</span>(outer.<span class="property">cur_skill</span> === <span class="string">&quot;iceball&quot;</span>)</span><br><span class="line">                    outer.<span class="title function_">shoot_iceball</span>(e.<span class="property">clientX</span> - rect.<span class="property">left</span>, e.<span class="property">clientY</span> - rect.<span class="property">top</span>);</span><br><span class="line">                    outer.<span class="property">cur_skill</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// https://developer.mozilla.org/docs/Web/API/UIEvent/which</span></span><br><span class="line">    <span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(e.<span class="property">key</span> === <span class="string">&#x27;q&#x27;</span>) &#123;</span><br><span class="line">            outer.<span class="property">cur_skill</span> = <span class="string">&quot;fireball&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(e.<span class="property">key</span> === <span class="string">&#x27;w&#x27;</span>) &#123;</span><br><span class="line">            outer.<span class="property">cur_skill</span> = <span class="string">&quot;iceball&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打包 —&gt; 静态文件收集到根目录下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./compress_game_js.sh</span><br><span class="line">python3 manage.py collectstatic</span><br></pre></td></tr></table></figure>

<p>将两个命令写到一个可执行文件中</p>
<p>在 <code>acapp</code> 中每一个框都是独立的</p>
<p>修改游戏界面的大小变化与框体大小一致</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240903000034479.png" alt="image-20240903000034479"></p>
<p>实现框体大小变化时，游戏界面也变化，（待实现）</p>
<p><code>AcGamePlayground</code> 没有实现 <code>AcGameObject</code> 类，每个对象，只创建一次，比如画布，玩家，地图</p>
<p><code>GameMap</code> 实现了 <code>AcGameObject</code> 的基类用于每帧绘制 <code>canvas</code> 背景，根据 <code>playground</code> 的宽高调整 <code>canvas</code> 自己的宽高</p>
<p>调整字体大小</p>
<p><code>acgit</code> 全局配置</p>
<h4 id="课后聊天"><a href="#课后聊天" class="headerlink" title="课后聊天"></a>课后聊天</h4><p><code>nginx</code> 配置，在博客上找文章，多次试，一般都是这样的</p>
<p><code>nginx</code> 作用：负载均衡，本来访问网站需要 <code>ip</code> 地址加端口号，通过 <code>nginx</code> 就可以通过域名访问网站了，可以支持 <code>https</code> 协议；提高网站的并发量，提高网站的并发速度</p>
<p>使用 <code>django</code> 的 <code>python manage.py ranserver 0.0.0.0:8000</code> 会发现运行效率比较低，使用 <code>nginx</code> 可以提高访问量（质的飞跃），可以支持多进程，可以充分使用电脑的多个核</p>
<p>人类的进步属于经验的积累，这种就属于很好的经验的积累。—— <code>yxc</code> 找 <code>nginx</code> 配置给同学用</p>
<p>网站访问量不大没什么意义啊！网站访问量大了之后，需要做负载均衡，需要将网站分到多个服务器上，瓶颈是稀缺资源是你的网站（！！！），而不是服务器</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240903172024662.png" alt="image-20240903172024662"></p>
<p><code>django</code> 的数据库、<code>websocket</code> 协议、发送后端请求——怎么调用后端数据库、怎么通过 <code>ajax</code>调用后端的函数</p>
<p><code>ajax</code> 加上路由加上函数进行调用，<code>django</code>就学完了啊！<code>django</code> 本身就没有多少东西可以学啊！而且 <code>django</code> 里很多东西比较冗杂，已经没有必要学了，比如 <code>django</code> 的 <code>forms</code> ，还不如自己手写方便，大量没有用的功能，<code>yxc</code> 已经过滤掉了，精简版，前后端分离的 <code>django</code> 写法</p>
<p><code>django</code> 里的 <code>templates</code> 很多功能都没有使用，<code>django</code> 的 <code>html</code> 写的时候支持 <code>&#123;% for %&#125;</code> 这种语法，我们的网页是在前端渲染的，不是在后端渲染的，这种功能用不上</p>
<p>开发效率，<code>django</code> 完爆 <code>spring</code>，<code>python</code> 代码短一些</p>
<p><code>orm</code> 后面会讲</p>
<p><code>web 3.0</code> 所有数据共通，<code>acwing</code> 未来的发展方向是做一个云端操作系统，满足个人开发者的开发需求，给个人开发者分享欲望的平台，人人可以建设的云端操作系统，很容易变现，广告的变现能力非常的低的（也是变现的方式），在 <code>steam</code> 平台上上线一个付费应用的话，很容易变现，最简单的方式，你比如说，薄利多销，每月一块钱，将劳动成果变现；开发者可以变现了，用户可以享受到以前享受不到的服务了，在世界上的角落里可能有一万个人喜欢，在 <code>acwing</code> 平台上可以找到这一万个人，社区里的同学话很少的前就可以享受到大家的服务，</p>
<p>网站备案的话写个人学习，写用来作为博客的话不好通过</p>
<p>开发灵感——打开 <code>4399</code> 找灵感，找好玩的游戏，没有版权的游戏你就可以弄过来，可以去 <code>steam</code> 上找，苹果、华为、小米应用商店找就可以了啊！非常的容易啊！优势是开发快，上线快，成本低</p>
<h2 id="游戏逻辑，对象创建与元素渲染"><a href="#游戏逻辑，对象创建与元素渲染" class="headerlink" title="游戏逻辑，对象创建与元素渲染"></a>游戏逻辑，对象创建与元素渲染</h2><p>打开一个网页就会创建 <code>AcGame</code> 对象，在该对象中创建 <code>AcGameMenu</code> 对象，<code>AcGamePlayground</code> 对象，<code>AcGameSettings</code> 对象</p>
<p>在第一帧执行 <code>start</code> 函数；调用 <code>show</code> 和 <code>hide</code> 函数显示和隐藏这些对象创建的 <code>html</code> 元素，此时 <code>html</code> 元素已创建</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240903184543622.png" alt="image-20240903184543622"></p>
<h3 id="6、创建账号系统"><a href="#6、创建账号系统" class="headerlink" title="6、创建账号系统"></a>6、创建账号系统</h3><p>后边所有课程的一个<strong>基石</strong>——用户系统，是后面所有内容的基础，为什么是后面内容的基础呢？你比如说未来去实现联机对战的时候，我们需要知道谁和谁联机，对吧！？啊！那么谁这个东西啊！在我们的整个项目里边就是账号系统，对吧！？啊！我们需要能够记录下来每个人到底是谁，啊！所以说我们这节课开始实现的这个系统是未来的一个基石啊！然后，账号内容系统非常的多啊！大家如果自己写过网站的话应该也是有所体会的啊！额嗯！所以说我们这节课应该讲不完，啊！我们这节课的话应该是只能讲到额嗯！<strong>手写账号的登录跟注册啊</strong>！就手写账号的<strong>登录跟注册</strong>啊！啧！对吧！？啊！你<strong>可以登录</strong>啊！而且有，可以，每个用户可以<strong>分配一个这个默认头像</strong>啊！然后也<strong>可以退出</strong>，啊！额！但是还不能集成第三方登录啊！这个我们集成第三方登录的话要放到下节课来讲，好吧！？啊！放到下节课来讲，啊！额嗯！未来我们最终做完之后啊！就是大家可以额嗯！大家比如说这个打开自己的 <code>acapp</code> 之后，好，那么你一打开就会默认，当然他会先向用户申请授权，就跟微信登录是一样的啊！那么用户授权成功之后，你就可以获得用户的 <code>acwing</code> 的头像跟用户名啊！ 然后，那么用户点到单人模式之后，啊！或者点，点到这个联机模式之后，那么你就会，你就可以将用户的头像渲染到窗口里，好吧！？啊！那么未来联机的时候就是每一个圈都是一个人啊！然后每个人的话用他的头像来代替，啊！这样的话大家一看就知道是谁对吧！？啊！你比如说我们在首页上啊！你比如说你一看到这个头像啊！就知道是这个同学，对吧！？啊！一看到这个头像就知道是这个同学，这样的话可以很容易对应起来啊！然后第三方授权登录的话所有第三方授权登录方法都是一样的啊！包括微信、QQ啊！什么 <code>github</code> ，还有这个什么微博，都是一样的啊！然后我们是以 <code>acwing</code> 为例，啊！<code>acwing</code> 举例来给大家讲这个第三方授权登录，好吧！？啊！一通百通，只要会其中一种别的都会啊！然后，因为我们实现的时候实现了两个端啊！一个端是 <code>web</code> ，还有一个端是 <code>acapp</code> ，所以说我们给大家讲的时候是以额嗯！<code>ac</code> 以 <code>acwing</code> 的授权方式来对接，对吧！？因为我们这个 <code>acapp</code> 的话是跑到社区里的好吧！？啊！啧！额嗯！然后我们不过这节课的话讲不到这个第三方授权啊！因为内容比较多啊！我们这节课的话估计只能讲完额！用户的这个自己在自己去手写用户名，然后去注册，去登录，而且还不能去上传图片，好吧！？啊！就大概实现一个，实现到这个样子啊！实现到这个样子啊！可以可以可以登录对吧！？啊！可以退出！啊！也可以注册一个新的账号，好吧！？好，那么我们来看一下具体的内容，啊！</p>
<p>啊！对！我们这个游戏是 <code>moba</code> 类的游戏啊！这个，我们这个游戏的话本身是不能在手机上完的啊！因为你也不能在手机上完英雄联盟对吧！？啊！当然，大家如果要在手机上硬完的话也不是不可以，但是你需要自己去添加一些额外的操作方式，对吧！？啊！而且不仅不能在手机上玩，而且他 也不能在 <code>mac</code> 上玩对吧！？你玩英雄联盟的话需要有鼠标啊！没鼠标的话会被虐出四来啊！</p>
<p>好，我们来看一下这次的内容啊！啊！这次我们这次给大家讲的这个用户登录系统，其实并不难写，额嗯！思路并不太复杂，但是我们下节课给大家讲的第三方授权登录就非常复杂啦，啊！但是这个复杂是绕不开的啊！你如果想接入第三方的话都是这个流程，啊！这节课虽然思路不复杂，但是我们的代码量不是很小啊！主要是因为前端代码比较多，啊！就我们去渲染这几个窗口，前端的话大概需要两三百行</p>
<p>咳嗯！大家要先做好心理准备啊！啧！好，那么，然后我们来看一下这次的讲义啊！这讲义其实并没有什么东西啊！讲义的话主要是有两个资源，啊！第一个的话是我们给大家准备了一个 <code>logo</code>，啊！就是这个这里，接入 <code>acwing</code>、<code>acwing</code> 第三方登录的话你需要一个图标，对吧！？啊！那这个图标的话给大家上传到这个链接里了，大家可以，从这从这个链接下载就可以了啊！然后另外一个就是如何去用额一个图片填充，用头像填充我们的圆圈，对吧！？啊！就是，啊！大家这个玩的时候，如何去用你的头像填充你的 <code>a</code> <code>p</code> <code>p</code>，填充你的圆圈，啊！这个是一个额！一个帮大家查好的一个写法，大家直接抄过来就可以了，好吧！？啊！对！这个未来最终模式的话是大家在社区里玩的时候是你，每个圈都是一个头像啊！每个圈都是一个头像，你可以看到是谁，对吧！？</p>
<p>啊！好，那么然后我们来看一下具体内容啊！我们首先先打开我们的项目，首先先进到我们的 <code>django</code> 里，对吧！？啊！<code>django</code> <code>django</code> 虚拟机里，然后，进来之后的话，我们先把之前的内容先删掉啊！删完之后的话我们先把我之前写的内容先删掉啊！整个先删掉，删完之后的话，从，我们把我们上节课的进度搞过来啊！打开我们的 <code>acgit</code> ，啧！啊！然后，点开我们上节课的这个上找找到我们上节课的这个仓库啊！然后点克隆，啊！然后点这个复制链接，啊！然后我们把我们上节课的进度克隆下来，好，然后，我们开始写我们的项目啦，同学们，开始写我们的项目，我一般习惯上会上去先开四个框啊！啧！然后我们这个框的话左上角这个框的话一般我习惯上是运行我们的这个后端进程啊！后端进程的话就是 <code>u</code> 啊！啊！<code>uw</code>、<code>u</code> 什么来着，<code>uwsgi</code> 对吧！？啊！大家可以通过啧！<code>ctrl + r</code> 然后可以搜索历史指令，啊！大家直接点，嗯！搜，嗯这个 <code>ctrl + r</code> 啊！嗯 <code>u</code> 你就应该可以把以前打过的这个指令补全出来啦！然后摁一下右方向键他这个命令就自己就过来啦！就是说大家如果打一个历史命令的话你可以通过这种补全的方式来打，是比较方便的啊！好，然后我们打开我们的打开我们的这个进程啊！然后，另外我们，我习，我上节课上完之后啊！我们的这个 <code>api</code> ，我们的域名换了个新的啊！因为我上节课上完课之后又重新创建了一个新的 <code>app</code> ，那么我新的 <code>app</code> 域名是 <code>app165</code> 啊！然后我们上节课讲的时候域名是 <code>app</code> 啊！<code>152</code> ，大家记得一定要把这个域名改掉啊！如果不改的话大家可以试一下，如果不改的话他会有一个 <code>bad request</code> ，对吧！？啊！那么大家需要把你新创建的这个 <code>app</code> ，当然大家如果没有新创建的话就无所谓了啊！好，然后保存一下，保存完之后的话重启一下啊！好，一刷新就有了啊！好吧！？啊！啧！额嗯！然后，我们同时再打开一个 <code>acapp</code> 啊！大家可以看到同时可以在多端运行，啊！找到自己上节课的 <code>acapp</code> ，打开，可以打开，对吧！？啊！然后现在的话是一个圆，对吧！？啊！是一个白色的球啊！没有头像了已经，已经恢复成上节课的样子啦！啊！好，那么，然后另外一点啊！就是我们这节课为了方便调试，因为我们这节课会写很多后端内容啊！那么后端内容大家如果想方便调试的话啊！<strong>一定要记得将这个 <code>DEBUG</code> 模式改成 <code>True</code></strong> ，啊！我们，一定要改成 <code>True</code> 啊！如果你不改成 <code>True</code> 的话，那么如果服务器端的代码如果报错的话，他前端之后显示一个 <code>500 error</code> ，他不给你显示报错信息啊！所以你在写后端代码的时候，一定要记得将 <code>DEBUG</code> 改成 <code>True</code> 啊！好把！？啊！改成 <code>True</code></p>
<p> 啊！好，那么改完之后的话我们要去创建我们的账号系统啦！啊！这个 <code>django</code> 里边本身他是自带一个账号系统的啊！然后我们可以先登到 <code>django</code> 后台看一眼他自带的这个这个这个自带的这个账号系统什么东西啊！那么我们首先先进到我们的啊！我们的 <code>django</code> 的家目录里啊！进来之后的话我们回忆一下我们之前的创建的超级用户的用户名是什么，啊！我之前创建的用户名叫 <code>admin</code> ，啊！但是密码已经不记得了，啊！所以我们这里的话重新修改一密码啊！<code>change password</code> ，啊！<code>changepassword</code> ，然后，额嗯！名称应该叫 <code>admin</code> 啊！大家如果要是你</p>
<p>修改超级用户密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py changepassword 名称 </span><br></pre></td></tr></table></figure>

<p>重新创建超级用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py createsuperuser </span><br></pre></td></tr></table></figure>

<p><code>django</code> 自带的账户系统，不能满足我们的要求，我们需要存储用户的头像，需要对 <code>django</code> 自带的数据库做一个扩充</p>
<p>在 <code>models</code> 文件夹下扩充，在其中创建我们的表，比如 <code>player</code> 表，然后 <code>django</code> 自带的账户管理系统图形化界面中就会出现创建的表的相关信息，</p>
<p>未来账号和信息可能会有很多表，所以开一个文件夹，并创建 <code>__init__.py</code> ，创建 <code>player.py</code> </p>
<p>在 <code>player.py</code> 中需要引入头文件，可以打开一个交互式 <code>ipython3</code> 窗口查看</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240904090625492.png" alt="image-20240904090625492"></p>
<p>每一个创建的表都需要继承自 <code>models.Model </code> 类，因此创建 <code>player</code> 时也需要继承自 <code>models.Model</code> 类</p>
<p>除了基础的信息之外，还需要存储头像，存储链接就可以了，<code>django</code> 有内置的头像类型，<code>models.URLField</code> ，类似这样的类型有一些参数不需要直接记，直接模仿就可以了</p>
<p>还需要扩充自 <code>User</code> ，<code>Player</code> 表希望从 <code>User</code> 表扩充过来：</p>
<p>需要定义一个关联关系，每一个 <code>Player</code> 都会唯一对应一个 <code>User</code> ，<code>django</code> 也有一个字段，<code>OneToOneField</code> 对应自内个表呢？<code>User</code> 这个表，当 <code>User</code> 删除的时候需要执行的函数是 <code>models.CASCADE</code> ，当 <code>User</code> 删除的时候怎么处理 <code>Player</code> 这个数据，一起删掉</p>
<h4 id="django-数据库操作"><a href="#django-数据库操作" class="headerlink" title="django 数据库操作"></a><code>django</code> 数据库操作</h4><p><code>django</code> 里的数据库表的创建使用类，在类中创建类似键值对的列，列名作为变量，列类型作为值，并且可以在类中定义操作列的函数，<code>django</code> 统一管理，我们只需要调用 <code>api</code> 就可以了，</p>
<p>要想在 <code>django</code> 自带的管理界面显示定义的表的相关信息，需要将定义的表的 <code>model</code> 注册到 <code>django</code> 自带的管理页面中</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240904183654996.png" alt="image-20240904183654996"></p>
<p>使用 <code>python3 manage.py makemigrations game</code> 进行</p>
<p>迁移是Django将更改存储到模型(以及数据库模式)的方式——它们是磁盘上的文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">数据库迁移</span></span><br><span class="line">python3 manage.py makemigrations</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建表</span></span><br><span class="line">python3 manage.py migrate</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240904202732399.png" alt="image-20240904202732399"></p>
<p>在操作数据库的过程当中，没有手写任何一条数据库语句，数据库里的表对应 <code>django</code> 里的 <code>class</code> ，每一条数据，对应 <code>django</code> 里的一个对象，非常合理</p>
<p>后台存储已经存完了，我们存储用户的头像，未来还可以管理其他信息，比如性别、年龄、邮箱、手机号</p>
<p>在 <code>players</code> <code>models</code> 里加就可以了</p>
<h4 id="实现后端登录之后获取用户信息的功能，实现-api-接口"><a href="#实现后端登录之后获取用户信息的功能，实现-api-接口" class="headerlink" title="实现后端登录之后获取用户信息的功能，实现 api 接口"></a>实现后端登录之后获取用户信息的功能，实现 <code>api</code> 接口</h4><p><code>https://app7116.acapp.acwing.com.cn/settings/getinfo/?platform=WEB</code></p>
<p><code>https://app7116.acapp.acwing.com.cn/settings/getinfo/?platform=ACAPP</code></p>
<p>以后文件是不是存在 <code>staqtic</code> 下的 <code>image</code> 文件夹下，以后存头像，一般是存到 <code>media</code> 文件夹下；一般不推荐存到本地，一般是推荐存到云盘上，云盘效率比较高；小图片多了之后，读写效率比较慢，所以一般存到云盘上</p>
<h5 id="登录的流程"><a href="#登录的流程" class="headerlink" title="登录的流程"></a>登录的流程</h5><p>我们大概在大脑里想一下登录的流程是什么，啧！</p>
<p><strong>如何去让用户登录呢？</strong></p>
<p>我们是这样一个流程，就是用户每次刷新的时候啊！额嗯！每次一刷新我们写接下来的流程是这样的啊！啧！每次用户一刷新啊！然后，我们用户刷新的话是在浏览器里刷新，对吧！？啊！浏览器的话我们一般称为 <code>client</code> ，好，然后，我们后台，就是这里的话是服务器，啊！这里服务器的话，一般称为 <code>server</code> 啊！然后，我们下节课给大家讲的第三方授权登录的话就是 <code>AcWing</code>，啧！对吧！？当然今天，当然今天给大家讲的时候不涉及到第三个东西，就稍微简单一些，啊！不涉及到第三个模块啊！好，那么我们 <code>client</code> 的话，一刷新啊！我们一刷新的话，我们是先去向后台服务器发送一个请求，啊！请求什么呢？请求，请求我们当前玩家的信息啊！<code>getinfo</code> ，就我们只要用户一刷新，那么他就会向后台发送一个请求，啊！请求用户的信息，请求什么信息呢？我们给他返回的应该是两个信息啊！一个是用户名，<code>username</code> ，啊！还有一个是用户头像，<code>photo</code>，额！当然还有可能未登录，对吧！？啊！</p>
<p>假设用户登录了，每次刷新浏览器界面的时候，希望向后台发一个请求，然后后台给前端，浏览器传两个信息，用户的姓名，头像</p>
<p>还没有登录系统，默认返回第一名玩家的用户名和头像，不判断是否登录，直接返回第一名玩家的用户名和头像</p>
<p>这个函数怎么写：就是前端向后台发一个叫 <code>getinfo</code> ，后台接收到请求，向前端返回两个信息，分别是第一名玩家的用户名和头像</p>
<p>我们未来的网站是前后端分离的，他会跑在两个不同的端上，一个端是浏览器里，然后另外一个端是 <code>acapp</code> 里，包括大家的网站以后还有可能跑到小程序上，<code>app</code> 上，可能会有不同的端，在不同的端上执行不同的行为，在后端接收请求的时候，需要明确知道前端是内个端，对吧！？啊！你比如说我在这个 <code>web</code> 发送 <code>getinfo</code> 请求的话是一套处理逻辑，如果我在 <code>acapp</code> 里发送，向后端发送请求的话应该是另外一套处理逻辑，我们需要知道他是从内个端口过来的，对吧！？啊！好，那么为了实现这一点，啊！我们在需要对前端的代码做一个修改啊！大家先打开之前的 <code>js</code> 文件啊！应该能看到，应该没有没有被我头像挡住啊！</p>
<p><code>AcWingOS</code> 里有一些接口，可以调用，比如 <code>AcWing</code> 第三方登录的 <code>api</code> </p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240905145801655.png" alt="image-20240905145801655"></p>
<p>所有用户的信息全部放到 <code>settings</code> 里边，因为未来我们 <code>settings</code> 里是可以设置我们的信息的，比如修改用户名啊！修改头像啊！修改背景音乐啊！所有我们账号相关的信息都是在 <code>settings</code> 这个菜单里去修改的啊！因此我们所有和用户相关的信息我们全都放到 <code>settgins</code> 这这这一类里边，啊！当然这种规定是完全是业务上的规定啊！他这个技术上你都可以你可以可以写到任何的地方</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240905150446710.png" alt="image-20240905150446710"></p>
<h5 id="前端和后端一起写"><a href="#前端和后端一起写" class="headerlink" title="前端和后端一起写"></a><strong>前端和后端一起写</strong></h5><p>请求先用 <code>get</code> 表示，功能和 <code>post</code> 完全一样，但是有些时候 <code>get</code> 不太安全，自己学习的时候，尤其是初学者你可以全部先用 <code>get</code> ，这样的话你比较容易调试啊！（可以直接在浏览器里访问链接，发起请求），而且也比较容易配置，大家后面写熟之后，你可以再把后面一些 <code>get</code> 改成 <code>post</code> ，好吧！？啊！一般来讲 <code>get</code> 是只读数据，<code>post</code> 的话可以修改数据，但这都是人为的习惯，就是从技术上讲两者是可以相互替代的，<code>get</code> 会相对来说不安全一些</p>
<p>每一次需要写一个函数的时候，我们需要实现三个东西：</p>
<ul>
<li><code>views</code> ：具体的调用数据库的逻辑</li>
<li><code>urls</code> ：实现一个路由</li>
<li>前端（<code>js</code>）：实现一个调用</li>
</ul>
<h6 id="getinfo-函数：获取用户信息"><a href="#getinfo-函数：获取用户信息" class="headerlink" title="getinfo 函数：获取用户信息"></a><code>getinfo</code> 函数：获取用户信息</h6><p>图片可能会失效，会报下面的错误</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240908215749997.png" alt="image-20240908215749997"></p>
<ul>
<li><p>先写 <code>views</code> 处理数据库逻辑，当用户打开某个页面时使用 <code>ajax</code> 向后台相关 <code>urls</code> 发起网络请求，希望获取一些信息（<code>sqlite</code>）或者执行某些数据库操作，后端找到相关的处理逻辑（<code>views</code>）处理<strong>进行相应操作（<code>sqlite</code>）或者将</strong>获取的信息<strong>以某种形式</strong>（<code>JsonResponse</code>）返回给前端，前端进行一些数据处理之后在相关页面上呈现给用户</p>
<p><code>getinfo.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">getinfo_acapp</span>(<span class="params">request</span>):</span><br><span class="line">    player = Player.objects.<span class="built_in">all</span>()[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># JsonResponse 返回一个字典</span></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">        <span class="string">&quot;result&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">        <span class="string">&quot;username&quot;</span>: player.user.username,</span><br><span class="line">        <span class="string">&#x27;photo&#x27;</span>: player.photo,</span><br><span class="line">    &#125;)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接返回第一名玩家的信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getinfo_web</span>(<span class="params">request</span>):</span><br><span class="line">    player = Player.objects.<span class="built_in">all</span>()[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># JsonResponse 返回一个字典</span></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">        <span class="string">&quot;result&quot;</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">        <span class="string">&quot;username&quot;</span>: player.user.username,</span><br><span class="line">        <span class="string">&#x27;photo&#x27;</span>: player.photo,                                                                                                                                </span><br><span class="line">    &#125;)  </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getinfo</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 前端调用时，自己定义的传入参数 platform</span></span><br><span class="line">    <span class="comment"># 前端怎么传，后端怎么接</span></span><br><span class="line">    platform = request.get(<span class="string">&#x27;platform&#x27;</span>)</span><br><span class="line">    <span class="comment"># 做一个路由</span></span><br><span class="line">    <span class="keyword">if</span> platform == <span class="string">&quot;ACAPP&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> getinfo_acapp(request)</span><br><span class="line">    <span class="comment"># 从 web 端传入的</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> getinfo_web(request)</span><br></pre></td></tr></table></figure>
</li>
<li><p>写路由 <code>urls</code></p>
<p><code>urls/settings/getinfo</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> game.views.settings.getinfo <span class="keyword">import</span> getinfo</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># 函数名叫什么，就起个什么名就可以啦啊！</span></span><br><span class="line">    <span class="comment"># name 起成路径名</span></span><br><span class="line">    path(<span class="string">&quot;getinfo/&quot;</span>, getinfo, name=<span class="string">&quot;settings_getinfo&quot;</span>),                                                                                                       </span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240905154231198.png" alt="image-20240905154231198"></p>
<p>直接在浏览器里访问链接——访问域名加 <code>/settings/getinfo</code> ，可以获取到第一个用户的用户名和头像链接</p>
<p><code>DEBUG</code> 模式改成 <code>True</code> ，当后端报错的时候可以看到提示信息</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240905154520991.png" alt="image-20240905154520991"></p>
</li>
<li><p><code>js</code> </p>
<ul>
<li><p>调整 <code>js</code> 结构</p>
</li>
<li><p>在用户打开网页的时候需要先判断一下用户有没有登录，我们需要在菜单界面之前先加一个新的界面——登录界面，<code>menu</code> 界面默认先关闭，需要先进行登录</p>
</li>
<li><p>登录用户的信息和逻辑放到了每个部分（<code>views</code> <code>urls</code> <code>js</code> <code>image</code> <code>css</code> <code>audio</code> <code>viedos</code> ）的 <code>settings</code> 逻辑区分里边，因此 <code>js</code>也需要在 <code>menu</code> 里创建 <code>settings</code> 逻辑分区</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240905161030232.png" alt="image-20240905161030232"></p>
</li>
<li><p>创建 <code>getinfo</code> 函数，将信息保存下来，然后将<strong>头像图片渲染</strong>到绘制的圈中</p>
<ul>
<li><p>将信息存到 <code>settings</code> 里边</p>
</li>
<li><p>在 <code>players</code> 里将头像画出来，只给自己画，不用给敌人画，每一帧进行绘画；由于跨域问题，本地不能获取云端图片信息，本地不再写代码，只到云端写代码，更正——直接在与后端交互的代码中赋值，然后可以继续在本地写代码</p>
<p><code>settings</code> 中获取用户名和头像需要请求后端</p>
</li>
<li><p>数据库的头像改变，前端绘制的玩家头像就会改变，未来每个用户登录的时候都是自己的头像，这个信息未来会授权给第三方的应用</p>
</li>
<li><p>在 <code>web</code> 端登录状态，只有登录之后才可以获取信息，退出的话就获取不到了；在 <code>acapp</code> 端的话可以直接获取，因为我们不同的端口用的不同的方法，在 <code>web</code> 里会判断是不是登录，在 <code>acapp</code> 里目前没有判断，因为 <code>acapp</code> 里未来是用第三方授权，还没有讲</p>
<ul>
<li><p>登录使用的是 <code>django</code> 自带的信息管理系统，前端请求时，使用 <code>django</code> 用户管理的 <code>api</code> 进行账户登录验证，如果登录返回用户信息，否则返回未登录提示信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">直接返回第一名玩家的信息</span></span><br><span class="line">def getinfo_web(request):</span><br><span class="line">    user = request.user</span><br><span class="line">    if not user.is_authenticated:</span><br><span class="line">        return JsonResponse(&#123;</span><br><span class="line">            &#x27;result&#x27;: &#x27;未登录&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">    else:</span><br><span class="line"></span><br><span class="line">        player = Player.objects.all()[0]</span><br><span class="line">        # JsonResponse 返回一个字典</span><br><span class="line">        return JsonResponse(&#123;</span><br><span class="line">            &quot;result&quot;: &quot;success&quot;,</span><br><span class="line">            &quot;username&quot;: player.user.username,</span><br><span class="line">            &#x27;photo&#x27;: player.photo,</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ajax-、json-之类的技术"><a href="#ajax-、json-之类的技术" class="headerlink" title="ajax 、json 之类的技术"></a><code>ajax</code> 、<code>json</code> 之类的技术</h3><p>已经讲完啦，同学们啊！这个<code>ajax</code> 和 <code>json</code> 你会发现，就这样，就模仿就可以啊！你看我怎么写，你就怎么抄就行了啊！你把你你抄的时候，你把你的 <code>url</code> 换成你自己的 <code>url</code> ，把这个数据换成你自己的数据，把这个返回的回调函数换成你自己的回调函数就可以了，没什么难点啊！对吧！？学前端就这样学啊！他跟学他跟学算法不一样，学算法的话大家需要把算法理解清楚再去做题，对吧！？啊！前端的话是边看边学就可以，边看边模仿就可以了，啊！好，那么这样我们就可以获取我们的这个用户的信息了，对吧！？啊！就可以成功获取用户信息了啊！这个就是会用就可以啦！前端的东西就是会用就可以，啊！会抄就可以了，会模仿就可以了。前端，这个接下来给大家讲的这个前端就没有那么无聊了啊！因为他这个是所见即所得的。</p>
<h3 id="django-下载时，软件源修改"><a href="#django-下载时，软件源修改" class="headerlink" title="django 下载时，软件源修改"></a><code>django</code> 下载时，软件源修改</h3><h4 id="清华源"><a href="#清华源" class="headerlink" title="清华源"></a>清华源</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install catboost -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<h4 id="豆瓣源"><a href="#豆瓣源" class="headerlink" title="豆瓣源"></a>豆瓣源</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install catboost -i https://pypi.douban.com/simple</span><br></pre></td></tr></table></figure>

<h3 id="django-写项目的经验"><a href="#django-写项目的经验" class="headerlink" title="django 写项目的经验"></a><code>django</code> 写项目的经验</h3><p>在Django项目中，您可以手动管理Django的版本，也可以使用<code>requirements.txt</code>文件或<code>pip freeze</code>命令来管理。这些方法通常被称为依赖管理。</p>
<ol>
<li><strong>手动管理</strong>：如果您不使用<code>requirements.txt</code>文件或<code>pip freeze</code>命令，您需要手动下载Django的特定版本，并将其安装在您的Python环境中。这种方法需要您手动处理版本更新和兼容性问题。</li>
<li><strong>使用requirements.txt</strong>：<code>requirements.txt</code>文件是一个文本文件，其中列出了项目所需的所有Python包及其版本。在您的项目中，您可以创建一个<code>requirements.txt</code>文件，并添加Django的版本号。然后，您可以使用<code>pip install -r requirements.txt</code>命令来安装这些依赖。这种方法可以帮助您轻松地管理项目的依赖关系，并确保所有开发人员都使用相同的版本。</li>
<li><strong>使用pip freeze</strong>：<code>pip freeze</code>命令会列出当前环境中安装的所有包及其版本。您可以使用<code>pip freeze &gt; requirements.txt</code>命令将当前环境中的依赖关系保存到<code>requirements.txt</code>文件中。然后，您可以使用<code>pip install -r requirements.txt</code>命令在其他环境中安装这些依赖。这种方法可以帮助您快速创建和共享<code>requirements.txt</code>文件。</li>
</ol>
<p>在实际项目中，通常建议使用<code>requirements.txt</code>文件或<code>pip freeze</code>命令来管理Django的版本，以便于团队协作和版本控制。手动管理可能会导致版本冲突和兼容性问题，因此不是最佳实践。</p>
<h3 id="快捷操作"><a href="#快捷操作" class="headerlink" title="快捷操作"></a>快捷操作</h3><h4 id="vim-快捷注释"><a href="#vim-快捷注释" class="headerlink" title="vim 快捷注释"></a><code>vim</code> 快捷注释</h4><ul>
<li><h3 id="快速注释"><a href="#快速注释" class="headerlink" title="快速注释"></a>快速注释</h3><ol>
<li>按 <code>ESC</code>进入命令行模式；</li>
<li><code>ctrl+v</code>进入块选择模式；</li>
<li>操作 <code>k</code>和 <code>j</code>进行上下行选择；</li>
<li>按大写 <code>I</code>进入插入模式，输入注释符 <code>//</code>或 <code>#</code>(shell脚本注释符)；</li>
<li>最后按下 <code>ESC</code>即可完成注释。</li>
</ol>
<h3 id="取消注释"><a href="#取消注释" class="headerlink" title="取消注释"></a>取消注释</h3><ol>
<li>按 <code>ESC</code>进入命令行模式；</li>
<li><code>ctrl+v</code>进入块选择模式；</li>
<li>操作 <code>k</code>和 <code>j</code>进行上下行选择,还可以操作 <code>h</code>和 <code>l</code>键进行左右控制；</li>
<li>按 <code>d</code>键删除注释符；</li>
<li>最后按下 <code>ESC</code>即可完成取消注释。</li>
</ol>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><ul>
<li>大写 <code>I</code>为在光标处插入;</li>
<li>利用Visual-Block模式进行列选择，进而便捷地操作代码注释和取消注释。</li>
</ul>
</li>
</ul>
<h3 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h3><ul>
<li><h4 id="nginx-配置跨域，允许-https-127-0-0-1-5500-跨域请求信息"><a href="#nginx-配置跨域，允许-https-127-0-0-1-5500-跨域请求信息" class="headerlink" title="nginx 配置跨域，允许 https://127.0.0.1:5500 跨域请求信息"></a><code>nginx</code> 配置跨域，允许 <code>https://127.0.0.1:5500</code> 跨域请求信息</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">user</span> www-data;</span><br><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">pid</span> /run/nginx.pid;</span><br><span class="line"><span class="attribute">include</span> /etc/nginx/modules-enabled/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">768</span>;</span><br><span class="line">    <span class="comment"># multi_accept on;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">sendfile</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nopush</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span> <span class="number">65</span>;</span><br><span class="line">    <span class="attribute">types_hash_max_size</span> <span class="number">2048</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span> application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>; <span class="comment"># Dropping SSLv3, ref: POODLE</span></span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/access.log;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/sites-enabled/*;</span><br><span class="line"></span><br><span class="line">     <span class="section">server</span> &#123;</span><br><span class="line">         <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">         <span class="attribute">server_name</span> app7116.acapp.acwing.com.cn;</span><br><span class="line">         <span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> https://<span class="variable">$&#123;server_name&#125;</span><span class="variable">$1</span> <span class="literal">permanent</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">        <span class="attribute">server_name</span> app7116.acapp.acwing.com.cn;</span><br><span class="line">        <span class="attribute">ssl_certificate</span>   cert/acapp.pem;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span>  cert/acapp.key;</span><br><span class="line">        <span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>;</span><br><span class="line">        <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">        <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line">        <span class="attribute">access_log</span> /var/log/nginx/access.log;</span><br><span class="line">        <span class="attribute">error_log</span> /var/log/nginx/<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">client_max_body_size</span> <span class="number">10M</span>;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">include</span> /etc/nginx/uwsgi_params;</span><br><span class="line">            <span class="attribute">uwsgi_pass</span> <span class="number">127.0.0.1:8000</span>;</span><br><span class="line">            <span class="attribute">uwsgi_read_timeout</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;OPTIONS&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Max-Age&#x27;</span> <span class="number">86400</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Content-Type&#x27;</span> <span class="string">&#x27;text/html; charset=utf-8&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Content-Length&#x27;</span> <span class="number">0</span>;</span><br><span class="line">                <span class="attribute">return</span> <span class="number">204</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;PUT&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;DELETE&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="section">location</span> /static &#123;</span><br><span class="line">            <span class="attribute">alias</span> /home/acs/acapp/static/;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;OPTIONS&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Max-Age&#x27;</span> <span class="number">86400</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Content-Type&#x27;</span> <span class="string">&#x27;text/html; charset=utf-8&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Content-Length&#x27;</span> <span class="number">0</span>;</span><br><span class="line">                <span class="attribute">return</span> <span class="number">204</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;PUT&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="section">location</span> /media &#123;</span><br><span class="line">            <span class="attribute">alias</span> /home/acs/acapp/media/;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;OPTIONS&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Max-Age&#x27;</span> <span class="number">86400</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Content-Type&#x27;</span> <span class="string">&#x27;text/html; charset=utf-8&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Content-Length&#x27;</span> <span class="number">0</span>;</span><br><span class="line">                <span class="attribute">return</span> <span class="number">204</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;PUT&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;http://127.0.0.1:5500&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="string">&#x27;GET, PUT, OPTIONS, POST, DELETE&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Amz-Date&#x27;</span>;</span><br><span class="line">                <span class="attribute">add_header</span> <span class="string">&#x27;Access-Control-Expose-Headers&#x27;</span> <span class="string">&#x27;Content-Length,Content-Range&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="section">location</span> /wss &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://127.0.0.1:5015;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"></span><br><span class="line">            <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="配置-django-，允许本地-127-0-0-1-5500-跨域请求信息"><a href="#配置-django-，允许本地-127-0-0-1-5500-跨域请求信息" class="headerlink" title="配置 django ，允许本地 127.0.0.1:5500 跨域请求信息"></a>配置 <code>django</code> ，允许本地 <code>127.0.0.1:5500</code> 跨域请求信息</h4><p><a target="_blank" rel="noopener" href="https://www.google.com/search?q=django+%E8%AE%BE%E7%BD%AE%E5%89%8D%E7%AB%AF%E5%8F%AF%E4%BB%A5%E8%B7%A8%E5%9F%9F&oq=django+%E8%AE%BE%E7%BD%AE%E5%89%8D%E7%AB%AF%E5%8F%AF%E4%BB%A5%E8%B7%A8%E5%9F%9F&gs_lcrp=EgZjaHJvbWUyBggAEEUYOTIHCAEQIRigATIHCAIQIRigAdIBCTE2MzE0ajBqN6gCALACAA&sourceid=chrome&ie=UTF-8">百度搜索 django 跨域配置</a></p>
<h5 id="跨域报错，只使用-django-和-前端-ajax-发生跨域报错（本地访问云服务上的-django-项目上的-web-服务器），根据上面的百度搜索设置可以解决这个跨域问题"><a href="#跨域报错，只使用-django-和-前端-ajax-发生跨域报错（本地访问云服务上的-django-项目上的-web-服务器），根据上面的百度搜索设置可以解决这个跨域问题" class="headerlink" title="跨域报错，只使用 django 和 前端 ajax 发生跨域报错（本地访问云服务上的 django 项目上的 web 服务器），根据上面的百度搜索设置可以解决这个跨域问题"></a>跨域报错，只使用 <code>django</code> 和 前端 <code>ajax</code> 发生跨域报错（本地访问云服务上的 <code>django</code> 项目上的 <code>web</code> 服务器），根据上面的百度搜索设置可以解决这个跨域问题</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240906012430404.png" alt="image-20240906012430404"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">web.html:1 Access to XMLHttpRequest at &#x27;http://139.196.167.236:8001/polls/&#x27; from origin &#x27;http://127.0.0.1:5500&#x27; has been blocked by CORS policy: No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource.</span><br><span class="line">game.js:1178 &#123;readyState: 0, getResponseHeader: ƒ, getAllResponseHeaders: ƒ, setRequestHeader: ƒ, overrideMimeType: ƒ, …&#125;</span><br><span class="line">jquery-3.3.1.min.js:2         </span><br><span class="line">GET http://139.196.167.236:8001/polls/ net::ERR_FAILED 200 (OK)</span><br><span class="line">send @ jquery-3.3.1.min.js:2</span><br><span class="line">ajax @ jquery-3.3.1.min.js:2</span><br><span class="line">getinfo @ game.js:1159</span><br><span class="line">start @ game.js:1151</span><br><span class="line">AcGameSettings @ game.js:1146</span><br><span class="line">AcGame @ game.js:1214</span><br><span class="line">(anonymous) @ web.html:17</span><br><span class="line">l @ jquery-3.3.1.min.js:2</span><br><span class="line">c @ jquery-3.3.1.min.js:2</span><br><span class="line">setTimeout (async)</span><br><span class="line">(anonymous) @ jquery-3.3.1.min.js:2</span><br><span class="line">u @ jquery-3.3.1.min.js:2</span><br><span class="line">fireWith @ jquery-3.3.1.min.js:2</span><br><span class="line">fire @ jquery-3.3.1.min.js:2</span><br><span class="line">u @ jquery-3.3.1.min.js:2</span><br><span class="line">fireWith @ jquery-3.3.1.min.js:2</span><br><span class="line">ready @ jquery-3.3.1.min.js:2</span><br><span class="line">_ @ jquery-3.3.1.min.js:2</span><br><span class="line">fiveserver.js:1 [Five Server] connecting...</span><br><span class="line">fiveserver.js:1 [Five Server] connected.</span><br></pre></td></tr></table></figure>

<h5 id="acapp-项目使用-acwing-提供的-nginx-配置，将-Access-Control-Allow-Origin-设置为-http-127-0-0-1-5500跨域报错信息"><a href="#acapp-项目使用-acwing-提供的-nginx-配置，将-Access-Control-Allow-Origin-设置为-http-127-0-0-1-5500跨域报错信息" class="headerlink" title="acapp 项目使用 acwing 提供的 nginx 配置，将 Access-Control-Allow-Origin 设置为 http://127.0.0.1:5500跨域报错信息"></a><code>acapp</code> 项目使用 <code>acwing</code> 提供的 <code>nginx</code> 配置，将 <code>Access-Control-Allow-Origin</code> 设置为 <code>http://127.0.0.1:5500</code>跨域报错信息</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240906014531477.png" alt="image-20240906014531477"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">web.html:1 Access to XMLHttpRequest at &#x27;https://app7116.acapp.acwing.com.cn/settings/getinfo/?platform=WEB&#x27; from origin &#x27;http://127.0.0.1:5500&#x27; has been blocked by CORS policy: The &#x27;Access-Control-Allow-Origin&#x27; header has a value &#x27;https://www.acwing.com&#x27; that is not equal to the supplied origin.</span><br><span class="line">game.js:1180 &#123;readyState: 0, getResponseHeader: ƒ, getAllResponseHeaders: ƒ, setRequestHeader: ƒ, overrideMimeType: ƒ, …&#125;</span><br><span class="line">jquery-3.3.1.min.js:2 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GET https://app7116.acapp.acwing.com.cn/settings/getinfo/?platform=WEB net::ERR_FAILED 200 (OK)</span><br><span class="line">send @ jquery-3.3.1.min.js:2</span><br><span class="line">ajax @ jquery-3.3.1.min.js:2</span><br><span class="line">getinfo @ game.js:1159</span><br><span class="line">start @ game.js:1151</span><br><span class="line">AcGameSettings @ game.js:1146</span><br><span class="line">AcGame @ game.js:1216</span><br><span class="line">(anonymous) @ web.html:17</span><br><span class="line">l @ jquery-3.3.1.min.js:2</span><br><span class="line">c @ jquery-3.3.1.min.js:2</span><br><span class="line">setTimeout (async)</span><br><span class="line">(anonymous) @ jquery-3.3.1.min.js:2</span><br><span class="line">u @ jquery-3.3.1.min.js:2</span><br><span class="line">fireWith @ jquery-3.3.1.min.js:2</span><br><span class="line">fire @ jquery-3.3.1.min.js:2</span><br><span class="line">u @ jquery-3.3.1.min.js:2</span><br><span class="line">fireWith @ jquery-3.3.1.min.js:2</span><br><span class="line">ready @ jquery-3.3.1.min.js:2</span><br><span class="line">_ @ jquery-3.3.1.min.js:2</span><br><span class="line">fiveserver.js:1 [Five Server] connecting...</span><br><span class="line">fiveserver.js:1 [Five Server] connected</span><br></pre></td></tr></table></figure>

<h5 id="acapp-项目使用-acwing-提供的-nginx-配置，将-Access-Control-Allow-Origin-设置为-http-127-0-0-1-5500跨域报错信息，并且配置-django-跨域后的跨域问题报错"><a href="#acapp-项目使用-acwing-提供的-nginx-配置，将-Access-Control-Allow-Origin-设置为-http-127-0-0-1-5500跨域报错信息，并且配置-django-跨域后的跨域问题报错" class="headerlink" title="acapp 项目使用 acwing 提供的 nginx 配置，将 Access-Control-Allow-Origin 设置为 http://127.0.0.1:5500跨域报错信息，并且配置 django 跨域后的跨域问题报错"></a><code>acapp</code> 项目使用 <code>acwing</code> 提供的 <code>nginx</code> 配置，将 <code>Access-Control-Allow-Origin</code> 设置为 <code>http://127.0.0.1:5500</code>跨域报错信息，并且配置 <code>django</code> 跨域后的跨域问题报错</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240906020742347.png" alt="image-20240906020742347"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Access to XMLHttpRequest at &#x27;https://app7116.acapp.acwing.com.cn/settings/getinfo/?platform=WEB&#x27; from origin &#x27;http://127.0.0.1:5500&#x27; has been blocked by CORS policy: The &#x27;Access-Control-Allow-Origin&#x27; header contains multiple values &#x27;http://127.0.0.1:5500, https://www.acwing.com&#x27;, but only one is allowed.</span><br><span class="line">game.js:1180 &#123;readyState: 0, getResponseHeader: ƒ, getAllResponseHeaders: ƒ, setRequestHeader: ƒ, overrideMimeType: ƒ, …&#125;</span><br><span class="line">jquery-3.3.1.min.js:2 </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">GET https://app7116.acapp.acwing.com.cn/settings/getinfo/?platform=WEB net::ERR_FAILED 200 (OK)</span><br><span class="line">send @ jquery-3.3.1.min.js:2</span><br><span class="line">ajax @ jquery-3.3.1.min.js:2</span><br><span class="line">getinfo @ game.js:1159</span><br><span class="line">start @ game.js:1151</span><br><span class="line">AcGameSettings @ game.js:1146</span><br><span class="line">AcGame @ game.js:1216</span><br><span class="line">(anonymous) @ web.html:17</span><br><span class="line">l @ jquery-3.3.1.min.js:2</span><br><span class="line">c @ jquery-3.3.1.min.js:2</span><br><span class="line">setTimeout (async)</span><br><span class="line">(anonymous) @ jquery-3.3.1.min.js:2</span><br><span class="line">u @ jquery-3.3.1.min.js:2</span><br><span class="line">fireWith @ jquery-3.3.1.min.js:2</span><br><span class="line">fire @ jquery-3.3.1.min.js:2</span><br><span class="line">u @ jquery-3.3.1.min.js:2</span><br><span class="line">fireWith @ jquery-3.3.1.min.js:2</span><br><span class="line">ready @ jquery-3.3.1.min.js:2</span><br><span class="line">_ @ jquery-3.3.1.min.js:2</span><br><span class="line">fiveserver.js:1 [Five Server] connecting...</span><br><span class="line">fiveserver.js:1 </span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="实现登录界面和注册界面"><a href="#实现登录界面和注册界面" class="headerlink" title="实现登录界面和注册界面"></a>实现登录界面和注册界面</h4><p>注册的话，哎呀！再来一遍啊！再来一遍！同学们，额嗯！当然咱们作为懒人，是不可能完全重新来一遍的啊！我们直接把这个登录的复制过了，<code>copy</code> 一份，改改就可以了啊！而且不知道大家有没有注意到啊！我给他起名的时候，我们这个，这里面的类名跟 <code>register</code> 和 <code>login</code> 没有关系，所以说这个刚刚 <code>login</code> ，刚刚登录里用的格式注册同样可以用啊！非常的方便啊！改改名字就可以了，好，啊！我们可以发现我们的这个注册界面啊！瞬间就写完了对不对！？啊！非常的方便，啊！只要有了登录，注册非常容易些，直接就写完了，对不对！？写完了啊！</p>
<h5 id="登录界面"><a href="#登录界面" class="headerlink" title="登录界面"></a>登录界面</h5><p>游戏地图是 <code>canvas</code>，可以通过属性设置；设置界面的背景是 <code>html</code> 元素，一般是 <code>img</code> </p>
<p>登录和注册一开始是隐藏的，需要内个渲染内个就可以了</p>
<p><code>padding</code> 不影响高度，<code>margin</code> 会影响高度</p>
<p>大家可以发现前端不容易犯困，对吧！？但是前端其实比较比较浪费时间啊！比较费事儿啊！</p>
<p>直接把 <code>acwing</code> 的登录窗口样式复制过来，哈哈哈！这个你复制过来应该应该不太行啊！因为 <code>acwing</code> 的那个里面用了好多库，你要复制过来的话需要把内些库搞过来 </p>
<p>大家可以看到这个密码跟输入框的区别啊！就是输入框的话你一输是这个这个能看到明文的啊！密码的话是你一输看不到明文，对吧！？啊！啊！就这个区别</p>
<p>我们还需要第三方登录，对吧！？因为因为额额！这个大家对于一个陌生网站，其实额！额！这个啧！不一定会信任网站，对吧！？啊！他不一定会直接注册，对不对！？啊！再一个的话就是大家你会发现这样的注册的话是没有头像的，啊！所有人都是默认头像的话会很不好看，所以说这个我，所以说大家也可以选择用第三方登录，那么第三方登录的话可以直接拿到用户的昵称，拿到用户的这个这个头像啊！而且用户注册起来也比较方便，你比如说你要注册的话你需要点用户名啊！输入密码，然后输入错了还需要重新改，但是第三方授权的话是点一下第三方授权，跳转出来页面之后点授权他就可以自动注注册并且登录，一键就可以操作，更容易获客啊！好，那么然后我们需要去画一个第三方登录，对吧！？我们这里以 <code>acwing</code> 登录为例啊！所有第三方登录的，都是一样的，都是用 <code>auth2</code> 协议，应该是 <code>open auth2</code> 协议，都是一样的啊！我们这里以 <code>acwing</code> 第三方授权登录为例，因为未来是额嗯！未来是，因为咱们这个项目的话是两个端，对吧！？一个 <code>web</code> 端，一个 <code>acapp</code> 端，那么 <code>acapp</code> 的话肯定是用 <code>acwing</code> 的授权登录，对不对！？啊！好，那么这里的话为了让大家这个图标好看一些，我们在讲义里给大家，给大家提供了 <code>acwing</code> 的比较好看的 <code>logo</code> 啊！大家可以直接拿来用，啧！对吧！？啊！这个 <code>logo</code> 啊！这个 <code>logo</code> 的地址在这个地方，啊！大家直接把这链接下载下来就可以啦！</p>
<p>图片使用下面的 <code>css</code> 代码不能居中</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br></pre></td></tr></table></figure>

<p>可能是我们前面两个，可能是前面两行是这个这个 <code>inline</code> 的缘故，我们把他加个回车，加回车是一个很好的调试格式的一个方式啊！哎！这样就对了啊！加回车就可以了，对！<code>inline</code> 的话可能会有 <code>bug</code> ，<code>inline</code> 的话他他经常会影响下一行，那么你为了保为了防止 <code>inline</code> 影响下一行的话你可以加个回车，这个 <code>html</code> 里的回车就是 <code>&lt;br&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-login&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-title&quot;</span>&gt;</span></span><br><span class="line">            登录</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-password&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-submit&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-error-messages&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-option&quot;</span>&gt;</span></span><br><span class="line">            注册</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-acwing-login&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://app7116.acapp.acwing.com.cn/static/image/settings/acwing_logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;acwing_login&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            	AcWing 一键登录</span><br><span class="line">        	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-register&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-title&quot;</span>&gt;</span></span><br><span class="line">            注册</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-password&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-confirm-password&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请确认密码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-submit&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-error-messages&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ac-game-settings-option&quot;</span>&gt;</span></span><br><span class="line">            登录</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 登录界面</span></span><br><span class="line"><span class="comment">    宽度为20vw，高度为21vh，相对定位，顶部距离为40vh，左边距离为19vw，</span></span><br><span class="line"><span class="comment">    使用flex布局，方向为列，主轴为空间，间距为10px</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.ac-game-settings-login</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20vw</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">41vh</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50vh</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50vw</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    注册界面</span></span><br><span class="line"><span class="comment">    宽度为20vw，高度为21vh，相对定位，顶部距离为40vh，左边距离为19vw，</span></span><br><span class="line"><span class="comment">    使用flex布局，方向为列，主轴为空间，间距为10px</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.ac-game-settings-register</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20vw</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">41vh</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50vh</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50vw</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">32</span>, <span class="number">90</span>, <span class="number">225</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">3vh</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">2vh</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">2vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-username</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;    </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">7vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-password</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;    </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">7vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-confirm-password</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;    </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">7vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-item</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-item</span> &gt; <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">3vh</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-submit</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">7vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-item</span> &gt; <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">3vh</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="comment">/* background-color: rgba(235, 191, 146, 0.5); */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#4CAF50</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-error-messages</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.8em</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">1vw</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-option</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.5vh</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">1vw</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 第三方登录</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.ac-game-settings-acwing-login</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">2vh</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-acwing-login</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;    </span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ac-game-settings-acwing-login</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.5vh</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>写登录界面时一个一个的将元素添加到页面上，然后使用布局将元素放到想要放的位置上，最后根据不同情况呈现不同的 <code>html</code> 元素；</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240909151320342.png" alt="image-20240909151320342"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240909151248339.png" alt="image-20240909151248339"></p>
<h5 id="注册界面"><a href="#注册界面" class="headerlink" title="注册界面"></a>注册界面</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240909153428918.png" alt="image-20240909153428918"></p>
<p>写点击按钮之后的动作，其实就是实现几个函数</p>
<h4 id="register-相关函数及路由-views-urls-js"><a href="#register-相关函数及路由-views-urls-js" class="headerlink" title="register 相关函数及路由 views urls js"></a>register 相关函数及路由 views urls js</h4><p>在登录界面点击注册跳到注册界面，在注册界面点击登录跳到登录界面</p>
<h4 id="专门写一个函数用来绑定事件"><a href="#专门写一个函数用来绑定事件" class="headerlink" title="专门写一个函数用来绑定事件"></a>专门写一个函数用来绑定事件</h4><p><code>add_listening_events</code> 监听 登录页眉和注册页面的点击事件</p>
<p>前端的交互逻辑写完啦！</p>
<p>点击登录页面的登录按钮向后端发起请求，实现用户登录；点击 <code>acwing logo</code>，使用 <code>acwing</code> 进行登录；点击注册跳转到注册页面</p>
<p>点击注册页面的注册按钮向后端发起请求，实现用户注册，点击登录跳转到登录页面 </p>
<h5 id="写登录后端"><a href="#写登录后端" class="headerlink" title="写登录后端"></a>写登录后端</h5><p>我们，这个要涉及到后端，对吧！？啊！我要去访问我后端数据库，看我用户名、密码是不是正确的，啊！那么这样的话我们就需要用到后端的数据，那么用到后端数据的话我们就需要和后端交互，啊！那么和后端交互的话就需要老三样，对吧！？啊！先写 <code>views</code> ，<code>views</code> 是处理数据的，对不对！？啊！然后再写 <code>urls</code> ，这个是写这个路由的，就是内个链接对应内个函数啊！然后再写 <code>js</code> ，就是前端怎么调用，好，我们来试一下啊！额嗯！夜宵就不用点了啊！然后，额嗯！我们在这个 <code>settings</code> 里，首先创建一个新的文件，啊！每一个文件，每一个每一个操作我一般喜欢喜欢定义一个文件啊！定义一个文件，这样为了调试的时候比较好调啊！额嗯！吭！</p>
<ul>
<li><p><code>views</code>：<code>login.py</code></p>
<p><code>django views</code> 头文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> game.models.player.player <span class="keyword">import</span> Player</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br></pre></td></tr></table></figure>
</li>
<li><p>一开始全用 <code>GET</code> 函数，刚开始学的时候，用 <code>GET</code> 好调试，等你后面学完之后想改成 <code>PUT</code> 的话你再改~，啊！但是 <code>PUT</code> 的话比较难配置啊！因为这个我们如果大家，大家网站如果在 <code>acwing</code> ，未来会跑到 <code>acwing</code> 上，作为 <code>acapp</code> 跑，<code>POST</code> 的话跨域比较难配置</p>
</li>
<li><p>我们数据库里没有存密码，对吧！？他其实存的是密码的哈希值，啊！所以你不能直接查数据库啊！你要去找到这个用户名对应的这个这个数据，然后看一下数据里存的密码的哈希值跟我们哈希之后的值是不是相等，他比的是两个哈希值是不是相等</p>
</li>
<li><p>在 <code>web</code> 里的话是直接将信息存到这个存到 <code>cookie</code> 里，然后未来在 <code>acapp</code> 里登录的时候更加安全一些，他这个登录信息回存到内存里，啊！就是你只要一退出就注销了，每次打开回重新登录，但是每次打开重新登录的时候其实是用户，他其实是完全自动化操作的，用户每个月只要授权一次就可以，啊！所以说，额嗯！用户操作起来非常流畅，而且会更加安全一些，然后在浏览器里的话他是存到 <code>cookie</code> 里，这个也还可以，也没有那么不安全</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240909205335392.png" alt="image-20240909205335392"></p>
<ul>
<li>登录成功就刷新了啊！是因为我们<strong>一旦登录成功</strong>，我们就会在我们的 <code>cookie</code> 里<strong>记录下已经登录成功了</strong>那么我们再下次打开这个网址他就是一个登录成功的状态，啊！所以我们刷新完之后他就会变成一个<strong>登录成功的状态</strong>，啊！那么他就会在执行 <code>getinfo</code> 的时候成功的获取信息，他就会成功的加载我们的菜单界面，可以吧！？啊！他成功之后，我们直接刷新他啊！这个直接刷新的原因是因为我们未来授，额！这个这个这个第三方授权的时候都是直接刷新啊！为了保护我们的写法统一啊！所有这样，这里的话就是只要登录成功或者注册成功直接刷新就可以了啊！</li>
</ul>
</li>
</ul>
<p>直接使用第一名玩家的信息登录，没有验证登录；<code>web</code> 端验证登录；下节课将第三方授权登录，在 <code>acwing</code> 里登录，接入 <code>acwing</code> 一键登录：这个一键登录是非常方便的，对用户来说，他只要点一下，授权，一个月内只要点一次就可以，下次直接点一下就登录好了；在 <code>acapp</code> 里访问的时候也是会非常的方便，打开应用之后会自动向用户获取登录权限，用户授权之后，就自动注册、登录好了，不需要写登录页面，还有注册页面，用户也不需要自己去填用户名和密码；用户每次授权的时候，为期一个月，一个月内只要授权过 <code>app</code> ，下次再向用户申请权限的时候就会自动登录好，非常的方便，好吧！？啊！</p>
<p>我们下节课就是将第三方授权登录，大家大家可以看到目前这种这种登录方式的话是有弊端的啊！一方面的话是一个陌生的用户来到你的网站之后，对吧！？啊！来到来到这个网站之后，他不一定信任这个网站，所以他不一定提供一些有效信息，啧！啊！然后，第二个的话是没有头像，对吧！？啊！这种登录方式的话是没有头像的，而且步骤比较繁琐啊！比较容易劝退用户，然后第三方授权登录的话是比较方便的啊！好，那么，而且可以增加一个信任对吧！？这个这个这个如果是 <code>acapp</code> 里打开的这个应用的话，那么 <code>acwing</code> 内部的，那么我们这 <code>acwing</code> 社区内部的同学打开 <code>app</code> 的时候相对来说就会更加信任这个这个，额！就会更加信任这个 <code>app</code> 对吧！？那么授权的时候就更加容易授权啊！就更容易引流。额嗯！然后，然后我给大家把代码存一下，大家课后的时候可以过来参考一下啊！</p>
<p>授权登录的话就可以获得用户的头像啦！</p>
<p>数据库的话会一直改啊！因为其他同学访问数据库的话，那你这个数据库他其实会改的呀！其他同学访问数据库啊！访问数据库的话，你的数据库其实会改的啊！所有数据库经常变是没有关系的，啊！</p>
<h4 id="退出界面"><a href="#退出界面" class="headerlink" title="退出界面"></a>退出界面</h4><p><code>web</code> 端退出，点击按钮；<code>acapp</code> 端退出，关闭窗口</p>
<h3 id="7、实现-web端AcWing一键登录"><a href="#7、实现-web端AcWing一键登录" class="headerlink" title="7、实现 web端AcWing一键登录"></a>7、实现 web端AcWing一键登录</h3><p>用户名密码登录写起来一方面大家写起来很麻烦，你需要写很多前端，啊！然后，另外用户自己去注册的时候也很麻烦对吧！？举个例子啊！比如说这个大家自己去注册的时候也很麻烦，对不对！？需要想一个炫酷的名字啊！然后，还需要，还需要写一个不重复的密码，对不对！？大家就发现就非常的蛋疼啊！额！而且很多地方要求额！实名制，对吧！？就是大家需要去验证邮箱和这个手机号，那就更难写了，队不对！？大家一方面更难写了，另外一方面的话，额！你的用户来到你的网站，你会发现，哎呀！好蛋疼，完全不想注册，对不对！？啊！那么解决这种问题的一个方法就是第三方授权登录，额嗯！举个例子啊！比如说大家退出之后啊！啧！这个额嗯！所有第三方授权登录的原理都是一样的啊！包括实现过程也是都大同小异，额！包括这个 <code>QQ</code>，微信额！授权登录啊！其实原理都是一样的啊！然后我们这节课是用 <code>acwing</code> 一键授权登录来给大家讲解好吧！？啊！给大家看一下如果是用 <code>acwing</code> 一键授权登录的话那么是一个什么样的流程呢？大家可以看一下，对比一下！你看我们刚刚是注册，对吧！？然后填用户名，填密码！确认密码！然后点注册对不对！？啊！那么如果用一键授权登录的话就是点一下一键授权登录，啊！比如说一个用户来到这个大家的网站一看哎！有一个熟悉的图标，啊！点一下，点完之后就会跳到 <code>acwing</code> 这边，那么会有一个这种授权登录的一个页面，大家可以看到是 <code>acwing</code> 登录到你的 <code>acapp</code> ，啊！大家这个如果想申请 <code>acwing</code> 授权登录的话你需要先创建一个 <code>acapp</code> 啊！就如果你是网站的话你需要先创建一个对应的 <code>acapp</code> 好吧！？啊！啧嗯！对！然后这这个这位同学如果点同意的话，好，那么就会瞬间瞬间瞬间注册并且登录上这个你的网站就会非常的轻松，对不对！？啊！大家会发现哎！头像就变成了我的这个 <code>acwing</code> 的头像，对不对！？啊！所有大家会发现这种一键授权登录的话是更容易获客的对吧！？就更容易留住用户啊！就你每给用户增加一点成本那么你就会流失大量的用户啊！你每多每多一步可能就会流失百分之七十的用户啊！那么像这种一键授权登录的话他大家就会发现非常的简单，对不对！？啊！而且大家会发现如果是网站端的话那么其实 <code>acwing</code> 相比于微信和 <code>qq</code> 来说额嗯！更有优势啊！</p>
<p><strong>为什么相比微信和 <code>qq</code> 更有优势呢？</strong>就是因为大家可以想一下如果是用微信登录的话那么你的网站在用户需要拿出来手机去扫码对吧！？啊！如果是 <code>qq</code> 登录的话那么也需要拿出来手机去扫码，或者点一下，或者是自动，或者如果你在桌面上挂了一个 <code>qq</code> 的话，那么也是需要点一下确认对吧！？啊！延迟会比较高啊！但是 <code>acwing</code> 的话它本身就是一个网站跟大家那个网站是一样的啊！所以说当这个用户去去用 <code>acwing</code> 授权登录的话会发现，额嗯！什么额外操作都不需要有，只要点一下弹出来一个授权登录，再点一下就成功啦！对吧！？啊！会非常的快，啊！然后另外第二点的话啊！就是额！一旦一个用户对你的 <code>app</code> 或者对你的网站授权之后，那么未来的三十三十天之内就都不需要重新授权啦！啧！</p>
<p><strong>举个例子啊！</strong>比如说我们刚刚啊！我已经对我的这个 <code>app</code> 进行过授权了，对不对！？那么我在第二次点的时候大家会发现就不需要授权了，对吧！？啊！就可以直接登录了啊！对不对！？那么那么大家会发现额！其实用这个 <code>acwing</code> 第三方授权登录的话会非常的快，啊！比微信 <code>qq</code> 还要快，微信 <code>qq</code> 的话你还要点一下确认啊！然后 <code>acwing</code> 的话完全不用确认，对吧！？啊！因为一般来说额嗯！大部分同学大部分学算法的同学都会挂一个 <code>acwing</code> 对吧！？所有这样的话是很快的啊！你点一下瞬间登录成功，对吧！？啊！瞬间登录成功啊！非常的快啊！啧！好，那么这个是我们啊！那么这个是我们这次这次课要做的一个目一个目标，大家可以看到这个目标还是很重要的，对吧！？啊！那么我们第一节课的话给大家讲的是这个，这节课的话给大家讲的是网站端的授权登录，啊！我们下节课的话给大家讲的是 <code>acapp</code> 端的授权登录，好吧！？啊！啧！好，大家先看一下有没有什么问题啊！ 就我们下节课的话是讲的这里的授权登录，啊！啧！没有问题的话我们就准备开始讲今天的内容了啊！好，大家看一下有没有问题啊！大家稍等一下啊！我先去处理处理处理一个同学啊！啧！好，大家先看一下有没有问题啊！没有问题的话我们准备讲今天的正式内容了啊！然后讲内容之前的话我先去处理一位同学啊！额！然后我们在<strong>讲正式的课之前的话</strong>我们会先给大家讲一下 <code>redis</code> 啊！就我们这节课要用到 <code>redis</code> （<code>redis</code> 不属于课程本身（<code>django</code> 框架课）的内容），啊！等一下啊！好，啊！刚刚去封一位同学啊！</p>
<p><strong>好，然后我们来看一下这个 <code>redis</code> 啊！</strong>就是我们这节课的话这节课要用的东西里边啊！有有一个东西是 <code>redis</code> ，啊！那么 <code>redis</code> 是干嘛的呢？ <code>redis</code> 就是我们的内存数据库啊！好，啊！我们的存储数据，我们前面给大家讲过了数据对吧！？啊！数据库啊！然后我们目前用到的数据库是 <code>django</code> 自带的数据库，对吧！？啊！<code>django</code> 自带的数据库也就是 <code>sqlite</code> 对不对！？啊！那么然后我们接下来如果你想去换成 <code>mysql</code> 的话是很容易换的啊！<code>django</code> 你是可以很容易的将现有的数据啊！迁移到 <code>mysql</code> 里的好吧！？他是有一些就是几行命令就可以搞定啊！非常的容易啊！那么数据库的话他存储效率是不如 <code>redis</code> 的啊！那么 <code>redis</code> 他也是一个数据库，但是他是内存数据库，也就是所有的东西都在内存里啊！所以读写东西都是非常快的，啊！然后 <code>redis</code> 有这么几个特点啊！第一个特点的话他存的全部都是 <code>key value</code> 对！啊！好吧！？啊！这个 <code>redis</code> 跟数据库不一样啊！数据库里边存的是一个一个的表，表里是一个一个的条目，对吧？！啊！然后我们 <code>redis</code> 里的话是一个一个的 <code>key value</code> 对！额！然后，第二点的话是 <code>redis</code> 是单线程的啊！这个不会出现读写冲突啊！因为本来内存就很快了啊！所以说他就搞成了单线程啊！好，那么我们来看一下怎么在 <code>django </code> 里边集成 <code>redis</code> ，首先第一点需要先装一下 <code>redis</code>，给大家举个例子啊！我们需要先装一下 <code>redis</code> </p>
<p>我们先打开我们熟悉的 <code>Terminal</code> ，好，我们先打开我们熟悉的 <code>ac terminal</code> 啊！然后，好，然后我们先给大家恢复一下现场啊！先把我们前面上节课写的东西先关掉啊！好，关完之后的话我们先把上节课的进度先从 <code>github</code> 拉下来啊！稍等一下啊！我再去封一个同学啊！好，啊！搞定了啊！哎呀！这个这两天今天晚上有有应该是有一堆小学生在喷人啊！然后全封了啊！啧！就大家会发现 <code>acwing</code> 没有小学生，对吧！？啊！因为小学生都被疯掉了，啊！就这么简单啊！额嗯！好，然后，我们先把我们之前装的这个 <code>redis</code> 先删掉啊！<code>django_redis</code> ，我先，我先，我先给大家情况一下啊！然后我们之前的话是运行了一个 <code>redis_server</code> 对吧！？啊！然后我们先把这个 <code>redis_server</code> 先删掉啊！好啊！搞定了啊！然后我们接下来来看一下，好！啊！然后我们接下来，额吭！来看一下我们上节课的一个进度啊！我们首先打开我们的 <code>ac</code> 额！<code>acgit</code> 对吧！？啊！然后在 <code>acgit</code> 找到我们上节课的一个进度啊！然后点一下克隆，啊！然后点一下这个点一下这个复制链接，对吧！？啊！然后我们将我们上节课进度复制下来，<code>git clone</code> 下来，好，那么复制下来之后的话啊！我们先打开我们的 <code>tmux</code> 啊！好，我们，我比较习惯搞四个框框啊！四个四块儿基本上够用了啊！好，</p>
<p><strong>然后我们首先先集成一下我们的 <code>redis</code> 啊！</strong></p>
<p><code>django</code> 的缓存模式</p>
<h4 id="安装-django-redis"><a href="#安装-django-redis" class="headerlink" title="安装 django_redis"></a>安装 <code>django_redis</code></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django_redis</span><br></pre></td></tr></table></figure>

<p>更换下载源</p>
<p>多执行几遍一定可以装好的</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install catboost -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">pip install catboost -i https://pypi.douban.com/simple</span><br></pre></td></tr></table></figure>

<p>配置 <code>django_redis</code>  在 <code>acapp/settings</code> 中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CACHES = &#123;</span><br><span class="line">    &#x27;default&#x27;: &#123;</span><br><span class="line">        &#x27;BACKEND&#x27;: &#x27;django_redis.cache.RedisCache&#x27;,</span><br><span class="line">        &#x27;LOCATION&#x27;: &#x27;redis://127.0.0.1:6379/1&#x27;,</span><br><span class="line">        &quot;OPTIONS&quot;: &#123;</span><br><span class="line">            &quot;CLIENT_CLASS&quot;: &quot;django_redis.client.DefaultClient&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">USER_AGENTS_CACHE = &#x27;default&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240915234326811.png" alt="image-20240915234326811"></p>
<p>启动 <code>redis</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo redis-server /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240915234547341.png" alt="image-20240915234547341"></p>
<p>在 <code>python3 manage.py shell</code> 中操作 <code>redis</code></p>
<p>用到了 <code>django</code> 里边的 <code>cache</code> 层</p>
<p>几个操作命令</p>
<ul>
<li><pre><code class="shell">from django.core.cache import cache
cache.keys(&#39;*&#39;) # 支持正则表达式匹配，返回所有匹配到的关键字
# 设置关键字，第三个关键字表示几秒钟过期（不会过期的话第三个参数写成 None）
cache.set(&#39;yxc&#39;, 1, 5)

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  ![image-20240915235209160](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240915235209160.png)</span><br><span class="line"></span><br><span class="line">* 支持正则表达式匹配</span><br><span class="line"></span><br><span class="line">  ```shell</span><br><span class="line">  cache.keys(&#x27;y*&#x27;) # 返回以 y 开头的关键字</span><br><span class="line">  cache.keys(&#x27;*&#x27;) #返回所有的关键字</span><br></pre></td></tr></table></figure>



![image-20240915235416910](C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240915235416910.png)
</code></pre>
</li>
<li><p>查询 <code>key</code> 是否存在</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache.has_key(&#x27;yxc&#x27;)</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240915235617599.png" alt="image-20240915235617599"></p>
</li>
<li><p>查询某个 <code>key</code> 的值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache.get(&#x27;yxc&#x27;) # 返回 1</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240915235703281.png" alt="image-20240915235703281"></p>
</li>
<li><p>删除关键字</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache.delete(&#x27;yxc&#x27;) # 删除成功返回 True</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="修改数据库，增加-openid-列"><a href="#修改数据库，增加-openid-列" class="headerlink" title="修改数据库，增加 openid 列"></a>修改数据库，增加 <code>openid</code> 列</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240916003239524.png" alt="image-20240916003239524"></p>
<p>更新数据库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 manage.py makemigrations</span><br><span class="line">python3 manage.py migrate</span><br></pre></td></tr></table></figure>

<p>后续用户在 <code>acwing</code> 上的信息改了之后，数据库不会改，可以定期去更新用户的信息，每隔一段时间去重新去获取 <code>acwing</code> 的信息</p>
<h4 id="一键登录的流程"><a href="#一键登录的流程" class="headerlink" title="一键登录的流程"></a><strong>一键登录的流程</strong></h4><p>点击授权登录，用户<strong>点击了</strong>授权登录，会自动弹出来用户确认授权的页面，然后用户<strong>确认授权成功</strong>之后，我们<strong>自动帮用户注册</strong>了一个新的账号，并且<strong>成功的登录</strong>到了我们的网站，这个流程我们需要每一步做一个分解；图比较复杂，但是代码比较好些，大家不用担心啊！第一个是我们的用户对吧！？<code>client</code> 、对不对！？这是我们的用户啊！就是我们额嗯！看浏览器的这个人就称为 <code>client</code> ，比如我当前看到这个界面，那我就是 <code>client</code>，啊！好，那么，然后，第二个的话是大家的这个网站，对吧！？啊！<code>web</code>，这网这 <code>web</code> 的话就是指你的 <code>webserver</code> 啊，就是我的后台，我的后台是 <code>web</code> ，好吧！ 网站端，然后第三层的话是 <code>acwing</code> 端，啊！就 <code>acwing</code> 授权登录吗！他肯定要访问数，要访问 <code>acwing</code> 的，对不对！？这 <code>acwing</code> 端，好，那我们第一条线表示 <code>client</code> ，第二条线表示 <code>web</code> ，然后第三条线的话表示 <code>acwing</code> 啊！好，那我们一块儿来分析一下刚刚的过程啊！</p>
<p>（**第一条线：<code>client-&gt;web</code>**）首先我们刚刚的过程是点击了一下授权登录，啊！那么是客户端对吧！？是用户点击了一下授权登录，所以相当于是 <code>client</code> 向 <code>web</code> 哎！发一个请求，去告诉我的 <code>web</code> 说，告诉我的后台说哎！我点了一下这个按钮，对吧！？啊！那么接下来的这个操作啊！就是额嗯！啧嗯！接下来这整个流程有一个学名叫 <code>oauth2</code>。就 <code>oauth2</code> 授权模式啊！基本上大家市面上见到的所有的第三方授权登录都是这个 <code>oauth2</code> 的模式啊！好，那么然后，<code>web</code> 端会向 <code>acwing</code> 端发一个请求啊！那么发请求的时候会上报自己的一些信息啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240918130954148.png" alt="image-20240918130954148"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240918235734675.png" alt="image-20240918235734675"></p>
<p>比如说上报自己的（**第二条线：<code>web-&gt;acwing</code>**）， <code>appid</code> ，这个 <code>appid</code> 就是在 <code>acwing</code> 上注册的你的 <code>ac</code>，在 <code>acwing</code> 上注册的你的 <code>appid</code> ，啊！这好像是废话啊！就大家可以看这个 <code>appid</code> 在什么地方获得的啊！他是可以在，大家可以打开自己的这个额嗯！打开之前自己创建 <code>acwing</code> 应用的这个界面啊！会发现点击这个编辑界面会发现里面多了两项，啊！第一个叫 <code>appid</code> ，啊！这个 <code>id</code> 就是每一个网站独有的一个 <code>id</code> ，好吧！？啊！第二个 <code>secret</code> 的话大家可以先不用管，我我我们，咱咱咱们后面再讲，好，那么每一个，那么这个 <code>ac</code> <code>ac</code> 这个网站的话会上报自己的 <code>appid</code> ，啊！然后同时再附加一些额外的信息，然后传给 <code>acwing</code> 服务器啊！那么好 <code>acwing</code> 服务器的话，</p>
<p>此时会，他会询问我们的用户要不要（**第三条线: <code>acwing-&gt; client</code>**）授权给你，就这个 <code>web</code> 的话相当于是这个网站要想用 <code>acwing</code> 的账号系统登录我当前网站对吧！？就是这个用户想用 <code>acwing</code> 的，用户想就是这个网站想用用户的 <code>acwing</code> 的账号信息来登录自己的网站啊！那么他会带着这个用户的信息去询问 <code>acwing</code> 啊！那么 <code>acwing</code> 的话接到大家的信息之后会先问一下这个客户，问一下这个这个这个用户，问一下他是不是授权给你信息，对吧！？啊！所以这里的话会返回给用户一个页面啊！询问用户是否授权，这个叫询问用户是否授权这个就是刚刚大家看到的那个询问用户是否授权的一个页面，</p>
<p>（**第四条线: <code>client-&gt;acwing</code>**）啊！好，那么用户如果是授权的话哎！他如果点同意的话就是同意授权，好，那么如果同意的话 <code>acwing</code> 就知道了啊！这个用户是同意授权给给他的，额！是同意把他的信息授权给网站来用的，</p>
<p>（**第五条线：<code>acwing-&gt;web</code>**）好，那么 <code>acwing</code> 就会哎！告诉这个网站说用户已经授权给你了，啊！那么授权的时候啊！他会告诉你一个授权码叫 <code>code</code> ，啊！然后，就告诉你一个授权码叫 <code>code</code> 啊！啧！嗯！就是说这个用户如果授权的话那么 <code>acwing</code> 会给会生成一个秘钥，相当于是报暗号，对不对！？他给你一个暗号，类似于这个额！天王盖地虎，宝塔镇河妖对不对！？嗯！？就是给一个秘钥啊！这个秘钥的话只有服务器知道啊！只有服务器知道，那么服务器 <code>acwing</code> 端把这个 <code>code</code> 授权码发给客户端啊！好，那么客户端就是这个 <code>web</code> 端啊！接收到这个 <code>code</code> 之后·，接收到授权码之后哎！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240918235816412.png" alt="image-20240918235816412"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240918130602785.png" alt="image-20240918130602785"></p>
<p>（**第六条线：<code>web-&gt;acwing</code>**）他就可以再携带上自己的秘钥，就是 <code>code</code> 啊！加上自己的秘钥 <code>app</code> ，当然这个 <code>appid</code> 也是需要的啊！然后还有 <code>appsecert</code> ，就是这个页面，对不对！？有一个 <code>appsecret</code> ，注意这个 <code>secret</code> 千万不要告诉别人，啊！然后你每隔一段推荐大家都重置一下，就是你每每隔一段时间都改一下啊！防止你，防止你的 <code>secret</code> 这个被被别人窃取，好吧！？啊！好，咳嗯！那么这个这个 <code>web</code> 的话携带上刚刚给我的，刚刚收到的暗号 <code>code</code> 啊！授权码 <code>code</code> 和我自己的 <code>appid</code> <code>secret</code> ，啊！然后再去向 <code>acwing</code> 请求一个授权令牌啊！注意这里为什么，这里，这里可，有同学可能会想，那为什么要这么麻烦呢？我能不能直接这个，服务器，服务器同意之后就直接给我一个这个令牌，而而不用我再折一下呢？这是不可以的，为什么呢？啊！因为大家会发现额嗯！你在这一步（第二条和第三条线）传递的信息都是会被用户看到的，对吧！？啊！那么如果用户想去侵犯你网站的权限的话啊！或者权益的话啊！他可能会拿到你的秘钥去做坏事儿，所以这个 <code>appsecret</code> 你是不能给用户的，啊！所以要多此一举，对吧！？啊！先从用户哪儿拿到一个 <code>code</code> 啊！再将自己私密的信息只传给 <code>acwing</code> 那这样的话，对于用户来说他是需要授权给你，那对于用户来说是安全的，对吧！？啊！那么对于大家来说，哎！你的秘钥也不会给用户那么你也是安全的，对不对！？啊！好，那么，在，这个这个 <code>web</code> 端的话，啊！拿到刚刚的授权码，然后外加自己的私有信息，向 <code>acwing</code> 申请一个授权令牌，那么 <code>acwing</code> 如果发现你这个是对的话啊！你这个授权码是没有问题的话，</p>
<p>（**第七条线：<code>web-&gt;acwing</code>**）那么好会给你一个授权令牌啊！，这个授权令牌的话我们一般称为 <code>access_token</code> 啊！好，这个那么，到这一步的话就是说啊！这个<code>acwing</code> 已经知道了啊！这个用户已经授权给你了！而且你的身份也已经验证过了啊！ 验证你的身份就是通过 <code>appsecret</code> 来来验证的，好，那么就会给你一个授权令牌啊！当然了，还会包含另外一个东西啊！叫 <code>poenid</code> 啊！这个 <code>openid</code> 的话你可以认为啊！就是用户的一个唯一身份识别识别码，就是每一个用户跟每一个网站的 <code>openid</code> 是不变的好吧！？啊！那这样的话你比如说一个用户在昨天登录过，那么今天再登录的时候你就可以通过这个 <code>openid</code> 找到他，</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240918235843589.png" alt="image-20240918235843589"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240918155616983.png" alt="image-20240918155616983"></p>
<p>（**第八条线：<code>acwing-&gt;web</code>**）啊！好，那么当网站拿到这个授权码的时候，好，这个授权码相当于是一个是一把钥匙啊！或者是一张门禁卡，那么你就可以通过这个门禁卡去向 <code>acwing</code> 申请用户授权给你的信息了啊！那么目前我们给大家授权的信息只有两个啊！一个是用户名，一个是头像，这是大家最需要的两个，对吧！？啊！好，那么此时，哎！我们的网站再去用我们的这个授权令牌啊！再加上 <code>openid</code> 啊！去申请什么呢，去申请用户名和和头像啊！</p>
<p>（**第九条线：<code>acwing-&gt;web</code>**）好，那么 <code>acwing</code> 收到之后会检查你的令牌是不是成立的啊！如果成立，好，那么会返回给你 <code>openid</code> 这个用户对应的用户名和密码，哦不！呸！用户名和头像啊！不是密码，好，那么到此为止就结束了啊！好，那么大家看一下有没有问题啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240918235914374.png" alt="image-20240918235914374"></p>
<p>额！这个是不能跳过第一次的话是不能跳过用户的这个同意的啊！但是这一步他有些时候可以跳过，就是一个月内啊！目前目前的逻辑是这样的，只要一个月内啊！这个用户授权过，那么就不再询问这个用户了，啊！就是比如说比如说今天啊！授权过了，那么明天再摁的时候就直接网站会查一下啊！查到哦！昨天这个用户已经授权过了啊！那么就直接会给你一个 <code>code</code> ，啊！就可以跳过这一步了，好吧！？啊！但是第一次的话这一步是不能跳过的（前五条线）啊！</p>
<p>好，我再给大家这个捋一遍流程啊！就是用户啊！点完这个按钮之后，啊！点一下这个按钮就表示他向，啊！这个用户向我们的网站服务器端发了一个申请，就我要登录，我要用 <code>acwing</code> 的账号去登录，对吧！？啊！好，那么我这个 <code>web</code> 就向 <code>acwing</code> 去申请一下啊！申请一下把我的 <code>appid</code> 报给 <code>acwing</code> ，那么 <code>acwing</code> 会给用户返回一个页面询问这个用户是否也要授权给刚刚的内个网站，啊！好！那么如果用户同意的话，好，那么如果 <code>acwing</code> 接到用户同意的这个这个同意的这个结果之后，好，那么会将一个授权码发给网站啊！网站接到授权码之后，再加上自己的身份信息，就是 <code>appsecret</code>，还有 <code>appid</code> 啊！再向 <code>acwing</code> 去申请一个额！授权令牌，就是申请一张门禁卡和用户的 <code>id</code>，就是说，就是申请一个 <code>access_token</code> ，还有一个 <code>openid</code> ，啊！好，那么这个网站拿到这两个东西之后，就可以通过这两个东西向 <code>acwing</code> 去申请用户的信息了啊！这里这里可以申请用户的用户名和头像啊！然后注意这个授权码的话只有两个小时的有效期啊！啧！好，大家看一下有没有问题啊！给大家一些时间，稍微的整理一下思路，看一下有没有问题，咳嗯嗯嗯！啊！没有问题的话打一个一啊！ </p>
<p>额！<code>openid</code> 是干啥的来着啊！就是你你需要能够记录下这个用户的信息，对吧！？啊！啧！就是目前来看，你你比如说这个一个同学他今天登录登录你的网站，他今天的名字叫 <code>yxc</code> ，对吧！？啊！然后，他明天换了个马甲，比如说他换了一个个昵称，<code>ac</code> <code>acwing</code> 上可以改昵称的对不对！？我换个昵称，我叫比如叫 <code>abc</code>，我再登录你的网站啊！那么其实这两个人是一个信息对吧！？啊！那么你就不能通过用户名来去判断他是内个人，对吧！？啊！那么你就需要你就需要得到他的一个永远不会变的一个东西，那这个东西就是 <code>openid</code> ，就是他这个东西他是变不了的，那么你是可以通过这个东西来识别身份的，咳嗯嗯，嗯，这个像微信登录的话也是这两个东西啊！包括这个 <code>qq</code> 登录也是一样的东西，他都给你一个 <code>openid</code> 啊！<code>openid</code> 的话就是用户不管怎么变，他这东西不会变，啊！然后用这东西去识别用户，啊！很简单吧！？同学们，不是很难啊！额嗯！好，那么，然后我们后面就是要具体实现了啊！啧！那那个是两小时的两小时的时限啊！这个 <code>code</code> 啊！<code>code</code> 和和这个 <code>access_token</code> 都是两个小时的时间限制，不过这个两个小时，两个小时其实是非常充足的，为什么呢？因为大家会发现这个啪啪啪！这几步都是计算机自动操作的，对不对！？大家可以发现基本上一秒钟就操作完了啊！所以说两个小时基本上是足够用的，啊！啧！额嗯！这个 <code>id</code> 不是，这个 <code>openid</code>的话不是内个 <code>userid</code>啊！我们是给大家重新生成了一个新的 <code>id</code>，就是你是<strong>不能通过这个 <code>opendi</code> 找到原用户的</strong>，好，啊！然后，我们来看一下后面的内容啊！那么后面的话就是要去具体实现这些流程了，好吧！？啊！这个流程虽然看着复杂，但其实代码并没有多少啊！这个每一个这每这每条线就是一个请求而已啊！其实这个并没有太复杂啊！</p>
<p>然后这节课的细节比较多啊！所以给<strong>大家写了一个讲义</strong>啊，大家可以去看一看，对！给大家详细介绍了每一步是干嘛的啊！额！先给大家通讲一遍啊！</p>
<h4 id="写一个第三方登录的接口"><a href="#写一个第三方登录的接口" class="headerlink" title="写一个第三方登录的接口"></a>写一个第三方登录的接口</h4><h5 id="编写-url、view"><a href="#编写-url、view" class="headerlink" title="编写 url、view"></a>编写 <code>url</code>、<code>view</code></h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240917142456034.png" alt="image-20240917142456034"></p>
<h5 id="在编写-apply-code-时，需要把特殊字符替换成非特殊字符，比如将-替换成-3A或者是将问号，等号换成非特殊字符"><a href="#在编写-apply-code-时，需要把特殊字符替换成非特殊字符，比如将-替换成-3A或者是将问号，等号换成非特殊字符" class="headerlink" title="在编写 apply_code 时，需要把特殊字符替换成非特殊字符，比如将 : 替换成 %3A或者是将问号，等号换成非特殊字符"></a>在编写 <code>apply_code</code> 时，需要把特殊字符替换成非特殊字符，比如将 : 替换成 %3A或者是将问号，等号换成非特殊字符</h5><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240917170435479.png" alt="image-20240917170435479"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urllib.parse <span class="keyword">import</span> quote</span><br><span class="line">url = <span class="string">&quot;https://app7116.acapp.acwing.com.cn/settings/acwing/web/apply_code/&quot;</span></span><br><span class="line">quote(url)</span><br></pre></td></tr></table></figure>

<p>克隆完怎么回到自己仓库啊！如果不太会操作的话就删掉重新建一个库就可以了，这个比如说你的服务器发现不太会配，配挂了那就直接重启就可以了，啊！一般推倒重来是最快的方式，啊！啧！好，那么我们直播到这里就结束了，大家早点信息，拜拜啊！</p>
<h3 id="8、acapp端AcWing一键登录"><a href="#8、acapp端AcWing一键登录" class="headerlink" title="8、acapp端AcWing一键登录"></a>8、acapp端AcWing一键登录</h3><p>大家起名的时候一定要好好起，对吧！？我们刚刚那 <code>acwing_login</code> 的话太容易起起有歧义了啊！我们应该叫 <code>web_acwing_login</code> ，对吧！？啊！这叫 <code>acapp_acwing_login</code> ，啊！ 这样的话会好一些，啧！</p>
<h4 id="后端代码修改，用户端的代码也跟着修改的小技巧"><a href="#后端代码修改，用户端的代码也跟着修改的小技巧" class="headerlink" title="后端代码修改，用户端的代码也跟着修改的小技巧"></a>后端代码修改，用户端的代码也跟着修改的小技巧</h4><p>在 <code>js</code> 、<code>css</code> 文件末尾添加版本号，用户每次加载的时候就会强制更新 <code>game-version-1.0.js</code></p>
<p>那么这节课的话给大家讲的是 <code>acapp</code> 端的一个 <code>acwing</code> 一键登录，那么做完之后的效果是这样的，大家可以看一下啊！就是大家的 <code>app</code> 在 <code>acwing</code> 上打开之后，哎！那么会自动像微信内样啊！自动弹出来一个额嗯！一个请求对吧！？啊！一个请求窗口，啊！那么这个窗口里的话大家可以看到，大家可以看到用户的所有信息，大家可以看到请求里的所有信息啊！比如说 <code>acwing</code>，就 <code>acwing</code> 主页，对吧！？好，那么，头像的话就是这个这个这个 <code>app</code> 的一个头像的话点开之后就是 <code>app</code> 的一个介绍页面，然后这里这里是自己的一个信息啊！然后用户如果同意的话那么你就可以成功的获取用户的一个授权啊！然后用户如果拒绝的话啊！那么你就会收到一个这样的消息啊！告诉你 <code>user reject</code> 好吧！？啊！大家可以根据你的具体业务来处理，比如你可以自己把窗口关掉啊！好，那么，比如说我们，而且另外一点是所有窗口的这个登录时完全独立的，大家可以看到啊！你左边这个窗口左边这个窗口是授权是这个是这个小窗口，对吧！？啊！然后右边这个窗口授权是这个小窗口，对不对！？啊！那么未来这个所有 <code>app</code> 的授权的话都是完全独立的，可以吧！？啊！那么这里的话其实调用的是咱们 <code>acwing</code> 云端系统的一些接口啊！然后那么用户在关的时候啊！你比如想关掉这个窗口，你必须要先把这个小窗口关掉，就类似于 <code>windows</code> 里边的额！一个警示窗的一个一个功能啊！好，那么，当用户同意之后，哎！那么在下次打开的时候就不会弹出来额嗯！申请同意的窗口，就会自动就会自动授权成功，啊！这个还是非常方便的啊！只要我们，啊！只要我们授权过一次，那么一个月一个月之内就不需要用，就不需要用户重新同意，他会自动同意，好吧！？啊！额！包括我们这个 <code>app</code> 端的话其实和我们的网页端是一致的啊！额！对！和我们的网页端其实是一致的啊！就是大家可以看到我们刚刚在 <code>acapp</code> 端已经同意申请了，对吧！？啊！那么我们在网页端再点 <code>acwing</code> 一键登录的时候，哎！也就会默认同意了，啊！所以说我们的 <code>acapp</code> 端和我们的网页端其实用的是同一套系统，啊！对吧！？啊！用的是同一套系统啊！而且我们通过同样的方式会登录到同一个账号里，啊！注意我这个账号啊！跟我刚刚在 <code>acapp</code> 里登录的这个账号是同一个账号，好吧！？啊！是同一个账号啊！好，那么打击可以看到目前这个授权登录的话是只能申请用户的，我再我再取消一下授权啊！就只能申请用户的用户名和头像啊！那么未来的话大家其实可以申请用户的各种权限啊！比如说在用户的云端空间里去写内容的权限啊！比如说大家把 <code>app</code> 可以会保存一下，保存用户的，比如大家想给用户做一个相册功能，对吧！？啊！那么用户的这个照片会存到用户的本地，啊！那么你可以申请啊！操作用户的云端空间里的某一个文件夹，对吧！？那这样的话你就可以将用户上传的头像存到用户的本地了，啊！就未来这里这个列表啊！会有很多个啊！所以说我们这个云端系统越来越像一个操作系统了对吧！？啊！他可以管理用户的各种权限啊！只不过目前只有用户名，还有这个头像两个权限啊！额嗯！然后另外的话，啧！这个我们其实额嗯！会给用户的这个会给大家的 <code>acapp</code> 赋予很多的 <code>api</code> 啊！比如说啊！比如说我们今天给大家提供的 <code>api</code> 是弹出用户授权登录的一个 <code>api</code> 啊！那么未来的话大家可以拥有什么 <code>api</code> 呢？比如说啊！这个在窗口里边啊！弹出一个窗口啊！弹出一个警示窗口，像这样弹出一个窗口一个功能啊！我们之后也会给大家提供一个 <code>api</code> ，你可以在这个 <code>acwing</code> 提供的 <code>api</code> 里，用这个 <code>api</code> 去获，在一个界面里弹出来一个新的窗口啊！这个新的窗口的话其实有很多种类型啊！大家举个例子啊！比如说，额嗯！像咱们这个 <code>aceditor</code> ，对吧！？哎！啊！那么这中窗口的话就一种窗口，那么这种窗口的话大家点一下其他地方他就消失了，对吧！？啊！他和 <code>saber</code> 的排行榜是一样的啊！比如 <code>saber</code> 排行榜也是这样的一个窗口，点一下其他地方他就消失了，对不对！？啊！那么还有另外一种窗口啊！比如说我们这个保存的时候，啊！新建，比如保存的时候啊！比如先新建一个啊！然后保存的时候我们会弹出一个保存窗口啊！那么保存窗口的话是你点其他地方他不会消失</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240919104012687.png" alt="image-20240919104012687"></p>
<p>啊！而且当你点这个，当你点弹出这个窗口的 <code>app</code> 的时候，他会给你显示一下，震一下，对不对！？啊！那么我们这节课给大家弹出的这个授权窗口啊！其实就是刚刚保存的内个窗口，啊！那么窗口的类型会有很多种，啊！我们之后会给大家提供 <code>api</code> ，你可以渲染任意多种，你可以渲染出来各种不同的窗口，根据自己的需求啊！可以吧！？啊！啧！当然这个属于题外话啊！然后我们这节课给大家讲的主要内容就是如何去实现我们的这个 <code>acapp</code> 端的一个授权登录啊！那么我们点同意之后就可以自动会给用户授权，对吧！？啊！好，那么这个功能的话其实我们上节课讲的功能是类似的啊！咱们稍等一下，咱们先来看大家的问题啊！啧！啊！怎么判断域名访问啊！这个我们上节课给大家讲过啊！大家打开自己的这个，额！后台，啊！打开自己的后台，那么打开这个后台里边，你的这个，额！<code>js</code> 啊！打开 <code>js</code> 文件，对吧！？啊！那么 <code>js</code> 文件里边，大家会收到一个参数叫 <code>acwingos</code> ，对不对！？那么如果是 <code>acapp</code> 端访问的话，那么这个 <code>acwingos</code> ，他是，他不是空，啊！他是一个对象，这个对象里会给你提供很多 <code>api</code> ，所以我们可以通过这个参数来判断你到底是通过自己的网页去访问啊！通过网站去访问还是通过 <code>acwing</code> 的云端 <code>app</code> 去访问，可以吧！？啊！比如说大家可以把这个 <code>acwingos</code> 输出一下啊！大家可以看一下啊！<code>console</code> 一下，好，那么这个搞完之后，改完之后，打个包啊！好，那么大家可以试一下啊！比如说我们在</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240921193042379.png" alt="image-20240921193042379"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240921193101741.png" alt="image-20240921193101741"></p>
<p>网页里如果去访问我们的网站的话啊！哎~哎！那么他会疏出一个 <code>undefined</code> ，就是我们这 <code>AcWingOS</code> 是没有定义的，对吧！？啊！然后如果我们是在 <code>acapp</code> 端访问的话，大家再刷新一下啊！啧！好，那么他会，等一下啊！咱们这里需要清一下缓存啊！哎！大家可以大家会看到啊！我们这里会返回一个对象，对不对！？注意每一次你要记得清一下缓存啊！然后清缓存的话你可以右键点这个清空缓存并硬线硬硬性重新加载，这样的话一定会把缓存清掉，啊！那么这样的话大家会发现我们有一个对象，对不对！？这个 <code>AcWingOS</code> 是一个对象，啊！那么你可以通过这个方式来判断啊！来判断是从什么地方打开自己的网站啊！额！然后并且另外一点啊！就是未来这个 <code>AcWing</code> 的云端云端操作系统它不仅可以运行在额 <code>PC</code> 端，啊！他也可以运行在手机上啊！也可以运行在 <code>pad</code> 上啊！虽然我们目前只实现了 <code>pc</code> 端，但是未来我们会实现移动端啊！那么到底是处于内个平台上的 <code>acwing</code> 云端操作系统呢？也会给大家放到这个 <code>api</code> 里，大家可以看到是在这个 <code>settings</code> 里边的 <code>platform</code> 里边会显示啊！那么当前是在 <code>PC</code> 端，对吧！？那么他会显示 <code>PC</code> 啊！大家可以试一下啊！你比如说如果是在 <code>pad</code> 上去访问的话，刷新一下啊！哎！那么他就会这里就会显示是 <code>pad</code> 好吧！？啊！<code>tablet</code>  就是 <code>pad</code> 的意思，对不对！？平板儿的意思啊！然后手机端目前不支持啊！对，啊！额嗯！好，咳嗯！那么这个就是我们目前的一个，这这个就是怎么去判断你</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240919180150305.png" alt="image-20240919180150305"></p>
<p>的代码是就是怎么判断用户是在内个平台上打开了你的应用啊！好，那么咳嗯！注意这个 <code>acwing</code> 的这个云端操作系统的话他不是模态框啊！模态框的话是指举个例子啊！额嗯！比如说咱们删除一篇题解，哎！那么这个是模态框对不对！？这个模态框是不能拖动的，不能拖拽的，额！但是这个授权登录的窗口的话你是可以随意拖拽的啊！对！这个是一个 <code>acwing</code> 云端系统内的一个窗口，大家可以看到这个窗</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240919180615233.png" alt="image-20240919180615233"></p>
<p>口你可以随意拖拽，对不对！？啊！他是云端系统内的一个窗口，啊！类似于 <code>windows</code> 对吧！？啊！啧！这是不一样的啊！好，咳嗯！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240919180816383.png" alt="image-20240919180816383"></p>
<p>那么然后我们来看一下这节课的主要内容啊！我们这节课是实现我们的 <code>acapp</code> 端的 <code>acwing</code> 一键登录啊！那么这个一键登录的方式跟我们上节课讲的一键登录的方式是完全一样的啊！跟我们上节课给大家讲的这个 <code>web</code> 端的一键登录的方式是非常类似的，啊！他也是同样的一个调用方式啊！然后我们可以看一下这个图，给大家来回忆一下我们是怎么来授权登录的啊！啧！额嗯！那么咳嗯！啧！咱们来看一下啊！我们打开应用之后啊！那么应用端会自动向 <code>acwing</code> 请求一个账号登录，注意这个 <code>acapp</code> 只能通过 <code>acwing</code> <strong>账号去登录啊</strong>！（快捷登录注册）不能通过这个自己的用户名和密码（一般注册）去注册的话来登录啊！如果如果用内样的方式的话我们到时候审核的时候会可能不通过啊！ 额嗯！然后那么他会自动发送一个请求，啊！就这个客户端啊！会自动发发发送一个请求啊！额！向后端服务器请求一些参数啊！然后后端服务器会向 <code>acwing</code> 的服务器请求授权码啊！然后 <code>acwing</code> 服务器接到请求之后啊！他会向客户用户去请求啊！去问用户你是否同意这个 <code>app</code> 申请的这些权限啊！那么可以看到这样的一个申请界面，对不对！？那么目前的话只有用户名和头像这两个权限啊！未来的话会有很多中不同的权限，比如说管理用户的云端空间啊！管理用户的桌面啊！都会有各种不同的权限给大家啧！提供可以选择啊！额嗯！然后用户如果同意的话那么会告诉 <code>acwing</code> 后台啊！他同意了，同意之后，<code>acwing</code> 的后台会给前会给你的网站会给你的 <code>app</code> 啊！发送一个授权码就是用户申请用户同意授权的这个授权码，那么大家收到授权码之后，可以通过授权码和身份信息啊！向 <code>acwing</code> 服务器啊！请求自己的授权令牌也就是 <code>access_token</code> 还有 <code>client_id</code> 啊！还有 <code>client</code> 的 <code>openid</code> 那么当大家后端拿到授权令牌和 <code>openid</code> 之后就可以向 <code>acwing</code> 请求这个用户的啊！额！这个用户的头像和用户名等信息了好吧！？啊！是这样的一个流程啊！当然未来的话可能比如说你可以去这个当你拿到授权令牌之后你可以操作用户的云端空间啦！可以吧！？啊！好，所以这个过程跟我们上节课的过程是完全一样类似的啊！那么，不同点就在于第一步不一样啊！我们可以看一下这个第一步，我们上节课给大家讲的第一步是，我们来看一下啊！我们上节课给大家讲的是通过一个 <code>url</code> 方式对吧！？去重定向到 <code>acwing</code> ，重定向到某一个链接里，然后这样去申请授权码，对不对！？我们是通过一个链接来申请的啊！然后这节课我们的 <code>acapp</code> 啊！他不是通过链接去申请的啊！他是通过我们给大家提供的一个 <code>api</code> 去申请的，这个 <code>api</code> 就在 <code>acwingos</code> 里边大家可以看到我们每一个用户的都会收到 <code>acwingos</code> 的一个参数，那么这个参数里边会给大家提供丰富的 <code>acwing</code> 云端操作系统的一个 <code>api</code> 啊！额！那么这个 <code>api</code> 地址是这样的啊！就是 <code>acwingos.api.oauth2.authorize</code>，啊！其实跟我们的链接地址是完全，是非常相似的对不对！？就是 <code>api/oauth2/web/authorize/</code>，差差不多，对吧！？啊！就是 <code>api.ooauth2.autorize</code> 然后参数也是类似的，也是有四个参数，啊！第一个的话是 <code>appid</code> ，就是自己的一个 <code>id</code> ，啊！注意这个 <code>appid</code> 的话你只能使用你当前这个 <code>app</code> 的一个 <code>id</code> 啊！大家可以看到我们自己的 <code>appid</code> 是在这里对不对！？你不能使用其他的 <code>appid</code> 啊！如果你使用其他的 <code>appid</code> 的话就会审核不通过，好吧！？啊！就就授权不成功啊！额嗯！然后第二个参数的话是 <code>redirect_uri</code> 啊！这个 <code>redirect_uri</code> 其实是什么呢？其实就是当给你成功授权，就是当给你啊！授权授权码的时候啊！会将这个授权码授权到什么地方啊！这个 <code>redirect_uri</code> 就是接收授权码的地方，好吧！？啊！你将自己服务器上啊！接受授权码的一个函数的路由的链接放到这里就可以了，第三个的话还是申请的权限，目前只有 <code>userinfo</code> 一种选项，啊！然后第四个的话是 <code>state</code> 啊！就是用来防止其他用户对你服务器攻击的一个暗号，一个暗号，对吧！？啊！<code>state</code> ，然后最后还有一个参数叫 <code>callback</code> 参数，啊！叫回调函数啊！那么这个参数的话是跟我们上节课比起来多的一个参数啊！额！这个参数是干嘛的呢？是额！这个大家成功的申请到授权码之后，啧！啊！成功的申请到授权码之后我们是有一个函数来接收这个授权码，对不对！？同学们？啊！我们是有一个函数啊！大家还记得吧！？应该是我们的这个 <code>receive_code</code> 函数，对不对！？这个 <code>receive_code</code> 函数会成功，会接收我们的 <code>code</code> 还有，会接收我们的授权码还有还有还有还有这个 <code>state</code> 对不对！？啊！好，那么我们这个函数最后会返回一个用户的信息啊！那么我们这个 <code>callback</code>  函数啊！就是用来接收你自己的 <code>receive_code</code> 的内个函数返回的信息的这个函数，啧！这个比较乱啊！就是额！大家调用这个 <code>acwingos</code> 的用户授权系统之后啊！那么如果说你成功的获取了授权码的话，那么 <code>acwingos</code> 里会调用你的这个 <code>redirect_uri</code> 这个函数，那么我们实现的 <code>redirect_uri</code> 这个函数就是这个 <code>receive_code</code> 对吧！？啊！那么我们这个函数这个 <code>receive_code</code> 这个函数最后会向前端返回一个信息啊！那么我们 <code>callback</code> 就是用来接收你自己的接收函数返回信息的这样的一个回调函数，好吧！？啊！比如说我们这个可以在 <code>callback</code> 里边接收到这个 <code>receive_uri</code> 向前端返回的用户名和密码，那么我们可以将，返回的用户名和头像，那么我们可以将返回的用户名和头像渲染到自己的游戏里，可以吧！？啊！啊！那么只有这一点是不一样的啊！额嗯！除了第一步之外后面的步骤包括获取授权令牌还有获取用户的信息这些步骤是完全一样的啊！好，那么大家先看一下有没有问题啊！这块比较绕啊！好，大家看一下有没有问题啊！啧！嗯咳嗯！啧！额嗯！对，这个我们刚刚的流程就这样一个流程啊！然后这个流程跟我们上节课讲的流程是完全一样的，对不对！？啊！然后，只有在具体操作的时候第一步不太一样而已啊！啧！可以吧！？啊！好，那么我们具体需要实现的函数其实就是两个函数啊！额嗯！第一个函数的话跟我们上节课一样是实现一个 <code>apply_code</code> 实现一个 <code>apply_code</code> 函数啊！这个 <code>apply_code</code> 函数其实是返回额嗯！返回我们第一步需要的四个参数的一个一个一个 <code>api</code> ，啧！额嗯！那么我们返回返回了这四个参数的话我们上节课是直接将链接重定向到 <code>acwing</code> 啊！然后然后这样去访问 <code>acwing</code> 对不对！？啊！然后，我们这节课的话是直接调用 <code>acwing</code> 的一个提供的一个 <code>api</code> 啊！去访问去申请授权啊！那么申请授权成功之后啧！跟上节课是一样的啊！他会他就会调用我们的 <code>receive_code</code> 函數这个函数那么会将会将授权的授权码传递给 <code>receive_code</code> 这个函数啊！那么我们拿拿到授权码之后，可以再申请一下授权令牌，啊！还有用户名和头像啊！然后，哎！拿到这些信息之后，我们返回给前端就可以了啊！那么前端用 <code>callback</code> 函数去接收到用户，额！去接收到我们向前端返回的头像和昵称，这两个参数，啊！然后再去做后续的逻辑就可以了，好吧！？啊！好，那么我们来看一下代码怎么写啊！这个实现流程跟上节课是完全跟上节课是非常相似的啊！咱们咱们来看一下怎么去写啊！ 首先的话我们先将我们先将我们这节课的代码先先关掉啊！好，然后，我们先把我们先把我们备课的代码先删掉啊！额！先把他变成我们的 <code>acapp2</code> 先存下来，好，然后我们再将上节课的进度从我们的 <code>acgit</code> 上 <code>pull</code> 下来啊！打开我们的 <code>acgit</code> 好，然后我们把他 <code>pull</code> 下来啊！<code>git clone</code> 啊！把他克隆下来，好，然后我们来看一下这节课的代码怎么写，额！这节课的流程跟上节课的流程非常相似啊！所以咱们讲的比较快啊！然后，我们只只详细讲一下代码怎么写，怎么把这个接口接过来，啊！好，首先我们先运行一下我们的这个，启动下我们的服务，啊！启动完之后的话我们可以看一下我们的这个效果，大家会发现，清空一下，清一下缓存啊！然后启动完之后大家可以看需要效果，效果的话就是我们额嗯！没有申请授权，对吧！？啊！会直接就登录成功了，对不对！？这是我们之前的逻辑啊！好，那我们来看一下怎么去该啊！啧！那么改之前的话我们首先需要需要先，咱们首先需要实现两个后端函数，对吧！？那么后端函数的话是在，额嗯！<code>game</code> 里面，啊！然后我们先在 <code>views</code> 里先实现实现这两个函数啊！<code>acwing</code> 里边然后我们这节课实现的是 <code>acapp</code> 对吧！？好，那么这个函数跟我们上节课实现的函数非常像啊！所以说我们直接将上节课的函数直接复制过来就可以啦！<code>copy</code> 过来就可以了，咳咳嗯，<code>web/* .</code>  <code>copy</code> 过了就可以啦！<code>cop copy</code> 过来之后我们再改一改就可以了，咱们先把路由写，咱们先改一改，<code>apply apply_code</code> 啊！咳咳嗯！嗯！那么我们这里的话是~，<strong>不是返回一个链接了</strong>，而是直接返回四个参数，对吧！？所以我们这里的话首先不需要链接啊！把这个链接删掉，然后我们直接返回四个参数就可以了，不需要返回链接啊！第一个参数的话是 <code>appid</code>，第二个参数的话是 <code>redirect_uri</code>，<code>re redirect_uri</code>，好，第三个参数的话是我们的范围啊！<code>scope</code> ，好，第四个参数的话是我们的 <code>state</code> ，啊！是咱们的这个暗号，对吧！？啊！我们是额嗯！这个为了防止别人攻击我们啊！我们需要先写一个暗号，然后回来的时候看一下这个暗号是不是我们自己生成的暗号，就可以了啊！<code>state</code> ，那这样的话就把这个接口写完啦！写完之后的话我们写一下路由啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240920191641552.png" alt="image-20240920191641552"></p>
<p>每次写这个方法的时候都是类似的，写后端 <code>api</code> 的时候都是类似的，写一个方法，写一个路由</p>
<p>好，打开我们之前的 <code>settings</code> 啊！来看一下我们之前这个非常长的非常恶心的代码，啊！这个 <code>settings</code> 这个文件，大家如果感兴趣的话，你可以把他拆分一下，拆分成多个文件啊！啧！那这里的话咱们就拆分了啊！</p>
<h4 id="不同端获取用户信息："><a href="#不同端获取用户信息：" class="headerlink" title="不同端获取用户信息："></a>不同端获取用户信息：</h4><h4 id="普通登录"><a href="#普通登录" class="headerlink" title="普通登录"></a>普通登录</h4><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240921003813689.png" alt="image-20240921003813689"></p>
<p><code>django</code> 的用户管理系统的登录会将登录信息保存到 <code>session</code> 中，不需要自己进行管理</p>
<h4 id="acwing-第三方登录"><a href="#acwing-第三方登录" class="headerlink" title="acwing 第三方登录"></a><code>acwing</code> 第三方登录</h4><p><code>acapp</code> 端和 <code>web</code> 端登录不同：<code>acapp</code> 端只使用第三方登录不需要添加<strong>监听函数</strong>，<code>web</code> 端可以使用<strong>普通方式登录</strong>，需要添加监听函数；这两个端的登录功能与联机对战有关，联机之后，玩家点击多人模式会进到游戏里，可以获取用户在 <code>acwing</code> 上的头像和用户名，可以直接将用户的用户名和头像直接渲染到游戏里边，这样可以很方便的实现联机，否则调试的时候会很麻烦；登录注册比较麻烦导致玩的人不多，不容易调试</p>
<p>点击多人模式，会自动加载到游戏对局中；</p>
<p>实现匹配功能之后：可以更加标准化一些，实现匹配之前每个人进到对局中自动加到同一个地图中	</p>
<ul>
<li><p>网页端：操作一个函数 <code>getinfo</code> ，表示向后台去获取用户的用户名和头像</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240921004021661.png" alt="image-20240921004021661"></p>
<ul>
<li><p>执行一个函数 <code>getinfo</code> 获取用户信息：用户名和头像，<strong>刷新页面</strong>获取用户信息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从服务器端获取用户信息，所以需要实现一个函数叫 getinfo</span></span><br><span class="line"><span class="title function_">getinfo_web</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 如果想在函数内部使用 this，需要用箭头函数</span></span><br><span class="line">    <span class="comment">// 否则的话可能用的 this 是函数本身，而不是类实例 class</span></span><br><span class="line">    <span class="keyword">let</span> outer = <span class="variable language_">this</span>;</span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="comment">// 复制完整信息，复制复制完整路径，因为你的这个网站不只要跑到网站里，还要跑在 acapp 里，不要写相对路径一定要把你前面这个域名加上，啊~！                                             </span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://app7116.acapp.acwing.com.cn/settings/getinfo/&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">platform</span>: outer.<span class="property">platform</span>,</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// resp 是我们在 getinfo views 里返回的值 dict 类型</span></span><br><span class="line">        <span class="attr">success</span>: <span class="function">(<span class="params">resp</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 如果成功的话需要打开菜单界面，将当前界面隐藏</span></span><br><span class="line">            <span class="keyword">if</span>(resp.<span class="property">result</span> === <span class="string">&#x27;success&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// 如果获取信息成功，将数据保存到本地，如姓名，头像等</span></span><br><span class="line">                outer.<span class="property">username</span> = resp.<span class="property">username</span>;</span><br><span class="line"></span><br><span class="line">                outer.<span class="property">photo</span> = resp.<span class="property">photo</span>;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(outer.<span class="property">username</span>, outer.<span class="property">photo</span>);</span><br><span class="line">                outer.<span class="title function_">hide</span>();</span><br><span class="line">                outer.<span class="property">root</span>.<span class="property">menu</span>.<span class="title function_">show</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;open_login_page&quot;</span>);</span><br><span class="line">                <span class="comment">// 如果获取信息未成功，显示登录界面</span></span><br><span class="line">                outer.<span class="title function_">open_login_page</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">error</span>: <span class="function">(<span class="params">resp</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><code>acapp</code> 端：</p>
<ul>
<li>用户一定没有登录，<code>getinfo</code> 函数没有意义，如果是在 <code>acapp</code> 端需要换一个函数，不能通过刷新获取用户信息<ul>
<li><code>getinfo_web</code></li>
<li><code>getinfo_acapp</code></li>
</ul>
</li>
<li>在 <code>start</code> 中初始化时，根据不同的端进行逻辑判断，使用不同的方式获取用户信息；<code>acapp</code> 端使用第三方快捷登录，用不到注册表单和登录表单的信息，所以在 <code>acapp</code> 端根据业务逻辑不需要添加监听函数</li>
<li>第一次需要授权，在一个月内，再打开就不需要授权了</li>
<li><code>web</code> 端和 <code>acapp</code> 端只要有一个授权，另一个在打开游戏的时候就不需要授权了；两个端是同一套账号系统</li>
</ul>
</li>
</ul>
<p>然后我们接下来给大家讲联机模式的时候非常简单啊！就是我们额！用户首先一个新用户打开的话会申请用户授权啊！那么授权成功之后就可以拥有，我们就可以拥有用户的头像，还有用户名，对吧！？啊！然后，大家，然后这个同，然后这个用户点开多人模式之后，哎！他就会镚儿，他，在这个吃鸡地图里边渲染出来他的头像啊！还有他的这个用户名，那么大家就可以 <code>pk</code> 了，可以吧！？啊！那么我们再登回我们之前的账号啊！哎！大大大家也可以发现 <code>acwing</code> 的这个背景的话和账号是绑定的，对吧！？然后我们的背景的话就这个账号了，对！啧！</p>
<p>啊！这个背景你们怎么没有啊！这个背景是我自己上传的呀，大家这个 <code>acwing</code> 的背景的话大家可以自己上传的啊！啧！这两个背景是我自己上传的啊！这个是秒速五厘米的背景，大家如果感兴趣的话你可以去百度搜一下啊！秒速五厘米，对！大家直接搜秒速五厘米樱樱花樱花节吧！应该是，我不太记得这个这这这这节叫什么了啊！啊！樱花节，劫难的劫啊！哦！对！大家可以看到有好多这个这这一幕的非常漂亮的背景，对吧！？啊！大家可以从里面找一个啊！啊！樱花，我然后我的背景应该就这个背景，对吧！？啊！啊！不是这个背景，还不太一样，对吧！？啊！啧！但是差不了太多啊！都都都比较漂亮，哦！这个在在在这里对吧！？啊！大家看大家可以找到在这个地方啊！哦！樱花抄，不好意思啊！樱花抄！啊！拼错了，樱花抄，这里啊！这个，对吧！？啊！额科恩！啊！<code>system</code> 打错了吗！？啊！打错了就不管了啊！反正这个这个额！反正我们的额！<code>git</code> 里面的 <code>commit</code> 是给自己看的啊！不是给别人看的，嗯！啧！好，那么到此为止的话我们整个账号系统就全部讲完啦！我们目前的这个账号系统的话已经非常的炫酷了啊！就是非常的，账号系统的话不要力求炫酷，<strong>要力求丝滑</strong>，对吧！？越丝滑大家获客就会越快啊！啧！我们可以看下我们我们现在的这个，额嗯！用户量有多少个了啊！我们目前的用户已经很多啦！大家可以看到我们有一位 <code>qq</code> ，啊！这个不是，这是我刚刚刚刚测试账号的登录，对吧！？啊！测试账号登录的啊！然后，哎！这位同学应该是，额！刚刚登录刚刚这个这个这个刚刚登录成功的，对吧！？啊！刚刚登录成功的啊！叫，魅罗，是吧！？这位同学是在八点十三分，啊！八点四十三分登录成功的啊！不错啊！</p>
<p>好，那么我们到此为止的话就已经全部讲完啦！打家可以自己玩一玩，你比如说，如果想在 <code>acapp</code> 端打开的话就点点这个打开应用，哎！就可以瞬间瞬间啊！就是，对用户来说他完全感受不到，对吧！？打开之后点一个授权，然后就进来啦！然后后面每次的话就不用点授权了啊！打开之后就自动进来啦，对不对！？啊！嗯！然后，但是大家要自己清楚啊！我们后边是经过经过经过我们开发者不懈的努力才让用户这么丝滑的，对不对！？好，那么我们这样的话就可以非常丝滑的额！在用户的授权之下获取用户的头像还有还有昵称，可以将用户的头像和昵称放到我们的游戏里啊！而且同时我们也可以在这个网页端啊！也可以在我们的网页端打开我们的应该啊！这两个是完全一致的啊！对吧！？啊！你可以在这一端打开我们的应用，退出，然后再登录啊！对吧！？啊！也可以打开我们的应用啊！额嗯！而且我们不同的登录方式会登到不同账号里，比如我用管理员账号登录的话，他就会登录到我们的，哎！这个，哎！登录到这个界面，这个账号下，对吧！？啊！然后如果我们是用 <code>acwing</code> 一键登录的话就登到这个里边，对不对！？不同账号会登到不同的这个账号里边，不同的登录方式会登到不同的账号里，啊！额嗯！那么目前的话我们所有登录方式就全部实现完啦！大家看一下有没有问题。</p>
<p>啊！然后我们从明天开始的话就开始将联机对战了，同学们啊！开始讲联机对战啦！啊！啧！额嗯！吭吭吭，好，大家看一下有没有问题啊！啧！啊！那，哦！对！有一个同学他这个用户名用户昵称比较搞笑啊！咱们先那个用户昵称，先把内个同学删掉啊！额嗯！对！把这个哎呀！把这两个带我名字的都删掉，不利于教学，啧！好，我们一删 <code>Users</code> 的话，我们的 <code>Players</code> 也就消失了，因为，额！<code>Players</code> 定义的时候，这是我们数据库定义的时候的一个一个模式啊！大家看，大家可以回忆一下，为什么我们一删 <code>Users</code> ，就 </p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240922002300061.png" alt="image-20240922002300061"></p>
<p><code>Players</code> 就消失了呢？啊！就是因为我们在定义 <code>Players</code> 的时候，大家可以看一下，我们的 <code>Players</code> 的 <code>Users</code> 里有一个域叫 <code>models.CASCADE</code> 这个域的话这个起名方式的话就表示哎！哎呀，我不小心不小心把咱们直播间关掉了啊！大家弹幕我可能看不到了，大家如果有问题的话可以再发一下弹幕，啧！对！额！然后我们</p>
<p><code>CASCADE</code> ：当删掉 <code>user</code> 之后，那么 <code>user</code> 对应的 <code>players</code> 也会被删掉</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240922002824283.png" alt="image-20240922002824283"></p>
<p>怎么实现类似王者荣耀的地图效果，玩家在地图中间，地图随着玩家不断变化</p>
<p>将玩家坐标做一个坐标变换，假设玩家坐标在 (x, y) 处，屏幕中心坐标是到 (cx, cy) ，将玩家坐标减去 (cx, cy)；在渲染的时候做一个坐标变换；不是一个计算机技术，他只是一个数学方法，啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240922003241197.png" alt="image-20240922003241197"></p>
<p>跨域输出怎么整</p>
<p>如果有跨域传输的问题的话大家可以百度一下啊！因为工程实现方面的话细节会非常非常多啊！然后很多问题的话都是个性化的问题，不是共性问题啊！个性化的问题的话大家可以借助于搜索引擎啊！</p>
<p><code>django</code>容易连接 <code>mysql</code> 吗？</p>
<p>非常容易呀！啊！大家之后如果想把数据库迁移到 <code>mysql</code> 里的话几行命令就可以搞定了啊！首先，这个大家可以百度一下，并不难啊！几个命令就可以搞完了啊！额嗯！首先需要改一下这个 <code>django</code> 的 <code>settings</code>，然后将 <code>django</code> <code>settings</code> 里边的 <code>DATABASE</code> 改成，配置成 <code>mysql</code> 就可以了，然后 <code>mysql</code> 的话一般不推荐大家自己搭啊！这个比如大家用户量很大的时候，比如比如当大家用户量已经达到十已经达到这个四四五万的时候啊！或者一两万的时候，那么再考虑迁移数据库也不迟啊！然后内会儿迁数据库的话不需要自己搭数据库啊！这个可以直接去阿里云，腾讯云，或者华为云租一个数据库服务啊！你租完之后会获得一个数据库的地址</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240922004054829.png" alt="image-20240922004054829"></p>
<p>和端口号，啊！然后将你租的数据库的地址和端口号直接写到 <code>mysql</code> 直接直接写到这个 <code>django settings</code> 里边的 <code>DATABASE</code> 里边的配置里就可以了啊！然后写完之后，将 <code>django</code> 自带数据库的数据传到你租的 <code>mysql</code> 里的话 <code>django</code> 是提供了额！提供了这个 <code>api</code> 的，啊！如果没有记错的话应该也是什么 <code>python3 manage.py</code> 然后后面加一个命令，就可以直接将数据传到 <code>mysql</code> 里了啊！非常容易啊！但是一般不需要啊！前面的话，<code>djnago</code> 自带的数据库，大家如果有几千用户的话足够了啊！</p>
<p>联机对战的话和 <code>thrift</code> 没有关系啊！<code>thrift</code> 是用来做匹配的啊！然后匹配成功之后，就是<strong>联机对战</strong>是意思是什么呢？意思就是说大家，额嗯！意思就是说大家打开一个窗口，那么我在，那么大家打开两个窗口啊！比如说我比兔说这两个窗口是在一个游戏里，那么我在这个窗口里移动的话，我在另外一个窗口里可以看到啊！那么我在这个窗口里打人的话，那么另外一个窗口也会看到我打人啦！啊！就是这这个窗口是同步的啊！那么实际在玩的时候，就是你本地你开一个窗口，然后你在远程你的同学那里开一个窗口，然后你这里移动，你同学那里就可以看到你移动啊！然后你这里一开炮，你同学那里就会看到你开炮，啊！是一致的，这个叫联机对战系统，啊！就实现联机对战的同步功能啊！额！<strong>然后 <code>thrift</code> 的话是说我在匹配阶段</strong>啊！你比如说未来多人多人匹配的话他有一个匹配阶段，对吧！？啊！那么我匹配的时候把谁和谁匹配在一局里，啊！这个是 <code>thrift</code> 的功能，啊！这两个是完全独立的系统啊！匹配系统还有联机对战系统是两独立的系统，啊！联机的话我们是 <code>websocket</code> 对！对！就内东，就内 <code>django_channels</code> 啧！额咳咳咳！</p>
<p>额！聊天室功能会有的啊！我们每局的话是可以聊天的啊！因为大家打游戏是肯定会希望喷人的对不对！？打游戏的时候都希望回车喷人，对不对！？那么我们会在这个聊天框里啊！额嗯！实现这个回车就可以喷人这个功能啊！哎！比如说大家在去玩的时候，你比如你跟你队友玩的时候你队友把你误伤了，你就应该打下回车，然后然后，哎！然后然后然后这个非常炫酷的打打出来一句国粹对吧！？啊！额咳咳！</p>
<p>而且退一步讲，大家写完这些应用之后啊！就算大家以后这个不能卖钱，对吧！？啊！那你也可以用来写到自己的简历里，对不对！？啊！到时候你可以在简历里写上一个写上自己的项目开发经验啊！自己独立开发并且上线了支持两个端口的应用，啊！或者或者是独立开发并且上线了一个哎！这个或者是在 <code>acwing</code> 上，对吧！？你独立开发并上线了十十款应用啊！那么你这样在去找工作的时候啊！尤其是小公司一看，哇！(考！找到了一个这个找到了一个非常找到了一个大神对吧！？啊！你可能就可以直接被录取了，对吧！？因为小公司就缺哎！劳动力，对不对！？你你，然后，你你你自己可以独立开发并上线那么多的应用啊！包括你比如说你自己可以独立开发上线一款什么坦克大战啊！什么超级玛丽啊！什么计算器，画图，乱七八糟的你全实现一遍啊！然后实现完之后，面试官会被你惊呆的，啧！啊！因为他会觉得这些应用很难实现啊！但其实在 <code>acwing</code> 上去实现一款应用</p>
<h3 id="9、实现联机对战——上"><a href="#9、实现联机对战——上" class="headerlink" title="9、实现联机对战——上"></a>9、实现联机对战——上</h3><h4 id="一些名词"><a href="#一些名词" class="headerlink" title="一些名词"></a>一些名词</h4><h5 id="channels"><a href="#channels" class="headerlink" title="channels"></a><code>channels</code></h5><p>Channels 是 Django 的一个扩展，用于支持 WebSocket、长轮询等异步协议。它通过 ASGI（Asynchronous Server Gateway Interface）来实现异步通信，使得 Django 可以处理同时多个连接并进行实时数据推送。</p>
<p>ASGI 是一种接口标准，使得 Python web 应用能够支持异步编程。它不仅支持传统的 HTTP 请求，还可以支持 WebSocket 和其他协议。通过 ASGI，Channels 能够处理并发请求，提升应用的性能和响应速度。</p>
<p>总之，Channels 利用 ASGI 提供了对异步通信的支持，使得 Django 应用能够更灵活地处理实时交互。</p>
<h5 id="Middleware——中间件"><a href="#Middleware——中间件" class="headerlink" title="Middleware——中间件"></a><code>Middleware</code>——中间件</h5><p>中间件（Middleware）是指在操作系统和应用程序之间，提供服务和功能的软件层。它可以帮助不同的应用程序和服务之间进行通信和数据管理，简化开发过程，提高系统的可伸缩性和互操作性。常见的中间件类型包括消息中间件、数据库中间件和web中间件等。</p>
<h5 id="asgi-异步网关接口"><a href="#asgi-异步网关接口" class="headerlink" title="asgi: 异步网关接口"></a><code>asgi</code>: 异步网关接口</h5><p>ASGI配置是指“异步网关接口”（Asynchronous Server Gateway Interface）的设置，主要用于Python web框架和服务器之间的通信。ASGI允许处理异步请求，支持长连接和实时通信，适用于现代web应用程序。配置ASGI通常涉及指定应用程序实例、路由、中间件等，以确保服务器正确处理请求和响应。daphne</p>
<h5 id="daphne"><a href="#daphne" class="headerlink" title="daphne"></a>daphne</h5><p>Daphne 是一个 ASGI（Asynchronous Server Gateway Interface）服务器，主要用于运行 Django Channels 应用程序。Daphne 支持 WebSocket 和 HTTP 协议，使得开发者能够构建实时、异步的Web应用程序。它能够处理长连接、推送消息等功能，适合实现聊天应用、在线游戏、实时通知等场景。</p>
<p>Daphne 通常与 Django 框架配合使用，但它也可以独立于 Django 运行其他支持 ASGI 的应用程序。总之，Daphne 的主要作用是作为一个异步服务器，支持更高效的网络通信。</p>
<p>Daphne 是一个 ASGI（Asynchronous Server Gateway Interface）服务器，主要用于运行 Django Channels 应用程序。Daphne 支持 WebSocket 和 HTTP 协议，使得开发者能够构建实时、异步的Web应用程序。它能够处理长连接、推送消息等功能，适合实现聊天应用、在线游戏、实时通知等场景。</p>
<p>Daphne 通常与 Django 框架配合使用，但它也可以独立于 Django 运行其他支持 ASGI 的应用程序。总之，Daphne 的主要作用是作为一个异步服务器，支持更高效的网络通信。</p>
<h5 id="这段代码是-Django-项目的-ASGI-配置文件的示例。以下是对代码的详细解释："><a href="#这段代码是-Django-项目的-ASGI-配置文件的示例。以下是对代码的详细解释：" class="headerlink" title="这段代码是 Django 项目的 ASGI 配置文件的示例。以下是对代码的详细解释："></a>这段代码是 Django 项目的 ASGI 配置文件的示例。以下是对代码的详细解释：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ASGI config for acapp project.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">It exposes the ASGI callable as a module-level variable named ``application``.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For more information on this file, see</span></span><br><span class="line"><span class="string">https://docs.djangoproject.com/en/3.2/howto/deployment/asgi/</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.core.asgi <span class="keyword">import</span> get_asgi_application</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置环境变量，用于告诉 Django 使用哪个设置模块</span></span><br><span class="line">os.environ.setdefault(<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>, <span class="string">&#x27;acapp.settings&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 ASGI 应用程序</span></span><br><span class="line">application = get_asgi_application()</span><br></pre></td></tr></table></figure>

<h6 id="代码解释"><a href="#代码解释" class="headerlink" title="代码解释"></a>代码解释</h6><ol>
<li><p><strong>文档字符串</strong>:</p>
<ul>
<li>提供了关于该文件的说明，指明这是 <code>acapp</code> 项目的 ASGI 配置，并提供了 Django 文档的链接以获取更多信息。</li>
</ul>
</li>
<li><p><strong>导入模块</strong>:</p>
<ul>
<li><code>import os</code> 用于与操作系统交互，特别是设置环境变量。</li>
<li><code>from django.core.asgi import get_asgi_application</code> 导入 Django 提供的函数，用于获取 ASGI 应用程序实例。</li>
</ul>
</li>
<li><p><strong>设置环境变量</strong>:</p>
<ul>
<li><code>os.environ.setdefault(&#39;DJANGO_SETTINGS_MODULE&#39;, &#39;acapp.settings&#39;)</code> 设置 Django 环境变量，告诉 Django 使用的配置文件。此处，<code>&#39;acapp.settings&#39;</code> 指向项目中的 <code>settings.py</code> 文件。</li>
</ul>
</li>
<li><p><strong>获取 ASGI 应用程序实例</strong>:</p>
<ul>
<li><code>application = get_asgi_application()</code> 调用 Django 函数生成 ASGI 应用程序实例，并将其赋值给 <code>application</code> 变量。该变量是处理 WebSocket 和 HTTP 请求的接口，适用于支持异步通信的 ASGI 服务器。</li>
</ul>
</li>
</ol>
<h6 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h6><p>这个配置文件是部署 Django 应用（特别是当应用需要处理 WebSocket 和其他异步协议时）的重要组成部分。通过 <code>application</code> 变量，ASGI 服务器（如 <strong>Daphne</strong> 或 Uvicorn）可以<strong>处理来自客户端的请求</strong>，并与 Django 应用进行交互。</p>
<h5 id="uwsgi"><a href="#uwsgi" class="headerlink" title="uwsgi"></a><code>uwsgi</code></h5><p>uWSGI 是一个开源的应用服务器，用于运行 Python 应用程序，特别是 WSGI 应用程序。它实现了 WSGI 规范，并提供了高性能的服务，同时支持多种语言和协议。uWSGI 可用作 Web 服务器的后端，能够处理并发请求，支持进程管理、负载均衡和多线程等特性。通过与 Nginx 或 Apache 等 Web 服务器结合使用，uWSGI 可以高效地处理 Web 流量，是部署 Python Web 应用的常用选择。</p>
<h6 id="1、uWSGI-示例"><a href="#1、uWSGI-示例" class="headerlink" title="1、uWSGI 示例"></a>1、uWSGI 示例</h6><p>uWSGI 通常用于运行 WSGI 应用。以下是运行上述 WSGI 应用的 uWSGI 配置示例：</p>
<ol>
<li>将上述 WSGI 应用保存为 <code>app.py</code>。</li>
<li>在终端中使用以下命令运行 uWSGI：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uwsgi --http :8000 --wsgi-file app.py --callable simple_app</span><br></pre></td></tr></table></figure>

<p>这条命令将 uWSGI 配置为通过 HTTP 在 8000 端口上运行，并指定 <code>app.py</code> 文件及其 WSGI 应用 <code>simple_app</code>。</p>
<h6 id="2、这是一个标准的-uWSGI-配置文件示例，它定义了如何运行一个-Django-应用程序。以下是对各个配置项的详细解释："><a href="#2、这是一个标准的-uWSGI-配置文件示例，它定义了如何运行一个-Django-应用程序。以下是对各个配置项的详细解释：" class="headerlink" title="2、这是一个标准的 uWSGI 配置文件示例，它定义了如何运行一个 Django 应用程序。以下是对各个配置项的详细解释："></a>2、这是一个标准的 uWSGI 配置文件示例，它定义了如何运行一个 Django 应用程序。以下是对各个配置项的详细解释：</h6><p>这是一个标准的 uWSGI 配置文件示例，它定义了如何运行一个 Django 应用程序。以下是对各个配置项的详细解释：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">socket</span>          = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8000</span>    <span class="comment">; 绑定到本地 IP 地址和端口，uWSGI 将在此监听请求</span></span><br><span class="line"><span class="attr">chdir</span>           = /home/acs/acapp   <span class="comment">; 设置工作目录，使得 uWSGI 知道在哪里查找应用程序</span></span><br><span class="line"><span class="attr">wsgi-file</span>       = acapp/wsgi.py      <span class="comment">; 指定 WSGI 应用文件，通常是 Django 项目的 wsgi.py</span></span><br><span class="line"><span class="attr">master</span>          = <span class="literal">true</span>                <span class="comment">; 启用主进程管理，便于处理进程管理和信号</span></span><br><span class="line"><span class="attr">processes</span>       = <span class="number">2</span>                   <span class="comment">; 启动的工作进程数量，通常取决于服务器的 CPU 核心数</span></span><br><span class="line"><span class="attr">threads</span>         = <span class="number">5</span>                   <span class="comment">; 每个进程可使用的线程数量</span></span><br><span class="line"><span class="attr">vacuum</span>          = <span class="literal">true</span>                <span class="comment">; 启用清理模式，停止后删除所有 socket 文件和 PID 文件</span></span><br></pre></td></tr></table></figure>

<h6 id="配置项详细说明"><a href="#配置项详细说明" class="headerlink" title="配置项详细说明"></a>配置项详细说明</h6><ol>
<li><p><strong>socket</strong>:</p>
<ul>
<li><code>socket = 127.0.0.1:8000</code> 指定 uWSGI 启动的 socket 地址，这里是将请求监听在本地的 8000 端口。你也可以使用 Unix socket，比如 <code>socket = /tmp/myapp.sock</code>。</li>
</ul>
</li>
<li><p><strong>chdir</strong>:</p>
<ul>
<li><code>chdir = /home/acs/acapp</code> 设置 uWSGI 的工作目录，将其更改为 Django 项目的根目录，以便能够找到相关的文件和模块。</li>
</ul>
</li>
<li><p><strong>wsgi-file</strong>:</p>
<ul>
<li><code>wsgi-file = acapp/wsgi.py</code> 指定 WSGI 文件的位置，这个文件一般是 Django 项目中用于处理请求的 WSGI 配置文件。</li>
</ul>
</li>
<li><p><strong>master</strong>:</p>
<ul>
<li><code>master = true</code> 启用主进程模式（master mode），让 uWSGI 管理子进程。这通常更稳定，并且可以更好地处理重启和信号。</li>
</ul>
</li>
<li><p><strong>processes</strong>:</p>
<ul>
<li><code>processes = 2</code> 设置要启用的工作进程数量。一般情况下，可以根据服务器的 CPU 核心数来设置，通常选择与核心数相等或乘以 1.5 的数量。</li>
</ul>
</li>
<li><p><strong>threads</strong>:</p>
<ul>
<li><code>threads = 5</code> 指定每个工作进程可以使用的线程数量。这使得 uWSGI 在每个进程中能够处理更多的并发请求。</li>
</ul>
</li>
<li><p><strong>vacuum</strong>:</p>
<ul>
<li><code>vacuum = true</code> 启用清理功能，这将确保在 uWSGI 停止时清理所有生成的 socket 文件与 PID 文件，避免残留文件影响下次启动。</li>
</ul>
</li>
</ol>
<h6 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h6><p>将上述内容存为一个名为 <code>myapp.ini</code> 的配置文件（你可以根据需要命名），然后可以用以下命令启动 uWSGI：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uwsgi --ini myapp.ini</span><br></pre></td></tr></table></figure>

<p>这将根据配置文件中的定义来启动 uWSGI 服务器并运行你的 Django 应用。</p>
<h5 id="wsgi"><a href="#wsgi" class="headerlink" title="wsgi"></a>wsgi</h5><p>WSGI（Web Server Gateway Interface）是一种Python的Web服务器网关接口规范，用于连接Web服务器与Python应用程序。它定义了一种简单的接口，使得Python应用程序能够与Web服务器进行通信，便于开发和部署Web应用。WSGI的主要优势是它的灵活性和可扩展性，支持多种Web框架和服务器。</p>
<h6 id="1、WSGI-示例"><a href="#1、WSGI-示例" class="headerlink" title="1、WSGI 示例"></a>1、WSGI 示例</h6><p>通常，WSGI 应用程序是一个简单的 Python 函数，符合 WSGI 接口规范。以下是一个最基本的 WSGI 应用示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">simple_app</span>(<span class="params">environ, start_response</span>):</span><br><span class="line">    status = <span class="string">&#x27;200 OK&#x27;</span>  <span class="comment"># HTTP 状态</span></span><br><span class="line">    headers = [(<span class="string">&#x27;Content-type&#x27;</span>, <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span>)]</span><br><span class="line">    start_response(status, headers)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> [<span class="string">b&#x27;Hello, World!&#x27;</span>]  <span class="comment"># 返回的响应体</span></span><br></pre></td></tr></table></figure>

<h6 id="2、这个例子展示了一个返回-“Hello-World-”-的简单-WSGI-应用。"><a href="#2、这个例子展示了一个返回-“Hello-World-”-的简单-WSGI-应用。" class="headerlink" title="2、这个例子展示了一个返回 “Hello, World!” 的简单 WSGI 应用。"></a>2、这个例子展示了一个返回 “Hello, World!” 的简单 WSGI 应用。</h6><p>这段代码是 Django 项目的 WSGI 配置文件的示例。以下是对代码的详细解释：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">WSGI config for acapp project.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">It exposes the WSGI callable as a module-level variable named ``application``.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For more information on this file, see</span></span><br><span class="line"><span class="string">https://docs.djangoproject.com/en/3.2/howto/deployment/wsgi/</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.core.wsgi <span class="keyword">import</span> get_wsgi_application</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置环境变量，用于告诉 Django 使用哪个设置模块</span></span><br><span class="line">os.environ.setdefault(<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>, <span class="string">&#x27;acapp.settings&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 WSGI 应用程序</span></span><br><span class="line">application = get_wsgi_application()</span><br></pre></td></tr></table></figure>

<p><strong>代码解释</strong></p>
<ol>
<li><p><strong>文档字符串</strong>:</p>
<ul>
<li>提供了该文件的说明，包括项目名称（<code>acapp</code>）和说明如何使用该文件的链接。</li>
</ul>
</li>
<li><p><strong>导入模块</strong>:</p>
<ul>
<li><code>import os</code> 用于操作系统接口，主要是为了设置环境变量。</li>
<li><code>from django.core.wsgi import get_wsgi_application</code> 导入 Django 提供的函数，用于获取 WSGI 应用程序。</li>
</ul>
</li>
<li><p><strong>设置环境变量</strong>:</p>
<ul>
<li><code>os.environ.setdefault(&#39;DJANGO_SETTINGS_MODULE&#39;, &#39;acapp.settings&#39;)</code> 设置 Django 环境变量，指定要使用的设置模块。这里的 <code>&#39;acapp.settings&#39;</code> 是指在项目中名为 <code>settings.py</code> 的文件。</li>
</ul>
</li>
<li><p><strong>获取 WSGI 应用程序实例</strong>:</p>
<ul>
<li><code>application = get_wsgi_application()</code> 调用 Django 函数生成 WSGI 应用程序实例，并将其赋值给 <code>application</code> 变量。该变量是 WSGI 服务器（如 uWSGI 或 Gunicorn）用于处理请求的接口。</li>
</ul>
</li>
</ol>
<p><strong>总结</strong></p>
<p>这个配置文件是部署 Django 应用时的必要组成部分，它让 WSGI 服务器能够找到并使用 Django 应用程序。可以通过这个 <code>application</code> 变量与 Web 服务器进行交互，处理 HTTP 请求。</p>
<h4 id="结合示例"><a href="#结合示例" class="headerlink" title="结合示例"></a>结合示例</h4><p>通常，uWSGI 与 Nginx 配合使用。以下是一个 Nginx 配置示例，它将请求转发到运行 uWSGI 的后端：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">include</span> uwsgi_params;</span><br><span class="line">        <span class="attribute">uwsgi_pass</span> unix:/path/to/your/socket.sock;  <span class="comment"># uWSGI socket</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，Nginx 将接收到的请求转发到通过 Unix socket 通信的 uWSGI。</p>
<p>这些例子展示了 WSGI 和 uWSGI 的基本用法和配合使用的方式。</p>
<p><strong>联机对战、在线聊天室。</strong></p>
<p>在线聊天室比联机对战简单，只要能实现联机对战，稍微加点东西，就可以实现一个在线聊天室</p>
<p>朴素版本的 <code>moba</code> 类游戏，相当于把<strong>骨架</strong>给大家写好了</p>
<p>可以<strong>丰富技能的类型</strong>：搞一些 <code>aoe</code> ，闪现，隐身，眩晕，放大招，</p>
<p>实现<strong>小地图功能</strong>：现在看到的是完整的地图，可以进一步实现成 <code>lol</code> ，或者 <code>dota</code> 那样，有一个很大的地图，每次只能看到一个小窗口，这样的机制大家也都是可以自己实现的，好吧！？啊！</p>
<p>一些<strong>细节的功能</strong>还没有实现，比如说游戏结束之后的处理逻辑，内些逻辑的话其实没有什么难度，对吧！？啊！所以说我们先放到最后去处理，啊！我们先把一些中间一些比较核心的啊！还有一些比较复杂的模块儿先讲掉啊！</p>
<p>记得清空缓存文件</p>
<p><code>acwing</code> 云端的优化原理是什么？</p>
<p>那么我们来看一下这节课的内容，啊！</p>
<h4 id="这节课的内容分为四个部分，联机对战分为四个部分，啊！"><a href="#这节课的内容分为四个部分，联机对战分为四个部分，啊！" class="headerlink" title="这节课的内容分为四个部分，联机对战分为四个部分，啊！"></a>这节课的内容分为四个部分，联机对战分为四个部分，啊！</h4><h5 id="1、统一长度单位"><a href="#1、统一长度单位" class="headerlink" title="1、统一长度单位"></a>1、统一长度单位</h5><h5 id="2、增加联机对战模式"><a href="#2、增加联机对战模式" class="headerlink" title="2、增加联机对战模式"></a>2、增加联机对战模式</h5><h5 id="3、配置-django-channels"><a href="#3、配置-django-channels" class="headerlink" title="3、配置 django_channels"></a>3、配置 <code>django_channels</code></h5><h5 id="4、编写同步函数"><a href="#4、编写同步函数" class="headerlink" title="4、编写同步函数"></a>4、编写同步函数</h5><h1 id="注意咱们给大家讲的是方法和技能，对吧！？啊！你只要学会了这个技能你未来其他游戏都可以随便写，对不对！？啊！"><a href="#注意咱们给大家讲的是方法和技能，对吧！？啊！你只要学会了这个技能你未来其他游戏都可以随便写，对不对！？啊！" class="headerlink" title="注意咱们给大家讲的是方法和技能，对吧！？啊！你只要学会了这个技能你未来其他游戏都可以随便写，对不对！？啊！"></a>注意咱们给大家讲的是方法和技能，对吧！？啊！你只要学会了这个技能你未来其他游戏都可以随便写，对不对！？啊！</h1><h3 id="希望某一个物体随着另一个物体的相关参数改变而改变，则将该物体的参数设置为另一物体的相对值，将该物体与另一物体的参数绑定：比如游戏中玩家的半径、玩家发射的子弹（大小，移动距离，伤害等），闪现的距离（闪现后的例子效果）都相对于屏幕大小改变而改变；而不是子弹大小相对玩家半径改变而改变！！！"><a href="#希望某一个物体随着另一个物体的相关参数改变而改变，则将该物体的参数设置为另一物体的相对值，将该物体与另一物体的参数绑定：比如游戏中玩家的半径、玩家发射的子弹（大小，移动距离，伤害等），闪现的距离（闪现后的例子效果）都相对于屏幕大小改变而改变；而不是子弹大小相对玩家半径改变而改变！！！" class="headerlink" title="希望某一个物体随着另一个物体的相关参数改变而改变，则将该物体的参数设置为另一物体的相对值，将该物体与另一物体的参数绑定：比如游戏中玩家的半径、玩家发射的子弹（大小，移动距离，伤害等），闪现的距离（闪现后的例子效果）都相对于屏幕大小改变而改变；而不是子弹大小相对玩家半径改变而改变！！！"></a>希望某一个物体随着另一个物体的相关参数改变而改变，则将该物体的参数设置为另一物体的相对值，将该物体与另一物体的参数绑定：比如游戏中玩家的半径、玩家发射的子弹（大小，移动距离，伤害等），闪现的距离（闪现后的例子效果）都相对于屏幕大小改变而改变；而不是子弹大小相对玩家半径改变而改变！！！</h3><h3 id="JS-打包会交-webpack-啥的吗——-level-2-就不讲了，level-2-以讲后端为主，以讲-django-为主"><a href="#JS-打包会交-webpack-啥的吗——-level-2-就不讲了，level-2-以讲后端为主，以讲-django-为主" class="headerlink" title="JS 打包会交 webpack 啥的吗—— level-2 就不讲了，level-2 以讲后端为主，以讲 django 为主"></a><code>JS</code> 打包会交 <code>webpack</code> 啥的吗—— <code>level-2</code> 就不讲了，<code>level-2</code> 以讲后端为主，以讲 <code>django</code> 为主</h3><p><code>web3</code> 详细讲前端——不过前端啊！我讲的时候跟这也差不了太多啊！前端的话是变模仿边学，对！学的方法都是一样的</p>
<p><code>acwing</code> 的云端系统优化原理是什么？</p>
<p>啊！这个就不给大家讲啦！不是我们这节课的重点啊！这个比较复杂，额嗯！咳嗯咳嗯！</p>
<p><code>git</code> 里存了 <code>__cache__.py</code> 也问题不算太大，但是推荐你把内个删掉啊！删掉的方法，实在不行你可以将项目，将内个啊！<code>acgit</code> 上的仓库删掉，然后重新建一个仓库，啊！因为，你这样的话每，里边只有只有源代码，那么仓库会显得更加的整洁，更容易维护，啊！</p>
<p>为什么原先 <code>ip</code> 地址访问不了，因为这个 <code>nginx</code> 里没配置啊！没配置的话就没有</p>
<p><code>vim</code> 查找下一个是小写 <code>n</code>，查找上一个是大写 <code>N</code></p>
<p>把工程课学的东西，啊！正确的抽象到简历上，这个你开发一个项目，然后你可以把你的项目写到简历上，啊！但是不推荐把咱们工程课直接作为简历上的项目，因为我们会有非常多的同学跟你写一样的项目，对吧！？那你很容易被发现<strong>抄袭</strong>，啊！所以你最好，但是咱们工程科给大家讲的项目你会发现都会讲一个骨架，然后有很多可以丰富的细节，啊！你可以把！在咱们工程课讲的框架上去丰富非常多的细节，丰富完，丰富完之后，你可以再写到自己的简历上，然后给个网址，对吧！？然后面试官可以看啊！</p>
<p>注意如果我们改了后端的话，那么 <code>wss</code> 服务也要重启，啊！所以说我们每次都要重启一下，每次打包重启 <code>http</code> 服务，再重启 <code>wss</code> 服务，啊！然后未来我们还要清空清空一下缓存，啊！所以每次我们改完之后要重启四个东西啊！</p>
<p><code>y</code> 总你这是在游戏公司实习学的吗？不是我这是自学的啊！这个不是，这个不是自学的，这个是我给大家现想的啊！这个东西，额嗯！我之前是在这个额嗯！本科毕业的时候啊！本科毕业的时候，暑假，啧！这个自学了两个月的暑假，啊！因为内暑假没事儿干，对吧！？所以就学了学 <code>unity</code> 啊！然后，像这一套东西啊！每一个什么，额！每一个对象，都有一个 <code>uuid</code> ，这是我给大家现编的啊！因为我觉得这个如果要实现的话，他肯定要有一个要有一个唯一编号，对吧！？啊！对，这是我给大家意淫的啊！我觉得应该是这么，应该是这个道理啊！额！大家自己去写的时候其实也是一样，当你把算法学完之后，你会发现，他很多，很多工机，很多工具背后的原理你就可以自己猜一个出来，啧！对不对！？啊！你比如说这个，额！之前给大家讲的时候，我们的这个什么，<code>game-object</code> 对吧！？啊！就是给大家抽象的这个 <code>ac-game-object</code> 的这几个东西啊！什么 <code>start</code> 啊！<code>update</code> 还有这个 <code>destroy</code> 啊！这些都是 <code>unity</code> 提供好的 <code>api</code> 对吧！？啊！那么他背后怎么实现呢？这一套东西，后面这些实现原理是我给大家自己瞎编的啊！但是我感觉他应该就是这么实现的，啊！可以吧！？啊！所以大家这个把算法学好啊！别的东西其实都不是很难啊！这些东西的话你条条大路通罗马，怎么实现都可以啊！额！我觉得这个猜的应该八九不离十啊！每一个网络通信元素都肯定有一个唯一 <code>id</code> ，要不然我不知道谁是谁啊！对不对！？啊！额！然后，再提一句啊！就是额！这个一般的游戏引擎同步的时候不是按照这个逻辑来同步的，啊！他是按照更加暴力的方式来同步的，啊！什么意思呢？你比如说咳嗯！你看我们这个需要同步每个玩家的每个时刻的位置，对吧！？每个玩家和所有子弹每个时刻的位置，对不对！？额嗯！我们这里同步的时候大家会发现，完全没有同步坐标，对吧！？我们是没有同步坐标的，对不对！？对吧！？我们是同步的所有操作，啊！额嗯！然后一般的游戏引擎他同步的时候他会暴力给你同步，他会同步所有坐标，啊！也就是说啊！他并不会哎！这个传什么什么 <code>move_to</code> 这种函数，当然你也可以传了，但是他他其实同步的时候他不是这么传的啊他是直接，比如说我一秒发个十几二十次，我每一秒种，啊！我每一个每一秒钟每一个窗口向服务器器发送二十次消息，这个消息是干嘛的，这个消息话携带了我本地所有对象的所有坐标啊！然后向其他所有的窗口发出广播这消息，然后其他窗口接收到这消息之后，啊！将他对应的物体放到对应的位置上，当然放的时候可能做一个差值，可能比较<strong>平滑的过度过去</strong>，而不是直接变过去啊！然后内样实现的话你会发现大家的这个服务器可能就承载不了这个压力了，嗯哼，对吧！？他就比较慢，对不对！？所以说这块儿同步的时候啊！我们其实也是跟一般的这游戏引擎不太一样啊！做一个优化，因为咱们这个游戏比较特殊，对吧！？没有同步坐标，而是同步的所有操作啊！那么操作的话，我们，人的操作再快能操作多少次呢？对不对！？啊！再快的话，你一秒钟点鼠标点个五六下，撑死了，对吧！？啊！所有这样的会更加高效一些啊！恩咳嗯咳嗯！好，啊！刚刚讲到什么地方了，额嗯！这个不太记得不太记得讲哪儿了啊！哎！服务器端可以正常的接收到我们的信息</p>
<h5 id="1、统一长度单位-1"><a href="#1、统一长度单位-1" class="headerlink" title="1、统一长度单位"></a>1、统一长度单位</h5><p>实现联机，首先要<strong>统一长度单位</strong></p>
<p>你看这个秦始皇统一全国之后，他第一步要做的就是统一度量衡，对不对！？啊！</p>
<p>那么，我们要保证我们的用户啊！不管在什么样的端口（长宽比例不一样）打开，我们要能够保证啊！我们，啊！保证我们不同的用户看到的<strong>地图形状</strong>起码是额嗯！<strong>相似的</strong>，对吧！？啊！起码是<strong>等比例放大</strong>的才可以啊！</p>
<p>如果我们地图的形状是下面这样的</p>
<p>一个玩家在较宽的地图中走到边界处，可能在地图较窄的玩家哪里就看不到了，就不合理，对不对！？</p>
<p>所以说我们第一步要做的就是所有的地图，所有的联机对战的地图，他的<strong>长宽比</strong>一定要一样，对不对！？啊！</p>
<h6 id="统一度量衡，统一长度单位啊！修改窗口大小"><a href="#统一度量衡，统一长度单位啊！修改窗口大小" class="headerlink" title="统一度量衡，统一长度单位啊！修改窗口大小"></a>统一度量衡，统一长度单位啊！修改窗口大小</h6><ul>
<li><p>第一步：先统一长宽</p>
<p>不同的玩家打开屏幕，长宽比应该是不变的，屏幕的长宽比一般是 <code>16: 9</code>，所以现将长宽统一成 <code>16: 9</code>，统一的时候要看一下我们的窗口，有的窗口比较长，有的窗口比较宽，最小的长度的瓶颈不同，所以在渲染地图的时候，要计算一下长和宽，取一个最小值，然后将长和宽渲染成 <code>16: 9</code> 的一个长宽比</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924014457014.png" alt="image-20240924014457014"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924014521294.png" alt="image-20240924014521294"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">resize</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;resize&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = <span class="variable language_">this</span>.<span class="property">$playground</span>.<span class="title function_">width</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = <span class="variable language_">this</span>.<span class="property">$playground</span>.<span class="title function_">height</span>();</span><br><span class="line">    <span class="comment">// 16： 9 算一下单位长度，将用户打开界面时的长宽除以对应比例，得到游戏单位长宽，然后将游戏元素的长宽设置为游戏单位长宽</span></span><br><span class="line">    <span class="comment">// 这样游戏元素的位置、大小都可以根据游戏单位长宽进行缩放，以适应不同分辨率的屏幕</span></span><br><span class="line">    <span class="comment">// 这样做的好处是，游戏元素的位置、大小都可以根据游戏单位长宽进行缩放，以适应不同分辨率的屏幕</span></span><br><span class="line">    <span class="comment">// uit 单位是 px</span></span><br><span class="line">    <span class="keyword">let</span> unit = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">this</span>.<span class="property">width</span> / <span class="number">16</span>, <span class="variable language_">this</span>.<span class="property">height</span> / <span class="number">9</span>);</span><br><span class="line">    <span class="comment">// 游戏界面实际大小，长宽小于等于窗口大小</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = unit * <span class="number">16</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = unit * <span class="number">9</span>;</span><br><span class="line">    <span class="comment">// 地图长宽比确定，而且还要随着窗口大小的变化而变化，因此需要动态设置地图的长宽</span></span><br><span class="line">    <span class="comment">// 需要一个基准 scale，然后根据窗口大小动态调整 scale，以保证地图的长宽比不变</span></span><br><span class="line">    <span class="comment">// 基准：未来调整窗口大小的时候，地图一变，地图里的所有元素都要随之调整，因此需要一个基准 scale</span></span><br><span class="line">    <span class="comment">// 比如小球的大小和位置也需要相对地图发生变化，所以地图里的所有元素存储的时候使用相对于 heigth 的比例来存储</span></span><br><span class="line">    <span class="comment">// 使用 scale 来表示单位 1，scale 取成地图的高度</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scale</span>	 = <span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现一个函数调整长宽比</p>
</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924005620258.png" alt="image-20240924005620258"></p>
<ul>
<li>只有游戏界面需要动态调整大小，菜单界面和设置界面没有实现动态调整大小</li>
</ul>
<h6 id="修改游戏地图，等比例缩"><a href="#修改游戏地图，等比例缩" class="headerlink" title="修改游戏地图，等比例缩"></a>修改游戏地图，等比例缩</h6><ul>
<li><p><strong>渲染图像</strong>的时候使用绝对长度（乘以 <code>scale</code>），<strong>修改坐标或者长度时</strong>使用相对于 <code>scale</code> 的相对长度</p>
<ul>
<li>白色好像我们没有做事儿一样</li>
</ul>
</li>
<li><p><strong>地图从白渐变为黑色：需求是没有渐变过程，一直是黑色</strong></p>
<ul>
<li>因为每一帧刷新的时候，涂一层半透明的蒙版，图上如果次之后，会慢慢变黑，不是一个瞬间的过程；</li>
<li>为了避免渐变的过程，在每次 <code>resize</code> 改变地图大小之后涂一层百分之百透明度的啊！就是完全不透明的蒙版</li>
<li>地图大小可以随着与窗口一样大的 <code>div</code> 一起动态改变大小了，每次去长和宽按 <code>16:9</code> 分割之后的最小值</li>
</ul>
</li>
<li><p>等比例改变地图中的元素大小，将元素的度量单位变成相对大小（相对 <code>scale</code> —— <code>canvas</code> 高度 <code>height</code>）存相对于 <code>playground.scale</code> 的一个百分比，一个小数</p>
</li>
<li><p>改变地图里的角色的长度，将有关长度的绝对变量变成相对变量（<code>scale</code>）</p>
<ul>
<li><p>玩家半径，玩家速度，受损速度</p>
<ul>
<li><p>创建玩家时使用相对于 <code>scale</code> 的小数来表示</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924211904286.png" alt="image-20240924211904286"></p>
</li>
</ul>
</li>
<li><p>人机移动的位置</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924213128511.png" alt="image-20240924213128511"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924213403106.png" alt="image-20240924213403106"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924213556006.png" alt="image-20240924213556006"></p>
</li>
<li><p>鼠标点击的玩家要移动到的位置</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924214543203.png" alt="image-20240924214543203"></p>
</li>
<li><p>鼠标左键点击的玩家要发射子弹的位置</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924215900983.png" alt="image-20240924215900983"></p>
</li>
<li><p>火球的半径，移动速度，移动距离，伤害值</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924221022282.png" alt="image-20240924221022282"></p>
</li>
<li><p>冰球的半径，移动速度，移动距离，伤害值</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924220945579.png" alt="image-20240924220945579"></p>
</li>
<li><p>技能栏有关长度的部分也设置为相对于 <code>scale</code> 的小数</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924215446163.png" alt="image-20240924215446163"></p>
</li>
<li><p>玩家移动停止时的判断值 <code>eps</code> 使用 <code>0.01</code> 的 <code>scale</code> 来表示</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924212605334.png" alt="image-20240924212605334"></p>
</li>
<li><p>绘制图像和玩家的时候使用绝对长度，移动坐标改变时使用相对于 <code>scale</code> 的相对长度</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924222735517.png" alt="image-20240924222735517"></p>
</li>
<li><p>将玩家移动的逻辑提取到一个函数里—— <code>update_move</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924222814725.png" alt="image-20240924222814725"></p>
</li>
<li><p>粒子效果的半径，速度，移动距离</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240924223104039.png" alt="image-20240924223104039"></p>
</li>
</ul>
</li>
<li><p>可以把地图改成火焰啊！冰川！草地！</p>
</li>
<li><p>瞬移 <code>bug</code>: 机器人的速度没有除以 <code>scale</code></p>
</li>
<li><p>点击左键选中冰球，再次点击发射的是火球：因为要改物体的绝对长度为相对长度，因此图省事儿改完 <code>fireball</code> 的逻辑后，直接复制粘贴到了 <code>iceball</code> 中，而 <code>fireball</code> 没有修改为 <code>iceball</code> ，出现了 <code>bug</code></p>
</li>
</ul>
<h5 id="2、增加联机对战模式-1"><a href="#2、增加联机对战模式-1" class="headerlink" title="2、增加联机对战模式"></a>2、增加联机对战模式</h5><p>联机是指多个窗口，多名玩家在同一个地图里玩，每个玩家看到的是一个独立的窗口（森林冰火人是单独一个窗口两名玩家）</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240928090002303.png" alt="image-20240928090002303"></p>
<p>三名玩家联机的话应该是每个玩家的地图里出现自己和其他玩家，每个人都可以看见三名玩家</p>
<p>三个窗口：如果想联机每个玩家都可以看到对方及其操作：一可以看到二三；二可以看到一三；三可以看到一二</p>
<ul>
<li><p>某一名新玩家（三）加入对局，应该告诉其他玩家</p>
</li>
<li><p>告诉新玩家其他玩家的信息（一二）</p>
<ul>
<li>一在三之前到了；二在三之前到了</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240928232410499.png" alt="image-20240928232410499"></p>
</li>
<li><p>通过一个中心服务器实现</p>
<ul>
<li><p>创建玩家事件—— <code>create player</code></p>
<ul>
<li>三来了，服务器将三加进来，然后将三来的消息告诉一和二；告诉三，一和二已经来了</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240928232812649.png" alt="image-20240928232812649"></p>
</li>
<li><p>移动事件—— <code>move_to</code></p>
<ul>
<li>三移动，通过中心服务器告诉一和二，将三在各自的窗口里移到某一个地方</li>
</ul>
</li>
<li><p>发射子弹—— <code>shoot_x</code></p>
<ul>
<li><p>一向某一个方向发射了一个火球，告诉服务器，服务器将信息广播给二和三，然后二和三在各自的窗口中从一当前的位置上向固定的方向发射一个火球</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240928233700351.png" alt="image-20240928233700351"></p>
</li>
</ul>
</li>
<li><p>攻击事件—— <code>attack</code></p>
<ul>
<li>前面三个函数已经足够了，可以计算出攻击的结果；而网络有延迟，原本每个人每个窗口看到的坐标应该是一致的，由于网络延迟的存在，三动完之后，本地动了，但是一和二需要经过信息传递再动，一和二相对三会有一个延迟；</li>
<li>可能三发射了一个火球，可能一看起来三发射了一个火球，我已经跑了，但是三这里一看，我击中了，会有一个判定问题，判断是否击中都是在窗口里判断的，不是在服务器端判断；有没有击中对手，由自己的窗口说了算，写外挂直接写一个函数，直接击中一，不管有没有打中—— <code>fps</code> 游戏外挂的一种；安全性不强，用户可以作弊，好处是每个用户的体验会很棒，在自己的窗口里判断而不是在服务器端判断，在服务器端判断每个人的操作会有延迟，已经看到碰上了，服务器有延迟，还没有判断碰上，用户会感觉操作体验不是很棒，一般来说游戏厂商都会以用户的操作体验为优先考虑——所以在本地判断；由于有延迟，可能在本地判断碰上了，但是在其他玩家那么没有碰上；这里使用这样的策略：谁发射的火球以谁的窗口为主，火球能击中谁，发射火球的窗口说了算，击中别人之后，通过广播的方式告诉其他窗口谁谁谁在内个位置被击中了；之所以这样设计，是因为大部分情况下玩家都是关注自己的火球击中了谁，所以说既然玩家关注这一点，这一点就以你为主，你看到击中了，你广播给别人</li>
<li>这里没有房主的概念，所有人都是低位等同的啊！嗯吭吭，因为你会发现谁发火球以谁为主，那么每个人都可以发火球，对吧！？所以是以每个人为主</li>
</ul>
</li>
</ul>
</li>
<li><p>可以发现中心服务器需要双向连接</p>
<ul>
<li>一方面需要客户端向服务器发请求；另外一方面服务器也需要主动向客户端发请求<ul>
<li><code>http</code> 协议：单向协议，只能由客户端向服务器请求信息，然后服务器返回信息；如果不向服务器请求信息，服务器不能给我们返回信息；但是如果我们移动了，我们应该是通知另外两个人我移动了，那么这种情况下是服务器主动向客户端发送请求，所以说 <code>http</code> 协议不适用了，不支持双向通信——加密（<code>https</code>）</li>
<li><code>websocket</code> 协议：目前主流浏览器都支持的一个官方的一个协议，不是一个野鸡协议啊！这是一个非常正统的非常标准的被广泛接受的一个协议——双向协议——支持客户端向服务器发请求，也支持服务器向客户端发请求——加密（<code>wss</code>）</li>
</ul>
</li>
</ul>
</li>
<li><p>添加多人模式 </p>
<ul>
<li><p>区分模式名</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240927173619495.png" alt="image-20240927173619495"></p>
</li>
<li><p>开始游戏初始化时</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240927173957648.png" alt="image-20240927173957648"></p>
</li>
</ul>
</li>
<li><p>角色：自己，敌人，机器人—— <code>me</code>，<code>enemy</code>，<code>robot</code></p>
<ul>
<li>原本单机模式有两类角色：<ul>
<li><code>is_me</code> <code>true</code> 表示自己，<code>false</code> 表示机器人</li>
</ul>
</li>
<li>添加多人模式后，有三类角色 —— 自己，敌人，机器人—— <code>me</code>，<code>enemy</code>，<code>robot</code><ul>
<li>将 <code>is_me</code> 改成 <code>character</code> —— <code>me</code> 表示自己，<code>enemy</code> 表示多人模式里的其他玩家，<code>robot</code> 表示机器人</li>
<li>修改相关的代码</li>
</ul>
</li>
</ul>
</li>
<li><p><code>enemy</code> 和 <code>me</code> 都有 <code>photo</code> ，自己的可以自己在 <code>settings</code> 里找到，<code>enemy</code> 的 <code>photo</code> 是传过来的，在创建玩家小球的时候直接将 <code>photo</code> 传过去</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240927194459354.png" alt="image-20240927194459354"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240927194526775.png" alt="image-20240927194526775"></p>
</li>
<li><p>添加监听函数</p>
<ul>
<li><p>给自己添加监听函数，自己可以通过键盘和鼠标控制</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240927194842953.png" alt="image-20240927194842953"></p>
</li>
<li><p>机器人被电脑控制</p>
</li>
<li><p>敌人从远程将控制传过来</p>
</li>
</ul>
</li>
<li><p>自己和其他玩家渲染图片</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240927195113659.png" alt="image-20240927195113659"></p>
</li>
</ul>
<h5 id="3、配置-django-channels-1"><a href="#3、配置-django-channels-1" class="headerlink" title="3、配置 django_channels"></a>3、配置 <code>django_channels</code></h5><p><code>acwing</code> 配置步骤中：前两步不用理解原理，这个东西<strong>只用配置一次</strong>，而且所有项目都是这样配置的，啊！那么你未来写所有项目的时候，直接把这前两步，把这个第二步和第三步找抄下来就可以了，好吧！？啊！他是通用的</p>
<p>负责通信的</p>
<p><code>django</code> 对于 <code>wss</code> 协议的一种支持的一种实现方式，好吧！？啊！我们接下来这个 <code>django_channels</code> 其实就是在 <code>django</code> 里边让 <code>django</code> 支持 <code>wss</code> 协议</p>
<ul>
<li><p><code>django_channels</code> 配置</p>
</li>
<li><p>这个其实就是有文档，大家如果感兴趣的话，你可以看文档，啊！但是这个看文档这个不如看这个讲义，对吧！？啊！讲义我已经给大家把文档里没有用的部分都已经删掉了啊！</p>
<ul>
<li><p>安装 <code>channels_redis</code></p>
<ul>
<li>存储每一局对战信息：需要延迟很低；比如说一名玩家我去击中了，比如说我发射了一个火球击中了一个人，我 <code>attack</code> 了另外一个角色，那我应该告诉服务器，我 <code>attack</code> 了一个角色，那么服务器端就需要将这个人的血量，这个血量是服务器端维护的，那么他需要将这个人的血量更新一下，然后广播给所有人，对吧！？啊！那么，这块的话他会涉及到数据的读写，那么这块数据读写要求延迟很低才可以，对吧！？因为我击中了别人，那么你要通信给别人击中了别人，这个延迟不能太高，对吧！？你比如说我击中了你，过了两秒钟你再告诉我你击中了我，那可能黄花菜都凉了，所以这块儿读写要求，额嗯！时间效率很高，所以这块儿的话最好用内存数据库 <code>redis</code> 来存，如果读写要求，如果读写延迟要求不高的话可以用 <code>mysql</code> ，可以用数据库，或者是咱们 <code>django</code> 自带的这个数据库都可以啊！所以说这个这个 <code>django</code> 里边也是需要用到 <code>redis</code> 的啊！那么我们就用 <code>django_redis</code> ，而且 <code>django</code> 本身也需要存一些信息啊！那么存到 <code>redis</code> 里的话效率更高啊！所以这里需要先装一下 <code>channels_redis</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install channles_redis</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>django</code> 与 <code>channels_redis</code> 的版本对应关系</p>
<p>在使用 Django 和 channels_redis 时，版本兼容性是非常重要的。channels_redis 是一个用于 Django Channels 的 Redis 后端，它允许您将 Channels 的消息层配置为使用 Redis 作为其数据存储。<br>以下是一些版本的对应关系，但请注意，这些信息可能会随时间变化，因此最好查看每个项目的官方文档以获取最新的兼容性信息。<br>截至知识更新日期（2023年），以下是一些 Django 和 channels_redis 的版本对应关系：</p>
<ul>
<li>Django 3.2: 推荐 channels_redis 3.x 版本。</li>
<li>Django 3.1: 推荐 channels_redis 3.x 版本。</li>
<li>Django 2.2: 推荐 channels_redis 2.x 版本。</li>
<li>Django 2.1: 推荐 channels_redis 2.x 版本。</li>
<li>Django 1.11: 推荐 channels_redis 1.x 版本。<br>为了确保兼容性，请按照以下步骤操作：</li>
</ul>
<ol>
<li>查看您使用的 Django 版本。</li>
<li>访问 channels_redis 的 PyPI 页面或官方文档，查找推荐的版本兼容性信息。</li>
<li>安装与您的 Django 版本兼容的 channels_redis 版本。<br>例如，如果您正在使用 Django 3.2，则可以在您的终端或命令提示符中运行以下命令来安装兼容的 channels_redis 版本：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install channels_redis==3.3.1</span><br></pre></td></tr></table></figure>

<p>请注意，以上命令中的版本号 <code>3.3.1</code> 仅作为示例，实际安装时请确保查看 PyPI 或官方文档以获取最新的兼容版本号。<br>最后，始终建议在安装任何第三方库之前，查看其官方文档以确认与您使用的 Django 版本的兼容性。在安装或升级库时，也建议在虚拟环境中进行操作，以避免影响其他项目。</p>
</li>
</ul>
</li>
</ul>
<ol>
<li><p>安装 <code>channels_redis</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install channels_redis</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置 <code>acapp/asgi.py</code></p>
<ol>
<li><p><code>asgi</code> 介绍</p>
<p>ASGI（异步服务器网关接口）是一种用于 Python 网络服务器和应用程序的规范，旨在支持异步通信。它设计用来支持长连接和异步框架，比如 WebSockets，使其更适合需要实时通信的现代网络应用程序。</p>
<p>ASGI 作为 Web 服务器与 Python 网络应用程序或框架之间的标准接口，允许开发者通过提供一种清晰且一致的方式来处理请求和响应，从而构建异步应用程序。</p>
<p>ASGI 的主要特点包括：</p>
<ul>
<li>支持异步编程和并发。</li>
<li>能够管理多种协议（HTTP、WebSocket 等）。</li>
<li>能够处理长期连接，非常适合实时应用程序。</li>
</ul>
</li>
<li><p><code>web</code> 服务器介绍</p>
<p>在 Django 应用程序中，常用的 Web 服务器有几种。以下是一些常见的 Web 服务器，可以与 Django 一起使用：</p>
<ol>
<li><p><strong>Gunicorn</strong>：一个轻量级的 WSGI HTTP 服务器，它能够处理多个并发请求，非常适合用于生产环境中。</p>
</li>
<li><p><strong>Django内置开发服务器</strong>：在开发阶段，Django 自带的开发服务器可以使用，尽管它不适合生产环境，但适合快速开发和调试。</p>
</li>
<li><p><strong>uWSGI</strong>：另一个功能强大的 WSGI 服务器，支持异步和进程管理，能够与 Nginx 或 Apache 等 Web 服务器结合使用。</p>
</li>
<li><p><strong>Nginx</strong>：虽然 Nginx 本身是一个 Web 服务器，但通常与 Gunicorn 或 uWSGI 一起使用，作为反向代理服务器来处理静态文件和负载均衡。</p>
</li>
<li><p><strong>Apache</strong>：与 mod_wsgi 一起使用时，Apache 也可以用于部署 Django 应用。同样，它适合大规模的生产环境。</p>
</li>
</ol>
<p>在部署 Django 应用时，通常会使用一种 Web 服务器（如 Nginx 或 Apache）作为反向代理，并将请求转发给 WSGI 服务器（如 Gunicorn 或 uWSGI）。这样可以提高性能和安全性。希望这些信息对你有帮助！如果你有进一步的问题，请告诉我。</p>
</li>
<li><p><code>get_asgi_application</code></p>
<p>在 Django 中，<code>get_asgi_application</code> 是一个函数，用于返回一个 ASGI 应用程序实例。这是 Django 支持异步功能和 ASGI 的关键部分。具体来说，<code>get_asgi_application</code> 会做以下几件事情：</p>
<ol>
<li><p><strong>加载设置</strong>：它会加载 Django 项目的设置，确保应用程序能够访问配置（如数据库设置、静态文件设置等）。</p>
</li>
<li><p><strong>配置中间件</strong>：该函数会使用你在设置中定义的 ASGI 中间件。这些中间件可以处理请求和响应，可以用于执行一些预处理操作，比如身份验证、会话管理等。</p>
</li>
<li><p><strong>返回 ASGI 应用程序</strong>：最终，它会返回一个完整的 ASGI 应用程序实例，能够处理接收到的 HTTP 请求或者 WebSocket 连接。</p>
</li>
<li><p><strong>处理异步请求</strong>：返回的 ASGI 应用程序可以处理异步请求，这使得 Django 可与异步框架（如 Django Channels）一起使用，从而支持实时功能和长连接。</p>
</li>
</ol>
<p>在一个 Django 项目的 <code>asgi.py</code> 文件中，你可以看到类似以下的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> django.core.asgi <span class="keyword">import</span> get_asgi_application</span><br><span class="line"></span><br><span class="line">os.environ.setdefault(<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>, <span class="string">&#x27;your_project_name.settings&#x27;</span>)</span><br><span class="line"></span><br><span class="line">application = get_asgi_application()</span><br></pre></td></tr></table></figure>

<p>这段代码确保 Django 以 ASGI 模式运行，设置了环境变量并初始化了 ASGI 应用程序实例。</p>
</li>
<li><p><code>web</code> 服务器一般做什么</p>
<p>Web 服务器主要负责处理 Web 请求和提供 Web 内容。其核心功能包括：</p>
<ol>
<li><p><strong>处理 HTTP 请求</strong>：Web 服务器接收来自客户端（如浏览器）的 HTTP 请求，并解析这些请求以确定所需的资源。</p>
</li>
<li><p><strong>提供静态文件</strong>：Web 服务器可以直接从文件系统中提供静态内容（如 HTML、CSS、JavaScript 文件、图像等）。当客户端请求这些文件时，Web 服务器可以将相应的数据返回给客户端。</p>
</li>
<li><p><strong>执行动态内容</strong>：对于动态内容的请求，Web 服务器可以与<strong>应用程序</strong>（如 Django、Flask、Node.js 等）协作，处理请求并返回生成的内容。例如，服务器可以执行一个后端脚本来生成 HTML 页面，然后将结果返回给客户端。</p>
</li>
<li><p><strong>反向代理</strong>：Web 服务器可以配置为反向代理，将请求转发到其他服务器或应用程序。这种设计可以用于负载均衡、缓存和安全。</p>
</li>
<li><p><strong>SSL&#x2F;TLS 加密</strong>：Web 服务器可以处理安全连接（HTTPS），为用户提供更安全的浏览体验。这包括处理 SSL&#x2F;TLS 证书，以加密传输数据。</p>
</li>
<li><p><strong>处理客户端会话</strong>：Web 服务器可以管理会话状态，例如通过 cookies 或 URL 参数来跟踪用户信息，确保用户在访问多个页面时保持一致的会话。</p>
</li>
<li><p><strong>安全性控制</strong>：Web 服务器可以实施安全措施，如身份验证、访问控制和防火墙功能，以保护存储在服务器上的资源。</p>
</li>
<li><p><strong>日志记录</strong>：Web 服务器会记录访问日志、错误日志和性能数据，这些信息有助于分析和监控站点的运行状况。</p>
</li>
<li><p><strong>压缩和缓存</strong>：Web 服务器可以对响应内容进行压缩，以减少网络带宽使用，并提供缓存机制，以加快静态内容的访问速度。</p>
</li>
</ol>
<p>这些功能使 Web 服务器能够有效地为用户提供网页和其他网络服务。如果你对某个特定功能或技术有更多问题，请告诉我！</p>
</li>
</ol>
<p>内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> channels.auth <span class="keyword">import</span> AuthMiddlewareStack</span><br><span class="line"><span class="keyword">from</span> channels.routing <span class="keyword">import</span> ProtocolTypeRouter, URLRouter</span><br><span class="line"><span class="keyword">from</span> django.core.asgi <span class="keyword">import</span> get_asgi_application</span><br><span class="line"><span class="keyword">from</span> game.routing <span class="keyword">import</span> websocket_urlpatterns</span><br><span class="line"></span><br><span class="line">os.environ.setdefault(<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>, <span class="string">&#x27;acapp.settings&#x27;</span>)</span><br><span class="line"></span><br><span class="line">application = ProtocolTypeRouter(&#123;</span><br><span class="line">    <span class="string">&quot;http&quot;</span>: get_asgi_application(),</span><br><span class="line">    <span class="string">&quot;websocket&quot;</span>: AuthMiddlewareStack(URLRouter(websocket_urlpatterns))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这段代码是一个Django项目中ASGI（异步网关接口）的配置示例。以下是对各部分的简要说明：</p>
<ol>
<li><p><strong>导入模块</strong>：</p>
<ul>
<li><code>os</code>：用于处理操作系统相关的功能。</li>
<li><code>AuthMiddlewareStack</code>：用于WebSocket连接的身份验证中间件。</li>
<li><code>ProtocolTypeRouter</code>和<code>URLRouter</code>：用于根据协议类型路由请求。</li>
<li><code>get_asgi_application</code>：获取ASGI应用程序，用于处理HTTP请求。</li>
<li><code>websocket_urlpatterns</code>：定义WebSocket的URL路由。</li>
</ul>
</li>
<li><p><strong>设置环境变量</strong>：</p>
<ul>
<li><code>os.environ.setdefault(&#39;DJANGO_SETTINGS_MODULE&#39;, &#39;acapp.settings&#39;)</code>：设置Django的配置模块为<code>acapp.settings</code>。</li>
</ul>
</li>
<li><p><strong>创建ASGI应用程序</strong>：</p>
<ul>
<li>使用<code>ProtocolTypeRouter</code>定义一个路由，其中：<ul>
<li><code>&quot;http&quot;</code>请求通过<code>get_asgi_application()</code>处理。</li>
<li><code>&quot;websocket&quot;</code>请求通过<code>AuthMiddlewareStack</code>和<code>URLRouter</code>进行身份验证和路由，使用定义的<code>websocket_urlpatterns</code>。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>总之，这段代码配置了一个ASGI应用程序，可以同时处理HTTP和WebSocket请求。</p>
</li>
<li><p>配置 <code>acapp/settings.py</code></p>
<p>在 <code>INSTALLED_APPS</code> 中添加 <code>channels</code>，添加后如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [ </span><br><span class="line">    &#x27;channels&#x27;,</span><br><span class="line">    &#x27;game.apps.GameConfig&#x27;,</span><br><span class="line">    &#x27;django.contrib.admin&#x27;,</span><br><span class="line">    &#x27;django.contrib.auth&#x27;,</span><br><span class="line">    &#x27;django.contrib.contenttypes&#x27;,</span><br><span class="line">    &#x27;django.contrib.sessions&#x27;,</span><br><span class="line">    &#x27;django.contrib.messages&#x27;,</span><br><span class="line">    &#x27;django.contrib.staticfiles&#x27;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>然后在文件末尾添加：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ASGI_APPLICATION = &#x27;acapp.asgi.application&#x27;</span><br><span class="line">CHANNEL_LAYERS = &#123;</span><br><span class="line">    &quot;default&quot;: &#123;</span><br><span class="line">        &quot;BACKEND&quot;: &quot;channels_redis.core.RedisChannelLayer&quot;,</span><br><span class="line">        &quot;CONFIG&quot;: &#123;</span><br><span class="line">            &quot;hosts&quot;: [(&quot;127.0.0.1&quot;, 6379)],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置 <code>game/routing.py</code></p>
<p>这个 <code>wss</code> 的 <code>routing</code> 就相当于 <code>http</code> 协议里的 <code>urls</code>，就他就是 <code>wss</code> 协议的一个路由，好吧！？啊！这个 <code>wss ，这个 </code>http<code>跟</code>wss&#96; 其实是对称的，其实是完，啊！基本上差不多 </p>
<p>这一部分的作用相当于 <code>http</code> 的 <code>urls</code>。<br>内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path</span><br><span class="line"></span><br><span class="line">websocket_urlpatterns = [</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写 <code>game/consumers</code></p>
<p>这一部分的作用相当于 <code>http</code> 的 <code>views</code>，这个 <code>consumers</code> 也不好写啊！然后有一个示例，这个示例其实就是从官网抄过了改吧，改吧！大家未来写 <code>consumers</code> 其实都跟这差不多</p>
<p>参考示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> channels.generic.websocket <span class="keyword">import</span> AsyncWebsocketConsumer</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MultiPlayer</span>(<span class="title class_ inherited__">AsyncWebsocketConsumer</span>):</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">connect</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">await</span> <span class="variable language_">self</span>.accept()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;accept&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.room_name = <span class="string">&quot;room&quot;</span></span><br><span class="line">        <span class="keyword">await</span> <span class="variable language_">self</span>.channel_layer.group_add(<span class="variable language_">self</span>.room_name, <span class="variable language_">self</span>.channel_name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">disconnect</span>(<span class="params">self, close_code</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;disconnect&#x27;</span>)</span><br><span class="line">        <span class="keyword">await</span> <span class="variable language_">self</span>.channel_layer.group_discard(<span class="variable language_">self</span>.room_name, <span class="variable language_">self</span>.channel_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">receive</span>(<span class="params">self, text_data</span>):</span><br><span class="line">        data = json.loads(text_data)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动 <code>django_channels</code></p>
<ol>
<li><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240929062122352.png" alt="image-20240929062122352"></p>
<p><code>uwsgi</code> 启动 <code>http</code> 的 <code>server</code></p>
<p>在 <code>~/acapp</code> 目录下执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">daphne -b 0.0.0.0 -p 5015 acapp.asgi:application</span><br></pre></td></tr></table></figure></li>
</ol>
<p>前端调用多人对战模式的 <code>websocket</code> 链接</p>
</li>
</ol>
<ul>
<li><ol>
<li>前端在 <code>playground</code> 里面需要一个跟后端的一个 <code>wss</code> 的一个连接，对吧！？啊！由于我们这个服务端跟服务器端，啊！这个 <code>server</code> 端，啊！不！客户端，窗口跟服务是有一个连接的，啊！所以说我们这个在窗口里边需要建一个链接，建立一个跟服务器的连接，可以吧！？那么建立连接的话</li>
</ol>
</li>
<li><p><code>socket</code>连接主要有三个函数</p>
<ul>
<li><p>1、<code>connect</code></p>
<ul>
<li>当在前端建立 <code>socket</code> 连接的时候，会调用这个函数，同意创建连接的话，就是执行一下 <code>await self.accept</code>就可以了，那么他就会成功创建连接，成功创建完连接之后，可以输出一个 <code>accept</code> 好吧！？啊！</li>
</ul>
</li>
<li><p>2、<code>disconnect</code></p>
<ul>
<li>断开连接，就是当我们前端断开的时候，你比如前端刷新的时候，啊！或者前端自己 <code>close</code> 的时候，他就会调用这个断开连接的函数，好吧！？啊！但是这里一定要注意一下啊！这里 <code>django_channels</code> 啊！额嗯！用户的连接断开的时候他不一定会执行这个 <code>disconnect</code> 函数，啊！就是说，大概率会执行这个函数，但是他不一定会执行这个函数，啊！所以大家如果是维护在线人数或者维护用户的连接状态的时候这个函数是不靠谱的，啊！因为他有可能他离线了，但是他没有执行这个函数，你比如说这个用户的这个电脑突然断电了，对吧！？那肯定发不了发不了任何请求了，他也不能告诉你了，对不对！？啊！那么这个函数就不会执行，好吧！？啊！然后他还有一个函数叫 <code>receive</code></li>
</ul>
</li>
<li><p>3、<code>receive</code> </p>
<ul>
<li>这个 <code>receive</code> 函数的话是用来接收前端向后端发的请求的啊！前端可以向后端发请求，发的请求会接收到这个 <code>receive</code> 函数里面，好吧！？啊！</li>
</ul>
</li>
<li><p>然后 啧！我们这个<code>server</code> 还有一个功能，就大家可以看到我们刚刚有一个这个<strong>需求是</strong>接收到一个请求之后需要群发给一堆请求，对吧！？啊！那么 <code>django_channels</code> 里面有一个功能叫 <code>group</code> ，就是组的概念，啊！他可以将很多不同的连接额嗯放到同一个组里，啊！将很多不同的连接放到同一个组里，语法是这样的啊！就是 <code>channel_layer.group_add</code> 就可以将我们当前这个连接加到这个组里啊！那么加到组里之后啊！他这个组的话有一些群发的函数，比如叫 <code>group_send</code> 就可以向组内所有人群发消息，啊！他帮我们实现了这样一个功能，好吧！？啊！好，那么，我们来调试一下，啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240929190609437.png" alt="image-20240929190609437"></p>
<ul>
<li><p><code>django_channels</code> 里面有组（<code>group</code>）的概念，可以将很多不同的连接放到同一个组里</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.channel_layer.group_add(<span class="variable language_">self</span>.room_name, <span class="variable language_">self</span>.channel_name)</span><br></pre></td></tr></table></figure>
</li>
<li><p>将一个连接从组里删掉</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.channel_layer.group_discard(<span class="variable language_">self</span>.room_group_name, <span class="variable language_">self</span>.channel_name)</span><br></pre></td></tr></table></figure>
</li>
<li><p>群发：向组内其他人群发消息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.channel_layer.group_send(</span><br><span class="line">	<span class="variable language_">self</span>.room_group_name, &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;chat.message&quot;</span>, <span class="string">&quot;message&quot;</span>: message&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>向前端发送消息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.send(text_data=json.dumps(&#123;<span class="string">&quot;message&quot;</span>: message&#125;))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="4、编写同步函数-1"><a href="#4、编写同步函数-1" class="headerlink" title="4、编写同步函数"></a>4、编写同步函数</h5><p><code>acwing</code> 的 <code>acapp</code> 中的<code>js</code> 、<code>css</code> 文件直接访问服务器</p>
<p>网页端，通过 <code>html</code> 中指定的 <code>js</code> 、<code>css</code> 文件路径访问服务器</p>
<ul>
<li><p>同步函数的话有一个问题</p>
<ul>
<li><p>你比如说这个我们每一个地图，所有信息，都会有一个备份。比如一号玩家，我们虽然是一号窗口的玩家，但是他会在二三号窗口都有一个备份，不同玩家是同一份，需要在不同的窗口里判断出来谁是谁；进行操作的是谁；</p>
</li>
<li><p>但是这样还有一个问题啊！就是哎！我在这个窗口里，一二三，会创建三个 <code>uuid</code> ，对不对！？啊！<code>uuid1 uuid2 uuid3</code> ，在另外的窗口里也会创建三个 <code>uuid</code> ，对不对！？<code>uuid1 uuid2 uuid3</code> ，这个 <code>uuid1 和 uuid1</code> 不一定一样，对不对！？啊！所以说我们需要用通信的方式啊！额！将他们保持一致，啊！那么保持一致的原则是谁创建的这个 <code>uuid</code> 就用谁的，啊！你比如说我们这个一，啊！是在一号窗口创建的，然后再广播给二号窗口跟三号窗口啊！所以这个一的 <code>uuid</code> 就用一号窗口的 <code>uuid</code> 啊！这个是一号窗口啊！这个是二号窗口啊！这个是三号窗口，对吧！？那比如说二是在二号窗口里创建的啊！那么我们一号窗口跟三号窗口的二就全部用二号窗口这个二号玩家的 <code>uuid</code> ，好吧！？啊！同理子弹也是一样啊！子弹的话是看下在内个窗口创建的子弹，那我另外两个窗口的 <code>uuid</code> 就等于这个窗口的 <code>uuid</code> ，可以吧！？啊！好，那么，咳！而且还有一个问题啊！就是我们在去通信的时候啊！你比如说啧！额！比如说这个，额！比如说我们创建了三号玩家，那么我们会向服务器发送一个三号玩家创建的信息，对吧！？创建的事件，啊！那么这个服务器会广播，广播的时候他会再给三号玩家重新广播一遍，啊！也就是说我同一个消息发给服务器之后，服务器还会再给我返回一遍，原封不动返回一遍，啊！那么我当前的这个窗口里我已经创建了三名玩家，对吧！？因为我是先创建再发射发送信息，啊！所以说我接收到我发的信息的时候就应该 <code>pass</code> 掉，对吧！？我在接收到我发的信息的时候就应该 <code>pass</code> 掉，对不对！？啊！额嗯！所以说这里啊！我们啧！需要去判断一下信息是谁发的，啊！那么我们发的时候啊！这个我们可以带上自己这个 <code>player</code> 的 <code>uuid</code> ，啊！因为每一个 <code>player</code> ，就带，每一个 <code>player</code> 就是他就是每一个窗口会有自己的一个所属的 <code>player</code> 对吧！？啊！所以说我们每次再发送信息的时候，会，可以带上自己窗口里这个 <code>player</code> 的 <code>uuid</code> ，这个可以保证所有窗口都不一样，对吧！？啊！啧！额嗯！所以说啊！我们哎！这样的话 <code>uuid</code> 创建完啦！</p>
<ul>
<li><p>火球击中人之后，每一个窗口的火球都应该消失掉，火球也需要保证所有窗口都是一样的</p>
</li>
<li><p>所有的东西都需要一个<strong>唯一的编号</strong>，知道该同步谁</p>
</li>
<li><p>可以放到 <code>game-object</code> 里边</p>
</li>
<li><p>不同窗口的编号 <code>uuid</code> 不一样，谁创建的这个 <code>uuid</code> 就用谁的</p>
</li>
<li><p>自己接收到自己发送的信息，应该 <code>pass</code> 掉</p>
</li>
<li><p>在发的时候可以带上 <code>player</code> 的 <code>uuid</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240930165213136.png" alt="image-20240930165213136"></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>同步第一个事件： <code>create_player</code> 事件</p>
<p>这个 <code>create_player</code> 事件的话就是说我，比如说我当前新来了一个窗口，啊！就比如说我在当前这个页面，对吧！？我打开了一个窗口，啊！然后我再打开第二个窗口的时候啊！我应该讲这两个人同步到一个窗口里，对吧！？我们现，接下来实现实现这样一个东西，就是我在创建玩家的时候啊！所有窗口，啊！都有所有玩家，啊！我们现在的话是每个窗口只有自己这个玩家，对吧！？啊！然后我们接下来要实同步的是 <code>crea create create_player</code>这个事件，他就是哎！我每个窗口，当我来一个新的玩家的时候，我在所有窗口里创建一个玩家，同时我将已有的玩家渲染到当前这个窗口里，好吧！？我们来实现这个东西啊！那么这个东西的话首先我们需要在服务器端存下来每一局对战的所有信息，对吧！？我们每我们服务器端需要存下来各局对战，每局对战可能会有多个人啊！那么我们服务器端存的时候可以存到 <code>redis</code> 里，啊！我们在服务器端存的时候啊！可以用房间的概念啊！<code>room</code> 的概念，这跟这 <code>qq</code> 游戏一样，对吧！？啊！<code>room_0</code> 就是第零局啊！<code>room_1</code> 啊！就是第一局，啊！<code>room_2</code> 就是第二局，啊！然后，每，然后，每一局有个有个人数上限，比如我们一开始可以暂定三个人，主要是方便你调试啊！对吧！？你这样的话打开三个窗口就可以匹配一局了啊！然后，比如说三个人啊！那么，咳嗯！我们如果，我们每次在去来一名新人的时候啊！我们现在还没有实现匹配机制，对吧！？所以直接暴力加就可以了，啊！从第零个玩家开始看，如果第零个房间人数不够，就加到第零个房间里啊！如果人数够了再看第一个房间，以此类推，好吧！？啊！我们接下来实现这个逻辑啊！好，首先我们设置一下我们这个每一个房间的人数上限，啊！</p>
<ul>
<li><p>设置人数上限：</p>
<ul>
<li><p>一般来说通用型的配置啊！通用性的配置一般写到这个 <code>settings</code> 里边啊！我比较习惯写到 <code>settings</code> 里边啊！我们这可以叫，额嗯！<code>ROOM_CAPACITY</code>，我们可以暂定三个人，然后用到的是将配置加载进来 <code>from django.conf imort settings</code>，然后就可以调用在 <code>settings</code> 里调用的内个变量了</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20240930193554350.png" alt="image-20240930193554350"></p>
</li>
<li><p>还需要引入 <code>redis</code> 我们需要在 <code>redis</code> 里存所有对象的信息 <code>from django.core.cache import cache</code></p>
</li>
<li><p>好，每次在建立连接之前我们需要找一下当前在内个房间，啊！我们的房间的话就不能每次用用户名了啊！我们要枚举一下要用内个房间，我们要先关闭我们的</p>
</li>
<li><p>交互端，我们去看一下 <code>cache</code> 里的内容啊！<code>python3 manage.py shell</code></p>
</li>
</ul>
</li>
<li><p><strong>以前的问题</strong>没有发现，导致 <code>2024/10/1-2:59</code> 发生了新的 <code>bug</code>:</p>
<ul>
<li>在进行匹配的时候，对手信息传过来之后，在前端创建玩家时判断是否要指定照片时，逻辑写成了 <code>this.character === &#39;me&#39;</code> ，原本应该是 <code>this.character !== &#39;robot&#39;</code> ，对手的头像信息不能正常显示<ul>
<li>然，但是大家会发现一个问题，对吧！？就是你会发现我们这个敌人进来之后，他会先随机动一段，那么他敌人进来之后他会随机动一段，原因可能是因为我们初始化的时候有点问题啊！这里有问题，对吧！？就大家会发现自己不动，啊！但是除了自己以外都动啊！但是其实敌人也不应该动，只有只有机器人会动，对吧！？那么这里的话啊！主要是为了给大家区分一下啊！要不然所有人重叠到一块儿你就看不见了，可以吧！？啊！这大家你可以试一下，额嗯！咱来试一下，比如三个人啊！三个人，然后咱们先清空一下啊！哎！我们先清空一下，啊！然后点开，点开，大家会发现这应该是一个咱们听课的同学啊！大家会发现我们就在同一个这个咱们就进到了同一个画面里，对吧！？对不对！？啊！人已经订好了啊！但是我们的，额嗯！我们的这个这个这个位置还没有对应好，对吧！？啊！那么同步位置啊！还有发炮，啊！还有这个被攻击，这些状态我们是下节课的内容，好吧！？啊！那么大家看一下有没有问题啊！啊！然后，最后大家记得改一下啊！就是这里的话要改成什么呢？要改成只有机器人会动，啊！自己的话是不动的啊！然后，不对，不对！应该是只机器人的话他应该开始的时候随机动一下，对吧！？所以 <code>this.character === &#39;robot&#39;</code> 才应该动<img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241001031050254.png" alt="image-20241001031050254">啊！敌人也不应该动，啊！我们再去更新一下，好，重启一下，重启一下啊！然后，我们先把这打开一下啊！那么这时候大家再打开就会发现应该他就不动了啊！好，大家可以看到先是我，然后又进来一个新人，然后，然后又一个同学，对吧！？大家就会发，大家就会发现所有人就都不动了，对不对！？啊！所有人都不动了啊！</li>
<li>额！对！多个人同时点的话是有可能会发生一个情况的啊！什么情况呢？就是多于三个人匹配到了同一个房间，这是有可能发生的啊！这种问这个问题的话啊！我们暂时先不处理，大家如果感兴趣的话你可以自己课后去处理，好吧！？啊！出现这个问题的原因是多个人可能同时比如说啊！一号，比如说这个这个现在房间里已经有两个人了，然后三号同学和四号同学，三号同学先执行执行这句话（<code>if not cache.has_key(name) or len(cache.get(name)) &lt; settings.ROOM_CAPACITY）</code>，四号同学再执行这句话，那么三号和四号都发现房间里只有两个人，对吧！？啊！那么他们就都会加入到这个房间里，但是加完会发现，哦！有四个人了，对不对！？所以这种情况是有可能出现的啊！他是符合逻辑的吗，啊！他不是个 <code>bug</code>，他是符合逻辑的，大家课后你可以想办法把这种情况处理掉，当然也可以不处理，啊！其实一局四个人三个人无所谓，额嗯！好，那么目前的话我们就讲完了啊！搞完之后大家在这个额！交互页面可以看到所有房间信息，啊！额！目前已经已经有很多房间了啊！这是刚刚同学们创建的房间啊！额！大家可以看一下，比如说我们可以看一下这个，额！房间零，哎！房间零有四个人对吧！？啊！这是这就是小概率事件啊！房间一有三个人，房间二的话有三个人啊！房间三的话有三个人，房间四的话三个人，房间五的话有三个人啊！已经有很多房间了，对不对！？啊！啊！已经有十几个房间了，</li>
<li>啊！好，那么我们到现在的话这节课的内容就全部讲完啦！大家看一下有没有问题，啊！然后，我们下节课的话是，会给大家讲同步剩余的三个事件，啊！就是同步 <code>move_to</code> ，我们额嗯！在一个窗口里，比如说我在这个窗口里动，啊！那么我在另外一个窗口里就可以看到我动，而且是同步动，好吧！？啊！我这儿一动，哎！我这儿就动，可以吧！？啊！好，那么现在大家看一下有没有问题啊！没有问题的话我们今天内容就结束了，啊！然后的话我们给大家把代码先存一下，先上交一下啊！大家课后的时候可以来参考一下啊！额嗯！其实我们周四的这个工作量额嗯！代码量比较大，但是额嗯！他和新的思想已经全部在这节课里讲完了，我们这节课的话已经给大家把我们这节课要用到的额嗯！所有的这个知识性的东西原理性的东西都讲完啦！啊！下节课的话就是将我们 <code>create_player</code> 这个操作重复三遍，好吧！？啊！然后，再加一些额外的，比如说计分板啊！还有比如说冷却时间啊！这些东西，那我们这个联机对战就实现完啦！啊！好，然后我先给大家把代码存一下啊！我们这里的话是实现联机对战，对吧！？啊！<code>implement multiplayer</code>  额嗯！ <code>section-1</code> 对吧！？我们现在是第一次课啊！我们联机对战的话可能会讲两，联机对战的话预计两次课啊！周四一节课就结束了，好，提交一下，好，然后，稍后会给大家加一个第七章的打卡，大家课后的时候记得过来打个卡，好吧！？啊！啧！好，那么大家看一下有没有问题啊！没有问题的话我们就准备下播了！</li>
<li>啊！额嗯！<code>y</code> 总如果要申请 <code>qq</code> 第三方授权登录的话好像需要域名的备案号，对的啊！额嗯！对，这个 <code>qq</code> <code>qq</code> 的这个额嗯！额嗯！微信的这个第三方登录非常的难申请啊！需要注册公司，<code>qq</code> 的话也不是太好申请啊！大家需要去搞网站，需要去备啊！需要去审核，而且申请时间比较长，啊！而且还不一定申请通过，啊哈！这个这个就很神奇，啊！额嗯！啧！但是原理都一样，啊！ 对</li>
<li>然后，大家这个接下来调试的时候，额嗯！你看我咱们去跟大家讲课的时候啊！其实这个课程布置还是非常科学的，啊！先讲完账号系统，再讲联机对战，对吧！？啊！因为大家会发现这个如果想联联机对战的话一定是有玩家这个概念之后，你才知道谁打赢了谁，对吧！？所以需要先有账号系统，才有联机对战，啊！然后在这个联，这个账号系统里边给大家讲了这个 <code>acwing</code> 的一键登录，那么这个的话大家会发现就很容易调试，对吧！？啊！你写完之后，你就可以很容易的同学们之间去一块儿玩，别人去玩儿你游戏的话就不需要重新注册了啊！直接点一下 <code>acwing</code> 授权登录，一键授权就可以了，对不对！？会很方便啊！所以大家再写，在实现这个联机联机对战之前一定要先实现一下 <code>acwing</code> 一键登录啊！很重要啊！额嗯！比如说一位新玩家，我再给大家举个例子啊！啊！比如说这个一位新玩家，啊！要玩这个游戏的话，一点开，会申请授权，对吧！？啊！一同意，就可以玩了，那这个多简单啊！对不对！？啊！要不然还得注册还得注册啊！就太麻烦了啊！额嗯！包括其实这个也是可以通过网站端访问到的啊！都是可以的啊！这是互通的啊！哎！比如说我们如果用管理员账号，那么我们进来之后，大家就会看到啊！我的是这个头像，对吧！？啊！好，那么我们这个直播到这里就结束了，大家早点休息，我们周四再见，好吧！？拜拜，啊！拜拜</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="10、实现联机对战——下"><a href="#10、实现联机对战——下" class="headerlink" title="10、实现联机对战——下"></a>10、实现联机对战——下</h3><p>回忆一下上节课的图：</p>
<p>三个玩家，每局是三名玩家；三名玩家的窗口需要用中心服务器，需要用 <code>server</code> 来同步；上节课同步了 <code>create_player</code> 这个函数，可以让我们将不同的玩家渲染到同一个窗口里</p>
<p>例如：第一个窗口是一号玩家；第二个窗口是二号玩家；第三个窗口是三号玩家。同步完 <code>create_player</code> 之后，一号玩家会出现在二和三号窗口里，二号玩家也会出现在一和三里，三号玩家也会出现在一和二里，对吧！？啊！就是每个人每个窗口里都可以看到三个三名玩<img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241001155247275.png" alt="image-20241001155247275"></p>
<p>家，但是每个窗口是，额！是有一个玩家是核心玩家，对吧！？也就是自己控制的玩家，一号窗口的话是一，二号窗口是二，三号窗口是三，对吧！？啊！好，啊！我们先来看一下上节课的内容啊！</p>
<h5 id="4、编写同步函数——续集"><a href="#4、编写同步函数——续集" class="headerlink" title="4、编写同步函数——续集"></a>4、编写同步函数——续集</h5><ul>
<li><p>同步第二个事件 —— 移动 —— <code>move_to</code> </p>
<p>大家可以看到我们在不同的窗口里移动的时候啊！额！在不同的窗口里移动的时候是只能看到自己移动，不能看到额嗯！就是我只能在自己的窗口里看到自己的移动，对吧！？别人那里是看不到我移动的，对不对！？啊！所以我们第一个需要去实现同步的函数是 <code>move_to</code> 这个函数啊！对不对！？啊！然后可以让我们自己移动，然后也可以在对手那里移动，啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241001160845713.png" alt="image-20241001160845713"></p>
<p>将这个函数广播出去，广播到其他的窗口里</p>
<ul>
<li><p>我们希望哎！让我们在不同的窗口里打开的时候啊！我们的玩家是可以同步移动的啊！比如说我们在这个窗口里移动，那么我们希望在另外两个窗口里也可以看到我们的玩家移动啊！那么我们接下来来同步一下我们的 <code>move_to</code> 函数，啊！</p>
</li>
<li><p>准备好 <code>python3 manage.py shell</code></p>
<ul>
<li><p>效果</p>
<p>我不管动内个啊！另外两个窗口里的都会动，对不对！？哎！都会动啊！而而且是同步的啊！而且这三个位，额嗯！三个三个玩家的位置完全一致，对吧！？啊！完全同步，啊！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241002001736456.png" alt="image-20241002001736456"></p>
</li>
<li><p>那么大家大家考虑一个问题啊！给大家布置一个思考题啊！就是你考虑一下比如说我动这个窗口里的玩家的时候，额嗯！这四，三个窗口里的玩家是如何移动的，啊！他为什么可以动起来，大家可以先想想，啊！</p>
<p>额！那咱们一块儿来分析一下啊！一块儿来分析一下，比如这个比如说咱们动这个窗口的人，对吧！？啊！那么我这里一动的话啊！大家可以看到应该是，额嗯！我们的，不是这儿啊！应该是哪儿呢？应该是这儿，对吧！？我这里一动，大家可以看到我这里一动的话啊！额！那么我这个监听函数，监听事件里面就会就会监听到我已经动了，对吧！？啊！那么我这里一动的话，他就会<strong>调用我本窗口</strong>的 <code>move_to</code> 函数，那么我本窗口的人就会发生移动，对吧！？啊！另外两个窗口的人怎么动<img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241002011545198.png" alt="image-20241002011545198">的呢？啊！是通过通过这里啊！就是他发现是多人模式，啊！所以会将移动，会将我移动，啊！额嗯！的时间事件发送给啊！通过这个 <code>send_move_to</code> 函数向服务器发送信息，对吧！？啊！好，那么我们再来看一下 <strong><code>send_move_to</code> 函数啊</strong>！那么我刚刚调用的是 <code>send_move_to</code> 函数，啊！那么这个函数里面的话会向服务器啊！通过这个 <code>websocket</code> 向服务器发送一个事件，啊！那么这样的话他就会将这个<strong>信息发送到服务器</strong>对吧！？啊！那么在服务器里的话我们会在这个地方接收到信息，啊！然后发现<strong>事件是 <code>move_to</code></strong> 啊！然后就会<strong>调用</strong>这个 <code>move_to</code> 函数，对吧！？然后这个 <code>move_to</code> 函数的话我们，额嗯！这个 <code>move_to</code> 函数我们在<strong>这里会群发</strong>，对吧！？会向所有的 <code>layer</code> 群发，群发我们的我们的 <code>uuid</code> 这个玩家移动的消息，啊！那这里群发的话相当于是就会向所有窗口群发这个信息，对吧！？啊！那么每一个窗口<strong>就都会接收</strong>，都会在前端接收到信息，啊！那么在前端接收到信息之后啊！他会在这里，对吧！？啊！接收到信息之后，他会在这里路由到我们的 <strong><code>receive_move_to</code> 函数</strong>，那么在 <code>receive_move_to</code> 函数里边就会调用，就会在每个窗口里调用我这名玩家的移动函数了，那这样的话就会在每个窗口里调用我这名玩家的移动函数了，对不对！？好，大家先看一下，有没有问题啊！</p>
</li>
</ul>
</li>
<li><p>编写 <code>player.js</code>  和 <code>multiplayer.js</code></p>
<ul>
<li><code>player.js</code></li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241002000733553.png" alt="image-20241002000733553"></p>
<ul>
<li><p><code>multiplayer.py</code>·</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241002001506768.png" alt="image-20241002001506768"></p>
</li>
<li><p><code>multiplayer.js</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241002001112042.png" alt="image-20241002001112042"></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>同步第三个事件 ——发炮 —— <code>shoot_*</code> </p>
<ul>
<li><strong>以前的问题</strong>没有发现，导致 <code>2024/10/2-2024/10/3</code> 发生了新的 <code>bug</code>:<ul>
<li><p>起因：原本自己写的向后端 <code>websocekt</code> 发送同步发射火球的逻辑，结果没有同步火球 <code>uuid</code>，而 <code>yxc</code> 的同步了火球的 <code>uuid</code>，于是乎由于自己写的逻辑在 <code>yxc</code> 写的逻辑后执行，被覆盖了，一直找不出问题，</p>
</li>
<li><p>解决：后来想到是这个问题，使用 <code>ag</code> 全局搜索了一下，找到了另外一个逻辑不太好的同步火球的函数调用</p>
</li>
</ul>
</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241001160934922.png" alt="image-20241001160934922"></p>
</li>
<li><p>同步第四个事件——攻击函数（判定子弹攻击到玩家后的逻辑，可以加上计分等的效果） —— <code>attack_*</code>（<code>fireball</code>、<code>iceball</code>）</p>
<p>也是实现两个啊！</p>
<ul>
<li><p>传递移动位置时存在的精度问题，虽然每一次重新传递位置会矫正上一次的偏差，但还是会有位置精度问题，从这个角度来说也需要同步攻击函数；如果没有精度偏差，没有延迟（主要原因），甚至可以不用传递攻击函数</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241003094107640.png" alt="image-20241003094107640"></p>
</li>
<li><p>就是我们每个人被击中有一个判定，啊！这个判定的信息也是需要去传播开的啊！额！那么这几个函数其实都是我们代码里之前的函数，我们一块先看一下</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241001160954196.png" alt="image-20241001160954196"></p>
</li>
</ul>
</li>
<li><p>清空 <code>console.log()</code> </p>
</li>
<li><p>调用 <code>AcWingOS</code> 的 <code>api</code> 关闭窗口</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241001161316089.png" alt="image-20241001161316089"></p>
</li>
<li><p>同步第四个事件—— <code>update_*_attack</code></p>
<ul>
<li><p>如果不实现攻击效果的同步存在一个问题，如果一个同学的<strong>网速比较慢</strong>的话，有可能在自己的窗口里击中了某个人，但是在另外的窗口里判断没有被击中，会使得所有的<strong>窗口状态不同步</strong>，因此需要<strong>统一攻击这一动作</strong>，需要由一个窗口唯一判断攻击有没有击中，然后，相当于是一个独裁，对不对！？我们一个窗口来独裁他有没有击中，击中之后再广播给其他其他窗口，<strong>其他窗口</strong>不能判断有没有击中，他<strong>只能接受命令</strong>（一个客户端中除了自己之外，其他玩家是从云端同步的效果），对吧！？啊！所以我们接下来啊！为了<strong>防止出现状态不同步</strong>情况，我们还<strong>要广播</strong>，还要<strong>同步一下</strong> <code>attack</code> 函数，啊！这个 <code>attack</code> 的话就是说我们会在攻击者，啊！攻击者，就是<strong>发射炮弹的这个窗口里</strong>去判断有没有击中，啊！然后，只要这个窗口里<strong>判断没有击中</strong>，那么就广，就不向其他窗口广播，只要我们这个窗口里<strong>判断击中了</strong>，啊！那么我们就直接<strong>广播给其他窗口</strong>，啊！表示我们就传播一下 <code>A</code> 击中了 <code>B</code> 这个事实，对吧！？啊！广播的是啊！这个 <code>A</code> 击中了 <code>B</code>，或者叫，比如叫 <code>attacker</code> 啊！额嗯！击中了额嗯！比如咱们造个词儿啊！<code>attackee</code> ，对不对！？这个这个 <code>attacker</code> 的话是<strong>主动攻击者</strong>，<code>attackee</code> 的话就是<strong>被攻击者</strong>，啊！他击中了他！对吧！？啊！他击中了他！啊！我们<strong>广播一下这个事件</strong>，啊！好，那么，在广播这个事情之前，我们会发现，额！如果是这样广播的话啊！那么你比如说我其他窗口的其他人的炮弹，比如在这个窗口里我这个这个人（不是本窗口的操作者的 <code>player</code>）发射炮弹啊！他就<strong>不能用来判断有没有击中</strong>，他只是一个动画而已，对吧！？就是我们只有这个窗口<strong>发的炮弹才是炮弹</strong>，其他窗口的这<img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241004234041124.png" alt="image-20241004234041124">个名玩家发的炮弹<strong>就不是炮弹了，只是一个动画</strong>，对不对！？啊！所以说我们这里要额嗯去除这个其他就<strong>去除本窗口内其他玩家的炮弹的碰撞</strong>，碰撞判断，啊！比如说我们这个窗口里只判断，只控制自己对吧！？啊！所以这两名玩家发射的炮弹我们<strong>在这个窗口里是不做碰撞判断</strong>的，他是可以他应该可以穿过去的，对吧！？啊！所以我们需要加个判断，啊！</p>
</li>
<li><p>由于一些逻辑覆盖导致一些看似过程相同的逻辑实际上不相同而导致 <code>bug</code> <code>2024-10-3~2024-10-4</code></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241003235115436.png" alt="image-20241003235115436"></p>
</li>
</ul>
</li>
<li><p>修改 <code>bug</code></p>
<ul>
<li><p>起因：编写完成 <code>create_player</code>、<code>move_to</code>、<code>shoot_fireball</code>、<code>shoot_iceball</code>事件之后，紧接着编写 <code>attack</code> 函数，在判断是否需要广播该子弹的信息时，由于过程和其他几个函数相同，想当然的判断条件也写的是 <code>this.playground.mode === &quot;mulit mode&quot;</code>，而实际上前面几个函数中 <code>create_player</code> 函数只有在本窗口显示出来的时候会创建玩家并进行同步，不是本窗口的玩家，没有机会调用该函数；<code>move_to</code> 函数和 <code>shoot_fireball</code> 函数、<code>shoot_iceball</code> 函数在同步时需要本窗口玩家进行键盘或者鼠标操作，而不是本窗口的 <code>player</code> 的操作是同步过来的；因此以上几个函数不需要指明 <code>character === &quot;me&quot;</code>，而 <code>attack</code> 函数没有类似这样的条件，需要指明执行操作的玩家是自己，从而将其他窗口玩家的子弹判断逻辑屏蔽掉，以自己窗口的判断为主</p>
</li>
<li><p>用了好半天时间，才意识到这一点，加上相关的判断，问题解决了</p>
</li>
<li><p>由于一些判断碰撞的逻辑在 <code>fireball</code> 的逻辑中改动了，但是没有在</p>
<ul>
<li>这样判断碰撞，广播碰撞的好处是增加玩家游戏体验，减少延迟带来的误差；但会不同玩家的游戏场景会不一致，甚至会出现，在某一个窗口中，非本窗口的一个玩家集中了另一个玩家，而实际在攻击者的窗口中没有击中，导致游戏数据不一致，自己可以需要更少的攻击次数就可以打死另一名玩家，然而在该名玩家的窗口里并没有消失，但是我们广播通知该名玩家已经消失了</li>
</ul>
</li>
<li><p>学 <code>django</code> 课还有利于大家理解各种游戏机制，对吧！？啊！其实我们这个，咱们这种游戏的话可以看到所有信息，啊！你可以看到所有火球的信息的啊！向<code> pvp</code> 那种游戏的话你是看不到对方的屏幕的，你也看不到子弹的，对不对！？啊！所以说这个有没有打中你完全对手说了算，你完全不知道，啊！所以就会发现， <code>pvp</code> <code>pup</code>的这个挂比较多，对吧！？挂比较好写啊！嗯吭！额嗯！但是这个是这个这个其实是 <code>fps</code> 游戏的一个通通通，一个一个公共的问题啊！好，我们来看一下后端怎么写，啊！后端的话，额嗯！咳嗯咳嗯！啧！实现一个广播函数，啊！</p>
</li>
<li><p>对象管理，内存泄漏问题</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241005001115532.png" alt="image-20241005001115532"></p>
</li>
<li><p>子弹消失后或者是攻击到玩家之后，应该及时回收该对象，做好内存管理</p>
<ul>
<li>对于 <code>js</code> 来说需要删除对该对象的所有引用，在本例中需要将子弹从玩家的 <code>fireballs</code>或者 <code>iceballs</code> 列表中删除，从 <code>AC_GAME_OBJECTS</code></li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241005004022497.png" alt="image-20241005004022497"></p>
</li>
<li><p>在游戏当中没有同步坐标，每一次操作都会产生精度误差，随着时间的推移，每一名玩家的坐标可能是会发生变化的，因为有误差和网络延迟存在，误差来自三角函数的计算和浮点数的计算</p>
<ul>
<li><p>在击中玩家的时候需要计算一个角度，角度的误差未来会越来越大，碰撞时，被攻击玩家的击退方向根据子弹和玩家的相对位置计算，本身存在误差，越算误差会越大，导致同一玩家在不同窗口里的位置不同（发生一个巨大的变化），啊！为了弥补这一点需要做一个补偿——在一名玩家击中另一名玩家的时候强行把 <code>attackee</code> 的位置在所有窗口里把 <code>attackee</code> 这个位置额嗯！固定到就是额！同，同步一下 <code>attackee</code> 的位置，啊！额嗯！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241006081409613.png" alt="image-20241006081409613"></p>
</li>
<li><p>举个例子啊，比如说嗯吭！大家看到，大家可以看到我们现在在这个窗口里，这个人在这儿，对吧！？但是在这个窗口里这人在这儿，对不对！？啊！那么我们攻击的时候啊！比如说哎！我在这里攻击的时候，那么我在这里击中了这名玩家，对吧！？那么我就需要将所有窗口的这个人全部啊！额嗯！同步到攻击中的这个窗口里（对应的位置），这个也是相当于一个窗口说了算，对吧！？啊！我击中了你，那么你的位置其他所有窗口里的位置就全部固定到同一个位置，好吧！？啊！所有我们这里的话还要同步一下位置啊！就是 <code>x, y</code> 就是我们 <code>attackee</code> 被攻击者的被攻击到的位置啊！另外还有同步一下角度，就是我在内个位置，朝内个方向被击中了，还有这个伤害啊！伤害值， <code>damage</code>，啊！额！然后，另外还有一个是额嗯！炮弹对吧！？<code>ball_uuid</code>啊！注意这个炮弹也是要同步的啊！为什么呢？因为大家可以看到，比如说我在这个窗口里，哎！我发射一个炮弹，哎！那么我这个炮弹在别的窗口里，大家可以看到并没有小时掉，对吧！？啊！我在这窗口里，我的炮弹击中人之后，我需要广播一下这个炮弹已经击中了别人，啊！所以这个炮弹本身也需要删掉，啊！那么为了删掉这个炮弹，我们也需要传炮弹的 <code>uuid</code>，啊！就是你在其他窗口里找某个物体的时候啊！完全通过 <code>uuid</code>来找，因为 <code>uuid</code> 就是唯一编号，啊！就类似于他的身份证啊！<code>receive_attack</code> 的话也是一样啊！首先传一下攻击者的 <code>uuid</code>，就是 <code>uuid</code>，啊！然后传一下 <code>attackee</code>，就被攻击者的 <code>uuid</code>，<code>uuid</code>，啊！还有 <code>x, y</code>， 还有攻击角度，伤害，还有 <code>ball_uuid</code>，啊！然后我们找一下攻击者 <code>attacker</code> ……</p>
</li>
<li><p>这个信息比较多啊！大家课后的时候要好好的体会一下啊！</p>
<ul>
<li><p><code>attackee_x</code> 和 <code>attackee_y</code> 被攻击者在攻击者窗口中的坐标</p>
<ul>
<li>同步被攻击者的位置</li>
</ul>
</li>
<li><p><code>angle</code> 和 <code>damage</code> 被攻击者在攻击者窗口中与攻击者发射的子弹形成的角度以及子弹的伤害</p>
<ul>
<li>在攻击者窗口中计算攻击后被攻击者应该朝哪个方向击退</li>
</ul>
</li>
<li><p>攻击玩家的子弹的 <code>uuid</code> 和 攻击者 <code>attacker</code></p>
<ul>
<li><p>在被攻击者窗口及其他玩家窗口中删除攻击者的子弹</p>
</li>
<li><p>发射的子弹保存在攻击者玩家的对象中，用来删除玩家发射的子弹</p>
</li>
</ul>
</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241006135354697.png" alt="image-20241006135354697"></p>
</li>
<li><p>攻击事件执行过程</p>
<ul>
<li>发射的子弹判定击中玩家</li>
<li><code>websocket</code> 向后端发送攻击事件</li>
<li>前端 <code>websocket</code> 的其他玩家接收到攻击事件</li>
<li>其他玩家绘制攻击事件的画面</li>
<li>一共三个玩家，有另外两个玩家</li>
</ul>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241006141806632.png" alt="image-20241006141806632"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="实现对局状态切换——记分牌——更新游戏开始、结束的逻辑"><a href="#实现对局状态切换——记分牌——更新游戏开始、结束的逻辑" class="headerlink" title="实现对局状态切换——记分牌——更新游戏开始、结束的逻辑"></a>实现对局状态切换——记分牌——更新游戏开始、结束的逻辑</h4><p>后面的内容就跟通信关系不大了啊！大家不用担心，不用太担心啊！终于可以不用管通信了</p>
<p>我们这个是一局一局的啊！一局，就跟撸啊撸一样，一局结束之后才会开始下一局，啊！所以这局内部是不能进人的啊！额嗯！</p>
<p>那么，渲染的话，渲染文字的话已经给大家写了啊！这个还是很人性化的一个奖励，讲义啊！啧！额嗯！这是渲染文字啊！非常简单，直接复制过来就可以了，啊！这个内容这个内容的话网上随便搜，一搜就搜到了啊！就 <code>canvas</code> <code>canvas</code> 渲染文本，一搜就搜到了啊！</p>
<ul>
<li><p>开局之前可以动，对吧！？这样的话对于后面的人其实是不公平的，对不对！？</p>
<ul>
<li><p>所有人匹配成功之前不允许动，直到匹配成功三个人之后才可以动，好吧，啊！对局开始之前不能动，冷却开始之前不能动</p>
</li>
<li><p>加上一个提示牌，告诉我们当前有多少个人，三个人一开始，一旦满了三个人我们就可以动了</p>
</li>
<li><p>对局的状态也需要同步</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007091731971.png" alt="image-20241007091731971"></p>
<ul>
<li><code>waiting</code> 对局匹配时状态</li>
<li><code>fighting</code> 对局时状态</li>
<li><code>over</code>  游戏结束时状态</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="实现记分牌"><a href="#实现记分牌" class="headerlink" title="实现记分牌"></a>实现记分牌</h5><ul>
<li><p><code>waiting</code> 效果图</p>
<ul>
<li><p>多人模式</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007110603115.png" alt="image-20241007110603115"></p>
</li>
<li><p>单机模式</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007110748452.png" alt="image-20241007110748452"></p>
</li>
</ul>
</li>
<li><p><code>fighting</code> 效果图</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007111735993.png" alt="image-20241007111735993"></p>
</li>
<li><p>记录当前玩家数量</p>
<ul>
<li>统计当前加入房间的人数<ul>
<li>每创建一名玩家就更新一下 <code>player_count</code></li>
</ul>
</li>
</ul>
</li>
<li><p>匹配时间</p>
</li>
<li><p>玩家得分</p>
</li>
</ul>
<h4 id="使用对局状态更新游戏逻辑"><a href="#使用对局状态更新游戏逻辑" class="headerlink" title="使用对局状态更新游戏逻辑"></a>使用对局状态更新游戏逻辑</h4><p>好，那么，然后我们来看一下下一步啊！我们下一步的话大家可以发现还有一个问题，对吧！？就是我们在一开始就可以攻击，啊！我们在对局刚开始就可以攻击，这个有点不太合适，因为最开始的时候，大家是重叠在一块儿的啊！所以你攻击必中，对吧！？那这样显然就不合适了，对不对！？最开始的时候你就可以就可以攻击，对吧！？啊！显然不合适，啊！那么我们接下来是需要额嗯！加上一个机制，使得比如说我们额！</p>
<p>这里都是抛转引玉啊！大家不一定非要像我这样去实现这几个技能啊！你未来可以实现一堆技能，可以把英雄联盟啊！<code>dota</code> 啊！很多英雄这些技能直接照搬过来，对吧！？啊！直接自己自定义一个自定义一个简易版的 <code>lol</code> 啊！<code>moba</code> 类游戏啊！</p>
<ul>
<li><p>游戏开始开始前的比如说<strong>三秒钟或者五秒钟不能攻击</strong>，对不对！？那么，这里就需要一个<strong>技能冷却的概念</strong>了啊！我们技能的话可以先在开局之后先<strong>冷却一段时间</strong>，啊！然后随着对局的进行冷却时间慢慢缩小，好吧！？咱们加上一个技能冷却，啊！就好了啊！啧！额嗯！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007142801145.png" alt="image-20241007142801145"></p>
<ul>
<li><p>感悟：技能发射是玩家的动作，因此技能 <code>CD</code> 应该放到玩家的类里面；技能 <code>CD</code> 控制的是能不能释放技能</p>
<ul>
<li><p>每一场对局开始前几秒，比如前十秒不能执行除了移动之外的其他操作——对局开始阶段的冷静期（技能冷却时间可能大于该时间，也可能小于该时间）</p>
</li>
<li><p>冷却时间区间不能放技能</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007150202262.png" alt="image-20241007150202262"></p>
</li>
</ul>
</li>
</ul>
<p>																																																																																																																																								</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007143454631.png" alt="image-20241007143454631"></p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241007143424436.png" alt="image-20241007143424436"></p>
</li>
</ul>
<h4 id="技能-CD-状态——图标（在技能栏绘制技能图标和技能冷却提示）"><a href="#技能-CD-状态——图标（在技能栏绘制技能图标和技能冷却提示）" class="headerlink" title="技能 CD 状态——图标（在技能栏绘制技能图标和技能冷却提示）"></a>技能 <code>CD</code> 状态——图标（在技能栏绘制技能图标和技能冷却提示）</h4><h5 id="实现火球技能图标及技能计时"><a href="#实现火球技能图标及技能计时" class="headerlink" title="实现火球技能图标及技能计时"></a>实现火球技能图标及技能计时</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一个技能的框</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">beginPath</span>();</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">start_x</span> * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="variable language_">this</span>.<span class="property">start_y</span> * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="variable language_">this</span>.<span class="property">one_width</span> * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="variable language_">this</span>.<span class="property">one_height</span> * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(0, 0, 255, 0.5)&quot;</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = <span class="variable language_">this</span>.<span class="property">start_x</span> + <span class="variable language_">this</span>.<span class="property">one_width</span> / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="variable language_">this</span>.<span class="property">start_y</span> + <span class="variable language_">this</span>.<span class="property">one_height</span> / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> r = <span class="variable language_">this</span>.<span class="property">one_height</span> * <span class="number">3</span> / <span class="number">7</span>;</span><br><span class="line"><span class="keyword">let</span> startAngle = <span class="number">0</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 第一种写法：逆时针绘制每一帧技能冷却蒙版，由于逆时针时绘制的角度是技能冷却时间的互补的那一半，因此需要使用 1 - 技能冷却时间</span></span><br><span class="line"><span class="comment">// 用到了三角函数的知识，2 * PI = a + b，则在三角函数计算时两者相等，但是在一些边界条件下需要特判，因此使用第二种写法比较好</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> endAngle = <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span> * (<span class="number">1</span> - <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">players</span>[<span class="number">0</span>].<span class="property">fireball_coldtime</span> / <span class="number">3</span>) - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> counterclockwise = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// // 第一个技能的圆</span></span><br><span class="line"><span class="comment">// this.ctx.save();</span></span><br><span class="line"><span class="comment">// this.ctx.beginPath();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// this.ctx.arc(x * this.playground.scale, y * this.playground.scale, r * this.playground.scale, startAngle, endAngle, counterclockwise);</span></span><br><span class="line"><span class="comment">// this.ctx.fillStyle = &quot;rgba(0, 255, 0, 0.6)&quot;;</span></span><br><span class="line"><span class="comment">// this.ctx.fill();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">stroke</span>();</span><br><span class="line"><span class="comment">// this.ctx.clip();</span></span><br><span class="line"><span class="comment">// 第一个技能的图片</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">fireball_img</span>, (x - r) * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, (y - r) * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="number">2</span> * r * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="number">2</span> * r * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">restore</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">players</span>[<span class="number">0</span>].<span class="property">fireball_coldtime</span> &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">beginPath</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">moveTo</span>(x * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, y * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">arc</span>(x * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, y * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, r * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, startAngle, endAngle, counterclockwise);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">moveTo</span>(x * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, y * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">fill</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="实现冰球技能图标及技能计时"><a href="#实现冰球技能图标及技能计时" class="headerlink" title="实现冰球技能图标及技能计时"></a>实现冰球技能图标及技能计时</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第二个技能的位置大小</span></span><br><span class="line">x = <span class="variable language_">this</span>.<span class="property">start_x</span> + <span class="variable language_">this</span>.<span class="property">one_width</span> / <span class="number">2</span> + <span class="variable language_">this</span>.<span class="property">one_width</span> + <span class="variable language_">this</span>.<span class="property">gap</span>;</span><br><span class="line">y = <span class="variable language_">this</span>.<span class="property">start_y</span> + <span class="variable language_">this</span>.<span class="property">one_height</span> / <span class="number">2</span>;</span><br><span class="line">r = <span class="variable language_">this</span>.<span class="property">one_height</span> * <span class="number">3</span> / <span class="number">7</span>;</span><br><span class="line">startAngle = <span class="number">0</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 第二种写法：由于偏移量使用 - Math.PI / 2，在计算绘制的 endAngle 时，也加上一个负号</span></span><br><span class="line"><span class="comment">// 这些写法，不需要特判当冷却时间为零的时候</span></span><br><span class="line"><span class="comment">// 就是单纯根据起始角度和终止角度的定义来绘制，不需要特判</span></span><br><span class="line">endAngle = - <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">players</span>[<span class="number">0</span>].<span class="property">iceball_coldtime</span> / <span class="number">3</span> - <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>;</span><br><span class="line">counterclockwise = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二个技能的框</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">beginPath</span>();</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">rect</span>((x - <span class="variable language_">this</span>.<span class="property">one_width</span> / <span class="number">2</span>) * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, (y - <span class="variable language_">this</span>.<span class="property">one_height</span> / <span class="number">2</span>) * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="variable language_">this</span>.<span class="property">one_width</span> * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="variable language_">this</span>.<span class="property">one_height</span> * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">fillStyle</span> = <span class="string">&quot;rgba(0, 0, 255, 0.5)&quot;</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">fill</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二个技能的圆</span></span><br><span class="line"><span class="comment">// this.ctx.beginPath();</span></span><br><span class="line"><span class="comment">// this.ctx.arc(x * this.playground.scale, y * this.playground.scale, r * this.playground.scale, startAngle, endAngle, counterclockwise);</span></span><br><span class="line"><span class="comment">// this.ctx.fillStyle = &quot;rgba(255, 0, 0.5)&quot;;</span></span><br><span class="line"><span class="comment">// this.ctx.fill();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">stroke</span>();</span><br><span class="line"><span class="comment">// this.ctx.clip();</span></span><br><span class="line"><span class="comment">// 第二个技能的图片</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">iceball_img</span>, (x - r) * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, (y - r) * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="number">2</span> * r * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, <span class="number">2</span> * r * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">restore</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">beginPath</span>();</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">moveTo</span>(x * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, y * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">arc</span>(x * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, y * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, r * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, startAngle, endAngle, counterclockwise);</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">moveTo</span>(x * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>, y * <span class="variable language_">this</span>.<span class="property">playground</span>.<span class="property">scale</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">fill</span>();</span><br></pre></td></tr></table></figure>

<h4 id="实现闪现技能——可以为闪现加一个施法前摇，可以-Q-闪了，在施法前摇阶段，可以选定-Q-技能，闪现完成之后释放-Q-技能"><a href="#实现闪现技能——可以为闪现加一个施法前摇，可以-Q-闪了，在施法前摇阶段，可以选定-Q-技能，闪现完成之后释放-Q-技能" class="headerlink" title="实现闪现技能——可以为闪现加一个施法前摇，可以 Q 闪了，在施法前摇阶段，可以选定 Q 技能，闪现完成之后释放 Q 技能"></a>实现闪现技能——可以为闪现加一个施法前摇，可以 <code>Q</code> 闪了，在施法前摇阶段，可以选定 <code>Q</code> 技能，闪现完成之后释放 <code>Q</code> 技能</h4><p>闪现技能——进一步可以设计成石头人的大招，这样的话就像子弹一样，不仅需要同步技能发射，当技能命中的时候也要同步，这里闪现技能只有释放，没有其他与玩家的交互，没有进行闪现技能粒子效果的同步，玩家被击中时粒子效果也没有同步，</p>
<p>好，我们一块儿来实现实现一下这个闪现技能啊！闪现技能其实很容易实现啊，就是额嗯！闪现是，首先这个闪现是什么技能啊！</p>
<p>比如大家在某一个<strong>位置</strong>，对吧！？你<strong>想瞬间移到这里</strong>，就是<strong>摁一下 <code>f</code> 键</strong>，然后<strong>点一下这里</strong>，你<strong>会瞬间移过去</strong> </p>
<p>闪现的话一般有一个最大距离，你不能无限闪现，对吧！？闪现的距离设为高度的 <code>0.8</code>，</p>
<p>闪现同步很容易写，对吧！？就跟移动是一样的啊！—— 同步闪现的目标位置，</p>
<p>使用以前的浏览器中的缓存文件可以使用以前的，比如一开始可以无限发射子弹，代码更新后，客户端浏览器没有更新，可以继续无限发射子弹；不合理，可以加上版本号，每个人都会强制用最新版，这样每个人都会刷新一遍新的文件，客户端就不会使用缓存的旧版本</p>
<h3 id="11、实现聊天系统"><a href="#11、实现聊天系统" class="headerlink" title="11、实现聊天系统"></a>11、实现聊天系统</h3><p>1、问：<code>y</code> 总图片资源一般都放外部服务器里吗？</p>
<p>答：对呀，一般都不放到本地啊！因为本地的话，因为这个一般的这种图片资源会额嗯！比较大，对吧！？啊！放到本地的话不太好管理，啊！一般会放到专门的 <code>web</code> 服务器上，啊！比如放到云端，放到云盘上对吧！？啊！各种云平台都有自己的云盘功能，啊！云盘系统，啊！当然是 <code>tob</code> 的云，那个云盘系统啊！不是 <code>toc</code> 的云盘系统</p>
<p>2、额，聊天功能我们这节课讲完聊天功能之后，下节课还有一个功能叫在线匹配功能，啊！就是我们额！未来会根据我们每名玩家的战斗力去将战斗力相同的，战斗力相近的同学匹配成一局，而不是像这样先到先得，啧！啊！</p>
<p>3、有作弊代码吗？</p>
<p>如果大家感兴趣你可以写一个外挂，对吧！？但那样的话会影响其他同学的游戏体验，对吧！？可能就不太能，额！招揽到顾客了啊！</p>
<p>4、我再给大家说下编辑器的问题啊！啊！就是大家编辑的时候，啊！这个其实写 <code>django</code> 的话用不同的编辑器区别不大，但是如果大家你感兴趣的话你也可以用 <code>vscode</code> 或者 <code>pycharm</code> 都可以，啊！但是用内些工具的话就会有一个门槛儿，啊！就是配环境的门槛儿，其实配环境是一个很麻烦的事情，大家如果懒得配环境的话其实在 <code>vim</code> 加 <code>tmux</code> 里写跟在普通的这个编辑器里写区别不太大，啊！因为额！<code>django</code> 这个框架主要是写 <code>python</code> 对吧！？不管是 <code>python</code> 还是 <code>js</code> 有没有有没有自动补全，有没有编辑器，区别不算太大，啊！然后额！像比如 <code>java</code> 这种语言的话如果没有编辑器的话就很难受，因为他的变量名都很长，对吧！？但是 <code>python</code> 这种的话因为变量名很短，啊！这个所以一般来说区别不大啊！而且，在 <code>vim</code> 加 <code>tmux</code> 里写，还有一个好处，对吧！？就是大家可以随时随地写，你甚至在网吧里都可以写，只要能打开浏览器，登到 <code>acwing</code> 里，就可以写，对吧！？啊！不过这个额额！写代码的工具其实都是无所谓的，对吧！？主要大家还是要提升自己对于每一个技术的一个理解，啊！好，然后，我们先分成三栏儿对吧！？</p>
<p>5、<code>ctrl + r</code> 可以搜历史命令</p>
<ul>
<li><p>实现我们的聊天系统，啊！实现聊天系统，啊！那么实现之后的样子是什么样子的呢？来我们看一下啊！给大家先看一下我们的 <code>demo</code>，哎！实现完之后就是两边可以打字了啊！</p>
</li>
<li><p>回车是可以打开我们的聊天框，啊！然后，</p>
</li>
<li><p><code>esc</code> 是可以退出聊天框啊！</p>
</li>
<li><p>然后，这边比如说哎！可以打一个字，<code>hello</code> 对吧！？啊！那左边就可以收到了，看到没，！？啊！左边可以收到了啊！</p>
</li>
<li><p>然后也可以回答，也可以说一个 <code>666</code>，对吧！？啊！左边也就可以收到了，啊！额！然后左边也可以向右边发，对吧！？哎！对不对！？都可以收到，啊！</p>
</li>
<li><p>然后 <code>esc</code> 是关掉聊天框啊！回车的话是打开聊天框啊！然后另外聊天框的话也是，额！</p>
</li>
<li><p>有一个滚轮的效果的！啊！也是可以支持上下去看历史记录的，好吧！？</p>
</li>
<li><p>好，那么然后我们来看一下怎么去实现这个功能啊！</p>
</li>
</ul>
<h4 id="聊天功能分成两大部分；"><a href="#聊天功能分成两大部分；" class="headerlink" title="聊天功能分成两大部分；"></a>聊天功能分成两大部分；</h4><h4 id="补丁："><a href="#补丁：" class="headerlink" title="补丁："></a>补丁：</h4><blockquote>
<p>tabindex&#x3D;”0” 是一个 HTML 属性，用于控制元素的键盘焦点顺序。具体来说：</p>
<p>tabindex&#x3D;”0”：表示该元素可以通过键盘的 Tab 键获得焦点，并且它的焦点顺序是根据文档中的顺序来决定的。这意味着用户可以使用 Tab 键在页面上循环访问这个元素。</p>
<p>在你的代码中，<canvas tabindex="0"></canvas> 使得这个画布元素可以被聚焦，这样用户可以通过键盘与其交互，例如使用键盘事件来控制游戏。</p>
</blockquote>
<p>如果一个用户在自己的浏览器里打开了三个窗口开始了一局游戏，当用户在某一个窗口里发射技能时，三个窗口都会捕捉到技能按键被按下的事件，其他窗口不需要按该技能按钮就可以发技能，不合理</p>
<p>原因：在获取监听事件的时候监听的对象是一个公共对象—— <code>window</code>，一个页面里所有窗口都可以访问 <code>window</code> 对象，这样不合理，应该选择每个窗口内部的对象进行监听，每个地图是一个叫 <code>canvas</code> 的元素，将键盘监听事件绑定到 <code>canvas</code> 上；实际上当某一个窗口按回车打开输入框的时候，其他窗口也会打开输入框（原来是这样发现的 <code>bug</code>）</p>
<p>不是所有对象都可以绑定键盘输入事件的，只有一些特定的，比如说输入框可以绑定键盘输入事件</p>
<p><code>canvas</code> 本身没有输入框，不能绑定键盘输入事件，需要对 <code>canvas</code> 做一些修改，给 <code>canvas</code> 加一个属性，如果想让某个元素能够监听键盘读入事件的话需要在元素上加上一个属性叫 <code>tabindex=0</code>，这个背过就可以啦！</p>
<p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241013155726042.png" alt="image-20241013155726042"></p>
<p>一个元素只有被聚焦之后才可以监听键盘读入事件，需要在开始的时候聚焦到 <code>canvas</code> <code>对象.focus()</code></p>
<p>聚焦：我当前正在操作，输入的是哪一个元素</p>
<h5 id="1、前端部分"><a href="#1、前端部分" class="headerlink" title="1、前端部分"></a>1、前端部分</h5><p>前端的话啊！主要是我们按回车之后，啊！前端的话就是按回车之后我们可以自动展，自动打开我们的输入框，然后按 <code>esc</code> 键之后自动关闭输入框，啊！然后，以及我们这个输完一句话之后，对吧！？你比如说额！你需要对对你的对手，或者对你的队友做一些指导的话，那么输完信息之后，一回车<strong>需要将自己的信息展示出来</strong>啊！主要实现这个功能的，啊！那么<strong>这个功能的话跟后端是比较独立的</strong>，啊！他是跟后端没有交互的，对吧！？啊！所以我们先实现前端啊！前端的话就实现两个东西啊！</p>
<ol>
<li>输入框<ul>
<li>我给大家简单画一下啊！输入框，好，然后，第二个的话是历史记录，对吧！？啊！好，嗯~！那么我们一摁回车啊！他会自动将输入框显示出来，对吧！？啊！</li>
<li>然后，我们在输入框里输完之后，他就会自动在我们的历史记录里加一条新的内容，对吧！？啊！输完一回车加一条新的内容，输完一回车加一条新内容，对吧！？啊！</li>
<li>然后，我们按 <code>esc</code> 键，啊！我们的输入框应该会消失掉，啊！</li>
<li>我们实现这几个功能啊！然后另外我们可以发现啊！这个我们的历史记录跟我们的输入框应该是独立的两截部分，独立的两个部分，为什么呢？因为有可能我们没有在输入，但是对手可能给我们传了一些指导，那么我们就应该只渲染出来历史记录，历史记录，啊！而，额！也继续隐藏我们的输入框，啊！所以我们可以发现这个输入框跟历史记录的话其实是相互独立的，对吧！？啊！这个输入框有时候可以单独显示出来，历史记录的话有时候也会单独显示出来，啊！所以我们这两部分的话是两个完全独立的元素，啊！好，那么我们来看一下这两部分怎么来写，啊！</li>
<li>首先<del>需要在屏幕里画出来</del>这两个东西，对不对！？啊！那，所以说我们接下来需要创建一个新的类啊！叫 <code>chat_field</code> 啊！就聊天区域，好，然后进到我们的聊天区文件夹，然后然后写一个，然后这个这个打开一个 <code>js</code> 文件，啊！然后定义一个类名叫 <code>chatField</code> ，这个的话这个聊天框的话我们<strong>就不不画在 <code>canvas</code> 这个地图里</strong>了啊！我们不是把他画成一幅画啊！</li>
<li>他就是<strong>一个 <code>html</code> 的元素</strong>啊！所以我们接下来，所以说这里不需要 <code>extend</code> 不不不需要继承自我们的 <code>ac_game_object</code> </li>
<li>我们接下来需要去创建这两个区域，第一个叫历史记录啊！我们可以把他亲切的称为亲切的称为 <code>history</code> 啊！好，<code>div</code> 啊！好，那么，类名的话我们起一个尽可能长的啊！不重复的啊！比如叫 <code>ac-game-</code> 然后 <code>chat-field-history</code>，啊！这是我们的历史记录区，啊！</li>
<li>然后，还有一个叫输入区域，输入区域的话是一个 <code>input</code> 框，啊！然后类型的话是输入文本 <code>text</code>，<code>class</code> 的话也定一个类似的啊！ <code>ac-game-chat-field</code> 然后 <code>input</code></li>
<li>好，那么最开始的时候，我们这两个区域应该都是隐藏的，对吧！？所以是 <code>hide</code> 起来，<code>hide</code> 完之后我们将他加到地图里 <code>playground.append</code> ，然后我们实现一下我们的 <code>start</code> 函数啊！以及其他逻辑，完成</li>
<li>在对局匹配完成，开始之前也可以聊天 </li>
<li>展示历史记录这个功能比较特殊一些，大家可以去想一下怎么去设计这个功能，<ul>
<li>就是大家可以发现，额嗯！如果说啊！我们摁回车，让我们的历史记录跟我们的输入一块儿出来的话就会有一个问题，啊！这样的话就会导致，<strong>只有我们</strong>在输入信息的时候我们才可以看到历史记录，</li>
<li>那么如果是别人给我们发一条消息，我们自己没有打开输入框的话我们的历史记录就不能展示出来，对吧！？啊！</li>
<li>所以说我们应我们的历史记录应该是一个<strong>独立的展示跟关闭</strong>啊！</li>
<li>那我们的历史记录一般来说怎么做比较好呢？我这里给大家提供了一个思路，啊！就是<strong>我们一旦有新的消息出来，就展示三秒</strong>，三秒三秒钟之后自动消失，好吧！？啊！三秒钟之后自动消失，啊！啧！额嗯！好，那么所以说我们这里的话就是每次打开之后，就让他显示出来，显示的话我们可以用 <code>show</code> ，<code>show</code> 的话他就会瞬间出来，就不好看，对吧！？给他加上一个额！咱们让他慢慢显示出来啊！慢慢显示出来的话叫 <code>fade in</code> ，这个是，额！这个是 <code>jquery</code> 提供的一个 <code>api</code> 啊！</li>
<li><strong><code>fade in</code> 的</strong>话他是慢慢的出来啊！然后 <code>show</code> 的话是直接出来啊！这两个是不一样的啊！那么 <code>show</code> 完之后的话，我们要将他显示三秒，那么这里的话就是让他三秒钟之后关闭，对吧！？将他三秒钟之后关闭，啊！三秒之后关闭就是 <code>setTimeout</code> 就搞个定时函数就可以了啊！<code>function</code>三秒，单位毫秒，所以三千毫秒之后关闭，啊！那么就应该是 <code>outer.fadeOut</code>，对吧！？啊！额嗯！好，嗯吭吭！</li>
<li>那么我们打开输入框的时候啊！我们应该是打开输入框的时候就可以看到历史记录，对吧！？啊！所以我们 <code>show_input</code> 的时候也要调用一下 <code>show_history</code> 啊！</li>
<li>额！但是这样就有一个问题，啊！就是说我们有可能啊！就是说，比如我现在打开了，对不对！？那么打开，那么我们的这个历史记录，历史记录也打开了，对不对！？然后，我关了，然后我再打开，啊！然后我刚刚的历史记录，有一个定时函数。三秒三秒钟之后关闭，那么我在刚打开的时候可能恰好时间到了，那他就<strong>有可能瞬间将我们的输入框关掉</strong>，这样不合理，对吧！？啊！</li>
<li>给大家举个例子吧！额！我们的输入框里先加点信息，啊！要不然大家看不到历史记录啊！</li>
</ul>
</li>
<li>参考系可以调成相对 <code>canvas</code> 的相对位置吗？<ul>
<li>可以啊！这个大家，只不过我们的 <code>canvas</code> 使用代码来调的啊！这个如果大家想改成相对于额！我们的这个聊天框，这个聊天框的位置相对于这 <code>canvas</code> 的话，你需要自己用 <code>js</code> 去调，啊！就不能用 <code>css</code> 去调了，啊！<code>css</code> 就不好改了啊！啧！<code>js</code> 也可以控制内几个参数的，就控制内什么 <code>top</code> <code>left</code> 都可以控制的，啊！大家如果感兴趣的话你可以自己调一调，啊！好，</li>
</ul>
</li>
</ul>
</li>
<li></li>
</ol>
<h5 id="2、后端部分"><a href="#2、后端部分" class="headerlink" title="2、后端部分"></a>2、后端部分</h5><p>主要负责通信，我发完消息之后，要传到对手的窗口里，给他显示出来，对吧！？啊！</p>
<h3 id="12、-实现匹配系统——thrift服务"><a href="#12、-实现匹配系统——thrift服务" class="headerlink" title="12、 实现匹配系统——thrift服务"></a>12、 实现匹配系统——thrift服务</h3><h4 id="thrift-介绍"><a href="#thrift-介绍" class="headerlink" title="thrift 介绍"></a><code>thrift</code> 介绍</h4><h5 id="thrift-接口描述语言"><a href="#thrift-接口描述语言" class="headerlink" title="thrift 接口描述语言"></a><code>thrift</code> 接口描述语言</h5><h6 id="Basic-Definitions"><a href="#Basic-Definitions" class="headerlink" title="Basic Definitions"></a>Basic Definitions</h6><ul>
<li><p>Literal<a target="_blank" rel="noopener" href="https://thrift.apache.org/docs/idl#literal">¶</a></p>
<p><code>thrift</code> 是构建微服务之间的接口函数的一套 <code>apache</code> 开发的软件框架</p>
<ul>
<li><pre><code class="shell">Please explain clearly and concisely in Chinese (Simplified) : 
Literal         ::=  (&#39;&quot;&#39; [^&quot;]* &#39;&quot;&#39;) | (&quot;&#39;&quot; [^&#39;]* &quot;&#39;&quot;)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    * 这是一个文法规则，描述了 &quot;Literal&quot;（字面量）的形式。具体来说，字面量可以是：</span><br><span class="line"></span><br><span class="line">      - 以双引号包围的字符串，例如： `&quot;内容&quot;`</span><br><span class="line">      - 或者以单引号包围的字符串，例如： `&#x27;内容&#x27;`</span><br><span class="line"></span><br><span class="line">      在这条规则中，`[^&quot;]*` 表示双引号内可以包含任意字符，但不包括双引号；`[^&#x27;]*` 表示单引号内可以包含任意字符，但不包括单引号。</span><br><span class="line"></span><br><span class="line">##### `one_way` 、`void`</span><br><span class="line"></span><br><span class="line">这段话的意思是：</span><br><span class="line"></span><br><span class="line">1. **void 类型**：在 Thrift 中，void 是一种有效的返回类型，表示函数没有返回值。</span><br><span class="line">2. **oneway 修饰符**：在 void 函数中可以使用 oneway 修饰符，这样函数调用不会等待结果返回。</span><br><span class="line">3. **响应保证**：调用普通的 void 函数时，**服务器会**向客户端返回一条响应，以确保操作已经在服务器上完成。</span><br><span class="line">4. **oneway 方法的请求保证**：如果使用 oneway 方法，客户端**只能确保请求成功发送**到服务器，但**不能保证服务器是否正确处理**该请求。</span><br><span class="line">5. **并行处理**：服务器可以同时处理多个来自同一客户端的 oneway 方法调用，且执行顺序可能不同。 </span><br><span class="line"></span><br><span class="line">总的来说，这段文字说明了 Thrift 中关于 void 类型和 oneway 方法的一些重要概念。</span><br><span class="line"></span><br><span class="line">##### `thrift` 实战</span><br><span class="line"></span><br><span class="line">###### 1、编写 `*.thrift` 文件，定义需要的服务接口，指定参数类型，返回值类型</span><br><span class="line"></span><br><span class="line">###### 2、使用以下代码生成制定语言的相应的服务端和客户端代码</span><br><span class="line"></span><br><span class="line">生成的代码根据 `*.thrift` 文件中的**变量定义**及**对象定义**、接口**函数定义**、服**务定义**，生成相应语言的服务端和客户端的协议通信代码，隐藏底层逻辑，对应用层程序员透明，应用层程序员可以在此基础上编写自己的业务逻辑代码；即使客户端和服务端的代码不再一个服务器上，他们**的 `*.thrift` 文件**也一样，可以生成需要的服务端或者客户端协议通信代码</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">thrift --gen &lt;language&gt; &lt;Thrift filename&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><pre><code class="shell">/**
 * Ahh, now onto the cool part, defining a service. Services just need a name
 * and can optionally inherit from another service using the extends keyword.
 */
service Calculator extends shared.SharedService &#123;

  /**
   * A method definition looks like C code. It has a return type, arguments,
   * and optionally a list of exceptions that it may throw. Note that argument
   * lists and exception lists are specified using the exact same syntax as
   * field lists in struct or exception definitions.
   */

   void ping(),

   i32 add(1:i32 num1, 2:i32 num2),

   i32 calculate(1:i32 logid, 2:Work w) throws (1:InvalidOperation ouch),

   /**
    * This method has a oneway modifier. That means the client only makes
    * a request and does not listen for any response at all. Oneway methods
    * must be void.
    */
   oneway void zip()

&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 以下是对所给代码的清晰简洁的中文解释：</span><br><span class="line"></span><br><span class="line">  这是一个定义服务的示例，服务需要一个名称，并可以选择使用“extends”关键字继承另一个服务。</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  service Calculator extends shared.SharedService &#123;</span><br></pre></td></tr></table></figure>

在服务中，方法定义类似于C语言代码，包含返回类型、参数，和可选的异常列表。参数列表和异常列表的语法与结构体或异常定义中的字段列表相同。

- `void ping()`: 一个没有参数和返回值的方法。
- `i32 add(1:i32 num1, 2:i32 num2)`: 一个接受两个整型参数并返回一个整型值的方法。
- `i32 calculate(1:i32 logid, 2:Work w) throws (1:InvalidOperation ouch)`: 一个方法，接受一个整型和一个工作对象作为参数，可能抛出一个名为 InvalidOperation 的异常，并返回一个整型值。
- `oneway void zip()`: 该方法带有单向修饰符，意味着客户端只发送请求而不等待任何响应，单向方法的返回值必须是void。
</code></pre>
</li>
</ul>
<h6 id="3、在对应代码的相应位置编写自己的业务代码逻辑"><a href="#3、在对应代码的相应位置编写自己的业务代码逻辑" class="headerlink" title="3、在对应代码的相应位置编写自己的业务代码逻辑"></a>3、在对应代码的相应位置编写自己的业务代码逻辑</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> match_client.<span class="keyword">match</span> <span class="keyword">import</span> Match</span><br><span class="line"><span class="comment"># variable type</span></span><br><span class="line"><span class="keyword">from</span> match_client.<span class="keyword">match</span>.ttypes <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> thrift <span class="keyword">import</span> Thrift</span><br><span class="line"><span class="keyword">from</span> thrift.transport <span class="keyword">import</span> TSocket</span><br><span class="line"><span class="keyword">from</span> thrift.transport <span class="keyword">import</span> TTransport</span><br><span class="line"><span class="keyword">from</span> thrift.protocol <span class="keyword">import</span> TBinaryProtocol</span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> stdin</span><br><span class="line"><span class="comment"># 客户端使用 socket 建立与服务端的双向通信，在本地 9090 端口</span></span><br><span class="line"><span class="comment"># 客户端一般是有一个图形化界面给用户操作的，用户可以在图形化界面中进行操作，比如 acapp 中的游戏界面，用户可以在游戏界面中使用鼠标或者键盘</span></span><br><span class="line"><span class="comment"># 输入信息，经过浏览器执行前端代码对玩家输入的信息进行处理，请求服务端的处理及信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">operator</span>(<span class="params">op, user_id, username, score</span>):</span><br><span class="line">    <span class="comment"># Make socket</span></span><br><span class="line">    transport = TSocket.TSocket(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">9090</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Buffering is critical. Raw sockets are very slow</span></span><br><span class="line">    transport = TTransport.TBufferedTransport(transport)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Wrap in a protocol</span></span><br><span class="line">    protocol = TBinaryProtocol.TBinaryProtocol(transport)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create a client to use the protocol encoder</span></span><br><span class="line">    client = Match.Client(protocol)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Connect!</span></span><br><span class="line">    transport.<span class="built_in">open</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># write oneself</span></span><br><span class="line">    user = User(user_id, username, score)</span><br><span class="line">    <span class="keyword">if</span> op == <span class="string">&quot;add&quot;</span>:</span><br><span class="line">        client.add_user(user, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> op == <span class="string">&quot;remove&quot;</span>:</span><br><span class="line">        client.remove_user(user, <span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Close!</span></span><br><span class="line">    transport.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 业务逻辑代码</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> stdin:</span><br><span class="line">        <span class="built_in">list</span> = line.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(<span class="built_in">list</span>) != <span class="number">4</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;输入不合法，请重新输入&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        op, user_id, username, score = <span class="built_in">list</span></span><br><span class="line"></span><br><span class="line">        operator(op, <span class="built_in">int</span>(user_id), username, <span class="built_in">int</span>(score))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h4 id="匹配系统"><a href="#匹配系统" class="headerlink" title="匹配系统"></a>匹配系统</h4><p>这里以游戏为载体讲解匹配系统，其实还可以用来实现其他的功能，比如说外卖系统（匹配骑手和店家、顾客）；或者是打车系统，可以匹配司机和顾客；</p>
<h4 id="技术：Thrift"><a href="#技术：Thrift" class="headerlink" title="技术：Thrift"></a>技术：<code>Thrift</code></h4><p>可以实现匹配系统，也可以实现 <code>OJ</code> 的评测系统——不能阻塞或者需要第三方服务的功能都可以用 <code>thrift</code> 实现，延展 <code>django</code> 的能力</p>
<p><code>acapp</code> 里的设置功能目前不打算扩充了，主要扩充的话都是一些前端的工作，所以说我们感觉对大家来说可能会有很多重复的知识要讲，感觉讲的话对提升大家的技能不是很大（后端技能），所以我们这设置里面的一些细节的话就先不讲，好吧！？</p>
<p>项目主要是给大家提供一个骨架，在这个骨架的基础之上去做很多延展，或者做很多变形，对不对！？</p>
<p>虽然做的是个游戏，但是你随稍微变一下，随便稍微变一下，那么就可以变成一个比如<strong>外卖系统</strong>，对不对！？啊！或者是<strong>打车应用</strong>，或者是一些其他的一些应用，对吧！？虽然是游戏，但逻辑上都是一样的</p>
<p><code>js</code> 加密放到最后一节课来讲，<code>js</code> 的压缩工具可以帮我们把 <code>js</code> 代码压缩并且加密一下，直接换成工具就可以了，比较容易</p>
<h5 id="回顾游戏的逻辑"><a href="#回顾游戏的逻辑" class="headerlink" title="回顾游戏的逻辑"></a>回顾游戏的逻辑</h5><h6 id="游戏的通信逻辑"><a href="#游戏的通信逻辑" class="headerlink" title="游戏的通信逻辑"></a>游戏的通信逻辑</h6><ul>
<li><p>有一个中心的 <code>server</code>，实现各个客户端之间的通信</p>
<p><code>client</code> —— <code>acapp</code> 里的一个窗口都可以是一个 <code>client</code> ，</p>
<p>同步玩家的状态，玩家的位置，每名玩家是否放了技能，每名玩家是否被击中</p>
<p>双向通信：<code>websocket</code> 协议</p>
</li>
</ul>
<h6 id="匹配逻辑"><a href="#匹配逻辑" class="headerlink" title="匹配逻辑"></a>匹配逻辑</h6><p><img src="C:\Users\20344\AppData\Roaming\Typora\typora-user-images\image-20241015075239959.png" alt="image-20241015075239959"></p>
<p>新手和骨灰级玩家可能匹配到一局，这样对于菜鸟的用户体验就会很差，换一种新的匹配方式，按照分数进行匹配，将分值相近的玩家匹配到一局中</p>
<p>原本匹配一局游戏时直接将玩家分配到一个 <code>room-x</code> 中，因为他的位置是唯一确定的，所以一名玩家来了之后可以实时，立即返回应该属于哪一局，有一个立即的效果</p>
<p>匹配系统不能满足及时返回玩家匹配结果（<strong>没有及时性</strong>）， 比如外卖 <code>app</code> ，发送订单需要一定时间骑手才会接单；打车订单付费之后，也需要一段时间车主才会接单——匹配会有一定的延时，甚至几个小时的延时—— <code>dota</code> 高端局要匹配半个小时到一个小时，<strong>延时</strong>，从 <code>0</code> 变成了<strong>几分钟</strong>、到<strong>几小时</strong>，</p>
<p>有了延时之后对系统有一定的影响</p>
<ul>
<li>如果按照之前的处理逻辑，向服务器端发送一个请求之后，如果有延时，服务器不能及时向玩家返回匹配完成的信息，</li>
</ul>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://come-up.github.io/2024/10/16/kob%E9%A1%B9%E7%9B%AE/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
    </footer>
  </div>

   
  <nav class="article-nav">
    
    
      <a href="/2024/10/15/kafka/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">kafka</div>
      </a>
    
  </nav>

  
   
  
   
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2024
        <i class="ri-heart-fill heart_icon"></i> DangQuanwei
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="小全"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>